{"title":"Evasion","url":"http://crawl.chaosforge.org/Evasion","type":"raw","data":"{{version031}} \n''This page is about the character trait. For the brand, see the article [[Evasion (brand)]]''\n\n'''Evasion''' (often abbreviated to '''EV''') is a number that measures the ability of a character or of a [[monster]] to avoid melee, ranged, and magical beam attacks. When an attack is resolved, a target's current EV is rolled and compared to the attack's [[to-hit]] roll, factoring in any relevant situational modifiers. Only if the to-hit roll matches or beats the EV roll does the attack succeed.\n\n==Player EV==\nThe calculation to determine a character's total EV is complex and factors in many different skills and attributes.\n\n===Base EV===\nThe player's base EV is calculated as follows:\n  10 + size_factor\n\n\"Size factor\" is determined by the [[size]] of your [[species]], which is 0 at medium size + 2 per smaller size category.<ref>{{source ref|0.31.0|player.cc|1999}}<br>Sizes are listed in ascending order of size in {{source ref|0.31.0|size-type.h|4}}</ref>\n\n{|class=\"prettytable\"\n! Size !! Species !! Size factor\n|-\n| Little || [[Spriggan]], [[Felid]] || +4\n|-\n| Small || [[Kobold]] || +2\n|-\n| Medium || All other species || 0\n|-\n| Large<br>Large (normal torso) || [[Troll]], [[Oni]]<br>[[Armataur]], [[Naga]] || -2\n|}\n\nSome transformations override the racial size factor:\n{|class=\"prettytable\"\n! Size !! Form !! Size factor\n|-\n| Tiny || [[Bat Form]], [[Wisp Form]], [[Fungus Form]] || +6\n|-\n| Small || [[Pig Form]] || +2\n|-\n| Large || [[Serpent Form]] || -2\n|-\n| Giant || [[Dragon Form]] || -4\n|-\n|}\n\nHowever, if you are paralysed, petrified, in [[tree form]], or your [[dexterity]] is 0 or lower, your EV is reduced to:\n\n  2 + size_factor/2\n\nIn this case, minimum EV is 1. No other factors apply.\n\n=== Dodging ===\nThe [[Dodging]] skill provides a bonus to your EV as follows:\n\n dodge_bonus = (8 + Dodging × Dex × 0.8) / (20 - size)\n armor_penalty = unadjusted_armor_encumberance - 3\n if armor_penalty < 0:\n     modifier = 1\n if armor_penalty > 0:\n     if armor_penalty >= Str:\n         modifier = Str / (armor_penalty * 2)\n     if armor_penalty < Str:\n         modifier = 1 - armor_penalty / (Str * 2)\n final_dodge_bonus = dodge_bonus * modifier\n\n=== Armour and shield EV penalties ===\nAfter adding base EV and Dodging's bonus together, the direct EV penalties from armour and shields are then subtracted. Each armour type listed below has an \"encumbrance rating\", which is converted to an EV penalty (where each type has a different formula).\n\n*[[Barding]]: -2 EV\n*[[Body armour]]: <code>-1/225 * encumbrance^2 * (90 - 2 × armour_skill) / (str + 3)</code>\n*[[Shield]]: <code>-2/5 * encumbrance^2 / (str + 5) * ((27 - shield_skill) / 27)</code>\n\n===Modifiers===\nVarious effects can modify EV. These are added directly to your EV total after the above calculations.\n*If you have the [[vertigo]] effect, a -5 modifier to your EV is applied.\n*[[ring of evasion|Rings of evasion]] provide their exact bonus or penalty (usually +5) to your EV.\n*An [[amulet of the acrobat]] provides +15 EV if your turn was used moving or waiting.\n*Some [[list of unrands|unrand]]s provide a bonus or penalty to your EV, as well as randart rings with a ring of evasion as their base type.\n*[[Jiyva_mutations#Gelatinous_Body|Gelatinous body]] mutation: +1 at level 2, +2 at level 3.\n*The [[Repulsion Field]] [[mutation]] grants an EV bonus.\n*[[Ru]] worshippers who sacrifice health to reduce EV are penalised by -5 per sacrifice.\n*Flying [[Tengu]] get a +4 bonus to EV.\n*Being [[web|entangled]] or [[petrify]]ing halves your evasion.\n*Being affected by [[Jorgrun]]'s or a [[shambling mangrove]]'s grasping roots multiplies evasion by 2/3.\n*Swimming [[Merfolk]] get a 25% bonus to EV (minimum +2). This is applied after all other modifiers.<ref>{{source ref|0.31.0|player.cc|2076}}</ref>\n\n===Final situational modifiers===\nAgainst melee attacks:\n*If are being [[constricted]], you suffer a -3 EV penalty.\n*If you cannot see your attacker (i.e. they are [[invisible]] and you cannot [[see invisible]]), you suffer a -10 EV penalty against that attacker.\n*If you are going down [[stairs]] while being attacked, you suffer a -5 EV penalty.\n\n==Monster EV==\nA monster's base EV is a fixed number dependent on monster type. This base can be modified by armour, jewellery, and various status effects.\n\n==To-hit versus EV==\nIf an attack's [[to-hit]] number is 1500 (the magic number AUTOMATIC_HIT) or greater (e.g. [[Magic Dart]]), it automatically hits. \n\nOtherwise, the following procedure is used.\n*2.5% of the time, the attack misses regardless of the attack's to-hit or the defender's EV.\n*2.5% of the time, the attack hits regardless of the attack's to-hit or the defender's EV.\n*A uniformly distributed random number between zero and the to-hit number (inclusive) is generated.\n*Two uniformly distributed random numbers between zero and ((2 * (target EV)) - 1) inclusive are averaged together.\n*If the to-hit roll is greater than or equal to the EV roll, the attack hits. Otherwise, it misses.\n\n==History==\n{{CBA|0.32|multipliers to player EV will be applied after all permanent modifiers, but before all temporary modifiers. In addition, effects like paralysis and clumsy will no longer raise EV from very low values.}}\n*Prior to [[0.27]], a stepdown was applied for EV values >30; <code>adj_EV = 10 + 20 * log(1 + (EV-10)/20log2)</code>. [[Dexterity]] also had a stepdown when calculating the dodging bonus.\n*Prior to [[0.25]], a [[potion of agility]] was an easy way to increase EV.\n*Prior to [[0.19]], certain ranged weapons could be branded with [[evasion_(brand)|Evasion]], granting a +5 EV bonus.\n*Prior to [[0.17]], the evasion bonus for flying Tengu and swimming Merfolk was capped at +9 EV.\n\n==References==\n<references />\n\n[[Category:Stats]]\n[[Category:Game mechanics]]"}