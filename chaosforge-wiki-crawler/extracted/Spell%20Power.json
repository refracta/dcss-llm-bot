{"title":"Spell Power","url":"http://crawl.chaosforge.org/Spell_Power","type":"raw","data":"{{version030}}\n\nEvery spell uses a '''spell power''' value to determine their effects: damage, range, duration, etc. You can display your spell power for known spells by bringing up your spell list with '''I''', then '''!''', which will display a screen looking like this:\n\n  Your Spells                      Power\n a - Sting                         100%\n c - Call Imp                      44%\n d - Iron Shot                     11%\n\nEach individual spell has a spell power cap placed on it. A cap of 100 means that if your spell power is higher than 100, it will be set to 100. This allows for low-level spells to scale quickly with skill, but prevents them from getting too strong.\n\n==Formula==\n===Raw power===\nFirst, the game calculates raw spell power using the following formula.\n\n  ((Spellcasting / 2) + (2 * [average_spell_schools]))\n  * enhancers\n  * ([[Intelligence]] / 10)\n  * mutations\n\n*'''Average spell schools''' is the average of all the skills necessary for the spell - up to three schools for some spells (e.g. [[Mephitic Cloud]], which requires Conjurations, Poison Magic, and Air Magic). [[Djinn]] instead use the generic [[Spellcasting]] skill for all of their spells.\n*'''Spell Enhancers''' include [[magical staves]], [[brilliance]], [[Archmagi]], etc. You get +1 for every enhancer and -1 for every dampener. If the factor is positive, your spell power is multiplied by 1.5<sup>(factor)</sup>. If it is negative, it is multiplied by 0.5<sup>(factor)</sup>, effectively halving your power every dampener. The factor is capped at ±3.\n*'''Mutations''' add a multiplier, depending on the mutation in question.\n**'''Wild Magic''' increases your spell power, but decreases your success rate. The bonus is ×1.3, ×1.6 or ×1.9 depending on how many levels of this mutation you have.\n**'''Subdued Magic''' decreases your spell power, but increases your success rate. The penalty is /1.3, /1.6, or /1.9 depending on how many levels of this mutation you have. This is equivalent to x0.77,  x0.63, or x0.53.\n**'''Augmentation''' is a [[demonspawn mutation]] which increases your spell power and gives a slaying bonus at high HP. The spellpower bonus is ×1.4, ×1.8 or ×2.2 depending on how much augmentation bonus you have. This stacks multiplicatively with the other mutations.\n*[[Ru]]'s '''Sacrifice Courage''' decreases your spell power by 10% for each level of horror.\n\n{| class=\"prettytable\"\n! Mutation Level !! HP <50% !! HP > 50% !! HP >66% !! HP >75% !! HP >83%\n|-\n| 1 || 0 || 1 || 1 || 1 || 1\n|-\n| 2 || 0 || 1 || 1 || 2 || 2\n|-\n| 3 || 0 || 1 || 2 || 2 || 3\n|}\n\n===Step down===\nOnce the raw spell power value is determined, a stepdown function is applied to obtain the '''real''' spell power:\n\n Spellpower = 50 * log_2(1 + raw_power/50)\n\nThis is capped at 200, and for values under 50 the exact spellpower is used instead.\n\n[[File:Spell power stepdown function.png]]\n\nApproximately, every 50 real spell power is twice as difficult to obtain; and there is an absolute maximum of 200 real spell power. For example, 50 raw spell power is equivalent to 50 real spell power; 100 raw spell power is equivalent to 50 + 50/2 = 75 real spell power; and 500 raw spell power is equivalent to 50 + 100/2 + 200/4 + 150/8 = 168 real spell power. The maximum of 200 real spell power is reached at 750 raw spell power.\n\n=== Example: Spell Power Milestone ===\n\n  Base Value = (Spellcasting / 2) + (2 * [average_spell_schools])\n\nSince the base value of spell power is capped at '''67.5''', without any enhancers spell power of 150 (raw spell power of 350) is achievable with INT 52. In most cases, however,  spellcasters wear enhancers that making their spell more powerful. One can calculate required base value for hitting specific spell powers. As an example, requirements of 100, 150, and 200 are calculated with INT=40 (quite high!)\n\n{| class=\"prettytable\"\n! # of Enhancers !! 100 Power !! 150 Power !! 200 Power\n|-\n| 0 || 37.5 || 87.5 || 187.5\n|-\n| 1 || 25 || 58.3 || 125\n|-\n| 2 || 16.7 || 38.9 || 83.3\n|-\n| 3 || 11.1 || 25.9 || 55.6\n|-\n| 1 + <br> Wild magic 2 || 12.5 || 29.2 || 62.5\n|}\n\nMaximum spell power can only be accomplished with three enhancers, assuming 40 Int and no mutations . If one has Wild Magic Lv 2, then only one enhancer can max out your spell power. However, in this situation, spellcasting success rate falls off dramatically, forcing the player to use a [[ring of wizardry]]. Demonspawn with Augmentation 1 can enjoy max spell power with two enhancers, while one with augmentation 3 can enjoy maximum spell power with only one enhancer.\n\n==Spell Range==\n\nFor most spells the range starts out at maximum. But for spells like [[Passwall]], the range increases based on spell power, after a step down. Range (approximately) increases at a linear rate, so at half power, you are halfway between the minimum and maximum range.\n\nSpecifically, if the spell power (pow in the following) is above the power cap, the spell has maximum range. Otherwise:\n\n range = minrange + [(power / powercap) * (maxrange - minrange)] ; round half up\n\n==Monsters==\nFor monster spells, the spellpower is usually <code>12 * [[HD]]</code>.<ref>{{source ref|0.30.1|mon-cast.cc|1104}}</ref> Although, some spells have a different HD factor:\n*[[Cause Fear]]: 18\n*[[Call Down Lightning]]: 16\n*[[Doom Howl]] and [[Mesmerize]]: 10\n*[[Siren Song]] and [[Avatar Song]]: 9\n*[[Mass Confusion]] and [[Confusion Gaze]]: 8\n*[[Olgreb's Toxic Radiance]], [[Orb of Destruction]], and [[Freeze]]: 8\n*[[Monstrous Menagerie]], [[Iskenderun's Battlesphere]], [[Ignite Poison]], and [[Irradiate]]: 6\n*[[Summon Dragon]] and [[Summon Hydra]]: 5\n*[[Chain of Chaos]]: 4\n\nPlease note that most monster spells have different damage formulas than the player version. For example, players cast [[Magic Dart]] dealing <code>1d(3 + power/5)</code> damage, while monsters cast it at <code>3d(4 + power/100)</code>.\n\n==History==\n*Prior to [[0.31]], monsters' OTR used 8 * HD spellpower instead of 12 * HD.\n*In [[0.28]], the last two spells which didn't involve spell power ([[Blink]] and [[Passage of Golubria]]) now use it.\n*Prior to [[0.26]], spell power display was fuzzed, displayed in terms of bars (##.) instead of percentages. Bars did not have equal value; lower bars represented less numerical power per bar.\n*Prior to [[0.18]], the Wild and Subdued Magic mutations had larger effects on spellpower.\n*Prior to [[0.10]], a different stepdown function for spellpower was used.\n\n==References==\n<references />\n\n[[Category:Magic]]"}