{"title":"Leaked development version","url":"https://nethackwiki.com/wiki/Leaked_development_version","type":"markdown","data":"In September 2014, some source-code was leaked, claimed to be Nethack Version 3.5.0.\n\nWhile the DevTeam has since claimed that the code is not version 3.5.0, they have claimed that the code was written by them, and that variants are welcome to use their code. To avoid confusion, the next version was numbered [3.6.0](/wiki/NetHack_3.6.0 \"NetHack 3.6.0\")[\\[1\\]](#cite_note-1).\n\n## Changelog\n\nThe changelog included with the leak reads as follows and can be found on [Pastebin](http://pastebin.com/raw.php?i=djZ5X2Hz).\n\n```\n$rcsfile: fixes35.0,v $ $Revision$ $Date$\n\nGeneral Fixes and Modified Features\n-----------------------------------\nchange the dreaded \"Stop eating?\" to \"Continue eating?\" with default \"no\"\nsetmangry should not be called when a monster enters a bones region\nbad capitalization of msg when charging for something that catches light\nmissing opthelp for use_inverse\nNever say \"It moves only reluctantly\"\nexpert fireball/cone of cold could not target a monster seen only with\n\tinfravision or ESP\ndisplay \"lotus juice\", not \"lotu juice\" for the fruit juice name\nonly humanoid angelic minions should get/use sword and armor\npaper, straw and wood golems resist cold\nthe options lootabc, showrace, travelcmd, and runmode are now saved\nuse mons[] array offsets in mnum field in save file rather than storing\n\tthe ptr and calculating the distance from beginning of array\ntwo-weapon combat makes two attacks instead of having one attack hit with\n\teach weapon\napply weapon skill to-hit bonus or penalty to bare-handed attacks\nonly give monk's \"cumbersome armor\" message when the armor penalty causes\n\tan attack to miss\ndust vortex-induced blindness should kick in immediately when blindfold\n\tis removed or glop is wiped off\nprayer/unicorn-horn won't fix blindness while still engulfed in a dust\n\tvortex since it will just return immediately\nbeing confused and reading cursed scroll of charging drains your energy\nclass genocide recognizes species name as an example of the class to\n\tgenocide (Martin Snyder)\ninternals: use Is_box rather than explicitly checking what it checks\nfix some unreachable messages (either make then reachable or remove them)\ncan quiver coins when GOLDOBJ is defined\nmake #loot behave same for GOLDOBJ as for !GOLDOBJ\nfor GOLDOBJ, can pick gold up into $ when all 52 letters are in use, and\n\tcan pick non-gold up into unused letter when gold uses one of 52 slots\ngrammar, spelling and other typos\nkeep various delayed killers separate to avoid mixed up messages\ndon't place randomly-placed aquatic monsters in lava on special levels\nhiding monsters don't hide under cockatrice/chickatrice corpses\n\"sound\" option renamed to \"acoustics\"\ndeafness now a full-fledged attribute\nwater should flow into pits from broken wand of digging and drum of earthquake\nobjects that fall thru trapdoors, et al, can break on impact\nsupport engraving in blood in special level files\nmany instances of physical damage were not taking Half_physical_damage\n\tinto account when reducing your hitpoints\nmake it possible for the code to recognize your starting pet throughout the \n\tgame via is_starting_pet(mon) macro\nhealers notice when a wand of undead turning revives a monster so the\n\twand is then identified\nupdate display if bestowed a spellbook while unable to see invisible self\nuse small pool of static buffers for mon_nam() and Monnam()\nAcknowledge Schroedinger's cat at end of game\ngrammar fixes for applying stethoscope to corpses and statues\nplayer polymorphed as a ceiling hider cannot reach the floor, but\n\tautomatically unhide on #sit\ntrappers do not hide on the ceiling\nfix \"You hear The food ration tumbles downwards\" for blinded pit dropping\nsilver arrows weren't causing silver damage on some silver-haters when wielded\nwizard mode: avoid division by 0 crash for level teleport in the endgame if\n\tconfusion overrides teleport control\ndon't #sit on an object in a pit if you're only on the precipice\nfix message when pushing a boulder into a pool while riding\nplural of \"Nazgul\" is \"Nazgul\" not \"Nazguls\"\ntrap messages referring to named steed were ackwardly worded when hallucination\n\toverrode use of the name\nsome actions such as eating corpses off the floor didn't check whether hero\n\tcould reach the bottom of a pit\nusmellmon() instead of \"It turns into it\" during monster polymorph\ngrammar of messages regarding eating artifacts\navoid a message about an invisible monster looking much better\nplayer polymorphed as a xorn could not pick up items in pits\nnon-magical whistles do not work underwater\ntry to restrict whistles and musical instruments to monsters that can blow\ndon't display \"turns to flee\" message for a mimicing mimic\ndon't display \"turns to flee\" message for a monster who has just died\ndipping acid in a fountain could cause an explosion but not destroy the potion\nthrown potions can sometimes hit a steed's saddle\nif your blindfold glows and you're not otherwise blinded, you can see it\nsync default documentation of \"null\" option with the code\ntripping over a cockatrice corpse didn't petrify, even when not wearing boots\ndo not call swamps on the Juiblex level \"moat\" when freezing or drowning;\n\tlikewise for Plane of Water when drowning\nkeep score from wrapping around and becoming negative by capping it\nkicked objects do not slide when on the air or water levels\nadded strsubst() to hacklib\nbe consistent with use of \"removing\" rather than \"lifting\" for encumber \n\tmessages associated with taking things out of a bag of holding\nwhen a giant carrying a boulder dies in a pit, ensure that the corpse is\n\tburied under the filled pit\ncursed scroll of destroy armor damaging cursed armor didn't adjust attributes\nadd passive() flag that indicates uwep was destroyed during the turn\npolymorphed or shapechanged monster sometimes got erroneous hit points\nwhen blind and levitating > shouldn't say \"stairs\" if player has not seen them\na slow-moving monster hidden under a rotting corpse was not immediately\n\tdisplayed when the corpse rotted away\nmimic that ends up on the rogue level should not mimic a closed door\nmimic should not mimic a boulder while on a pit or hole or closed door\ncalculate weight of corpses on special levels correctly\nSting could trigger premature display of orcs during savegame restore\nSting now glows light blue again\nprevent \"offering\" or other words with similar ending from matching ring quote\nmake cleric cast lightning blind as other lightning does\nchange the wording slightly to use \"one of \" when a monster wielding \n\tmultiple daggers thrusts them\nif you didn't see a rolling boulder fall into a pit, you only heard the sound\n\tof it doing so if you were blind\nfire trap was triggered twice in the same turn when melting ice was involved\nabandon the specialized djinn and ghost counters used for potion tuning and\n\tuse the mvitals[].born field instead\nif you were Poison_resistant, only a *blessed* potion of sickness caused\n\tloss of hitpoints\nreviving invisible troll could appear visible until it moves\nadjust some of the shop repair messages\nshopkeeper removal of trap from shop doorway yields an open door instead of\n\ta closed one if an intact open door is present\nguarantee that hostile djinn released from bottles really are hostile\nhandle lava when removing or losing water walking boots\nfix incomplete sentence occuring when unique monster's corpse fell down stairs\nfractured boulders or statues produced inconsistent object settings on the\n\tresulting rocks\nreally fix rolling boulder bug C340-18, the previous \"fix\" reversed the test\nmonster throwing greased weapon has same chance for slip/misfire as player\nkilling a pet by displacing it into a trap now yields experience\nprevent a rolling boulder that is in motion from vanishing in bones files\nensure that a sleeping steed doesn't answer a #chat\neliminate two very minor anomalies when using Luck to adjust random numbers\ndestroying a worn item via dipping in burning oil would not unwear/unwield\n\tthe item properly, possibly leading to various strange behaviors\navoid a panic splitbill when shopkeeper is trapped by the door\ngrammar tidbit for message given when eating tainted meat is also cannibalism\ngas spores shouldn't be described as \"unable to attack\" while hero is praying\nincorrect screen display if engulfer gets turned to stone when trying to\n\tswallow while hero is poly'd into cockatrice\npanic on subsequent move if engulfer gets turned to stone and poly'd hero\n\talso has attached ball&chain\ngive more specific messages when dropping weapons due to slippery fingers\nvarious helmet messages changed to distinguish between \"helm\" and \"hat\"\nhelmets don't protect against cockatrice eggs thrown straight up\nbreaking container contents in a shop didn't always charge for them\nsome types of shop theft of a stack of items only charged for a single one\nsome thefts weren't charged at all even though shopkeeper noticed\nwizard mode: WIZKIT wish for own quest artifact triggered crash at startup\navoid \"your steed is still eating\" message when going through a magic portal\ncannot drink from fountain, sink or surrounding water while swallowed\ndon't hallucinate anything for an exploding black light as it dies\ngive blindness feedback when moving into/through stinking cloud\nfix case on monster name when monster reflects floating eye's gaze\nmonsters \"shrieking in pain\" from a potion didn't wake anything up\ncharge for reviving a shop owned corpse or reanimating a shop owned statue\nfilled trap doors on castle can be re-dug\nmessage order when swapping places with a pet (e.g. into a trap), also use\n\tdifferent term instead of \"displace\"\nflyers can get out of pits more easily than non-flyers\nallow use of the < command to try to exit a pit\nMaster of Thieves as Tourist Nemesis still had STRAT_CLOSE\nco-aligned unicorns in bones could be hostile\nfinding \"something\" posing as a statue while Blind should map_invisible()\nadding more candles than required to total 7 to a candelabrum which \n\talready had between 1 and 6 gave an ungrammatical message\ngive correct message when a spellcasting monster summons other monsters\ncorrect experience calculation for monsters that cause nonphysical damage\nclean up messages when you stop levitation while riding a flying steed\nmonsters evading a kick on noteleport levels would cause a \"teleports\" message\ninterrupt current activity during certain stages of petrification or vomiting\nwarning about bad food didn't recognize tin of Medusa meat\neating tainted Medusa corpse caused food poisioning instead of petrification\navoid potential stale pointer use after magic bag explosion\nnymphs and monkeys can't steal rings worn under gloves\nmonkeys can't steal rings worn under cursed weapon\nsuccubi will remove hero's gloves before taking worn ring; incubi will do\n\tso before forcing ring to be put on\nmbodypart should return forehoof, not foreclaw, for horselike monsters\nfurther digging of an existing hole finishes in a single turn\nonly prefix shopkeeper names with \"Mr.\" or \"Ms.\" when not a personal name\naccount for all attacks when determining max_passive_dmg\ngreen slime should not affect noncorporeal monsters\nland mine explosion will destroy a drawbridge at same location\navoid some more buffer overflows in query buffers containing object names\navoid giving extra information about things that break out of sight\ndipping in acid can erode the dipped object\navoid giving away wand type for near misses while blind\navoid excessive repetition of \"monsters are aware of your presence\"\nmonster's aggravation spell now affects meditating monsters\nhandle pets sooner at end-of-game to avoid message delivery anomalies\nbusy pet won't miss out upon ascension\nfix various places that \"finally finished\" could be displayed after the hero\n\tstopped doing something other than eating\nfix some cases where movement was disallowed but the hero was still conscious\nafter destroying drawbridge, hero could appear to be in the wall\nsometimes shop items which hero is forced to buy could be sold back twice\nnon-empty container dropped but not sold in a tended shop and then picked up\n\tafter that shop became untended could be sold twice in another shop\nvision was not updated when polymorphing a statue into a boulder\nvarious actions--such as enchanting--performed on an unpaid shop object\n\teither force the hero to buy the item (when its value is lowered) or\n\tincrease the current bill (when its value is raised)\n`I u' when carrying single unpaid item listed its cost twice\narmor which auto-curses when worn by hero should do same if worn by monster\nlimit how high accuracy, damage, or protection can become via eating rings\nwhen blinded hero detects a trap by touch, make sure it shows up on the map\nconfused remove curse will cause loss of knowledge of items' curse/bless state\nwith astral vision, the \";\" command should only display \"normal vision\"\n\tfor things that could be seen without astral vision\nreanimating a statue containing gold produced double gold\nprobing the resulting double-gold monster caused \"static object freed\" panic\ncursed wand might explode if used to engrave\nfatal wish from magic lamp left functional magic lamp in bones data\nfatal wish granted by monster left that monster in bones data\ndeath due to dipping potion of acid into a pool left the potion in bones data\nclear prompt from screen after ESC is used to abort \"In what direction?\"\nminor interface changes for interactively manipulating autopickup exceptions\nchatting with quest leader who was brought back from the dead gave warnings\nbecoming green slime or mimicking gold violates \"never changed form\" conduct\nwhen a monster grew into a higher form which had previously been genocided,\n\tthe message explaining its fate was only given if it was sensed via ESP\nhero could still see for brief period after being blinded by potion vapors\navoid crash when thrown potion hits bars before a monster\ndon't give messages about seeing things happen while asleep\nadjust health threshold where wounded hero will be healed by successful prayer\nprotect hero from mind flayer's remote mental blast during successful prayer\nrecognize if hero has already entered Gehennom by means other than usual route\n\tso that prompt can be skipped if Valley's stairs are subsequently used\nonce you've passed the Valley, drawbridge tune is no longer a prayer reward\nfix up grammar and punctuation in variants of shopkeeper's price message\nregression, bug fixed in 3.4.1 reintroduced in 3.4.3:  Sunsword continued to\n\temit light after monster who was wielding got killed\nweaken \"farming\" strategy\ndon't suppress corpse if you kill your own steed\nfix typo in tourist quest leader's greeting\nfix grammar for graveyard sounds when polymorphed\navoid divide by zero crash if Luck drops below -1 while a prayer is in progress\nmake hero inflicted with lycanthropy immune to level drain just like monsters\ndescribe locomotion method accurately when flyers traverse ladders or holes\nwhen there were multiple boulders at a location, moving one of them sometimes\n\tresulted in line-of-sight anomalies\nunicorn can't catch gems if it is asleep or paralyzed\nfix grammar when choking on gold\nprevent lose-level+regain-level cycle from arbritrarily boosting HP and Pw\nprevent polymorphing into \"new man\" at low level from magnifying HP and Pw\nsome messages which referred to \"mirror\" ought to have used \"looking glass\"\nincubi react to mirrors\nlosing a level while polymorphed affects hero's current monster HP as well as\n\tunderlying normal HP\nmind flayer brain eating is subject to certain fatal targets and to cannibalism\nmind flayer can't eat brains of ghost or shade\nalignment of Angels was handled inconsistently\ncorpses of unique monsters in bones behaved incorrectly if revived or eaten\npets capable of digging could pass through walls and stone on the Rogue level\ndon't generate mimics pretending to be closed doors when making Rogue level\nfix pluralization for \"this tin smells like mother-in-laws\" when hallucinating\nforce user-specified fruit name to be singular\navoid false matches when looking up fruit names (\"grapefruit\" isn't \"grape\")\nhandle pluralization of man-at-arms and singularization of men-at-arms\navoid inappropriate \"the corridor disappears\" when vault guard gets killed\navoid inappropriate \"the guard calms down\" if vault guard's magic corridor\n\treaches a spot where gold is embedded in the rock\navoid having vault guard ask hero's name when hero is swallowed\nassigning an artifact name is rejected on objects with similar description to\n\tcorresponding artifact's type rather than just those of the same type\nadjust feedback for gas spore explosion when hallucinating\nadjust message for gas effect from chest trap if hero resists hallucination\ncancelling non-shop objects in a shop's entrance would upset the shopkeeper\ntraps detected by scroll or crystal ball overlooked carried or buried chests\ncan't wish for a trapped box/chest/tin by specifying \"poisoned\"\ngrammar bit if killed by stealing a cockatrice corpse from a monster\nidentified touchstone can rub on gold like the data.base entry says\nrestore the capability of rubbing any object against known touchstone\nbeing petrified by swallowing a cockatrice violates foodless conduct\ndevouring Medusa whole is fatal\ntombstone's reason for death after being killed by mis-returning Mjollnir\n\tvaried depending upon whether it was fully identified\ntombstone's reason for death from kicking an object could include so much\n\tdetail about the object that is was too verbose\nseveral quest messages were worded inappropriately if the hero was blind\na samurai quest guardian message used \"ninja\" where \"ronin\" was intended\nrevive from fainting if vault guard or bribe-demanding demon approaches\ntame flaming spheres and shocking spheres shouldn't pick up items\neating pet won't continue eating after becoming paralyzed or falling asleep\ncan hear the opening or closing of an unseen drawbridge\nprevent \"object lost\" panic caused by accessing freed memory after worn\n\tnon-fireproof water walking boots are destroyed by lava\nstop multi-turn running, searching, or resting early if levitation ends\nrandomize shopkeeper names when hallucinating\nfix wording for \"leprechaun steals gold from between your feet\" when mounted\nCall command could be used to remotely identify which high priest is which\nlarge amorphous, whirly, noncorporeal, or slithy creatures can fit through\n\ttight diagonal gaps despite their size\navoid \"You summoned it!\" for unseen monster produced by same-race offering\nfix monsndx panic which happened after currently moving monster expelled\n\tswallowed hero onto magic trap and was made tame by its effect; taming\n\tno longer replaces monster\nreduced message verbosity when re-entering a temple\nreduced message verbosity when monster with multiple attacks missed wildly\nrecognize \"mindflayer\" as an alternative spelling for \"mind flayer\"\nputting on a never seen ring while blinded won't make the ring a discovery\nzapping a never seen wand while blinded won't make the wand a discovery\nzapping an unID'd wand of teleportation at self will discover it (usually)\nzapping unlocking magic at self while punished will remove attached chain\ntreat mattock as blunt object when forcing locks\nrestore capability to force locks with wielded statue\nonly count successful statue creations against the monster limit in sp_lev.c\ndon't see objects or read engraving when hero changes location (random\n\tteleport) or position (levitation timeout) while asleep or fainted\nunseen wand of striking zapped by unseen monster became known if it hit a door\ntweak knight quest messages\nguidebook grammar bits\nspecial level loader wasn't able to place random door in 1x1 room; could\n\ttrigger divide-by-0 crash for user-developed custom levels\npolymorphed spellbooks may turn blank or be too faint to read\nmake gender of quest leaders and nemeses consistent with data.base and\n\tquest messages\nOrion and Norn should be giant sized\nOrion, Norn, Cyclops and Lord Surtur should be able to tear webs\navoid inappropriate message when using a cursed lamp while blind\nplayer polymorphed as a guardian naga spit the wrong kind of venom\nensure monsters cannot teleport to or be created outside nonpassable bounds\n\tof special levels\ncandles should not be fireproof\nput #define for potion occupant chance and cursed wand zap chance in one place\nrecognize most instances where hallucinatory monster name should be treated\n\tas a personal name (to avoid \"the Barney\") instead of a description\navoid giving misleading or redundant feedback when reading scrolls\nmonsters could end up off the left side of the Ranger quest start level\ncustom arrival message for special levels could be delivered too soon\ncustom arrival message for special levels now supports quest text substitution\nprevent scroll of charging that has already disappeared from showing in the\n\tpicklist of things to charge\ndoors break instead of absorbing the blast of a broken wand of striking\nworms don't have scales, krakens have tentacles, stalkers have a head\nyou no longer \"fry to a crisp\" as a water elemental\nchange leather spellbook to leathery; pertains to appearance, not composition\nmore precise probing/stethoscope feedback when engulfed\nmake baby long worms have lower level than full grown ones\nuse \"your kraken\" instead of \"a kraken\" when searching reveals a tame\n\thidden monster\nMagicbane should not produce \"<something> are confused\" message\nhandle antholes more sensibly when ants aren't available\navoid \"Something's in the way\" message with unidentified wand of locking\ncancelled nurses shouldn't say \"Relax, this won't hurt a bit\"\ncheck for hero location in digactualhole() before clearing u.utrap\nclear any pits that the hero digs in the vault guard's temporary corridor\nbetter handling for Fort Ludios and endgame in wizard mode's `^V ?' menu\nno free lunch for gelatinous cubes eating scrolls of mail\neating gold in front of the vault guard will make the guard angry\ncalculate engulf time differently for non-digestion attacks than for digestion\npreform autopickup and/or report on objects at the spot when a failed #untrap\n\tattempt causes the hero to move onto a trap's location\nshattering a monster's weapon didn't work as intended for stack of N>1\nthrown silver weapon hitting silver-hating poly'd hero got double silver damage\nwielded silver weapon hitting silver-hating poly'd hero lacked silver message\ndon't reveal surface information that you can neither feel or see\nif the hero or a monster is already in a pit don't have them \"fall into a chasm\" \n\tfrom drum of earthquake\nmonsters who ate lizard corpses to cure confusion would lose intrinsic speed\nmonsters couldn't eat lizard corpses to cure being stunned\ncode handling a monster's use of potion or food to cure stoning or confusion\n\twas accessing freed memory after the object had been used up\nproperly handle destruction of equipment carried by monsters hit by\n\tdisintegration breath; life-saving retained conferred properties of\n\tformerly worn items (loss of steed's saddle caused much confusion)\ndon't exercize or abuse wisdom when rumors get used for random graffiti\ndon't exercize wisdom twice for each minor oracle consultation\ndon't welcome the hero to Delphi if the Oracle was angered before first entry\ncreate_object() created lizard corpses without timers and troll corpses with\n\ttheir revive timers, then changed the corpsenm field\nwhen a potion of acid was dropped into water and exploded, nethack would\n\tcontinue to use already freed memory and later might panic or crash\nwhen jumping over an already seen trap, use an() to get appropriate grammar\nfix bad grammar when putting on not-yet-seen Eyes of the Overworld while blind\ndon't \"walk quietly\" while levitating\nshopkeeper polymorphed into animal form can no longer speak\ndon't give attribute adjustment messages (\"you feel wise\") unless the current\n\tvalue actually changes\nfix message handling when multiple shopkeepers are present at end of game\n'C' command can't name shopkeepers or temple priests and other minions\nwhen \"of <deity>\" is intentionally being suppressed, an aligned or high\n\tpriestess would be described as an aligned or high priest\nspecifying role and/or race along with an invalid alignment for it/them in\n\tNETHACKOPTIONS or config file would yield a prompt which misleadingly\n\tmentioned the rejected alignment when asking player to pick alignment\ntemple donation can recover protection previously stolen by attrcurse attack\n\teven when protection amount is so big that no increment would be given\nmeditating monsters stop meditating when affected by something which wakes\n\tsleeping mosnters\nmonsters capable of hiding can't do so when trapped or while holding you\nlimit recursive calls to spoteffects (poly'd hero fell into water, reverted\n\tto human because of it, fell into same water, then crawled out twice)\nensure that the punishment ball and chain make it into the save file after being\n\ttemporarily orphaned from the normal chains in the swallowing code\ndisplay the invisible monster glyph ('I') whenever an unseen monster forces\n\tpoly'd hero out of hiding\ncharge for thrown wand that shatters into a thousand pieces in a shop\nwielded light source susceptible to water gets extinguished when weapon rusts\ndon't discover unknown bag of tricks when monster it releases is undetected\nescape the deleted trap after performing the invocation while trapped\nuse alternate phrasing when life drain attack affects non-living creature\nbypass \"wait! there's a creature hidden there\" when attacking a hidden monster\n\tsensed by ongoing monster detection\nremove makedefs.c dependency that time_t and long are the same size\nterminal window set to 21 lines can cause a crash during player selection \n\tmenus; have bot() check for valid youmonst.data\nmake region ttl field a long instead of short to get rid of lint warnings\n\tabout a possible loss of data\nfree storage used to hold region messages in free_region()\nhonor pushweapon when applying a tool or weapon causes it to become wielded\nin the quest, if the locate level hasn't been reached yet, don't fall or\n\trandomly teleport past it\nfix phrasing in monster against monster attack feedback when attacker is\n\twielding stacked weapons\npushing a boulder onto a level teleporter trap could issue repeat messages\nif shopkeeper or priest gets teleported while inside his shop or temple,\n\tgive locations inside that room preference when choosing destination\ndon't place hero on top of monster when arriving on level which is so full\n\tthat the monster can't be moved out of the way\ntame/peaceful grabber/engulfer will release hero after conflict ends\nany grabber will release hero if it moves away while confused/stunned/afraid\nmake changes in hallucination be reflected by changes in mimickery feedback\nhave to see a divine gift in order to have it become a discovery\nhonor the never-in-hell flag when selecting random monster type for corpses,\n\teggs, figurines, and statues created in Gehennom\nhero is not subject to light-based blindness while fainted from hunger\nadd Unaware pseudo-property to suppress various messages while unconscious\nengraving while underwater should use surface() which handles that case\nprevent obj_is_local panic during bones creation when splattered burning oil\n\tfrom a thrown potion of oil kills the hero\ndon't leave lit potion intact when splattered burning oil from broken floor\n\tpotion kills the hero\nfix region timeout detection, caused strange display of stinking cloud\n\twhile wearing the Eyes of the Overworld\ntry to keep migrating monsters from escaping the wizard tower\naffected monsters should always respect \"Elbereth\"\ntry harder to keep dragged chain between ball and hero\nfireproof containers should not burn in lava\nmissile which kills engulfer will now be placed prior to hero's return to map\nfix invalid pointer dereference after applying a wielded cream pie\navoid drowned in a drowning and burned by burning if life-saving is inadequate\nbugles affect all monsters to some extent\nnurses are affected if player is polymorphed as a cockatrice\ngetting a particular rotten food result can't make attempting to eat a\n\tcorpse of one of the Riders be survivable\npad shortest rumors to improve distribution of delivered rumors\nwake up sleeping steed when putting on saddle or mounting\nreveal hidden monsters who change levels or are magically summoned\nhero can't carry an unlimited number of boulders when poly'd into a giant\nstop wielding cockatrice corpse which triggered own death followed by life-save\nformat various prompts to avoid \"Query truncated\" entries in paniclog\nprevent very large number of objects in # inventory slot from causing\n\tbuffer overflow\n!fixinv config was using arbitrary characters instead of # for invent overflow\nfor inventory display, include cost info on hero-owned containers holding\n\tshop goods\nshops now claim ownership of items created by using an unpaid horn of plenty\nshopkeepers shouldn't refer to non-male character as \"cad\"\ntweak levitation timeout if trap is being triggered on same turn it is to end\ndon't report death by petrification if cockatrice kills hero via HP loss\nRiders are immune to green slime\nRider corpses can't be engulfed by gelatinous cubes\nif Rider corpse revival fails, usually try again later instead of rotting away\nwielding a cloak of magic resistance or gray dragon scales, or carrying one in\n\talternate weapon or quiver inventory slot, conferred magic resistance\n\tto polymorphed hero\nwielding a potion of blindness or carrying one in alternate weapon or quiver\n\tslot conferred resistance against light-based blindness to any hero\nworn item transformed by polymorph remains worn if feasible\nzapping closing or breaking magic up or down from beneath an open drawbridge's\n\tportcullis failed if bridge orientation was north-to-south (Valk quest)\ncan't dip or apply grease to a worn item that's covered by another worn item\nsinking into lava didn't track passage of time properly\nsinking into lava eventually burns away slime; sitting in it always does\nafter escaping lava by foot, if hero doesn't move he'll fall back in\nsuppress corpse from bones data if death is due to being dissolved in lava\nsuppress \"you rise from the dead\" if game ends due to be turned into slime\nhero poly'd into stone golem and wielding cockatrice corpse casts stone-to-\n\tflesh at self to become flesh golem will revert to stone if no gloves\ndon't give erroneous \"<mon> disppears\" message for hero poly'd into quantum\n\tmechanic who hits engulfer while swallowed and blinded\ndemon lords/princes can't be summoned to the elemental or Astral planes\nfeedback from casting spell of protection was wrong in some situations\ncan't engrave on floor while inside solid rock, wall, or closed door\nsame-race sacrifice can't damage high altars\nallow corpses on floor to be offered at high altars\nallow hero to attempt to offer the Amulet at ordinary altars\nshooting range for crossbow isn't affected by strength; multi-shot volley is\nremove engravings at drawbridge location when it is opened, closed, or wrecked\nmonster killed in midst of multi-shot volley throwing/shooting might cause\n\tfreed memory to be accessed, potentially triggering a crash\nright-handed boomerang throw travels counterclockwise\ncan't arm bear traps or land mines on Planes of Air or Water\nstatues that \"come to life\" when trap activates shouldn't start out sleeping\nshopkeepers and priests wouldn't step on graves put in their rooms by bones\ncan't throw if poly'd into form which lacks hands\nmonsters can use ranged attacks over/around boulders, same as hero\ncan't eat an artifact you're unable to touch\nattempting to kick beyond map edge performed an out of array bounds memory\n\taccess; symptom seen was \"show_glyph: bad pos\" warning when blind\nattempting to engrave with an empty wand should always use a turn\ndon't access freed memory after engraving \"wrests one last charnge\" from wand\na magic portal could be rendered inactive for the hero if a successful\n\thangup save took place during level change; leaving the level by any\n\tmeans other than triggering the portal would reactivate it\ncan't drop part of a stack of N weapons welded to hero's hand\npickup still accepts m as command prefix, but now rejects F,g,G,M,numpad 5\nscatter piles of kicked gold rather than move the entire pile at once\nhero wasn't allowed to affix candles to the candelabrum while underwater\nnon-unicorn horn healing magic which cures sickness now also cures vomiting\nvomiting/nauseated state is included in enlightenment feedback\nvomiting countdown actually triggered the final vomit code twice\nrats aren't capable of vomiting\nfireproof, non-rustable weapon would be revealed as fireproof by hitting a\n\trust-causing target; ditto for fixed crysknife\nsurviving choking while eating various foods (cockatrice egg, fortune cookie,\n\twolfsbane, others) didn't carry through to those foods' side-effects\nshapechangers who take on mimic or hider form will mimic or hide when feasible\navoid War message if tinning a Rider corpse fails\nprevent long messages from triggering access violation or segmentation fault\n\tdue to buffer overflow in pline()\ncursed corpse wielded by a monster isn't welded to its hand or paw\nfix grammar errors in samurai quest, wakarimasu ka?\nfix spelling of Dr Dolittle\nhero's sleep resistance shouldn't protect steed from sleeping gas trap\n#jump attempt fails if mounted on sleeping steed; jumping spell still works\ndropped wielded, in use leash should remain in inventory, since it's in-use\nwielded, in use leash can't be snatched by whip-wielding monster\nwhen using two weapons at once, whip-wielding monster can target either one\nif normal game save file is restored via `nethack -X', restore in normal\n\tmode--with save file deletion--and require confirmation ala 'X'\n\tcommand to make deferred switch into explore mode\ncan't #force floor item while engulfed, levitating, or unskilled riding\ncan't lock or unlock doors while engulfed\nif hero or monster standing on opened drawbridge survives its destruction,\n\tfall into water or lava instead of remaining on top\ndon't give a speed change message when an immobile monster is seen to be hit\n\tby a wand of speed or slow monster\nwhen shopkeeper \"gratefully inherits possessions\" of hero who dies in shop\n\tdoorway without owing the shop, move those items inside shop for bones\ndying in a shop while wielding two weapons could cause \"Setworn: mask\" warning\nmake score file processing more bullet proof to avoid potential security issue\nstethoscope applied to hiding mimic will bring it out of hiding\nrephrase \"<artifact> evades your grasp\" message if artifact is already held\nartifacts which subsequently evade your grasp/control after already being\n\tworn or wielded become unworn/unwielded\ntowel equipped in weapon, alternate weapon, or quiver slot can be applied\nlit candle or potion of oil which burned out while equipped would leave stale\n\tweapon/alternate-weapon/quiver pointer that could cause panic or crash\nwielded/worn figurine which auto-transformed had same stale pointer bug\nlikewise with casting stone-to-flesh on self for figurine of non-veggy monst\nformat names of not yet id'd artifacts such that obj type shows for non-weapons\nhero with lycanthropy is vulnerable to silver in both human and beast form\nchanging alignment or shape triggers a check for equipment evading hero's grasp\npassive fire effects can damage attackers' weapons\nmake quest leader and nemesis be unlikely to be affected by traps\nwielded bow shouldn't affect outcome of kicked arrows\nranged polearm hit can divide puddings and can use confuse monster effect\ncharge for kicked shop-owned food if it gets used up taming a monster\ngive better feedback when thrown shop-owned food gets used up taming a monster\neffect of negative AC on damage received was calculated differently than\n\tnormal when deciding whether hero poly'd into pudding would split\nuse a more precise jumping path for far, non-straight line destinations\nunicorn horn produced by revived monster will polymorph as if non-magic\nstone-to-flesh on any golem statue or golem figurine creates flesh golem\nstone-to-flesh which activates shop-owned figurine entails shop charges\nmake giants be less likely to be randomly generated in Sokoban\nbear traps dish out some damage on initial entrapment\nbear traps and webs are harmless to water elementals\nhero with polymorph control and inflicted with lycanthropy can specify own\n\twerecritter or human werecritter monster types as polymorph target\nhero undergoing semi-controlled polymorph won't also undergo sex change\nwhen doppelgangers taking on new shape don't specifically pick nasty monster\n\tor role monster, bias the random form towards humanoid\nsalamanders can use green slime corpses to cure themselves of petrification\nincrease damage bonus applies when kicking while polymorphed into a monster\n\tform which has a kicking attack, just like for other kicks\nfeedback about summoned monsters may use singular when it should use plural\nif magically removing steed's saddle is fatal, don't leave it saddled in bones\ncharging prompt used wrong criteria when deciding whether to list rings\nrogue's backstab bonus doesn't apply for throwing attacks\nhiding monsters who are unhidden when hero leaves a level can hide upon return\ntouching a pile of objects while blind affects hero even when the pile is\n\tbig enough to give \"there are many objects here\" and not list them\nexplosion while engulfed only affects engulfer and hero, not adjacent monsters\neliminate case-sensitivity when converting words from singular to plural and\n\tvice versa, so some failing wishes like \"Gauntlets of Power\" now work\nbreath attack directed at self by poly'd hero always hits\nan orc (or gnome) will respond to #chat if hero is also an orc (or gnome)\noverride non-silver vs shades for artifacts which deal extra damage to undead\nassorted mirror fixes--mainly visibility issues\nkicking at \"empty space\" has side-effects so should use current turn\nusing weapon to kill tame engulfer from inside triggered \"placing defunct\n\tmonster onto map?\" warning\nsome monsters can't be strangled; self-polymorph can stop/restart strangulation\nnymphs could steal carried boulders\namnesia of object discoveries would never forget the very last one\nre-adjust gem generation probabilities when revisiting existing dungeon levels\nkick evasion shouldn't move monsters through walls\nkick evasion and jousting/staggering blows shouldn't move grid bugs diagonally\n#untrap didn't check whether hero could reach the ground\ndigging/chopping a closed drawbridge message mentioned digging a \"wall\"\nattacking via applied polearm now honors the \"confirm\" option\nengulfer under influence of conflict or confusion could swallow monster at\n\twater/lava/trap spot and not be affected by destination til next move\nunicorn horn restoration no longer overrides sustain ability characteristic\nhider monster revived from corpse would start out hidden (even if own corpse\n\twas only object around to hide under)\nfix sequencing issues with dropping #invoked Heart of Ahriman\napplying an unpaid stack of potions of oil forced hero to buy all of them\n\tinstead of just the one which got split off and lit\nsometimes when hero is forced to buy an unpaid shop item its price changed\nmonster could attack with a polearm even after attempt to wield that failed\nsometimes got \"you trip over it\" after intervening messages following the\n\tone which described \"it\"\nwizard mode: WIZKIT wishes could overflow inventory's 52 slots\ncode controlling item drops by small monsters still used pre-3.1.0 weight\nmonsters who want the Amulet won't attack the Wizard to try to get it\nwhen loading bones files, censor suspect characters from player-supplied\n\tstrings such as pet and fruit names\nopening or closing the castle drawbridge via music consumes a turn\ncan't swap places with tame grid bug when moving diagonally\ncan't move diagonally through a long worm's body (can still fight that way)\nrequire confirmation to read a scroll of mail if doing so will be the first\n\tviolation of illiteracy conduct\ncould get \"suddenly you cannot see the <mon>\" while invisible mon remained\n\tdisplayed due to telepathy or extended detection\ncutting a long worm in half would trigger segfault/accvio crash if the hit\n\ttook parent down to 1 hit point or if long worms had become extinct\ncutting a level 0 long worm in half produced a new worm with 0 hit points\nusing F to force an attack towards a boulder gave \"you attack thin air\"\nrandom \"treasure drop\" upon monster's death bypassed dropping side-effects\nmelted ice on Valkyrie quest should be pool, not moat\nsome variations of attempting to use open or close commands on a drawbridge\n\tdidn't give drawbridge-specific feedback\ntin contents can now sometimes be accessed on the same turn that the tin\n\tstarts being opened; when not, the opening feedback is more accurate\nNth adjustment of feedback when observing a pet eating\nmonsters who want the Amulet won't attack temple priests to try to get it\nblinded invisible hero can't see self as invisible via ';' or '/'\nit was possible to generate an object of 0 gold pieces by dropping 2**32 gold\nwizard mode's sanity_check option missed nested containers and migrating mons\nalways update map display and use up turn if open or close command attempted\n\twhile blind reveals change in door state or discloses non-door spot\na hangup save while picking up gold from shop floor could duplicate that gold\nsecret door detection's trap finding is no longer blocked by water or clouds\n\ton the Planes of Water and Air\npotion thrown by monster which hit a long worm's tail gave feedback about\n\thitting its head\nimplement energy vortex's previously unused energy drain attack\nchanging alignment type resets alignment record to 0 (nomimally aligned)\njellyfish do not technically have a head\nwhile polymorphed, suppress attribute gain/lose earned by pre-poly exercise\nwizard mode #monpolycontrol prompting asked about \"it\" when monster was unseen\nreprompt if player fails to make a menu choice during inventory identification\npotion explosion during failed alchemy should awaken nearby monsters\nseen eels who were stuck in isolated pools would never re-hide\ncan no longer get both strength and resistance from eating one giant corpse\naborting key/lock pick usage via ESC at direction prompt no longer uses a move\nlit south wall of C quest leader's room contained dark gap at secret door spot\nwhen probing from inside an engulfer, \"not carrying anything\" overlooked hero\narcheologist shouldn't start with sling skill by carrying slingable touchstone\nwearing or removing an amulet of restful sleep clobbered permanent sleepiness\nif attempt to select a co-aligned artifact for first divine gift fails because\n\tnone is available, choose one from among nonaligned artifacts\nensure current_fruit gets set to the correct index when setting fruit\n\toption to existing entry whose fid is not the highest\nmonsters already wearing suits can't put on shirts\nif breaking a wand of polymorph causes hero to drop items, don't transform them\ngive \"shuddering vibrations\" feedback if breaking a poly wand uses up items\nif polymorph causes a monster to drop items, they won't be used up via\n\tshuddering vibrations or as golem creation fodder\nmonsters who ate green slime corpses weren't turned into green slime\n\"hand slip\" while naming an object would never pick 'z' as a substitute letter\nhero would \"gladly take off <armor>\" for nymph or succubus even while asleep\nconcealed mimic wasn't revealed if kicking attmpt yielded a clumsy miss\ntoo accurate feedback given to a blinded hero when a monster summons insects\nif life-saved steed became untame, repeated \"placing steed onto map?\" warnings\n\twould be given as long as the hero remained mounted\nmessage sequencing for fatal explosions was confusing if feedback was given\n\tfor carried items being destroyed\nwhen dipping something in holy/unholy water, only learn its new bless/curse\n\tstate if hero sees it glow\ndescribe lit Sunsword as shining rather than glowing\nprevent poly'd shopkeepers from taking on forms that can't handle objects\nattempting to move direction 'u' as a grid bug performed #untrap command;\n\tthe other diagonals reported \"unknown command\" instead of \"you can't\"\nmimic posing as statue or corpse now picks and maintains particular monst type\ntrying to move down while levitating said \"you are floating high above floor\"\n\teven when being stuck in floor or lava blocked full levitation\nwhen levitating, don't show '>' as a likely direction for digging\npoly'd or mimicking hero who was hidden from monsters would still be treated\n\tas a normal target for their ranged attacks\nhero would remain stuck to an adjacent monster after rehumanizing if he had\n\tbeen attacked while hiding via #monster when poly'd into a small mimic\nhero poly'd into mimic and hiding as an object via #monster didn't unhide\n\twhen polymorphing into non-mimic\nattacking via applied polearm never scuffed engraving underneath hero\nauto-wielding a polearm took no time if ESC was used to cancel target choice\napplying a bullwhip while at very edge of map could target beyond edge,\n\tpotentially leading to a panic or crash\nprevent temple priests and minions from wearing helms of opposite alignment\n'D' drop command didn't handle 'u' choice correctly if the only unpaid items\n\twere inside containers\npearl rings shouldn't rust\nshouldn't be able to read a worn T-shirt when it's covered by a worn suit\nsimplify hero placement on Castle level when climbing up stairs from Valley\nspell attack by low-Int hero could inflict negative damage\nsome wand/spell/breath zaps that hit a secret door failed to reveal it\nwand explosion feedback about adjacent door was phrased as if for a wand zap\nimprove the message sequencing when a thrown poisoned weapon loses is poison\nmessage \"You hit the  with all your might.\" could be issued if a boulder\n\twent away while it was being dug/broken with a pick-axe\nprevent \"object lost\" panic if/when drinking a wielded potion of polymorph\n\tcauses hero's new form to drop weapon\ndocumentation tidbit:  change Guidebook and in-game help for pickup_burden\n\toption to match game's 'O' command (\"Unencumbered\", not \"Unburdened\")\nwriting while blind no longer possible for books, might fail for scrolls\nblanking items in pools while blind shouldn't reveal new obj description\n\tfor ones which had been seen before becoming blind\navoid infinite loop in topten output when killed by long-named monster\ngrid bug could move diagonally 1 step using travel command\nattempting to open, close, or lock/unlock a door while confused or stunned\n\tuses up a move regardless of whether direction choice finds a door\ngrammar fixes for vault guard messages given after player assigns guard a name\nwearing cloak of displacement auto-discovered it even when hero couldn't see\nwearing elven cloak auto-discovered it even when already stealthy\nputting on ring of stealth never auto-discovered it\nforgetting spells due to amnesia now sets memory retention to zero instead\n\tof removing them from hero's list of known spells\nshouldn't have been able write scrolls by guessing type name when they're\n\tonly partly known via name assignment\nscrolls given names can be written by assigned name as well as by description\nfix writing feedback \"the spellbook warps strangely, then turns parchment\"\nmake stone artifacts usually resist stone-to-flesh\nwhen reading an unknown scroll and learning it, discovery of teleporation was\n\ttoo late if hero happened to land on another scroll of teleportation\nusing an unlocking tool on a closed door which was actually a mimic reported\n\tthat there was no door to unlock instead of exposing the mimic\npurple worm could end up in wall or solid rock when swallowing ghost or xorn\nunpaid shop items stolen from hero by a monster remained on hero's shop bill\n#untrap toward known trap location containing concealed mimic would yield\n\t\"{The mimic|It} {is in the way|isn't trapped}.\" but not reveal mimic\nsome actions taken when blind would yield \"Wait!  That's a monster!\" (for a\n\tmimic posing as a door) but not display the unseen monster glyph\nenhance life-saving by preventing subsequent poison from being fatal upon\n\trescue from death due to spiked pit, dart trap, or poisoned missile\ndon't create mail daemons when populating special levels with random demons\nteleport control and polymorph control are ineffective while hero is stunned\ndon't report \"fried to a crisp\" for disintegration from divine wrath\nwhen polymorphed into an opposite sex monster, if you then become a new\n\thuman while failing to polymorph into something else, you'd be told\n\t\"you feel like a new man\" for female or \"a new woman\" for male  \nspellcasting monsters' spell selection became less likely to choose harder\n\tspells as their level got higher (including Wizard's \"double trouble\")\nEye of the Aethiopica, Eyes of the Overworld, and Sceptre of Might must be\n\tworn or wielded rather than just carried to convey magic resistance\nMitre of Holiness and Tsurugi of Muramasa convey Protection when worn/wielded\neffectiveness of magic cancellation by worn armor has been reduced\nProtection improves the effectiveness of magic cancellation\nthe weight of a non-cursed bag of holding was sometimes off by 1 unit\nfor number_pad:2 (MSDOS compatibility), M-5 (Alt+5, or Shift+keypad5 using\n\tMSDOS/Windows keystroke hackery) didn't function as G movement prefix\nif an angry shopkeeper chased the hero to a different level and then got paid\n\toff, he'd dismiss kops on that other level but not on his shop level\nobjects inside the Wizard's Tower can't be teleport to outside and vica versa\ndying in lava and being life-saved or leaving bones would destroy ring of\n\tfire resistance if it happened to be made of wood, and also burn up\n\tscrolls of fire and spellbook of fireball\nsurviving in lava boils away carried potions, but dying in lava and being\n\tlife-saved or leaving bones would keep them intact\nwhen applicable, give \"your body rises from the dead as an <undead>...\"\n\teven when bones data isn't being saved\nunlit candelabrum would become unlightable if its candles had exactly 1 turn\n\tof fuel left and it was applied anywhere other than the invocation spot\nhave shk claim ownership of worn saddle dropped by dying pet if hero is\n\tnot within the same shop at the time of the drop\ntemporary loss of Dex from wounded legs will become permanent if it occurs\n\twhile mounted and hero dismounts before steed's legs have healed\nfor poly'd hero hiding on ceiling who gets attacked, make attacker's position\n\tbe an eligible location for hero when vacating hero's spot for attacker\n\tto prevent ending up far away under crowded conditions\nfor poly'd hero hiding on ceiling, attack by sea monsters won't move them\n\tinto hero's position unless it is over water or they're already on land\nfor poly'd hero hiding on ceiling, attack by long worm might fill hero's\n\tdestination with worm's tail, so double check and maybe choose again\npoly'd hero can't hide on floor or ceiling when on Planes of Air or Water\nwhen shop prices are adjusted, handle roundoff (integer truncation) better\nfor hero poly'd into a monster form that lacks a weapon attack but has a claw\n\tattack, use wielded weapon even when claw attack isn't the very first\nrename the SLEEPING property and Sleeping attribute to SLEEPY and Sleepy, resp.\ncharacter escape sequence handling during options processing was vulernable\n\tto malformed escapes and could potentially be abused to clobber the\n\tstack and launch a buffer overrun attack\ngive alternate message for \"<mon> turns to flee\" when mon can't move\nall statues in a cockatrice nest were for giant ant if 'record' was empty\nwhen dying outside all shops on a level with multiple shopkeepers and one takes\n\thero's stuff, choose one who is owed money over first one on fmon list\nhero poly'd into a critter without hands could still open tins\nif a vault guard was killed, his inventory would be dropped at <0,0>\nthrowing gold to/at a vault guard will no longer be treated as an attack\nnon-pit traps created in vault guard's temporary corridor would remain after\n\tthe location reverted to solid rock\nusing magic to light vault guard's temporary corridor would produce lit solid\n\trock after reversion, and then yield lit corridor if dug out again\nif hero was blind, killing the vault guard while in his temporary corridor\n\twould leave hero encased in solid rock without informing player\nif hero dragged iron ball into temporary corridor and then killed vault guard,\n\tthe portion of corridor currently in existence would become permanent\non Plane of Water, restrict levitation and flying to air bubbles;\n\telsewhere, restrict them such that they don't work inside solid rock\nwand/scroll/spell of light now hurts gremlins (lamp/candle light doesn't)\nditto for hero in gremlin form (camera too)\nautosearch finds and transforms secret doors and corridors even while blind,\n\tbut it wasn't updating the map to show them unless the hero could see\nfix message typo, \"you sold some items inside <container> for N gold piecess\"\nhangup save made during magic mapping or <foo> detection performed while\n\tunderwater could put hero on top of the water after restore\nfix bug preventing stone-resistant monsters w/o gloves from wielding cockatrices\nitems conferring life drain resistance were affected by drain life spell\n'a'pply command could be used to recogniize undiscovered potions of oil\nfix replacing an existing bones file in wizard mode [load?y, unlink?n, die?y,\n\tsave?y, replace?y] for configurations using external file compression\ntheft of worn armor with wear/unwear delay would interfere with completion of\n\twearing or unwearing some other armor which also imposed a delay\n\t(disrupted wear attempt for +N helm of brilliance would result in loss\n\tof N points of Int and Wis; gauntlets of dexterity had similar problem)\n#sit while swallowed would give the wrong message\nalchemical explosion or evaporation only used up one potion instead of all\n\tthe potions being dipped\nfeedback for reverse-genocide was plural even when just one monster was created\nfix message given when part of a stack of items in a monster's inventory is\n\tbeing destroyed\nadd \"Boing!\" message when hero zaps resistant monster with striking/force bolt\nadjust gaze reflection message when your scales are embedded in your skin\nadjust turning-to-stone or -slime messages when you have no limbs\nwizard mode ^F on Plane of Water marked portal as seen but didn't display it\nmagic mapping now displays furniture in preference to known or remembered traps\n\tor objects and known traps in preference to remembered objects\nrestrictions on diagonal movement were ignored when crawling out of water\nwhen using magic whistle, prevent steed from being affected (trap interaction)\ndeclining to attack a peaceful monster via movement used up nutrition even\n\tthough no action took place\ndeclining to attack a peaceful monster via kicking woke nearby monsters and\n\tscuffed engraving at hero's location even though no action took place\nmake hero be immune from stinking cloud damage during successful prayer\nvery fast hero would sometimes take two consecutive moves with very fast\n\tmonsters then getting two moves, instead of interleaving the activity\nwhen a monster zapped by polymorph drops inventory because of its new form,\n\tdon't let that same zap hit the dropped item(s)\nentering an untended shop while blind gave an inappropriate message\nengraving feedback about partial text when weapon became too dull to finish\n\twas lacking sentence-ending period\nimpossible() might display inaccurate feedback after updating paniclog\nfix crash which occurred if hero was teleported onto a sink while busy putting\n\ton or taking off levitation boots\nfix \"object lost\" panic (or even crash) when dropping multiple items while\n\tlevitating and a lit potion of oil explodes and destroys some inventory\nfix \"object_is_local\" panic when saving bones after hero is killed by explosion\n\tproduced by dropped or thrown lit potion of oil\n\n\nPlatform- and/or Interface-Specific Fixes\n-----------------------------------------\nFreeBSD: compilation problems on FreeBSD 6.1\nlinux: compile support for TIOCGWINSZ by default\nsmartphone: do not translate input when command helper is hidden (fixes \n\tMotorola Q keyboard bug)\nsmartphone: new keypad layouts\nsmartphone: wizard mode command layout\nsmartphone: option to feed arbitrary text as a command to nethack core\ntty: when loading user's run-time configuration, explicitly negating one of\n\t{DEC,IBM,MAC}graphics options after enabling another of them switched\n\tto regular ASCII and left the earlier option inaccurately set to \"on\"\ntty: various bugfixes for very wide and/or tall screens\ntty+GOLDOBJ: dropping or looting by menu wouldn't honor a count for gold\nunix: remove use of parentheses in nethack man page usage that confused a\n\tman page conversion tool\nunix: new -wwindowtype option\nunix: don't clobber old level files if 2nd hangup/disconnect occurs while\n\treconnected user is responding to the \"destroy old game?\" prompt\nunix/Qt: saved games were not found if nethack was built with prefixes in use\nunix,vms: allow digits after first character in name at \"Who are you?\" prompt\nvms: the DLB configuration could fail to build if a file without a dot\n\tin its name happened to match a logical name\nWindows: starting a game with nethack.exe (tty) and saving, then restoring\n\tand finishing with nethackW.exe (win32) would display the high scores\n\toutput in a series of popup windows, one for each line of text\nWindows, probably MSDOS and OS/2: attempting to use very first false rumor\n\tfor cookie fortune or random engraving could produce garbled text\n\twhen rumors.tru had CR+LF line ends instead of Unix-style LF lines\n#if CLIPPING: during teleport or hurtle, re-clip the map immediately instead\n\tof waiting until hero's next move\nwinCE: disable processing of double-click messages if the first click\n\tcauses map to scroll\nwinCE: help text windows close immediately after open (unhandled WM_KEYDOWN in mhtext.c)\nwinCE: correct coordinates used by action button\nwinCE: wrap/unwrap text option for text windows\nwinCE: hardware keyboard detection\nwinCE: hide keypad when hardware keyboard is present\nwinCE: backport message window highlighting from winnt port\nwinCE: new icon with recommended image sizes\npocketpc: menu window closes on up/down keys from first/last position\nwin32gui: better handling of \"more\" prompt for messages that would have scrolled\n\toff the window\nwin32gui: set correct checkmark on \"Lock Windows\" menu item on startup\nwin32gui: redraw message window on resizing (it does not update properly otherwise)\nwin32gui: fixed copy/paste error in read registry settings function\nwin32gui: improved calculation of the size of the menu window\nwin32gui: made auto-arrange windows on/off option (it was reset automatically\n\twhich was unintuitive and in some cases annoying\nwin32gui: fix a possible crash with AltGr-4 WM_KEYDOWN handling\nwin32gui: use whatever alternate tile set is loaded in the menus\nwin32tty: prevent early error messages from flashing by too fast and not seen\nwin32tty: work around problem where display symbols were wrong or unrecognizable\n\ton systems where the default language for non-Unicode programs was not \n\tset to \"US English\" - courtesy Ray Chason\nwin32tty: work around problem where some characters did not show up if the\n\tconsole code page was other than 437\nX11: support dynamic switching of map mode via tiled_map option\nX11: added support for hilite_pet to text map mode\nX11: ensure vertical scrollbar shows up in text display windows\nX11: fix typo in mouse click sanity check; result might have pointed to\n\tspurious location after window resizing\nplatforms that support hangup: SAFERHANGUP to avoid losing objects in transit\n\tbetween lists when hangup occurs, and also avoid cheats due to\n\twell-timed hangups to stop a long melee\nbuild-from-source: dlb utility can handle arbitrary number of files\n\n\nGeneral New Features\n--------------------\nwhen you're teetering on the edge of a pit you can use '>' to enter the pit\nwhen you're flying over a pit you can use '>' to enter the pit\nwhen asked for a direction, a response of '?' yields help and then asks again\nwhen adding an item to inventory, try to stack it with the quiver slot\n\tbefore trying against other carried objects\n#adjust can be used to split an inventory stack\ncockatrice meat has a distinct flavor to some\nwish request for \"<something> armor\" will match item named \"<something> mail\"\nFire Brand and Frost Brand have a chance to avoid taking rust damage\nsupport ^R (and ^L in numpad mode) to request display repaint during direction\n\tchoosing and location choosing prompting modes\nintelligent pets will use keys to unlock doors\ndestroyed drawbridge leaves some iron chains\ngive feedback when a nearby monster grows into a stronger form\nfamiliars are now created without any starting inventory\nusing the 'f' command when quiver is empty will fill quiver with player's\n\tresponse to the \"what to throw?\" prompt\nbreaking a wand with the apply command has a chance to wrest an extra charge\nburying a punishment ball no longer ends your punishment\n#tip command (with M-T shortcut) to empty a container's contents onto floor\nadd clicklook option to allow looking at things on the display by clicking \n\tright mouse button when floating mouse pointer over them\nIzchak's lighting store is now able to stock oil for your lamp\nprovide core support for saving of messsage history in save file\nthe following actions can now be continued after save/restore: digging, \n\teating, studying, removing armor\nhero-created and monster-created ice will eventually melt away\nextend Warning to include ice danger\nwishing for particular variety of tin contents (deep fried, broiled, etc.)\ndebug-mode wishing for random monster(s) via '*'\ndebug-mode viewing of fully identified object descriptions without \n\tactually identifying the objects\nhealth-food store that stocks monk-appropriate foods in mine town when monk\ngive more information about your attributes in debug mode\npolywarn to give intrinsic monster detection of limited species while polymorphed\nrocks can skip on the water sometimes allowing them to pass over water creatures\nvampires can now shapeshift into bats and fog clouds; the latter can be done at \n\twill to slip through locked doors\nshapeshifted vampire will transform back to vampire form after you defeat it and\n\tcontinue to fight in its native form\ncontainer lknown flag for locked/unlocked/broken awareness\ncontainer cknown flag for container content awareness\nplname is stored in the save file on all platforms now\nintroduce support for negation of role, race, align, gender values to eliminate\n\tthem from random selection and the pick list of startup choices\nsome intelligent pets will avoid cannibalism\nkeep track of which monsters were cloned from other monsters\ncloned and revived monsters become worth fewer points than ordinary ones\nnumber_pad:3 run-time option to use inverted phone keypad layout for movement\nnumber_pad:-1 to swap function of y and z keys; z to move NW, y to zap wands\ndisplay spell retention information in the spell menu\ntame ghouls can eat old eggs\nnew effect for reading a scroll of light while confused\nallow digging an adjacent pit with wand of digging while trapped in a pit\n#terrain command to show unobstructed view of map (w/o mons, objs, traps)\ndigging can activate or disarm some types of traps\nsome monsters can eat tins in addition to corpses to cure some ailments\nadd Roderick Schertler's pickup_thrown patch\nadd ability to sort the list when viewing known spells with '+' command\ndescribe magic cancellation from worn armor in enlightment/end-of-game feedback\ndisclose half physical and/or spell damage in enlightment/end-of-game feedback\nrephrase see invisibility enlightenment feedback when unable to see at all\nadd atmospheric sound messages for temples\nsometimes give announcement message when monsters teleport to hero's vicinity\nobsolete config file keywords: GRAPHICS, OBJECTS, TRAPS, EFFECTS\ndeprecated options: IBMGraphics, DECGraphics, boulder\nnew options: symset, roguesymset for choosing a symbol set from the symbols file\nnew config file keyword: SYMBOLS for overriding character symbol values by name\nopening magic frees from bear traps and webs, activates trap doors\nclosing magic activates bear traps and webs\nlocking converts a hole into a trap door; striking does the opposite\nadd Malcolm Ryan's Statue Glyphs patch\nlembas and cram never rot unless cursed\nmultiple squeaks for squeaky boards\ninclude time, user ID, and play mode in paniclog entries\nadd oracle and rumor regarding priestly donations\nanti-magic traps have alternate effect on targets who have magic resistance\nthe Amulet can be offered to Moloch\njavelins and spears now share the same weapon skill\nall stackable weapons are capable of being thrown/shot for multi-shot volleys\nworm teeth and crysknives have become stackable\nimproved container interface\nacid can destroy iron bars\nOPTIONS=playmode:normal|explore|debug to choose mode without command-line\nscore bonus for ascending is reduced or denied for changing alignment\nplayer can give a monster class when asked for type of monster to poly into\nlikewise when asked about type for #monpolycontrol\nboth controlled self-polymorph and #monpolycontrol accept ESC, \"*\" or \"random\"\n\twhen asking for type of monster; ESC aborts #polyself command\nscroll of taming/spell of charm monster now gives some feedback\ndoppelgangers can take on the shape of alternate roles' quest guardians\npile_limit option to control when to switch to \"there are objects here\"\n\tvs listing objects on floor when hero goes over objects while moving\nsome monsters will use fire to prevent selves being turned into green slime\nadd `#vanquished' debug mode command\nC and #name commands are now same and use menu to choose monster vs object\nhallucination provides partial protection against gaze attacks\nattempting to read \"dull\" spellbook might cause hero to fall asleep\ndipping prompt is more precise\nusing F to attack wall/boulder/statue while wielding pick digs/breaks target\nshapechangers shouldn't receive starting inventory of their initial shape\nstreamline old ^X output and integrate it with enlightenment feedback;\n\tnew ^X output includes expanded form of abbreviated bottom line info\n\"killed by X\" becomes \"killed by a chameleon imitating X\" when appropriate\neating disenchanter corpses is now considered risky\nmake '[' command more precise when poly'd hero has embedded dragon scales/mail\nfainting while wielding a cockatrice corpse will be fatal\nSunsword's light radius depends on its curse/bless state\nAdd M-C and M-R meta-key shortcuts for #conduct and #ride, respectively \ncan now use ESC to cancel out of prompts for playing musical instruments\nbeing crowned gives an additional benefit:  one extra skill slot/credit\nchatting to a gecko or shopkeeper while hallucinating gives alternate message\nmimic posing as door might steal hero's key when [un]locking is attempted\npolymorphing into a dragon while wearing dragon scale mail will cause that\n\tmail to revert to dragon scales\nadopt/adapt/improve the Paranoid_Quit patch; default is paranoid_confirm:pray\n\tparanoid_confirm:Confirm when requiring \"yes\" instead of y to confirm,\n\t\t\t\t also require explicit \"no\" to reject\n\tparanoid_confirm:quit    yes vs y to quit or to enter explore mode\n\tparanoid_confirm:die     yes vs y to die in explore or wizard mode\n\tparanoid_confirm:bones   yes vs y to save bones when dying in wizard mode\n\tparanoid_confirm:attack  yes vs y to attack a peaceful monster\n\tparanoid_confirm:pray    y to confirm #pray; supersedes prayconfirm\n\tparanoid_confirm:Remove  always pick from inventory for 'R' and 'T'\nflexibility for specifying \"detect <foo>\" vs \"<foo> detection\" when wishing\nwhen a sokoban puzzle has been completed (last pit or hole filled in),\n\tstop assessing luck penalties and lift most movement restrictions\n'`' command to show discoveries for one class of objects\nadd \"about nethack\" to '?' menu as an alternate way to view 'v'+'#version'\ndisplay version and build information at startup\nrepeatedly setting the fruit option will check to see if fruits have been\n    created, so the user can't easily overflow the maximum this way\nbones files now include extra data to identify dead hero and reason for death\ndipping multiple potions in another potion may only dip part of their stack\nmake being inside a stinking cloud (when not immune or resistant) become a\n\tmajor trouble which is fixable by prayer\nintroduce some variation in monster movement rates\n\n\nPlatform- and/or Interface-Specific New Features\n------------------------------------------------\npcmain: check for dlb_init failure rather than relying on dungeon open failure\nwin32gui: support perm_invent\nwin32gui: menu option to add/remove windows captions\nwin32gui: support for saving/restoring message history\nwin32gui: added menu options \"Copy ASCII Screenshot To Clipboard\" and \"Save \n\tASCII Screenshot To File\"\nwin32tty: support for 'selectsaved' option for menu of existing save files\n\tto choose from at game startup\ntty: add window port routines for saving/restoring message history\ntty: enhanced role, race, &c selection at start of new game\nsmartphone: added \"Type Cmd\" command that allows to type arbitrary commands \n\tusing phone keypad\nsmartphone: added Q(quiver) command to \"Attack\" layout\nsmartphone: fixed F command to prompt for direction\nunix,vms: altmeta option to handle terminals which send \"ESC c\" for Alt+c\n\n\nCode Cleanup and Reorganization\n-------------------------------\nremoved OVLx section dividers previously  used for TRAMPOLINE overlay system\nmove all flags that are system or port specific from flag struct to sysflags \n\tstruct which is used only if SYSFLAGS is defined\nall fields in flags struct are unconditionally present\nmonst cham field now a short and uses mons[] index\nrearrange some monster ordering to follow rule #2 listed at top of monst.c\nchange region player_flags to more appropriate unsigned int instead of boolean\nremove remains of sync_hunger, which has been ifdef'd out for years\nnew mextra structure housing pointers to mname, egd, epri, eshk, emin, edog\nconsolidate vault.h, epri.h, eshk.h, emin.h and edog.h into new mextra.h\nnew oextra structure housing pointers to oname, omonst, omid, olong, and omailcmd\ndrawing symbols for DECGraphics, IBMGraphics, MACgraphics are now stored in an\n\texternal symbol file that can be changed without rebuilding\nnew hints-based configuration system\nallow documentation to be specialized to the options in the game binary\nadd param to winsys ini routines to allow cleaner shifting during startup\n```\n\n## References\n\n1. [↑](#cite_ref-1) <https://web.archive.org/web/20141003124232/http://www.nethack.org/>\n\n*The [NetHack General Public License](/wiki/NetHack_General_Public_License \"NetHack General Public License\") applies to screenshots, source code and other content from NetHack.*\n\nThis content was modified from the original NetHack source code distribution (by splitting up NetHack content between wiki pages, and possibly further editing). See the [page history](https://nethackwiki.com/index.php?title=Leaked_development_version\\&action=history) for a list of who changed it, and on what dates.\n","html":"<!DOCTYPE html>\n<html class=\"client-nojs\" lang=\"en\" dir=\"ltr\">\n<head>\n<meta charset=\"UTF-8\"/>\n<title>Leaked development version - NetHack Wiki</title>\n<script>document.documentElement.className = document.documentElement.className.replace( /(^|\\s)client-nojs(\\s|$)/, \"$1client-js$2\" );</script>\n<script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({\"wgCanonicalNamespace\":\"\",\"wgCanonicalSpecialPageName\":false,\"wgNamespaceNumber\":0,\"wgPageName\":\"Leaked_development_version\",\"wgTitle\":\"Leaked development version\",\"wgCurRevisionId\":150158,\"wgRevisionId\":150158,\"wgArticleId\":23230,\"wgIsArticle\":true,\"wgIsRedirect\":false,\"wgAction\":\"view\",\"wgUserName\":null,\"wgUserGroups\":[\"*\"],\"wgCategories\":[\"NGPL\"],\"wgBreakFrames\":false,\"wgPageContentLanguage\":\"en\",\"wgPageContentModel\":\"wikitext\",\"wgSeparatorTransformTable\":[\"\",\"\"],\"wgDigitTransformTable\":[\"\",\"\"],\"wgDefaultDateFormat\":\"dmy\",\"wgMonthNames\":[\"\",\"January\",\"February\",\"March\",\"April\",\"May\",\"June\",\"July\",\"August\",\"September\",\"October\",\"November\",\"December\"],\"wgMonthNamesShort\":[\"\",\"Jan\",\"Feb\",\"Mar\",\"Apr\",\"May\",\"Jun\",\"Jul\",\"Aug\",\"Sep\",\"Oct\",\"Nov\",\"Dec\"],\"wgRelevantPageName\":\"Leaked_development_version\",\"wgRelevantArticleId\":23230,\"wgRequestId\":\"0ee0ea52217bf5b7989e058b\",\"wgCSPNonce\":false,\"wgIsProbablyEditable\":false,\"wgRelevantPageIsProbablyEditable\":false,\"wgRestrictionEdit\":[],\"wgRestrictionMove\":[],\"wgWikiEditorEnabledModules\":[],\"wgCategoryTreePageCategoryOptions\":\"{\\\"mode\\\":0,\\\"hideprefix\\\":20,\\\"showcount\\\":true,\\\"namespaces\\\":false}\"});mw.loader.state({\"site.styles\":\"ready\",\"noscript\":\"ready\",\"user.styles\":\"ready\",\"user\":\"ready\",\"user.options\":\"ready\",\"user.tokens\":\"loading\",\"ext.cite.styles\":\"ready\",\"mediawiki.legacy.shared\":\"ready\",\"mediawiki.legacy.commonPrint\":\"ready\",\"mediawiki.skinning.interface\":\"ready\",\"skins.vector.styles\":\"ready\"});mw.loader.implement(\"user.tokens@0tffind\",function($,jQuery,require,module){/*@nomin*/mw.user.tokens.set({\"editToken\":\"+\\\\\",\"patrolToken\":\"+\\\\\",\"watchToken\":\"+\\\\\",\"csrfToken\":\"+\\\\\"});\n});RLPAGEMODULES=[\"ext.cite.a11y\",\"site\",\"mediawiki.page.startup\",\"mediawiki.user\",\"mediawiki.page.ready\",\"mediawiki.searchSuggest\",\"skins.vector.js\"];mw.loader.load(RLPAGEMODULES);});</script>\n<link rel=\"stylesheet\" href=\"/load.php?debug=false&amp;lang=en&amp;modules=ext.cite.styles%7Cmediawiki.legacy.commonPrint%2Cshared%7Cmediawiki.skinning.interface%7Cskins.vector.styles&amp;only=styles&amp;skin=vector\"/>\n<script async=\"\" src=\"/load.php?debug=false&amp;lang=en&amp;modules=startup&amp;only=scripts&amp;skin=vector\"></script>\n<meta name=\"ResourceLoaderDynamicStyles\" content=\"\"/>\n<link rel=\"stylesheet\" href=\"/load.php?debug=false&amp;lang=en&amp;modules=site.styles&amp;only=styles&amp;skin=vector\"/>\n<meta name=\"generator\" content=\"MediaWiki 1.32.5\"/>\n<link rel=\"image_src\" href=\"/images/6/65/Nethackwiki-logo.png\"/>\n<link rel=\"shortcut icon\" href=\"/images/6/64/Favicon.ico\"/>\n<link rel=\"search\" type=\"application/opensearchdescription+xml\" href=\"/opensearch_desc.php\" title=\"NetHackWiki\"/>\n<link rel=\"EditURI\" type=\"application/rsd+xml\" href=\"https://nethackwiki.com/api.php?action=rsd\"/>\n<link rel=\"canonical\" href=\"/wiki/Leaked_development_version\"/>\n<!--[if lt IE 9]><script src=\"/load.php?debug=false&amp;lang=en&amp;modules=html5shiv&amp;only=scripts&amp;skin=vector&amp;sync=1\"></script><![endif]-->\n</head>\n<body class=\"mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Leaked_development_version rootpage-Leaked_development_version skin-vector action-view\">\t\t<div id=\"mw-page-base\" class=\"noprint\"></div>\n\t\t<div id=\"mw-head-base\" class=\"noprint\"></div>\n\t\t<div id=\"content\" class=\"mw-body\" role=\"main\">\n\t\t\t<a id=\"top\"></a>\n\t\t\t<div class=\"mw-indicators mw-body-content\">\n</div>\n<h1 id=\"firstHeading\" class=\"firstHeading\" lang=\"en\">Leaked development version</h1>\t\t\t<div id=\"bodyContent\" class=\"mw-body-content\">\n\t\t\t\t<div id=\"siteSub\" class=\"noprint\">From NetHackWiki</div>\t\t\t\t<div id=\"contentSub\"></div>\n\t\t\t\t<div id=\"jump-to-nav\"></div>\t\t\t\t<a class=\"mw-jump-link\" href=\"#mw-head\">Jump to navigation</a>\n\t\t\t\t<a class=\"mw-jump-link\" href=\"#p-search\">Jump to search</a>\n\t\t\t\t<div id=\"mw-content-text\" lang=\"en\" dir=\"ltr\" class=\"mw-content-ltr\"><div class=\"mw-parser-output\"><p>In September 2014, some source-code was leaked, claimed to be Nethack Version 3.5.0.\n</p><p>While the DevTeam has since claimed that the code is not version 3.5.0, they have claimed that the code was written by them, and that variants are welcome to use their code. To avoid confusion, the next version was numbered <a href=\"/wiki/NetHack_3.6.0\" title=\"NetHack 3.6.0\">3.6.0</a><sup id=\"cite_ref-1\" class=\"reference\"><a href=\"#cite_note-1\">&#91;1&#93;</a></sup>.\n</p>\n<h2><span class=\"mw-headline\" id=\"Changelog\">Changelog</span></h2>\n<p>The changelog included with the leak reads as follows and can be found on <a class=\"external text\" href=\"http://pastebin.com/raw.php?i=djZ5X2Hz\">Pastebin</a>.\n</p>\n<pre>$rcsfile: fixes35.0,v $ $Revision$ $Date$\n\nGeneral Fixes and Modified Features\n-----------------------------------\nchange the dreaded \"Stop eating?\" to \"Continue eating?\" with default \"no\"\nsetmangry should not be called when a monster enters a bones region\nbad capitalization of msg when charging for something that catches light\nmissing opthelp for use_inverse\nNever say \"It moves only reluctantly\"\nexpert fireball/cone of cold could not target a monster seen only with\n\tinfravision or ESP\ndisplay \"lotus juice\", not \"lotu juice\" for the fruit juice name\nonly humanoid angelic minions should get/use sword and armor\npaper, straw and wood golems resist cold\nthe options lootabc, showrace, travelcmd, and runmode are now saved\nuse mons[] array offsets in mnum field in save file rather than storing\n\tthe ptr and calculating the distance from beginning of array\ntwo-weapon combat makes two attacks instead of having one attack hit with\n\teach weapon\napply weapon skill to-hit bonus or penalty to bare-handed attacks\nonly give monk's \"cumbersome armor\" message when the armor penalty causes\n\tan attack to miss\ndust vortex-induced blindness should kick in immediately when blindfold\n\tis removed or glop is wiped off\nprayer/unicorn-horn won't fix blindness while still engulfed in a dust\n\tvortex since it will just return immediately\nbeing confused and reading cursed scroll of charging drains your energy\nclass genocide recognizes species name as an example of the class to\n\tgenocide (Martin Snyder)\ninternals: use Is_box rather than explicitly checking what it checks\nfix some unreachable messages (either make then reachable or remove them)\ncan quiver coins when GOLDOBJ is defined\nmake #loot behave same for GOLDOBJ as for !GOLDOBJ\nfor GOLDOBJ, can pick gold up into $ when all 52 letters are in use, and\n\tcan pick non-gold up into unused letter when gold uses one of 52 slots\ngrammar, spelling and other typos\nkeep various delayed killers separate to avoid mixed up messages\ndon't place randomly-placed aquatic monsters in lava on special levels\nhiding monsters don't hide under cockatrice/chickatrice corpses\n\"sound\" option renamed to \"acoustics\"\ndeafness now a full-fledged attribute\nwater should flow into pits from broken wand of digging and drum of earthquake\nobjects that fall thru trapdoors, et al, can break on impact\nsupport engraving in blood in special level files\nmany instances of physical damage were not taking Half_physical_damage\n\tinto account when reducing your hitpoints\nmake it possible for the code to recognize your starting pet throughout the \n\tgame via is_starting_pet(mon) macro\nhealers notice when a wand of undead turning revives a monster so the\n\twand is then identified\nupdate display if bestowed a spellbook while unable to see invisible self\nuse small pool of static buffers for mon_nam() and Monnam()\nAcknowledge Schroedinger's cat at end of game\ngrammar fixes for applying stethoscope to corpses and statues\nplayer polymorphed as a ceiling hider cannot reach the floor, but\n\tautomatically unhide on #sit\ntrappers do not hide on the ceiling\nfix \"You hear The food ration tumbles downwards\" for blinded pit dropping\nsilver arrows weren't causing silver damage on some silver-haters when wielded\nwizard mode: avoid division by 0 crash for level teleport in the endgame if\n\tconfusion overrides teleport control\ndon't #sit on an object in a pit if you're only on the precipice\nfix message when pushing a boulder into a pool while riding\nplural of \"Nazgul\" is \"Nazgul\" not \"Nazguls\"\ntrap messages referring to named steed were ackwardly worded when hallucination\n\toverrode use of the name\nsome actions such as eating corpses off the floor didn't check whether hero\n\tcould reach the bottom of a pit\nusmellmon() instead of \"It turns into it\" during monster polymorph\ngrammar of messages regarding eating artifacts\navoid a message about an invisible monster looking much better\nplayer polymorphed as a xorn could not pick up items in pits\nnon-magical whistles do not work underwater\ntry to restrict whistles and musical instruments to monsters that can blow\ndon't display \"turns to flee\" message for a mimicing mimic\ndon't display \"turns to flee\" message for a monster who has just died\ndipping acid in a fountain could cause an explosion but not destroy the potion\nthrown potions can sometimes hit a steed's saddle\nif your blindfold glows and you're not otherwise blinded, you can see it\nsync default documentation of \"null\" option with the code\ntripping over a cockatrice corpse didn't petrify, even when not wearing boots\ndo not call swamps on the Juiblex level \"moat\" when freezing or drowning;\n\tlikewise for Plane of Water when drowning\nkeep score from wrapping around and becoming negative by capping it\nkicked objects do not slide when on the air or water levels\nadded strsubst() to hacklib\nbe consistent with use of \"removing\" rather than \"lifting\" for encumber \n\tmessages associated with taking things out of a bag of holding\nwhen a giant carrying a boulder dies in a pit, ensure that the corpse is\n\tburied under the filled pit\ncursed scroll of destroy armor damaging cursed armor didn't adjust attributes\nadd passive() flag that indicates uwep was destroyed during the turn\npolymorphed or shapechanged monster sometimes got erroneous hit points\nwhen blind and levitating &gt; shouldn't say \"stairs\" if player has not seen them\na slow-moving monster hidden under a rotting corpse was not immediately\n\tdisplayed when the corpse rotted away\nmimic that ends up on the rogue level should not mimic a closed door\nmimic should not mimic a boulder while on a pit or hole or closed door\ncalculate weight of corpses on special levels correctly\nSting could trigger premature display of orcs during savegame restore\nSting now glows light blue again\nprevent \"offering\" or other words with similar ending from matching ring quote\nmake cleric cast lightning blind as other lightning does\nchange the wording slightly to use \"one of \" when a monster wielding \n\tmultiple daggers thrusts them\nif you didn't see a rolling boulder fall into a pit, you only heard the sound\n\tof it doing so if you were blind\nfire trap was triggered twice in the same turn when melting ice was involved\nabandon the specialized djinn and ghost counters used for potion tuning and\n\tuse the mvitals[].born field instead\nif you were Poison_resistant, only a *blessed* potion of sickness caused\n\tloss of hitpoints\nreviving invisible troll could appear visible until it moves\nadjust some of the shop repair messages\nshopkeeper removal of trap from shop doorway yields an open door instead of\n\ta closed one if an intact open door is present\nguarantee that hostile djinn released from bottles really are hostile\nhandle lava when removing or losing water walking boots\nfix incomplete sentence occuring when unique monster's corpse fell down stairs\nfractured boulders or statues produced inconsistent object settings on the\n\tresulting rocks\nreally fix rolling boulder bug C340-18, the previous \"fix\" reversed the test\nmonster throwing greased weapon has same chance for slip/misfire as player\nkilling a pet by displacing it into a trap now yields experience\nprevent a rolling boulder that is in motion from vanishing in bones files\nensure that a sleeping steed doesn't answer a #chat\neliminate two very minor anomalies when using Luck to adjust random numbers\ndestroying a worn item via dipping in burning oil would not unwear/unwield\n\tthe item properly, possibly leading to various strange behaviors\navoid a panic splitbill when shopkeeper is trapped by the door\ngrammar tidbit for message given when eating tainted meat is also cannibalism\ngas spores shouldn't be described as \"unable to attack\" while hero is praying\nincorrect screen display if engulfer gets turned to stone when trying to\n\tswallow while hero is poly'd into cockatrice\npanic on subsequent move if engulfer gets turned to stone and poly'd hero\n\talso has attached ball&amp;chain\ngive more specific messages when dropping weapons due to slippery fingers\nvarious helmet messages changed to distinguish between \"helm\" and \"hat\"\nhelmets don't protect against cockatrice eggs thrown straight up\nbreaking container contents in a shop didn't always charge for them\nsome types of shop theft of a stack of items only charged for a single one\nsome thefts weren't charged at all even though shopkeeper noticed\nwizard mode: WIZKIT wish for own quest artifact triggered crash at startup\navoid \"your steed is still eating\" message when going through a magic portal\ncannot drink from fountain, sink or surrounding water while swallowed\ndon't hallucinate anything for an exploding black light as it dies\ngive blindness feedback when moving into/through stinking cloud\nfix case on monster name when monster reflects floating eye's gaze\nmonsters \"shrieking in pain\" from a potion didn't wake anything up\ncharge for reviving a shop owned corpse or reanimating a shop owned statue\nfilled trap doors on castle can be re-dug\nmessage order when swapping places with a pet (e.g. into a trap), also use\n\tdifferent term instead of \"displace\"\nflyers can get out of pits more easily than non-flyers\nallow use of the &lt; command to try to exit a pit\nMaster of Thieves as Tourist Nemesis still had STRAT_CLOSE\nco-aligned unicorns in bones could be hostile\nfinding \"something\" posing as a statue while Blind should map_invisible()\nadding more candles than required to total 7 to a candelabrum which \n\talready had between 1 and 6 gave an ungrammatical message\ngive correct message when a spellcasting monster summons other monsters\ncorrect experience calculation for monsters that cause nonphysical damage\nclean up messages when you stop levitation while riding a flying steed\nmonsters evading a kick on noteleport levels would cause a \"teleports\" message\ninterrupt current activity during certain stages of petrification or vomiting\nwarning about bad food didn't recognize tin of Medusa meat\neating tainted Medusa corpse caused food poisioning instead of petrification\navoid potential stale pointer use after magic bag explosion\nnymphs and monkeys can't steal rings worn under gloves\nmonkeys can't steal rings worn under cursed weapon\nsuccubi will remove hero's gloves before taking worn ring; incubi will do\n\tso before forcing ring to be put on\nmbodypart should return forehoof, not foreclaw, for horselike monsters\nfurther digging of an existing hole finishes in a single turn\nonly prefix shopkeeper names with \"Mr.\" or \"Ms.\" when not a personal name\naccount for all attacks when determining max_passive_dmg\ngreen slime should not affect noncorporeal monsters\nland mine explosion will destroy a drawbridge at same location\navoid some more buffer overflows in query buffers containing object names\navoid giving extra information about things that break out of sight\ndipping in acid can erode the dipped object\navoid giving away wand type for near misses while blind\navoid excessive repetition of \"monsters are aware of your presence\"\nmonster's aggravation spell now affects meditating monsters\nhandle pets sooner at end-of-game to avoid message delivery anomalies\nbusy pet won't miss out upon ascension\nfix various places that \"finally finished\" could be displayed after the hero\n\tstopped doing something other than eating\nfix some cases where movement was disallowed but the hero was still conscious\nafter destroying drawbridge, hero could appear to be in the wall\nsometimes shop items which hero is forced to buy could be sold back twice\nnon-empty container dropped but not sold in a tended shop and then picked up\n\tafter that shop became untended could be sold twice in another shop\nvision was not updated when polymorphing a statue into a boulder\nvarious actions--such as enchanting--performed on an unpaid shop object\n\teither force the hero to buy the item (when its value is lowered) or\n\tincrease the current bill (when its value is raised)\n`I u' when carrying single unpaid item listed its cost twice\narmor which auto-curses when worn by hero should do same if worn by monster\nlimit how high accuracy, damage, or protection can become via eating rings\nwhen blinded hero detects a trap by touch, make sure it shows up on the map\nconfused remove curse will cause loss of knowledge of items' curse/bless state\nwith astral vision, the \";\" command should only display \"normal vision\"\n\tfor things that could be seen without astral vision\nreanimating a statue containing gold produced double gold\nprobing the resulting double-gold monster caused \"static object freed\" panic\ncursed wand might explode if used to engrave\nfatal wish from magic lamp left functional magic lamp in bones data\nfatal wish granted by monster left that monster in bones data\ndeath due to dipping potion of acid into a pool left the potion in bones data\nclear prompt from screen after ESC is used to abort \"In what direction?\"\nminor interface changes for interactively manipulating autopickup exceptions\nchatting with quest leader who was brought back from the dead gave warnings\nbecoming green slime or mimicking gold violates \"never changed form\" conduct\nwhen a monster grew into a higher form which had previously been genocided,\n\tthe message explaining its fate was only given if it was sensed via ESP\nhero could still see for brief period after being blinded by potion vapors\navoid crash when thrown potion hits bars before a monster\ndon't give messages about seeing things happen while asleep\nadjust health threshold where wounded hero will be healed by successful prayer\nprotect hero from mind flayer's remote mental blast during successful prayer\nrecognize if hero has already entered Gehennom by means other than usual route\n\tso that prompt can be skipped if Valley's stairs are subsequently used\nonce you've passed the Valley, drawbridge tune is no longer a prayer reward\nfix up grammar and punctuation in variants of shopkeeper's price message\nregression, bug fixed in 3.4.1 reintroduced in 3.4.3:  Sunsword continued to\n\temit light after monster who was wielding got killed\nweaken \"farming\" strategy\ndon't suppress corpse if you kill your own steed\nfix typo in tourist quest leader's greeting\nfix grammar for graveyard sounds when polymorphed\navoid divide by zero crash if Luck drops below -1 while a prayer is in progress\nmake hero inflicted with lycanthropy immune to level drain just like monsters\ndescribe locomotion method accurately when flyers traverse ladders or holes\nwhen there were multiple boulders at a location, moving one of them sometimes\n\tresulted in line-of-sight anomalies\nunicorn can't catch gems if it is asleep or paralyzed\nfix grammar when choking on gold\nprevent lose-level+regain-level cycle from arbritrarily boosting HP and Pw\nprevent polymorphing into \"new man\" at low level from magnifying HP and Pw\nsome messages which referred to \"mirror\" ought to have used \"looking glass\"\nincubi react to mirrors\nlosing a level while polymorphed affects hero's current monster HP as well as\n\tunderlying normal HP\nmind flayer brain eating is subject to certain fatal targets and to cannibalism\nmind flayer can't eat brains of ghost or shade\nalignment of Angels was handled inconsistently\ncorpses of unique monsters in bones behaved incorrectly if revived or eaten\npets capable of digging could pass through walls and stone on the Rogue level\ndon't generate mimics pretending to be closed doors when making Rogue level\nfix pluralization for \"this tin smells like mother-in-laws\" when hallucinating\nforce user-specified fruit name to be singular\navoid false matches when looking up fruit names (\"grapefruit\" isn't \"grape\")\nhandle pluralization of man-at-arms and singularization of men-at-arms\navoid inappropriate \"the corridor disappears\" when vault guard gets killed\navoid inappropriate \"the guard calms down\" if vault guard's magic corridor\n\treaches a spot where gold is embedded in the rock\navoid having vault guard ask hero's name when hero is swallowed\nassigning an artifact name is rejected on objects with similar description to\n\tcorresponding artifact's type rather than just those of the same type\nadjust feedback for gas spore explosion when hallucinating\nadjust message for gas effect from chest trap if hero resists hallucination\ncancelling non-shop objects in a shop's entrance would upset the shopkeeper\ntraps detected by scroll or crystal ball overlooked carried or buried chests\ncan't wish for a trapped box/chest/tin by specifying \"poisoned\"\ngrammar bit if killed by stealing a cockatrice corpse from a monster\nidentified touchstone can rub on gold like the data.base entry says\nrestore the capability of rubbing any object against known touchstone\nbeing petrified by swallowing a cockatrice violates foodless conduct\ndevouring Medusa whole is fatal\ntombstone's reason for death after being killed by mis-returning Mjollnir\n\tvaried depending upon whether it was fully identified\ntombstone's reason for death from kicking an object could include so much\n\tdetail about the object that is was too verbose\nseveral quest messages were worded inappropriately if the hero was blind\na samurai quest guardian message used \"ninja\" where \"ronin\" was intended\nrevive from fainting if vault guard or bribe-demanding demon approaches\ntame flaming spheres and shocking spheres shouldn't pick up items\neating pet won't continue eating after becoming paralyzed or falling asleep\ncan hear the opening or closing of an unseen drawbridge\nprevent \"object lost\" panic caused by accessing freed memory after worn\n\tnon-fireproof water walking boots are destroyed by lava\nstop multi-turn running, searching, or resting early if levitation ends\nrandomize shopkeeper names when hallucinating\nfix wording for \"leprechaun steals gold from between your feet\" when mounted\nCall command could be used to remotely identify which high priest is which\nlarge amorphous, whirly, noncorporeal, or slithy creatures can fit through\n\ttight diagonal gaps despite their size\navoid \"You summoned it!\" for unseen monster produced by same-race offering\nfix monsndx panic which happened after currently moving monster expelled\n\tswallowed hero onto magic trap and was made tame by its effect; taming\n\tno longer replaces monster\nreduced message verbosity when re-entering a temple\nreduced message verbosity when monster with multiple attacks missed wildly\nrecognize \"mindflayer\" as an alternative spelling for \"mind flayer\"\nputting on a never seen ring while blinded won't make the ring a discovery\nzapping a never seen wand while blinded won't make the wand a discovery\nzapping an unID'd wand of teleportation at self will discover it (usually)\nzapping unlocking magic at self while punished will remove attached chain\ntreat mattock as blunt object when forcing locks\nrestore capability to force locks with wielded statue\nonly count successful statue creations against the monster limit in sp_lev.c\ndon't see objects or read engraving when hero changes location (random\n\tteleport) or position (levitation timeout) while asleep or fainted\nunseen wand of striking zapped by unseen monster became known if it hit a door\ntweak knight quest messages\nguidebook grammar bits\nspecial level loader wasn't able to place random door in 1x1 room; could\n\ttrigger divide-by-0 crash for user-developed custom levels\npolymorphed spellbooks may turn blank or be too faint to read\nmake gender of quest leaders and nemeses consistent with data.base and\n\tquest messages\nOrion and Norn should be giant sized\nOrion, Norn, Cyclops and Lord Surtur should be able to tear webs\navoid inappropriate message when using a cursed lamp while blind\nplayer polymorphed as a guardian naga spit the wrong kind of venom\nensure monsters cannot teleport to or be created outside nonpassable bounds\n\tof special levels\ncandles should not be fireproof\nput #define for potion occupant chance and cursed wand zap chance in one place\nrecognize most instances where hallucinatory monster name should be treated\n\tas a personal name (to avoid \"the Barney\") instead of a description\navoid giving misleading or redundant feedback when reading scrolls\nmonsters could end up off the left side of the Ranger quest start level\ncustom arrival message for special levels could be delivered too soon\ncustom arrival message for special levels now supports quest text substitution\nprevent scroll of charging that has already disappeared from showing in the\n\tpicklist of things to charge\ndoors break instead of absorbing the blast of a broken wand of striking\nworms don't have scales, krakens have tentacles, stalkers have a head\nyou no longer \"fry to a crisp\" as a water elemental\nchange leather spellbook to leathery; pertains to appearance, not composition\nmore precise probing/stethoscope feedback when engulfed\nmake baby long worms have lower level than full grown ones\nuse \"your kraken\" instead of \"a kraken\" when searching reveals a tame\n\thidden monster\nMagicbane should not produce \"&lt;something&gt; are confused\" message\nhandle antholes more sensibly when ants aren't available\navoid \"Something's in the way\" message with unidentified wand of locking\ncancelled nurses shouldn't say \"Relax, this won't hurt a bit\"\ncheck for hero location in digactualhole() before clearing u.utrap\nclear any pits that the hero digs in the vault guard's temporary corridor\nbetter handling for Fort Ludios and endgame in wizard mode's `^V&#160;?' menu\nno free lunch for gelatinous cubes eating scrolls of mail\neating gold in front of the vault guard will make the guard angry\ncalculate engulf time differently for non-digestion attacks than for digestion\npreform autopickup and/or report on objects at the spot when a failed #untrap\n\tattempt causes the hero to move onto a trap's location\nshattering a monster's weapon didn't work as intended for stack of N&gt;1\nthrown silver weapon hitting silver-hating poly'd hero got double silver damage\nwielded silver weapon hitting silver-hating poly'd hero lacked silver message\ndon't reveal surface information that you can neither feel or see\nif the hero or a monster is already in a pit don't have them \"fall into a chasm\" \n\tfrom drum of earthquake\nmonsters who ate lizard corpses to cure confusion would lose intrinsic speed\nmonsters couldn't eat lizard corpses to cure being stunned\ncode handling a monster's use of potion or food to cure stoning or confusion\n\twas accessing freed memory after the object had been used up\nproperly handle destruction of equipment carried by monsters hit by\n\tdisintegration breath; life-saving retained conferred properties of\n\tformerly worn items (loss of steed's saddle caused much confusion)\ndon't exercize or abuse wisdom when rumors get used for random graffiti\ndon't exercize wisdom twice for each minor oracle consultation\ndon't welcome the hero to Delphi if the Oracle was angered before first entry\ncreate_object() created lizard corpses without timers and troll corpses with\n\ttheir revive timers, then changed the corpsenm field\nwhen a potion of acid was dropped into water and exploded, nethack would\n\tcontinue to use already freed memory and later might panic or crash\nwhen jumping over an already seen trap, use an() to get appropriate grammar\nfix bad grammar when putting on not-yet-seen Eyes of the Overworld while blind\ndon't \"walk quietly\" while levitating\nshopkeeper polymorphed into animal form can no longer speak\ndon't give attribute adjustment messages (\"you feel wise\") unless the current\n\tvalue actually changes\nfix message handling when multiple shopkeepers are present at end of game\n'C' command can't name shopkeepers or temple priests and other minions\nwhen \"of &lt;deity&gt;\" is intentionally being suppressed, an aligned or high\n\tpriestess would be described as an aligned or high priest\nspecifying role and/or race along with an invalid alignment for it/them in\n\tNETHACKOPTIONS or config file would yield a prompt which misleadingly\n\tmentioned the rejected alignment when asking player to pick alignment\ntemple donation can recover protection previously stolen by attrcurse attack\n\teven when protection amount is so big that no increment would be given\nmeditating monsters stop meditating when affected by something which wakes\n\tsleeping mosnters\nmonsters capable of hiding can't do so when trapped or while holding you\nlimit recursive calls to spoteffects (poly'd hero fell into water, reverted\n\tto human because of it, fell into same water, then crawled out twice)\nensure that the punishment ball and chain make it into the save file after being\n\ttemporarily orphaned from the normal chains in the swallowing code\ndisplay the invisible monster glyph ('I') whenever an unseen monster forces\n\tpoly'd hero out of hiding\ncharge for thrown wand that shatters into a thousand pieces in a shop\nwielded light source susceptible to water gets extinguished when weapon rusts\ndon't discover unknown bag of tricks when monster it releases is undetected\nescape the deleted trap after performing the invocation while trapped\nuse alternate phrasing when life drain attack affects non-living creature\nbypass \"wait! there's a creature hidden there\" when attacking a hidden monster\n\tsensed by ongoing monster detection\nremove makedefs.c dependency that time_t and long are the same size\nterminal window set to 21 lines can cause a crash during player selection \n\tmenus; have bot() check for valid youmonst.data\nmake region ttl field a long instead of short to get rid of lint warnings\n\tabout a possible loss of data\nfree storage used to hold region messages in free_region()\nhonor pushweapon when applying a tool or weapon causes it to become wielded\nin the quest, if the locate level hasn't been reached yet, don't fall or\n\trandomly teleport past it\nfix phrasing in monster against monster attack feedback when attacker is\n\twielding stacked weapons\npushing a boulder onto a level teleporter trap could issue repeat messages\nif shopkeeper or priest gets teleported while inside his shop or temple,\n\tgive locations inside that room preference when choosing destination\ndon't place hero on top of monster when arriving on level which is so full\n\tthat the monster can't be moved out of the way\ntame/peaceful grabber/engulfer will release hero after conflict ends\nany grabber will release hero if it moves away while confused/stunned/afraid\nmake changes in hallucination be reflected by changes in mimickery feedback\nhave to see a divine gift in order to have it become a discovery\nhonor the never-in-hell flag when selecting random monster type for corpses,\n\teggs, figurines, and statues created in Gehennom\nhero is not subject to light-based blindness while fainted from hunger\nadd Unaware pseudo-property to suppress various messages while unconscious\nengraving while underwater should use surface() which handles that case\nprevent obj_is_local panic during bones creation when splattered burning oil\n\tfrom a thrown potion of oil kills the hero\ndon't leave lit potion intact when splattered burning oil from broken floor\n\tpotion kills the hero\nfix region timeout detection, caused strange display of stinking cloud\n\twhile wearing the Eyes of the Overworld\ntry to keep migrating monsters from escaping the wizard tower\naffected monsters should always respect \"Elbereth\"\ntry harder to keep dragged chain between ball and hero\nfireproof containers should not burn in lava\nmissile which kills engulfer will now be placed prior to hero's return to map\nfix invalid pointer dereference after applying a wielded cream pie\navoid drowned in a drowning and burned by burning if life-saving is inadequate\nbugles affect all monsters to some extent\nnurses are affected if player is polymorphed as a cockatrice\ngetting a particular rotten food result can't make attempting to eat a\n\tcorpse of one of the Riders be survivable\npad shortest rumors to improve distribution of delivered rumors\nwake up sleeping steed when putting on saddle or mounting\nreveal hidden monsters who change levels or are magically summoned\nhero can't carry an unlimited number of boulders when poly'd into a giant\nstop wielding cockatrice corpse which triggered own death followed by life-save\nformat various prompts to avoid \"Query truncated\" entries in paniclog\nprevent very large number of objects in # inventory slot from causing\n\tbuffer overflow\n!fixinv config was using arbitrary characters instead of # for invent overflow\nfor inventory display, include cost info on hero-owned containers holding\n\tshop goods\nshops now claim ownership of items created by using an unpaid horn of plenty\nshopkeepers shouldn't refer to non-male character as \"cad\"\ntweak levitation timeout if trap is being triggered on same turn it is to end\ndon't report death by petrification if cockatrice kills hero via HP loss\nRiders are immune to green slime\nRider corpses can't be engulfed by gelatinous cubes\nif Rider corpse revival fails, usually try again later instead of rotting away\nwielding a cloak of magic resistance or gray dragon scales, or carrying one in\n\talternate weapon or quiver inventory slot, conferred magic resistance\n\tto polymorphed hero\nwielding a potion of blindness or carrying one in alternate weapon or quiver\n\tslot conferred resistance against light-based blindness to any hero\nworn item transformed by polymorph remains worn if feasible\nzapping closing or breaking magic up or down from beneath an open drawbridge's\n\tportcullis failed if bridge orientation was north-to-south (Valk quest)\ncan't dip or apply grease to a worn item that's covered by another worn item\nsinking into lava didn't track passage of time properly\nsinking into lava eventually burns away slime; sitting in it always does\nafter escaping lava by foot, if hero doesn't move he'll fall back in\nsuppress corpse from bones data if death is due to being dissolved in lava\nsuppress \"you rise from the dead\" if game ends due to be turned into slime\nhero poly'd into stone golem and wielding cockatrice corpse casts stone-to-\n\tflesh at self to become flesh golem will revert to stone if no gloves\ndon't give erroneous \"&lt;mon&gt; disppears\" message for hero poly'd into quantum\n\tmechanic who hits engulfer while swallowed and blinded\ndemon lords/princes can't be summoned to the elemental or Astral planes\nfeedback from casting spell of protection was wrong in some situations\ncan't engrave on floor while inside solid rock, wall, or closed door\nsame-race sacrifice can't damage high altars\nallow corpses on floor to be offered at high altars\nallow hero to attempt to offer the Amulet at ordinary altars\nshooting range for crossbow isn't affected by strength; multi-shot volley is\nremove engravings at drawbridge location when it is opened, closed, or wrecked\nmonster killed in midst of multi-shot volley throwing/shooting might cause\n\tfreed memory to be accessed, potentially triggering a crash\nright-handed boomerang throw travels counterclockwise\ncan't arm bear traps or land mines on Planes of Air or Water\nstatues that \"come to life\" when trap activates shouldn't start out sleeping\nshopkeepers and priests wouldn't step on graves put in their rooms by bones\ncan't throw if poly'd into form which lacks hands\nmonsters can use ranged attacks over/around boulders, same as hero\ncan't eat an artifact you're unable to touch\nattempting to kick beyond map edge performed an out of array bounds memory\n\taccess; symptom seen was \"show_glyph: bad pos\" warning when blind\nattempting to engrave with an empty wand should always use a turn\ndon't access freed memory after engraving \"wrests one last charnge\" from wand\na magic portal could be rendered inactive for the hero if a successful\n\thangup save took place during level change; leaving the level by any\n\tmeans other than triggering the portal would reactivate it\ncan't drop part of a stack of N weapons welded to hero's hand\npickup still accepts m as command prefix, but now rejects F,g,G,M,numpad 5\nscatter piles of kicked gold rather than move the entire pile at once\nhero wasn't allowed to affix candles to the candelabrum while underwater\nnon-unicorn horn healing magic which cures sickness now also cures vomiting\nvomiting/nauseated state is included in enlightenment feedback\nvomiting countdown actually triggered the final vomit code twice\nrats aren't capable of vomiting\nfireproof, non-rustable weapon would be revealed as fireproof by hitting a\n\trust-causing target; ditto for fixed crysknife\nsurviving choking while eating various foods (cockatrice egg, fortune cookie,\n\twolfsbane, others) didn't carry through to those foods' side-effects\nshapechangers who take on mimic or hider form will mimic or hide when feasible\navoid War message if tinning a Rider corpse fails\nprevent long messages from triggering access violation or segmentation fault\n\tdue to buffer overflow in pline()\ncursed corpse wielded by a monster isn't welded to its hand or paw\nfix grammar errors in samurai quest, wakarimasu ka?\nfix spelling of Dr Dolittle\nhero's sleep resistance shouldn't protect steed from sleeping gas trap\n#jump attempt fails if mounted on sleeping steed; jumping spell still works\ndropped wielded, in use leash should remain in inventory, since it's in-use\nwielded, in use leash can't be snatched by whip-wielding monster\nwhen using two weapons at once, whip-wielding monster can target either one\nif normal game save file is restored via `nethack -X', restore in normal\n\tmode--with save file deletion--and require confirmation ala 'X'\n\tcommand to make deferred switch into explore mode\ncan't #force floor item while engulfed, levitating, or unskilled riding\ncan't lock or unlock doors while engulfed\nif hero or monster standing on opened drawbridge survives its destruction,\n\tfall into water or lava instead of remaining on top\ndon't give a speed change message when an immobile monster is seen to be hit\n\tby a wand of speed or slow monster\nwhen shopkeeper \"gratefully inherits possessions\" of hero who dies in shop\n\tdoorway without owing the shop, move those items inside shop for bones\ndying in a shop while wielding two weapons could cause \"Setworn: mask\" warning\nmake score file processing more bullet proof to avoid potential security issue\nstethoscope applied to hiding mimic will bring it out of hiding\nrephrase \"&lt;artifact&gt; evades your grasp\" message if artifact is already held\nartifacts which subsequently evade your grasp/control after already being\n\tworn or wielded become unworn/unwielded\ntowel equipped in weapon, alternate weapon, or quiver slot can be applied\nlit candle or potion of oil which burned out while equipped would leave stale\n\tweapon/alternate-weapon/quiver pointer that could cause panic or crash\nwielded/worn figurine which auto-transformed had same stale pointer bug\nlikewise with casting stone-to-flesh on self for figurine of non-veggy monst\nformat names of not yet id'd artifacts such that obj type shows for non-weapons\nhero with lycanthropy is vulnerable to silver in both human and beast form\nchanging alignment or shape triggers a check for equipment evading hero's grasp\npassive fire effects can damage attackers' weapons\nmake quest leader and nemesis be unlikely to be affected by traps\nwielded bow shouldn't affect outcome of kicked arrows\nranged polearm hit can divide puddings and can use confuse monster effect\ncharge for kicked shop-owned food if it gets used up taming a monster\ngive better feedback when thrown shop-owned food gets used up taming a monster\neffect of negative AC on damage received was calculated differently than\n\tnormal when deciding whether hero poly'd into pudding would split\nuse a more precise jumping path for far, non-straight line destinations\nunicorn horn produced by revived monster will polymorph as if non-magic\nstone-to-flesh on any golem statue or golem figurine creates flesh golem\nstone-to-flesh which activates shop-owned figurine entails shop charges\nmake giants be less likely to be randomly generated in Sokoban\nbear traps dish out some damage on initial entrapment\nbear traps and webs are harmless to water elementals\nhero with polymorph control and inflicted with lycanthropy can specify own\n\twerecritter or human werecritter monster types as polymorph target\nhero undergoing semi-controlled polymorph won't also undergo sex change\nwhen doppelgangers taking on new shape don't specifically pick nasty monster\n\tor role monster, bias the random form towards humanoid\nsalamanders can use green slime corpses to cure themselves of petrification\nincrease damage bonus applies when kicking while polymorphed into a monster\n\tform which has a kicking attack, just like for other kicks\nfeedback about summoned monsters may use singular when it should use plural\nif magically removing steed's saddle is fatal, don't leave it saddled in bones\ncharging prompt used wrong criteria when deciding whether to list rings\nrogue's backstab bonus doesn't apply for throwing attacks\nhiding monsters who are unhidden when hero leaves a level can hide upon return\ntouching a pile of objects while blind affects hero even when the pile is\n\tbig enough to give \"there are many objects here\" and not list them\nexplosion while engulfed only affects engulfer and hero, not adjacent monsters\neliminate case-sensitivity when converting words from singular to plural and\n\tvice versa, so some failing wishes like \"Gauntlets of Power\" now work\nbreath attack directed at self by poly'd hero always hits\nan orc (or gnome) will respond to #chat if hero is also an orc (or gnome)\noverride non-silver vs shades for artifacts which deal extra damage to undead\nassorted mirror fixes--mainly visibility issues\nkicking at \"empty space\" has side-effects so should use current turn\nusing weapon to kill tame engulfer from inside triggered \"placing defunct\n\tmonster onto map?\" warning\nsome monsters can't be strangled; self-polymorph can stop/restart strangulation\nnymphs could steal carried boulders\namnesia of object discoveries would never forget the very last one\nre-adjust gem generation probabilities when revisiting existing dungeon levels\nkick evasion shouldn't move monsters through walls\nkick evasion and jousting/staggering blows shouldn't move grid bugs diagonally\n#untrap didn't check whether hero could reach the ground\ndigging/chopping a closed drawbridge message mentioned digging a \"wall\"\nattacking via applied polearm now honors the \"confirm\" option\nengulfer under influence of conflict or confusion could swallow monster at\n\twater/lava/trap spot and not be affected by destination til next move\nunicorn horn restoration no longer overrides sustain ability characteristic\nhider monster revived from corpse would start out hidden (even if own corpse\n\twas only object around to hide under)\nfix sequencing issues with dropping #invoked Heart of Ahriman\napplying an unpaid stack of potions of oil forced hero to buy all of them\n\tinstead of just the one which got split off and lit\nsometimes when hero is forced to buy an unpaid shop item its price changed\nmonster could attack with a polearm even after attempt to wield that failed\nsometimes got \"you trip over it\" after intervening messages following the\n\tone which described \"it\"\nwizard mode: WIZKIT wishes could overflow inventory's 52 slots\ncode controlling item drops by small monsters still used pre-3.1.0 weight\nmonsters who want the Amulet won't attack the Wizard to try to get it\nwhen loading bones files, censor suspect characters from player-supplied\n\tstrings such as pet and fruit names\nopening or closing the castle drawbridge via music consumes a turn\ncan't swap places with tame grid bug when moving diagonally\ncan't move diagonally through a long worm's body (can still fight that way)\nrequire confirmation to read a scroll of mail if doing so will be the first\n\tviolation of illiteracy conduct\ncould get \"suddenly you cannot see the &lt;mon&gt;\" while invisible mon remained\n\tdisplayed due to telepathy or extended detection\ncutting a long worm in half would trigger segfault/accvio crash if the hit\n\ttook parent down to 1 hit point or if long worms had become extinct\ncutting a level 0 long worm in half produced a new worm with 0 hit points\nusing F to force an attack towards a boulder gave \"you attack thin air\"\nrandom \"treasure drop\" upon monster's death bypassed dropping side-effects\nmelted ice on Valkyrie quest should be pool, not moat\nsome variations of attempting to use open or close commands on a drawbridge\n\tdidn't give drawbridge-specific feedback\ntin contents can now sometimes be accessed on the same turn that the tin\n\tstarts being opened; when not, the opening feedback is more accurate\nNth adjustment of feedback when observing a pet eating\nmonsters who want the Amulet won't attack temple priests to try to get it\nblinded invisible hero can't see self as invisible via ';' or '/'\nit was possible to generate an object of 0 gold pieces by dropping 2**32 gold\nwizard mode's sanity_check option missed nested containers and migrating mons\nalways update map display and use up turn if open or close command attempted\n\twhile blind reveals change in door state or discloses non-door spot\na hangup save while picking up gold from shop floor could duplicate that gold\nsecret door detection's trap finding is no longer blocked by water or clouds\n\ton the Planes of Water and Air\npotion thrown by monster which hit a long worm's tail gave feedback about\n\thitting its head\nimplement energy vortex's previously unused energy drain attack\nchanging alignment type resets alignment record to 0 (nomimally aligned)\njellyfish do not technically have a head\nwhile polymorphed, suppress attribute gain/lose earned by pre-poly exercise\nwizard mode #monpolycontrol prompting asked about \"it\" when monster was unseen\nreprompt if player fails to make a menu choice during inventory identification\npotion explosion during failed alchemy should awaken nearby monsters\nseen eels who were stuck in isolated pools would never re-hide\ncan no longer get both strength and resistance from eating one giant corpse\naborting key/lock pick usage via ESC at direction prompt no longer uses a move\nlit south wall of C quest leader's room contained dark gap at secret door spot\nwhen probing from inside an engulfer, \"not carrying anything\" overlooked hero\narcheologist shouldn't start with sling skill by carrying slingable touchstone\nwearing or removing an amulet of restful sleep clobbered permanent sleepiness\nif attempt to select a co-aligned artifact for first divine gift fails because\n\tnone is available, choose one from among nonaligned artifacts\nensure current_fruit gets set to the correct index when setting fruit\n\toption to existing entry whose fid is not the highest\nmonsters already wearing suits can't put on shirts\nif breaking a wand of polymorph causes hero to drop items, don't transform them\ngive \"shuddering vibrations\" feedback if breaking a poly wand uses up items\nif polymorph causes a monster to drop items, they won't be used up via\n\tshuddering vibrations or as golem creation fodder\nmonsters who ate green slime corpses weren't turned into green slime\n\"hand slip\" while naming an object would never pick 'z' as a substitute letter\nhero would \"gladly take off &lt;armor&gt;\" for nymph or succubus even while asleep\nconcealed mimic wasn't revealed if kicking attmpt yielded a clumsy miss\ntoo accurate feedback given to a blinded hero when a monster summons insects\nif life-saved steed became untame, repeated \"placing steed onto map?\" warnings\n\twould be given as long as the hero remained mounted\nmessage sequencing for fatal explosions was confusing if feedback was given\n\tfor carried items being destroyed\nwhen dipping something in holy/unholy water, only learn its new bless/curse\n\tstate if hero sees it glow\ndescribe lit Sunsword as shining rather than glowing\nprevent poly'd shopkeepers from taking on forms that can't handle objects\nattempting to move direction 'u' as a grid bug performed #untrap command;\n\tthe other diagonals reported \"unknown command\" instead of \"you can't\"\nmimic posing as statue or corpse now picks and maintains particular monst type\ntrying to move down while levitating said \"you are floating high above floor\"\n\teven when being stuck in floor or lava blocked full levitation\nwhen levitating, don't show '&gt;' as a likely direction for digging\npoly'd or mimicking hero who was hidden from monsters would still be treated\n\tas a normal target for their ranged attacks\nhero would remain stuck to an adjacent monster after rehumanizing if he had\n\tbeen attacked while hiding via #monster when poly'd into a small mimic\nhero poly'd into mimic and hiding as an object via #monster didn't unhide\n\twhen polymorphing into non-mimic\nattacking via applied polearm never scuffed engraving underneath hero\nauto-wielding a polearm took no time if ESC was used to cancel target choice\napplying a bullwhip while at very edge of map could target beyond edge,\n\tpotentially leading to a panic or crash\nprevent temple priests and minions from wearing helms of opposite alignment\n'D' drop command didn't handle 'u' choice correctly if the only unpaid items\n\twere inside containers\npearl rings shouldn't rust\nshouldn't be able to read a worn T-shirt when it's covered by a worn suit\nsimplify hero placement on Castle level when climbing up stairs from Valley\nspell attack by low-Int hero could inflict negative damage\nsome wand/spell/breath zaps that hit a secret door failed to reveal it\nwand explosion feedback about adjacent door was phrased as if for a wand zap\nimprove the message sequencing when a thrown poisoned weapon loses is poison\nmessage \"You hit the  with all your might.\" could be issued if a boulder\n\twent away while it was being dug/broken with a pick-axe\nprevent \"object lost\" panic if/when drinking a wielded potion of polymorph\n\tcauses hero's new form to drop weapon\ndocumentation tidbit:  change Guidebook and in-game help for pickup_burden\n\toption to match game's 'O' command (\"Unencumbered\", not \"Unburdened\")\nwriting while blind no longer possible for books, might fail for scrolls\nblanking items in pools while blind shouldn't reveal new obj description\n\tfor ones which had been seen before becoming blind\navoid infinite loop in topten output when killed by long-named monster\ngrid bug could move diagonally 1 step using travel command\nattempting to open, close, or lock/unlock a door while confused or stunned\n\tuses up a move regardless of whether direction choice finds a door\ngrammar fixes for vault guard messages given after player assigns guard a name\nwearing cloak of displacement auto-discovered it even when hero couldn't see\nwearing elven cloak auto-discovered it even when already stealthy\nputting on ring of stealth never auto-discovered it\nforgetting spells due to amnesia now sets memory retention to zero instead\n\tof removing them from hero's list of known spells\nshouldn't have been able write scrolls by guessing type name when they're\n\tonly partly known via name assignment\nscrolls given names can be written by assigned name as well as by description\nfix writing feedback \"the spellbook warps strangely, then turns parchment\"\nmake stone artifacts usually resist stone-to-flesh\nwhen reading an unknown scroll and learning it, discovery of teleporation was\n\ttoo late if hero happened to land on another scroll of teleportation\nusing an unlocking tool on a closed door which was actually a mimic reported\n\tthat there was no door to unlock instead of exposing the mimic\npurple worm could end up in wall or solid rock when swallowing ghost or xorn\nunpaid shop items stolen from hero by a monster remained on hero's shop bill\n#untrap toward known trap location containing concealed mimic would yield\n\t\"{The mimic|It} {is in the way|isn't trapped}.\" but not reveal mimic\nsome actions taken when blind would yield \"Wait!  That's a monster!\" (for a\n\tmimic posing as a door) but not display the unseen monster glyph\nenhance life-saving by preventing subsequent poison from being fatal upon\n\trescue from death due to spiked pit, dart trap, or poisoned missile\ndon't create mail daemons when populating special levels with random demons\nteleport control and polymorph control are ineffective while hero is stunned\ndon't report \"fried to a crisp\" for disintegration from divine wrath\nwhen polymorphed into an opposite sex monster, if you then become a new\n\thuman while failing to polymorph into something else, you'd be told\n\t\"you feel like a new man\" for female or \"a new woman\" for male  \nspellcasting monsters' spell selection became less likely to choose harder\n\tspells as their level got higher (including Wizard's \"double trouble\")\nEye of the Aethiopica, Eyes of the Overworld, and Sceptre of Might must be\n\tworn or wielded rather than just carried to convey magic resistance\nMitre of Holiness and Tsurugi of Muramasa convey Protection when worn/wielded\neffectiveness of magic cancellation by worn armor has been reduced\nProtection improves the effectiveness of magic cancellation\nthe weight of a non-cursed bag of holding was sometimes off by 1 unit\nfor number_pad:2 (MSDOS compatibility), M-5 (Alt+5, or Shift+keypad5 using\n\tMSDOS/Windows keystroke hackery) didn't function as G movement prefix\nif an angry shopkeeper chased the hero to a different level and then got paid\n\toff, he'd dismiss kops on that other level but not on his shop level\nobjects inside the Wizard's Tower can't be teleport to outside and vica versa\ndying in lava and being life-saved or leaving bones would destroy ring of\n\tfire resistance if it happened to be made of wood, and also burn up\n\tscrolls of fire and spellbook of fireball\nsurviving in lava boils away carried potions, but dying in lava and being\n\tlife-saved or leaving bones would keep them intact\nwhen applicable, give \"your body rises from the dead as an &lt;undead&gt;...\"\n\teven when bones data isn't being saved\nunlit candelabrum would become unlightable if its candles had exactly 1 turn\n\tof fuel left and it was applied anywhere other than the invocation spot\nhave shk claim ownership of worn saddle dropped by dying pet if hero is\n\tnot within the same shop at the time of the drop\ntemporary loss of Dex from wounded legs will become permanent if it occurs\n\twhile mounted and hero dismounts before steed's legs have healed\nfor poly'd hero hiding on ceiling who gets attacked, make attacker's position\n\tbe an eligible location for hero when vacating hero's spot for attacker\n\tto prevent ending up far away under crowded conditions\nfor poly'd hero hiding on ceiling, attack by sea monsters won't move them\n\tinto hero's position unless it is over water or they're already on land\nfor poly'd hero hiding on ceiling, attack by long worm might fill hero's\n\tdestination with worm's tail, so double check and maybe choose again\npoly'd hero can't hide on floor or ceiling when on Planes of Air or Water\nwhen shop prices are adjusted, handle roundoff (integer truncation) better\nfor hero poly'd into a monster form that lacks a weapon attack but has a claw\n\tattack, use wielded weapon even when claw attack isn't the very first\nrename the SLEEPING property and Sleeping attribute to SLEEPY and Sleepy, resp.\ncharacter escape sequence handling during options processing was vulernable\n\tto malformed escapes and could potentially be abused to clobber the\n\tstack and launch a buffer overrun attack\ngive alternate message for \"&lt;mon&gt; turns to flee\" when mon can't move\nall statues in a cockatrice nest were for giant ant if 'record' was empty\nwhen dying outside all shops on a level with multiple shopkeepers and one takes\n\thero's stuff, choose one who is owed money over first one on fmon list\nhero poly'd into a critter without hands could still open tins\nif a vault guard was killed, his inventory would be dropped at &lt;0,0&gt;\nthrowing gold to/at a vault guard will no longer be treated as an attack\nnon-pit traps created in vault guard's temporary corridor would remain after\n\tthe location reverted to solid rock\nusing magic to light vault guard's temporary corridor would produce lit solid\n\trock after reversion, and then yield lit corridor if dug out again\nif hero was blind, killing the vault guard while in his temporary corridor\n\twould leave hero encased in solid rock without informing player\nif hero dragged iron ball into temporary corridor and then killed vault guard,\n\tthe portion of corridor currently in existence would become permanent\non Plane of Water, restrict levitation and flying to air bubbles;\n\telsewhere, restrict them such that they don't work inside solid rock\nwand/scroll/spell of light now hurts gremlins (lamp/candle light doesn't)\nditto for hero in gremlin form (camera too)\nautosearch finds and transforms secret doors and corridors even while blind,\n\tbut it wasn't updating the map to show them unless the hero could see\nfix message typo, \"you sold some items inside &lt;container&gt; for N gold piecess\"\nhangup save made during magic mapping or &lt;foo&gt; detection performed while\n\tunderwater could put hero on top of the water after restore\nfix bug preventing stone-resistant monsters w/o gloves from wielding cockatrices\nitems conferring life drain resistance were affected by drain life spell\n'a'pply command could be used to recogniize undiscovered potions of oil\nfix replacing an existing bones file in wizard mode [load?y, unlink?n, die?y,\n\tsave?y, replace?y] for configurations using external file compression\ntheft of worn armor with wear/unwear delay would interfere with completion of\n\twearing or unwearing some other armor which also imposed a delay\n\t(disrupted wear attempt for +N helm of brilliance would result in loss\n\tof N points of Int and Wis; gauntlets of dexterity had similar problem)\n#sit while swallowed would give the wrong message\nalchemical explosion or evaporation only used up one potion instead of all\n\tthe potions being dipped\nfeedback for reverse-genocide was plural even when just one monster was created\nfix message given when part of a stack of items in a monster's inventory is\n\tbeing destroyed\nadd \"Boing!\" message when hero zaps resistant monster with striking/force bolt\nadjust gaze reflection message when your scales are embedded in your skin\nadjust turning-to-stone or -slime messages when you have no limbs\nwizard mode ^F on Plane of Water marked portal as seen but didn't display it\nmagic mapping now displays furniture in preference to known or remembered traps\n\tor objects and known traps in preference to remembered objects\nrestrictions on diagonal movement were ignored when crawling out of water\nwhen using magic whistle, prevent steed from being affected (trap interaction)\ndeclining to attack a peaceful monster via movement used up nutrition even\n\tthough no action took place\ndeclining to attack a peaceful monster via kicking woke nearby monsters and\n\tscuffed engraving at hero's location even though no action took place\nmake hero be immune from stinking cloud damage during successful prayer\nvery fast hero would sometimes take two consecutive moves with very fast\n\tmonsters then getting two moves, instead of interleaving the activity\nwhen a monster zapped by polymorph drops inventory because of its new form,\n\tdon't let that same zap hit the dropped item(s)\nentering an untended shop while blind gave an inappropriate message\nengraving feedback about partial text when weapon became too dull to finish\n\twas lacking sentence-ending period\nimpossible() might display inaccurate feedback after updating paniclog\nfix crash which occurred if hero was teleported onto a sink while busy putting\n\ton or taking off levitation boots\nfix \"object lost\" panic (or even crash) when dropping multiple items while\n\tlevitating and a lit potion of oil explodes and destroys some inventory\nfix \"object_is_local\" panic when saving bones after hero is killed by explosion\n\tproduced by dropped or thrown lit potion of oil\n\n\nPlatform- and/or Interface-Specific Fixes\n-----------------------------------------\nFreeBSD: compilation problems on FreeBSD 6.1\nlinux: compile support for TIOCGWINSZ by default\nsmartphone: do not translate input when command helper is hidden (fixes \n\tMotorola Q keyboard bug)\nsmartphone: new keypad layouts\nsmartphone: wizard mode command layout\nsmartphone: option to feed arbitrary text as a command to nethack core\ntty: when loading user's run-time configuration, explicitly negating one of\n\t{DEC,IBM,MAC}graphics options after enabling another of them switched\n\tto regular ASCII and left the earlier option inaccurately set to \"on\"\ntty: various bugfixes for very wide and/or tall screens\ntty+GOLDOBJ: dropping or looting by menu wouldn't honor a count for gold\nunix: remove use of parentheses in nethack man page usage that confused a\n\tman page conversion tool\nunix: new -wwindowtype option\nunix: don't clobber old level files if 2nd hangup/disconnect occurs while\n\treconnected user is responding to the \"destroy old game?\" prompt\nunix/Qt: saved games were not found if nethack was built with prefixes in use\nunix,vms: allow digits after first character in name at \"Who are you?\" prompt\nvms: the DLB configuration could fail to build if a file without a dot\n\tin its name happened to match a logical name\nWindows: starting a game with nethack.exe (tty) and saving, then restoring\n\tand finishing with nethackW.exe (win32) would display the high scores\n\toutput in a series of popup windows, one for each line of text\nWindows, probably MSDOS and OS/2: attempting to use very first false rumor\n\tfor cookie fortune or random engraving could produce garbled text\n\twhen rumors.tru had CR+LF line ends instead of Unix-style LF lines\n#if CLIPPING: during teleport or hurtle, re-clip the map immediately instead\n\tof waiting until hero's next move\nwinCE: disable processing of double-click messages if the first click\n\tcauses map to scroll\nwinCE: help text windows close immediately after open (unhandled WM_KEYDOWN in mhtext.c)\nwinCE: correct coordinates used by action button\nwinCE: wrap/unwrap text option for text windows\nwinCE: hardware keyboard detection\nwinCE: hide keypad when hardware keyboard is present\nwinCE: backport message window highlighting from winnt port\nwinCE: new icon with recommended image sizes\npocketpc: menu window closes on up/down keys from first/last position\nwin32gui: better handling of \"more\" prompt for messages that would have scrolled\n\toff the window\nwin32gui: set correct checkmark on \"Lock Windows\" menu item on startup\nwin32gui: redraw message window on resizing (it does not update properly otherwise)\nwin32gui: fixed copy/paste error in read registry settings function\nwin32gui: improved calculation of the size of the menu window\nwin32gui: made auto-arrange windows on/off option (it was reset automatically\n\twhich was unintuitive and in some cases annoying\nwin32gui: fix a possible crash with AltGr-4 WM_KEYDOWN handling\nwin32gui: use whatever alternate tile set is loaded in the menus\nwin32tty: prevent early error messages from flashing by too fast and not seen\nwin32tty: work around problem where display symbols were wrong or unrecognizable\n\ton systems where the default language for non-Unicode programs was not \n\tset to \"US English\" - courtesy Ray Chason\nwin32tty: work around problem where some characters did not show up if the\n\tconsole code page was other than 437\nX11: support dynamic switching of map mode via tiled_map option\nX11: added support for hilite_pet to text map mode\nX11: ensure vertical scrollbar shows up in text display windows\nX11: fix typo in mouse click sanity check; result might have pointed to\n\tspurious location after window resizing\nplatforms that support hangup: SAFERHANGUP to avoid losing objects in transit\n\tbetween lists when hangup occurs, and also avoid cheats due to\n\twell-timed hangups to stop a long melee\nbuild-from-source: dlb utility can handle arbitrary number of files\n\n\nGeneral New Features\n--------------------\nwhen you're teetering on the edge of a pit you can use '&gt;' to enter the pit\nwhen you're flying over a pit you can use '&gt;' to enter the pit\nwhen asked for a direction, a response of '?' yields help and then asks again\nwhen adding an item to inventory, try to stack it with the quiver slot\n\tbefore trying against other carried objects\n#adjust can be used to split an inventory stack\ncockatrice meat has a distinct flavor to some\nwish request for \"&lt;something&gt; armor\" will match item named \"&lt;something&gt; mail\"\nFire Brand and Frost Brand have a chance to avoid taking rust damage\nsupport ^R (and ^L in numpad mode) to request display repaint during direction\n\tchoosing and location choosing prompting modes\nintelligent pets will use keys to unlock doors\ndestroyed drawbridge leaves some iron chains\ngive feedback when a nearby monster grows into a stronger form\nfamiliars are now created without any starting inventory\nusing the 'f' command when quiver is empty will fill quiver with player's\n\tresponse to the \"what to throw?\" prompt\nbreaking a wand with the apply command has a chance to wrest an extra charge\nburying a punishment ball no longer ends your punishment\n#tip command (with M-T shortcut) to empty a container's contents onto floor\nadd clicklook option to allow looking at things on the display by clicking \n\tright mouse button when floating mouse pointer over them\nIzchak's lighting store is now able to stock oil for your lamp\nprovide core support for saving of messsage history in save file\nthe following actions can now be continued after save/restore: digging, \n\teating, studying, removing armor\nhero-created and monster-created ice will eventually melt away\nextend Warning to include ice danger\nwishing for particular variety of tin contents (deep fried, broiled, etc.)\ndebug-mode wishing for random monster(s) via '*'\ndebug-mode viewing of fully identified object descriptions without \n\tactually identifying the objects\nhealth-food store that stocks monk-appropriate foods in mine town when monk\ngive more information about your attributes in debug mode\npolywarn to give intrinsic monster detection of limited species while polymorphed\nrocks can skip on the water sometimes allowing them to pass over water creatures\nvampires can now shapeshift into bats and fog clouds; the latter can be done at \n\twill to slip through locked doors\nshapeshifted vampire will transform back to vampire form after you defeat it and\n\tcontinue to fight in its native form\ncontainer lknown flag for locked/unlocked/broken awareness\ncontainer cknown flag for container content awareness\nplname is stored in the save file on all platforms now\nintroduce support for negation of role, race, align, gender values to eliminate\n\tthem from random selection and the pick list of startup choices\nsome intelligent pets will avoid cannibalism\nkeep track of which monsters were cloned from other monsters\ncloned and revived monsters become worth fewer points than ordinary ones\nnumber_pad:3 run-time option to use inverted phone keypad layout for movement\nnumber_pad:-1 to swap function of y and z keys; z to move NW, y to zap wands\ndisplay spell retention information in the spell menu\ntame ghouls can eat old eggs\nnew effect for reading a scroll of light while confused\nallow digging an adjacent pit with wand of digging while trapped in a pit\n#terrain command to show unobstructed view of map (w/o mons, objs, traps)\ndigging can activate or disarm some types of traps\nsome monsters can eat tins in addition to corpses to cure some ailments\nadd Roderick Schertler's pickup_thrown patch\nadd ability to sort the list when viewing known spells with '+' command\ndescribe magic cancellation from worn armor in enlightment/end-of-game feedback\ndisclose half physical and/or spell damage in enlightment/end-of-game feedback\nrephrase see invisibility enlightenment feedback when unable to see at all\nadd atmospheric sound messages for temples\nsometimes give announcement message when monsters teleport to hero's vicinity\nobsolete config file keywords: GRAPHICS, OBJECTS, TRAPS, EFFECTS\ndeprecated options: IBMGraphics, DECGraphics, boulder\nnew options: symset, roguesymset for choosing a symbol set from the symbols file\nnew config file keyword: SYMBOLS for overriding character symbol values by name\nopening magic frees from bear traps and webs, activates trap doors\nclosing magic activates bear traps and webs\nlocking converts a hole into a trap door; striking does the opposite\nadd Malcolm Ryan's Statue Glyphs patch\nlembas and cram never rot unless cursed\nmultiple squeaks for squeaky boards\ninclude time, user ID, and play mode in paniclog entries\nadd oracle and rumor regarding priestly donations\nanti-magic traps have alternate effect on targets who have magic resistance\nthe Amulet can be offered to Moloch\njavelins and spears now share the same weapon skill\nall stackable weapons are capable of being thrown/shot for multi-shot volleys\nworm teeth and crysknives have become stackable\nimproved container interface\nacid can destroy iron bars\nOPTIONS=playmode:normal|explore|debug to choose mode without command-line\nscore bonus for ascending is reduced or denied for changing alignment\nplayer can give a monster class when asked for type of monster to poly into\nlikewise when asked about type for #monpolycontrol\nboth controlled self-polymorph and #monpolycontrol accept ESC, \"*\" or \"random\"\n\twhen asking for type of monster; ESC aborts #polyself command\nscroll of taming/spell of charm monster now gives some feedback\ndoppelgangers can take on the shape of alternate roles' quest guardians\npile_limit option to control when to switch to \"there are objects here\"\n\tvs listing objects on floor when hero goes over objects while moving\nsome monsters will use fire to prevent selves being turned into green slime\nadd `#vanquished' debug mode command\nC and #name commands are now same and use menu to choose monster vs object\nhallucination provides partial protection against gaze attacks\nattempting to read \"dull\" spellbook might cause hero to fall asleep\ndipping prompt is more precise\nusing F to attack wall/boulder/statue while wielding pick digs/breaks target\nshapechangers shouldn't receive starting inventory of their initial shape\nstreamline old ^X output and integrate it with enlightenment feedback;\n\tnew ^X output includes expanded form of abbreviated bottom line info\n\"killed by X\" becomes \"killed by a chameleon imitating X\" when appropriate\neating disenchanter corpses is now considered risky\nmake '[' command more precise when poly'd hero has embedded dragon scales/mail\nfainting while wielding a cockatrice corpse will be fatal\nSunsword's light radius depends on its curse/bless state\nAdd M-C and M-R meta-key shortcuts for #conduct and #ride, respectively \ncan now use ESC to cancel out of prompts for playing musical instruments\nbeing crowned gives an additional benefit:  one extra skill slot/credit\nchatting to a gecko or shopkeeper while hallucinating gives alternate message\nmimic posing as door might steal hero's key when [un]locking is attempted\npolymorphing into a dragon while wearing dragon scale mail will cause that\n\tmail to revert to dragon scales\nadopt/adapt/improve the Paranoid_Quit patch; default is paranoid_confirm:pray\n\tparanoid_confirm:Confirm when requiring \"yes\" instead of y to confirm,\n\t\t\t\t also require explicit \"no\" to reject\n\tparanoid_confirm:quit    yes vs y to quit or to enter explore mode\n\tparanoid_confirm:die     yes vs y to die in explore or wizard mode\n\tparanoid_confirm:bones   yes vs y to save bones when dying in wizard mode\n\tparanoid_confirm:attack  yes vs y to attack a peaceful monster\n\tparanoid_confirm:pray    y to confirm #pray; supersedes prayconfirm\n\tparanoid_confirm:Remove  always pick from inventory for 'R' and 'T'\nflexibility for specifying \"detect &lt;foo&gt;\" vs \"&lt;foo&gt; detection\" when wishing\nwhen a sokoban puzzle has been completed (last pit or hole filled in),\n\tstop assessing luck penalties and lift most movement restrictions\n'`' command to show discoveries for one class of objects\nadd \"about nethack\" to '?' menu as an alternate way to view 'v'+'#version'\ndisplay version and build information at startup\nrepeatedly setting the fruit option will check to see if fruits have been\n    created, so the user can't easily overflow the maximum this way\nbones files now include extra data to identify dead hero and reason for death\ndipping multiple potions in another potion may only dip part of their stack\nmake being inside a stinking cloud (when not immune or resistant) become a\n\tmajor trouble which is fixable by prayer\nintroduce some variation in monster movement rates\n\n\nPlatform- and/or Interface-Specific New Features\n------------------------------------------------\npcmain: check for dlb_init failure rather than relying on dungeon open failure\nwin32gui: support perm_invent\nwin32gui: menu option to add/remove windows captions\nwin32gui: support for saving/restoring message history\nwin32gui: added menu options \"Copy ASCII Screenshot To Clipboard\" and \"Save \n\tASCII Screenshot To File\"\nwin32tty: support for 'selectsaved' option for menu of existing save files\n\tto choose from at game startup\ntty: add window port routines for saving/restoring message history\ntty: enhanced role, race, &amp;c selection at start of new game\nsmartphone: added \"Type Cmd\" command that allows to type arbitrary commands \n\tusing phone keypad\nsmartphone: added Q(quiver) command to \"Attack\" layout\nsmartphone: fixed F command to prompt for direction\nunix,vms: altmeta option to handle terminals which send \"ESC c\" for Alt+c\n\n\nCode Cleanup and Reorganization\n-------------------------------\nremoved OVLx section dividers previously  used for TRAMPOLINE overlay system\nmove all flags that are system or port specific from flag struct to sysflags \n\tstruct which is used only if SYSFLAGS is defined\nall fields in flags struct are unconditionally present\nmonst cham field now a short and uses mons[] index\nrearrange some monster ordering to follow rule #2 listed at top of monst.c\nchange region player_flags to more appropriate unsigned int instead of boolean\nremove remains of sync_hunger, which has been ifdef'd out for years\nnew mextra structure housing pointers to mname, egd, epri, eshk, emin, edog\nconsolidate vault.h, epri.h, eshk.h, emin.h and edog.h into new mextra.h\nnew oextra structure housing pointers to oname, omonst, omid, olong, and omailcmd\ndrawing symbols for DECGraphics, IBMGraphics, MACgraphics are now stored in an\n\texternal symbol file that can be changed without rebuilding\nnew hints-based configuration system\nallow documentation to be specialized to the options in the game binary\nadd param to winsys ini routines to allow cleaner shifting during startup\n</pre>\n<h2><span class=\"mw-headline\" id=\"References\">References</span></h2>\n<div class=\"mw-references-wrap\"><ol class=\"references\">\n<li id=\"cite_note-1\"><span class=\"mw-cite-backlink\"><a href=\"#cite_ref-1\">↑</a></span> <span class=\"reference-text\"><a class=\"external free\" href=\"https://web.archive.org/web/20141003124232/http://www.nethack.org/\">https://web.archive.org/web/20141003124232/http://www.nethack.org/</a></span>\n</li>\n</ol></div>\n<div class=\"license_ngpl\">\n<p><i>The <a href=\"/wiki/NetHack_General_Public_License\" title=\"NetHack General Public License\">NetHack General Public License</a> applies to screenshots, source code and other content from NetHack.</i>\n</p><p>This content was modified from the original NetHack source code distribution (by splitting up NetHack content between wiki pages, and possibly further editing). See the <span class=\"plainlinks\"><a class=\"external text\" href=\"https://nethackwiki.com/index.php?title=Leaked_development_version&amp;action=history\">page history</a></span> for a list of who changed it, and on what dates.\n</p>\n</div>\n\n<!-- \nNewPP limit report\nCached time: 20240926184338\nCache expiry: 604800\nDynamic content: false\nCPU time usage: 0.014 seconds\nReal time usage: 0.034 seconds\nPreprocessor visited node count: 42/1000000\nPreprocessor generated node count: 120/1000000\nPost‐expand include size: 667/2097152 bytes\nTemplate argument size: 0/2097152 bytes\nHighest expansion depth: 3/40\nExpensive parser function count: 0/100\nUnstrip recursion depth: 0/20\nUnstrip post‐expand size: 70691/5000000 bytes\n-->\n<!--\nTransclusion expansion time report (%,ms,calls,template)\n100.00%    1.562      1 Template:NGPL\n100.00%    1.562      1 -total\n-->\n\n<!-- Saved in parser cache with key wikihackdb:pcache:idhash:23230-0!canonical and timestamp 20240926184338 and revision id 150158\n -->\n</div></div>\t\t\t\t\t<div class=\"printfooter\">\n\t\t\t\t\t\tRetrieved from \"<a dir=\"ltr\" href=\"https://nethackwiki.com/index.php?title=Leaked_development_version&amp;oldid=150158\">https://nethackwiki.com/index.php?title=Leaked_development_version&amp;oldid=150158</a>\"\t\t\t\t\t</div>\n\t\t\t\t<div id=\"catlinks\" class=\"catlinks\" data-mw=\"interface\"><div id=\"mw-normal-catlinks\" class=\"mw-normal-catlinks\"><a href=\"/wiki/Special:Categories\" title=\"Special:Categories\">Category</a>: <ul><li><a href=\"/wiki/Category:NGPL\" title=\"Category:NGPL\">NGPL</a></li></ul></div></div>\t\t\t\t<div class=\"visualClear\"></div>\n\t\t\t\t\t\t\t</div>\n\t\t</div>\n\t\t<div id=\"mw-navigation\">\n\t\t\t<h2>Navigation menu</h2>\n\t\t\t<div id=\"mw-head\">\n\t\t\t\t\t\t\t\t\t<div id=\"p-personal\" role=\"navigation\" class=\"\" aria-labelledby=\"p-personal-label\">\n\t\t\t\t\t\t<h3 id=\"p-personal-label\">Personal tools</h3>\n\t\t\t\t\t\t<ul>\n\t\t\t\t\t\t\t<li id=\"pt-createaccount\"><a href=\"/index.php?title=Special:CreateAccount&amp;returnto=Leaked+development+version\" title=\"You are encouraged to create an account and log in; however, it is not mandatory\">Create account</a></li><li id=\"pt-login\"><a href=\"/index.php?title=Special:UserLogin&amp;returnto=Leaked+development+version\" title=\"You are encouraged to log in; however, it is not mandatory [o]\" accesskey=\"o\">Log in</a></li>\t\t\t\t\t\t</ul>\n\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div id=\"left-navigation\">\n\t\t\t\t\t\t\t\t\t\t<div id=\"p-namespaces\" role=\"navigation\" class=\"vectorTabs\" aria-labelledby=\"p-namespaces-label\">\n\t\t\t\t\t\t<h3 id=\"p-namespaces-label\">Namespaces</h3>\n\t\t\t\t\t\t<ul>\n\t\t\t\t\t\t\t<li id=\"ca-nstab-main\" class=\"selected\"><span><a href=\"/wiki/Leaked_development_version\" title=\"View the content page [c]\" accesskey=\"c\">Page</a></span></li><li id=\"ca-talk\"><span><a href=\"/wiki/Talk:Leaked_development_version\" rel=\"discussion\" title=\"Discussion about the content page [t]\" accesskey=\"t\">Discussion</a></span></li>\t\t\t\t\t\t</ul>\n\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div id=\"p-variants\" role=\"navigation\" class=\"vectorMenu emptyPortlet\" aria-labelledby=\"p-variants-label\">\n\t\t\t\t\t\t\t\t\t\t\t\t<input type=\"checkbox\" class=\"vectorMenuCheckbox\" aria-labelledby=\"p-variants-label\" />\n\t\t\t\t\t\t<h3 id=\"p-variants-label\">\n\t\t\t\t\t\t\t<span>Variants</span>\n\t\t\t\t\t\t</h3>\n\t\t\t\t\t\t<div class=\"menu\">\n\t\t\t\t\t\t\t<ul>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t<div id=\"right-navigation\">\n\t\t\t\t\t\t\t\t\t\t<div id=\"p-views\" role=\"navigation\" class=\"vectorTabs\" aria-labelledby=\"p-views-label\">\n\t\t\t\t\t\t<h3 id=\"p-views-label\">Views</h3>\n\t\t\t\t\t\t<ul>\n\t\t\t\t\t\t\t<li id=\"ca-view\" class=\"collapsible selected\"><span><a href=\"/wiki/Leaked_development_version\">Read</a></span></li><li id=\"ca-viewsource\" class=\"collapsible\"><span><a href=\"/index.php?title=Leaked_development_version&amp;action=edit\" title=\"This page is protected.&#10;You can view its source [e]\" accesskey=\"e\">View source</a></span></li><li id=\"ca-history\" class=\"collapsible\"><span><a href=\"/index.php?title=Leaked_development_version&amp;action=history\" title=\"Past revisions of this page [h]\" accesskey=\"h\">View history</a></span></li>\t\t\t\t\t\t</ul>\n\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div id=\"p-cactions\" role=\"navigation\" class=\"vectorMenu emptyPortlet\" aria-labelledby=\"p-cactions-label\">\n\t\t\t\t\t\t<input type=\"checkbox\" class=\"vectorMenuCheckbox\" aria-labelledby=\"p-cactions-label\" />\n\t\t\t\t\t\t<h3 id=\"p-cactions-label\"><span>More</span></h3>\n\t\t\t\t\t\t<div class=\"menu\">\n\t\t\t\t\t\t\t<ul>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div id=\"p-search\" role=\"search\">\n\t\t\t\t\t\t<h3>\n\t\t\t\t\t\t\t<label for=\"searchInput\">Search</label>\n\t\t\t\t\t\t</h3>\n\t\t\t\t\t\t<form action=\"/index.php\" id=\"searchform\">\n\t\t\t\t\t\t\t<div id=\"simpleSearch\">\n\t\t\t\t\t\t\t\t<input type=\"search\" name=\"search\" placeholder=\"Search NetHackWiki\" title=\"Search NetHackWiki [f]\" accesskey=\"f\" id=\"searchInput\"/><input type=\"hidden\" value=\"Special:Search\" name=\"title\"/><input type=\"submit\" name=\"fulltext\" value=\"Search\" title=\"Search the pages for this text\" id=\"mw-searchButton\" class=\"searchButton mw-fallbackSearchButton\"/><input type=\"submit\" name=\"go\" value=\"Go\" title=\"Go to a page with this exact name if it exists\" id=\"searchButton\" class=\"searchButton\"/>\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</form>\n\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div id=\"mw-panel\">\n\t\t\t\t<div id=\"p-logo\" role=\"banner\"><a class=\"mw-wiki-logo\" href=\"/wiki/Main_Page\"  title=\"Visit the main page\"></a></div>\n\t\t\t\t\t\t<div class=\"portal\" role=\"navigation\" id=\"p-navigation\" aria-labelledby=\"p-navigation-label\">\n\t\t\t<h3 id=\"p-navigation-label\">Navigation</h3>\n\t\t\t<div class=\"body\">\n\t\t\t\t\t\t\t\t<ul>\n\t\t\t\t\t<li id=\"n-NetHack-Wiki\"><a href=\"/wiki/Main_Page\">NetHack Wiki</a></li><li id=\"n-Forum\"><a href=\"/wiki/Forum:Watercooler\">Forum</a></li><li id=\"n-portal\"><a href=\"/wiki/NetHackWiki:Community_Portal\" title=\"About the project, what you can do, where to find things\">Community portal</a></li><li id=\"n-recentchanges\"><a href=\"/wiki/Special:RecentChanges\" title=\"A list of recent changes in the wiki [r]\" accesskey=\"r\">Recent changes</a></li><li id=\"n-randompage\"><a href=\"/wiki/Special:Random\" title=\"Load a random page [x]\" accesskey=\"x\">Random page</a></li>\t\t\t\t</ul>\n\t\t\t\t\t\t\t</div>\n\t\t</div>\n\t\t\t<div class=\"portal\" role=\"navigation\" id=\"p-Popular_pages\" aria-labelledby=\"p-Popular_pages-label\">\n\t\t\t<h3 id=\"p-Popular_pages-label\">Popular pages</h3>\n\t\t\t<div class=\"body\">\n\t\t\t\t\t\t\t\t<ul>\n\t\t\t\t\t<li id=\"n-Dungeon-features\"><a href=\"/wiki/Dungeon_feature\">Dungeon features</a></li><li id=\"n-Monsters\"><a href=\"/wiki/Monster#Canonical_list_of_monsters\">Monsters</a></li><li id=\"n-In.2FExtrinsics\"><a href=\"/wiki/Property#Intrinsic_properties\">In/Extrinsics</a></li><li id=\"n-Items\"><a href=\"/wiki/Item\">Items</a></li><li id=\"n-Spells\"><a href=\"/wiki/Spellbook#List_of_spellbooks\">Spells</a></li><li id=\"n-Game-options\"><a href=\"/wiki/Options\">Game options</a></li><li id=\"n-Websites\"><a href=\"/wiki/Websites\">Websites</a></li>\t\t\t\t</ul>\n\t\t\t\t\t\t\t</div>\n\t\t</div>\n\t\t\t<div class=\"portal\" role=\"navigation\" id=\"p-contributing\" aria-labelledby=\"p-contributing-label\">\n\t\t\t<h3 id=\"p-contributing-label\">Contributing</h3>\n\t\t\t<div class=\"body\">\n\t\t\t\t\t\t\t\t<ul>\n\t\t\t\t\t<li id=\"n-Style-guide\"><a href=\"/wiki/NetHackWiki:Style_guide\">Style guide</a></li><li id=\"n-help\"><a href=\"/wiki/NetHackWiki:How_to_help\" title=\"The place to find out\">How to help</a></li><li id=\"n-Current-projects\"><a href=\"/wiki/NetHackWiki:Current_projects\">Current projects</a></li>\t\t\t\t</ul>\n\t\t\t\t\t\t\t</div>\n\t\t</div>\n\t\t\t<div class=\"portal\" role=\"navigation\" id=\"p-tb\" aria-labelledby=\"p-tb-label\">\n\t\t\t<h3 id=\"p-tb-label\">Tools</h3>\n\t\t\t<div class=\"body\">\n\t\t\t\t\t\t\t\t<ul>\n\t\t\t\t\t<li id=\"t-whatlinkshere\"><a href=\"/wiki/Special:WhatLinksHere/Leaked_development_version\" title=\"A list of all wiki pages that link here [j]\" accesskey=\"j\">What links here</a></li><li id=\"t-recentchangeslinked\"><a href=\"/wiki/Special:RecentChangesLinked/Leaked_development_version\" rel=\"nofollow\" title=\"Recent changes in pages linked from this page [k]\" accesskey=\"k\">Related changes</a></li><li id=\"t-specialpages\"><a href=\"/wiki/Special:SpecialPages\" title=\"A list of all special pages [q]\" accesskey=\"q\">Special pages</a></li><li id=\"t-print\"><a href=\"/index.php?title=Leaked_development_version&amp;printable=yes\" rel=\"alternate\" title=\"Printable version of this page [p]\" accesskey=\"p\">Printable version</a></li><li id=\"t-permalink\"><a href=\"/index.php?title=Leaked_development_version&amp;oldid=150158\" title=\"Permanent link to this revision of the page\">Permanent link</a></li><li id=\"t-info\"><a href=\"/index.php?title=Leaked_development_version&amp;action=info\" title=\"More information about this page\">Page information</a></li>\t\t\t\t</ul>\n\t\t\t\t\t\t\t</div>\n\t\t</div>\n\t\t\t\t</div>\n\t\t</div>\n\t\t\t\t<div id=\"footer\" role=\"contentinfo\">\n\t\t\t\t\t\t<ul id=\"footer-info\">\n\t\t\t\t\t\t\t\t<li id=\"footer-info-lastmod\"> This page was last edited on 7 March 2023, at 18:53.</li>\n\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t<ul id=\"footer-places\">\n\t\t\t\t\t\t\t\t<li id=\"footer-places-about\"><a href=\"/wiki/NetHackWiki:About\" title=\"NetHackWiki:About\">About NetHackWiki</a></li>\n\t\t\t\t\t\t\t\t<li id=\"footer-places-disclaimer\"><a href=\"/wiki/NetHackWiki:General_disclaimer\" title=\"NetHackWiki:General disclaimer\">Disclaimers</a></li>\n\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t\t\t\t<ul id=\"footer-icons\" class=\"noprint\">\n\t\t\t\t\t\t\t\t\t\t<li id=\"footer-poweredbyico\">\n\t\t\t\t\t\t<a href=\"//www.mediawiki.org/\"><img src=\"/resources/assets/poweredby_mediawiki_88x31.png\" alt=\"Powered by MediaWiki\" srcset=\"/resources/assets/poweredby_mediawiki_132x47.png 1.5x, /resources/assets/poweredby_mediawiki_176x62.png 2x\" width=\"88\" height=\"31\"/></a>\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t<div style=\"clear: both;\"></div>\n\t\t</div>\n\t\t\n<script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({\"wgPageParseReport\":{\"limitreport\":{\"cputime\":\"0.014\",\"walltime\":\"0.034\",\"ppvisitednodes\":{\"value\":42,\"limit\":1000000},\"ppgeneratednodes\":{\"value\":120,\"limit\":1000000},\"postexpandincludesize\":{\"value\":667,\"limit\":2097152},\"templateargumentsize\":{\"value\":0,\"limit\":2097152},\"expansiondepth\":{\"value\":3,\"limit\":40},\"expensivefunctioncount\":{\"value\":0,\"limit\":100},\"unstrip-depth\":{\"value\":0,\"limit\":20},\"unstrip-size\":{\"value\":70691,\"limit\":5000000},\"timingprofile\":[\"100.00%    1.562      1 Template:NGPL\",\"100.00%    1.562      1 -total\"]},\"cachereport\":{\"timestamp\":\"20240926184338\",\"ttl\":604800,\"transientcontent\":false}}});mw.config.set({\"wgBackendResponseTime\":132});});</script>\n\t</body>\n</html>\n","rawPage":"In September 2014, some source-code was leaked, claimed to be Nethack Version 3.5.0.\n\nWhile the DevTeam has since claimed that the code is not version 3.5.0, they have claimed that the code was written by them, and that variants are welcome to use their code. To avoid confusion, the next version was numbered [[NetHack 3.6.0|3.6.0]]<ref>https://web.archive.org/web/20141003124232/http://www.nethack.org/</ref>.\n\n==Changelog==\n\nThe changelog included with the leak reads as follows and can be found on [http://pastebin.com/raw.php?i=djZ5X2Hz Pastebin].\n\n<pre>\n$rcsfile: fixes35.0,v $ $Revision$ $Date$\n\nGeneral Fixes and Modified Features\n-----------------------------------\nchange the dreaded \"Stop eating?\" to \"Continue eating?\" with default \"no\"\nsetmangry should not be called when a monster enters a bones region\nbad capitalization of msg when charging for something that catches light\nmissing opthelp for use_inverse\nNever say \"It moves only reluctantly\"\nexpert fireball/cone of cold could not target a monster seen only with\n\tinfravision or ESP\ndisplay \"lotus juice\", not \"lotu juice\" for the fruit juice name\nonly humanoid angelic minions should get/use sword and armor\npaper, straw and wood golems resist cold\nthe options lootabc, showrace, travelcmd, and runmode are now saved\nuse mons[] array offsets in mnum field in save file rather than storing\n\tthe ptr and calculating the distance from beginning of array\ntwo-weapon combat makes two attacks instead of having one attack hit with\n\teach weapon\napply weapon skill to-hit bonus or penalty to bare-handed attacks\nonly give monk's \"cumbersome armor\" message when the armor penalty causes\n\tan attack to miss\ndust vortex-induced blindness should kick in immediately when blindfold\n\tis removed or glop is wiped off\nprayer/unicorn-horn won't fix blindness while still engulfed in a dust\n\tvortex since it will just return immediately\nbeing confused and reading cursed scroll of charging drains your energy\nclass genocide recognizes species name as an example of the class to\n\tgenocide (Martin Snyder)\ninternals: use Is_box rather than explicitly checking what it checks\nfix some unreachable messages (either make then reachable or remove them)\ncan quiver coins when GOLDOBJ is defined\nmake #loot behave same for GOLDOBJ as for !GOLDOBJ\nfor GOLDOBJ, can pick gold up into $ when all 52 letters are in use, and\n\tcan pick non-gold up into unused letter when gold uses one of 52 slots\ngrammar, spelling and other typos\nkeep various delayed killers separate to avoid mixed up messages\ndon't place randomly-placed aquatic monsters in lava on special levels\nhiding monsters don't hide under cockatrice/chickatrice corpses\n\"sound\" option renamed to \"acoustics\"\ndeafness now a full-fledged attribute\nwater should flow into pits from broken wand of digging and drum of earthquake\nobjects that fall thru trapdoors, et al, can break on impact\nsupport engraving in blood in special level files\nmany instances of physical damage were not taking Half_physical_damage\n\tinto account when reducing your hitpoints\nmake it possible for the code to recognize your starting pet throughout the \n\tgame via is_starting_pet(mon) macro\nhealers notice when a wand of undead turning revives a monster so the\n\twand is then identified\nupdate display if bestowed a spellbook while unable to see invisible self\nuse small pool of static buffers for mon_nam() and Monnam()\nAcknowledge Schroedinger's cat at end of game\ngrammar fixes for applying stethoscope to corpses and statues\nplayer polymorphed as a ceiling hider cannot reach the floor, but\n\tautomatically unhide on #sit\ntrappers do not hide on the ceiling\nfix \"You hear The food ration tumbles downwards\" for blinded pit dropping\nsilver arrows weren't causing silver damage on some silver-haters when wielded\nwizard mode: avoid division by 0 crash for level teleport in the endgame if\n\tconfusion overrides teleport control\ndon't #sit on an object in a pit if you're only on the precipice\nfix message when pushing a boulder into a pool while riding\nplural of \"Nazgul\" is \"Nazgul\" not \"Nazguls\"\ntrap messages referring to named steed were ackwardly worded when hallucination\n\toverrode use of the name\nsome actions such as eating corpses off the floor didn't check whether hero\n\tcould reach the bottom of a pit\nusmellmon() instead of \"It turns into it\" during monster polymorph\ngrammar of messages regarding eating artifacts\navoid a message about an invisible monster looking much better\nplayer polymorphed as a xorn could not pick up items in pits\nnon-magical whistles do not work underwater\ntry to restrict whistles and musical instruments to monsters that can blow\ndon't display \"turns to flee\" message for a mimicing mimic\ndon't display \"turns to flee\" message for a monster who has just died\ndipping acid in a fountain could cause an explosion but not destroy the potion\nthrown potions can sometimes hit a steed's saddle\nif your blindfold glows and you're not otherwise blinded, you can see it\nsync default documentation of \"null\" option with the code\ntripping over a cockatrice corpse didn't petrify, even when not wearing boots\ndo not call swamps on the Juiblex level \"moat\" when freezing or drowning;\n\tlikewise for Plane of Water when drowning\nkeep score from wrapping around and becoming negative by capping it\nkicked objects do not slide when on the air or water levels\nadded strsubst() to hacklib\nbe consistent with use of \"removing\" rather than \"lifting\" for encumber \n\tmessages associated with taking things out of a bag of holding\nwhen a giant carrying a boulder dies in a pit, ensure that the corpse is\n\tburied under the filled pit\ncursed scroll of destroy armor damaging cursed armor didn't adjust attributes\nadd passive() flag that indicates uwep was destroyed during the turn\npolymorphed or shapechanged monster sometimes got erroneous hit points\nwhen blind and levitating > shouldn't say \"stairs\" if player has not seen them\na slow-moving monster hidden under a rotting corpse was not immediately\n\tdisplayed when the corpse rotted away\nmimic that ends up on the rogue level should not mimic a closed door\nmimic should not mimic a boulder while on a pit or hole or closed door\ncalculate weight of corpses on special levels correctly\nSting could trigger premature display of orcs during savegame restore\nSting now glows light blue again\nprevent \"offering\" or other words with similar ending from matching ring quote\nmake cleric cast lightning blind as other lightning does\nchange the wording slightly to use \"one of \" when a monster wielding \n\tmultiple daggers thrusts them\nif you didn't see a rolling boulder fall into a pit, you only heard the sound\n\tof it doing so if you were blind\nfire trap was triggered twice in the same turn when melting ice was involved\nabandon the specialized djinn and ghost counters used for potion tuning and\n\tuse the mvitals[].born field instead\nif you were Poison_resistant, only a *blessed* potion of sickness caused\n\tloss of hitpoints\nreviving invisible troll could appear visible until it moves\nadjust some of the shop repair messages\nshopkeeper removal of trap from shop doorway yields an open door instead of\n\ta closed one if an intact open door is present\nguarantee that hostile djinn released from bottles really are hostile\nhandle lava when removing or losing water walking boots\nfix incomplete sentence occuring when unique monster's corpse fell down stairs\nfractured boulders or statues produced inconsistent object settings on the\n\tresulting rocks\nreally fix rolling boulder bug C340-18, the previous \"fix\" reversed the test\nmonster throwing greased weapon has same chance for slip/misfire as player\nkilling a pet by displacing it into a trap now yields experience\nprevent a rolling boulder that is in motion from vanishing in bones files\nensure that a sleeping steed doesn't answer a #chat\neliminate two very minor anomalies when using Luck to adjust random numbers\ndestroying a worn item via dipping in burning oil would not unwear/unwield\n\tthe item properly, possibly leading to various strange behaviors\navoid a panic splitbill when shopkeeper is trapped by the door\ngrammar tidbit for message given when eating tainted meat is also cannibalism\ngas spores shouldn't be described as \"unable to attack\" while hero is praying\nincorrect screen display if engulfer gets turned to stone when trying to\n\tswallow while hero is poly'd into cockatrice\npanic on subsequent move if engulfer gets turned to stone and poly'd hero\n\talso has attached ball&chain\ngive more specific messages when dropping weapons due to slippery fingers\nvarious helmet messages changed to distinguish between \"helm\" and \"hat\"\nhelmets don't protect against cockatrice eggs thrown straight up\nbreaking container contents in a shop didn't always charge for them\nsome types of shop theft of a stack of items only charged for a single one\nsome thefts weren't charged at all even though shopkeeper noticed\nwizard mode: WIZKIT wish for own quest artifact triggered crash at startup\navoid \"your steed is still eating\" message when going through a magic portal\ncannot drink from fountain, sink or surrounding water while swallowed\ndon't hallucinate anything for an exploding black light as it dies\ngive blindness feedback when moving into/through stinking cloud\nfix case on monster name when monster reflects floating eye's gaze\nmonsters \"shrieking in pain\" from a potion didn't wake anything up\ncharge for reviving a shop owned corpse or reanimating a shop owned statue\nfilled trap doors on castle can be re-dug\nmessage order when swapping places with a pet (e.g. into a trap), also use\n\tdifferent term instead of \"displace\"\nflyers can get out of pits more easily than non-flyers\nallow use of the < command to try to exit a pit\nMaster of Thieves as Tourist Nemesis still had STRAT_CLOSE\nco-aligned unicorns in bones could be hostile\nfinding \"something\" posing as a statue while Blind should map_invisible()\nadding more candles than required to total 7 to a candelabrum which \n\talready had between 1 and 6 gave an ungrammatical message\ngive correct message when a spellcasting monster summons other monsters\ncorrect experience calculation for monsters that cause nonphysical damage\nclean up messages when you stop levitation while riding a flying steed\nmonsters evading a kick on noteleport levels would cause a \"teleports\" message\ninterrupt current activity during certain stages of petrification or vomiting\nwarning about bad food didn't recognize tin of Medusa meat\neating tainted Medusa corpse caused food poisioning instead of petrification\navoid potential stale pointer use after magic bag explosion\nnymphs and monkeys can't steal rings worn under gloves\nmonkeys can't steal rings worn under cursed weapon\nsuccubi will remove hero's gloves before taking worn ring; incubi will do\n\tso before forcing ring to be put on\nmbodypart should return forehoof, not foreclaw, for horselike monsters\nfurther digging of an existing hole finishes in a single turn\nonly prefix shopkeeper names with \"Mr.\" or \"Ms.\" when not a personal name\naccount for all attacks when determining max_passive_dmg\ngreen slime should not affect noncorporeal monsters\nland mine explosion will destroy a drawbridge at same location\navoid some more buffer overflows in query buffers containing object names\navoid giving extra information about things that break out of sight\ndipping in acid can erode the dipped object\navoid giving away wand type for near misses while blind\navoid excessive repetition of \"monsters are aware of your presence\"\nmonster's aggravation spell now affects meditating monsters\nhandle pets sooner at end-of-game to avoid message delivery anomalies\nbusy pet won't miss out upon ascension\nfix various places that \"finally finished\" could be displayed after the hero\n\tstopped doing something other than eating\nfix some cases where movement was disallowed but the hero was still conscious\nafter destroying drawbridge, hero could appear to be in the wall\nsometimes shop items which hero is forced to buy could be sold back twice\nnon-empty container dropped but not sold in a tended shop and then picked up\n\tafter that shop became untended could be sold twice in another shop\nvision was not updated when polymorphing a statue into a boulder\nvarious actions--such as enchanting--performed on an unpaid shop object\n\teither force the hero to buy the item (when its value is lowered) or\n\tincrease the current bill (when its value is raised)\n`I u' when carrying single unpaid item listed its cost twice\narmor which auto-curses when worn by hero should do same if worn by monster\nlimit how high accuracy, damage, or protection can become via eating rings\nwhen blinded hero detects a trap by touch, make sure it shows up on the map\nconfused remove curse will cause loss of knowledge of items' curse/bless state\nwith astral vision, the \";\" command should only display \"normal vision\"\n\tfor things that could be seen without astral vision\nreanimating a statue containing gold produced double gold\nprobing the resulting double-gold monster caused \"static object freed\" panic\ncursed wand might explode if used to engrave\nfatal wish from magic lamp left functional magic lamp in bones data\nfatal wish granted by monster left that monster in bones data\ndeath due to dipping potion of acid into a pool left the potion in bones data\nclear prompt from screen after ESC is used to abort \"In what direction?\"\nminor interface changes for interactively manipulating autopickup exceptions\nchatting with quest leader who was brought back from the dead gave warnings\nbecoming green slime or mimicking gold violates \"never changed form\" conduct\nwhen a monster grew into a higher form which had previously been genocided,\n\tthe message explaining its fate was only given if it was sensed via ESP\nhero could still see for brief period after being blinded by potion vapors\navoid crash when thrown potion hits bars before a monster\ndon't give messages about seeing things happen while asleep\nadjust health threshold where wounded hero will be healed by successful prayer\nprotect hero from mind flayer's remote mental blast during successful prayer\nrecognize if hero has already entered Gehennom by means other than usual route\n\tso that prompt can be skipped if Valley's stairs are subsequently used\nonce you've passed the Valley, drawbridge tune is no longer a prayer reward\nfix up grammar and punctuation in variants of shopkeeper's price message\nregression, bug fixed in 3.4.1 reintroduced in 3.4.3:  Sunsword continued to\n\temit light after monster who was wielding got killed\nweaken \"farming\" strategy\ndon't suppress corpse if you kill your own steed\nfix typo in tourist quest leader's greeting\nfix grammar for graveyard sounds when polymorphed\navoid divide by zero crash if Luck drops below -1 while a prayer is in progress\nmake hero inflicted with lycanthropy immune to level drain just like monsters\ndescribe locomotion method accurately when flyers traverse ladders or holes\nwhen there were multiple boulders at a location, moving one of them sometimes\n\tresulted in line-of-sight anomalies\nunicorn can't catch gems if it is asleep or paralyzed\nfix grammar when choking on gold\nprevent lose-level+regain-level cycle from arbritrarily boosting HP and Pw\nprevent polymorphing into \"new man\" at low level from magnifying HP and Pw\nsome messages which referred to \"mirror\" ought to have used \"looking glass\"\nincubi react to mirrors\nlosing a level while polymorphed affects hero's current monster HP as well as\n\tunderlying normal HP\nmind flayer brain eating is subject to certain fatal targets and to cannibalism\nmind flayer can't eat brains of ghost or shade\nalignment of Angels was handled inconsistently\ncorpses of unique monsters in bones behaved incorrectly if revived or eaten\npets capable of digging could pass through walls and stone on the Rogue level\ndon't generate mimics pretending to be closed doors when making Rogue level\nfix pluralization for \"this tin smells like mother-in-laws\" when hallucinating\nforce user-specified fruit name to be singular\navoid false matches when looking up fruit names (\"grapefruit\" isn't \"grape\")\nhandle pluralization of man-at-arms and singularization of men-at-arms\navoid inappropriate \"the corridor disappears\" when vault guard gets killed\navoid inappropriate \"the guard calms down\" if vault guard's magic corridor\n\treaches a spot where gold is embedded in the rock\navoid having vault guard ask hero's name when hero is swallowed\nassigning an artifact name is rejected on objects with similar description to\n\tcorresponding artifact's type rather than just those of the same type\nadjust feedback for gas spore explosion when hallucinating\nadjust message for gas effect from chest trap if hero resists hallucination\ncancelling non-shop objects in a shop's entrance would upset the shopkeeper\ntraps detected by scroll or crystal ball overlooked carried or buried chests\ncan't wish for a trapped box/chest/tin by specifying \"poisoned\"\ngrammar bit if killed by stealing a cockatrice corpse from a monster\nidentified touchstone can rub on gold like the data.base entry says\nrestore the capability of rubbing any object against known touchstone\nbeing petrified by swallowing a cockatrice violates foodless conduct\ndevouring Medusa whole is fatal\ntombstone's reason for death after being killed by mis-returning Mjollnir\n\tvaried depending upon whether it was fully identified\ntombstone's reason for death from kicking an object could include so much\n\tdetail about the object that is was too verbose\nseveral quest messages were worded inappropriately if the hero was blind\na samurai quest guardian message used \"ninja\" where \"ronin\" was intended\nrevive from fainting if vault guard or bribe-demanding demon approaches\ntame flaming spheres and shocking spheres shouldn't pick up items\neating pet won't continue eating after becoming paralyzed or falling asleep\ncan hear the opening or closing of an unseen drawbridge\nprevent \"object lost\" panic caused by accessing freed memory after worn\n\tnon-fireproof water walking boots are destroyed by lava\nstop multi-turn running, searching, or resting early if levitation ends\nrandomize shopkeeper names when hallucinating\nfix wording for \"leprechaun steals gold from between your feet\" when mounted\nCall command could be used to remotely identify which high priest is which\nlarge amorphous, whirly, noncorporeal, or slithy creatures can fit through\n\ttight diagonal gaps despite their size\navoid \"You summoned it!\" for unseen monster produced by same-race offering\nfix monsndx panic which happened after currently moving monster expelled\n\tswallowed hero onto magic trap and was made tame by its effect; taming\n\tno longer replaces monster\nreduced message verbosity when re-entering a temple\nreduced message verbosity when monster with multiple attacks missed wildly\nrecognize \"mindflayer\" as an alternative spelling for \"mind flayer\"\nputting on a never seen ring while blinded won't make the ring a discovery\nzapping a never seen wand while blinded won't make the wand a discovery\nzapping an unID'd wand of teleportation at self will discover it (usually)\nzapping unlocking magic at self while punished will remove attached chain\ntreat mattock as blunt object when forcing locks\nrestore capability to force locks with wielded statue\nonly count successful statue creations against the monster limit in sp_lev.c\ndon't see objects or read engraving when hero changes location (random\n\tteleport) or position (levitation timeout) while asleep or fainted\nunseen wand of striking zapped by unseen monster became known if it hit a door\ntweak knight quest messages\nguidebook grammar bits\nspecial level loader wasn't able to place random door in 1x1 room; could\n\ttrigger divide-by-0 crash for user-developed custom levels\npolymorphed spellbooks may turn blank or be too faint to read\nmake gender of quest leaders and nemeses consistent with data.base and\n\tquest messages\nOrion and Norn should be giant sized\nOrion, Norn, Cyclops and Lord Surtur should be able to tear webs\navoid inappropriate message when using a cursed lamp while blind\nplayer polymorphed as a guardian naga spit the wrong kind of venom\nensure monsters cannot teleport to or be created outside nonpassable bounds\n\tof special levels\ncandles should not be fireproof\nput #define for potion occupant chance and cursed wand zap chance in one place\nrecognize most instances where hallucinatory monster name should be treated\n\tas a personal name (to avoid \"the Barney\") instead of a description\navoid giving misleading or redundant feedback when reading scrolls\nmonsters could end up off the left side of the Ranger quest start level\ncustom arrival message for special levels could be delivered too soon\ncustom arrival message for special levels now supports quest text substitution\nprevent scroll of charging that has already disappeared from showing in the\n\tpicklist of things to charge\ndoors break instead of absorbing the blast of a broken wand of striking\nworms don't have scales, krakens have tentacles, stalkers have a head\nyou no longer \"fry to a crisp\" as a water elemental\nchange leather spellbook to leathery; pertains to appearance, not composition\nmore precise probing/stethoscope feedback when engulfed\nmake baby long worms have lower level than full grown ones\nuse \"your kraken\" instead of \"a kraken\" when searching reveals a tame\n\thidden monster\nMagicbane should not produce \"<something> are confused\" message\nhandle antholes more sensibly when ants aren't available\navoid \"Something's in the way\" message with unidentified wand of locking\ncancelled nurses shouldn't say \"Relax, this won't hurt a bit\"\ncheck for hero location in digactualhole() before clearing u.utrap\nclear any pits that the hero digs in the vault guard's temporary corridor\nbetter handling for Fort Ludios and endgame in wizard mode's `^V ?' menu\nno free lunch for gelatinous cubes eating scrolls of mail\neating gold in front of the vault guard will make the guard angry\ncalculate engulf time differently for non-digestion attacks than for digestion\npreform autopickup and/or report on objects at the spot when a failed #untrap\n\tattempt causes the hero to move onto a trap's location\nshattering a monster's weapon didn't work as intended for stack of N>1\nthrown silver weapon hitting silver-hating poly'd hero got double silver damage\nwielded silver weapon hitting silver-hating poly'd hero lacked silver message\ndon't reveal surface information that you can neither feel or see\nif the hero or a monster is already in a pit don't have them \"fall into a chasm\" \n\tfrom drum of earthquake\nmonsters who ate lizard corpses to cure confusion would lose intrinsic speed\nmonsters couldn't eat lizard corpses to cure being stunned\ncode handling a monster's use of potion or food to cure stoning or confusion\n\twas accessing freed memory after the object had been used up\nproperly handle destruction of equipment carried by monsters hit by\n\tdisintegration breath; life-saving retained conferred properties of\n\tformerly worn items (loss of steed's saddle caused much confusion)\ndon't exercize or abuse wisdom when rumors get used for random graffiti\ndon't exercize wisdom twice for each minor oracle consultation\ndon't welcome the hero to Delphi if the Oracle was angered before first entry\ncreate_object() created lizard corpses without timers and troll corpses with\n\ttheir revive timers, then changed the corpsenm field\nwhen a potion of acid was dropped into water and exploded, nethack would\n\tcontinue to use already freed memory and later might panic or crash\nwhen jumping over an already seen trap, use an() to get appropriate grammar\nfix bad grammar when putting on not-yet-seen Eyes of the Overworld while blind\ndon't \"walk quietly\" while levitating\nshopkeeper polymorphed into animal form can no longer speak\ndon't give attribute adjustment messages (\"you feel wise\") unless the current\n\tvalue actually changes\nfix message handling when multiple shopkeepers are present at end of game\n'C' command can't name shopkeepers or temple priests and other minions\nwhen \"of <deity>\" is intentionally being suppressed, an aligned or high\n\tpriestess would be described as an aligned or high priest\nspecifying role and/or race along with an invalid alignment for it/them in\n\tNETHACKOPTIONS or config file would yield a prompt which misleadingly\n\tmentioned the rejected alignment when asking player to pick alignment\ntemple donation can recover protection previously stolen by attrcurse attack\n\teven when protection amount is so big that no increment would be given\nmeditating monsters stop meditating when affected by something which wakes\n\tsleeping mosnters\nmonsters capable of hiding can't do so when trapped or while holding you\nlimit recursive calls to spoteffects (poly'd hero fell into water, reverted\n\tto human because of it, fell into same water, then crawled out twice)\nensure that the punishment ball and chain make it into the save file after being\n\ttemporarily orphaned from the normal chains in the swallowing code\ndisplay the invisible monster glyph ('I') whenever an unseen monster forces\n\tpoly'd hero out of hiding\ncharge for thrown wand that shatters into a thousand pieces in a shop\nwielded light source susceptible to water gets extinguished when weapon rusts\ndon't discover unknown bag of tricks when monster it releases is undetected\nescape the deleted trap after performing the invocation while trapped\nuse alternate phrasing when life drain attack affects non-living creature\nbypass \"wait! there's a creature hidden there\" when attacking a hidden monster\n\tsensed by ongoing monster detection\nremove makedefs.c dependency that time_t and long are the same size\nterminal window set to 21 lines can cause a crash during player selection \n\tmenus; have bot() check for valid youmonst.data\nmake region ttl field a long instead of short to get rid of lint warnings\n\tabout a possible loss of data\nfree storage used to hold region messages in free_region()\nhonor pushweapon when applying a tool or weapon causes it to become wielded\nin the quest, if the locate level hasn't been reached yet, don't fall or\n\trandomly teleport past it\nfix phrasing in monster against monster attack feedback when attacker is\n\twielding stacked weapons\npushing a boulder onto a level teleporter trap could issue repeat messages\nif shopkeeper or priest gets teleported while inside his shop or temple,\n\tgive locations inside that room preference when choosing destination\ndon't place hero on top of monster when arriving on level which is so full\n\tthat the monster can't be moved out of the way\ntame/peaceful grabber/engulfer will release hero after conflict ends\nany grabber will release hero if it moves away while confused/stunned/afraid\nmake changes in hallucination be reflected by changes in mimickery feedback\nhave to see a divine gift in order to have it become a discovery\nhonor the never-in-hell flag when selecting random monster type for corpses,\n\teggs, figurines, and statues created in Gehennom\nhero is not subject to light-based blindness while fainted from hunger\nadd Unaware pseudo-property to suppress various messages while unconscious\nengraving while underwater should use surface() which handles that case\nprevent obj_is_local panic during bones creation when splattered burning oil\n\tfrom a thrown potion of oil kills the hero\ndon't leave lit potion intact when splattered burning oil from broken floor\n\tpotion kills the hero\nfix region timeout detection, caused strange display of stinking cloud\n\twhile wearing the Eyes of the Overworld\ntry to keep migrating monsters from escaping the wizard tower\naffected monsters should always respect \"Elbereth\"\ntry harder to keep dragged chain between ball and hero\nfireproof containers should not burn in lava\nmissile which kills engulfer will now be placed prior to hero's return to map\nfix invalid pointer dereference after applying a wielded cream pie\navoid drowned in a drowning and burned by burning if life-saving is inadequate\nbugles affect all monsters to some extent\nnurses are affected if player is polymorphed as a cockatrice\ngetting a particular rotten food result can't make attempting to eat a\n\tcorpse of one of the Riders be survivable\npad shortest rumors to improve distribution of delivered rumors\nwake up sleeping steed when putting on saddle or mounting\nreveal hidden monsters who change levels or are magically summoned\nhero can't carry an unlimited number of boulders when poly'd into a giant\nstop wielding cockatrice corpse which triggered own death followed by life-save\nformat various prompts to avoid \"Query truncated\" entries in paniclog\nprevent very large number of objects in # inventory slot from causing\n\tbuffer overflow\n!fixinv config was using arbitrary characters instead of # for invent overflow\nfor inventory display, include cost info on hero-owned containers holding\n\tshop goods\nshops now claim ownership of items created by using an unpaid horn of plenty\nshopkeepers shouldn't refer to non-male character as \"cad\"\ntweak levitation timeout if trap is being triggered on same turn it is to end\ndon't report death by petrification if cockatrice kills hero via HP loss\nRiders are immune to green slime\nRider corpses can't be engulfed by gelatinous cubes\nif Rider corpse revival fails, usually try again later instead of rotting away\nwielding a cloak of magic resistance or gray dragon scales, or carrying one in\n\talternate weapon or quiver inventory slot, conferred magic resistance\n\tto polymorphed hero\nwielding a potion of blindness or carrying one in alternate weapon or quiver\n\tslot conferred resistance against light-based blindness to any hero\nworn item transformed by polymorph remains worn if feasible\nzapping closing or breaking magic up or down from beneath an open drawbridge's\n\tportcullis failed if bridge orientation was north-to-south (Valk quest)\ncan't dip or apply grease to a worn item that's covered by another worn item\nsinking into lava didn't track passage of time properly\nsinking into lava eventually burns away slime; sitting in it always does\nafter escaping lava by foot, if hero doesn't move he'll fall back in\nsuppress corpse from bones data if death is due to being dissolved in lava\nsuppress \"you rise from the dead\" if game ends due to be turned into slime\nhero poly'd into stone golem and wielding cockatrice corpse casts stone-to-\n\tflesh at self to become flesh golem will revert to stone if no gloves\ndon't give erroneous \"<mon> disppears\" message for hero poly'd into quantum\n\tmechanic who hits engulfer while swallowed and blinded\ndemon lords/princes can't be summoned to the elemental or Astral planes\nfeedback from casting spell of protection was wrong in some situations\ncan't engrave on floor while inside solid rock, wall, or closed door\nsame-race sacrifice can't damage high altars\nallow corpses on floor to be offered at high altars\nallow hero to attempt to offer the Amulet at ordinary altars\nshooting range for crossbow isn't affected by strength; multi-shot volley is\nremove engravings at drawbridge location when it is opened, closed, or wrecked\nmonster killed in midst of multi-shot volley throwing/shooting might cause\n\tfreed memory to be accessed, potentially triggering a crash\nright-handed boomerang throw travels counterclockwise\ncan't arm bear traps or land mines on Planes of Air or Water\nstatues that \"come to life\" when trap activates shouldn't start out sleeping\nshopkeepers and priests wouldn't step on graves put in their rooms by bones\ncan't throw if poly'd into form which lacks hands\nmonsters can use ranged attacks over/around boulders, same as hero\ncan't eat an artifact you're unable to touch\nattempting to kick beyond map edge performed an out of array bounds memory\n\taccess; symptom seen was \"show_glyph: bad pos\" warning when blind\nattempting to engrave with an empty wand should always use a turn\ndon't access freed memory after engraving \"wrests one last charnge\" from wand\na magic portal could be rendered inactive for the hero if a successful\n\thangup save took place during level change; leaving the level by any\n\tmeans other than triggering the portal would reactivate it\ncan't drop part of a stack of N weapons welded to hero's hand\npickup still accepts m as command prefix, but now rejects F,g,G,M,numpad 5\nscatter piles of kicked gold rather than move the entire pile at once\nhero wasn't allowed to affix candles to the candelabrum while underwater\nnon-unicorn horn healing magic which cures sickness now also cures vomiting\nvomiting/nauseated state is included in enlightenment feedback\nvomiting countdown actually triggered the final vomit code twice\nrats aren't capable of vomiting\nfireproof, non-rustable weapon would be revealed as fireproof by hitting a\n\trust-causing target; ditto for fixed crysknife\nsurviving choking while eating various foods (cockatrice egg, fortune cookie,\n\twolfsbane, others) didn't carry through to those foods' side-effects\nshapechangers who take on mimic or hider form will mimic or hide when feasible\navoid War message if tinning a Rider corpse fails\nprevent long messages from triggering access violation or segmentation fault\n\tdue to buffer overflow in pline()\ncursed corpse wielded by a monster isn't welded to its hand or paw\nfix grammar errors in samurai quest, wakarimasu ka?\nfix spelling of Dr Dolittle\nhero's sleep resistance shouldn't protect steed from sleeping gas trap\n#jump attempt fails if mounted on sleeping steed; jumping spell still works\ndropped wielded, in use leash should remain in inventory, since it's in-use\nwielded, in use leash can't be snatched by whip-wielding monster\nwhen using two weapons at once, whip-wielding monster can target either one\nif normal game save file is restored via `nethack -X', restore in normal\n\tmode--with save file deletion--and require confirmation ala 'X'\n\tcommand to make deferred switch into explore mode\ncan't #force floor item while engulfed, levitating, or unskilled riding\ncan't lock or unlock doors while engulfed\nif hero or monster standing on opened drawbridge survives its destruction,\n\tfall into water or lava instead of remaining on top\ndon't give a speed change message when an immobile monster is seen to be hit\n\tby a wand of speed or slow monster\nwhen shopkeeper \"gratefully inherits possessions\" of hero who dies in shop\n\tdoorway without owing the shop, move those items inside shop for bones\ndying in a shop while wielding two weapons could cause \"Setworn: mask\" warning\nmake score file processing more bullet proof to avoid potential security issue\nstethoscope applied to hiding mimic will bring it out of hiding\nrephrase \"<artifact> evades your grasp\" message if artifact is already held\nartifacts which subsequently evade your grasp/control after already being\n\tworn or wielded become unworn/unwielded\ntowel equipped in weapon, alternate weapon, or quiver slot can be applied\nlit candle or potion of oil which burned out while equipped would leave stale\n\tweapon/alternate-weapon/quiver pointer that could cause panic or crash\nwielded/worn figurine which auto-transformed had same stale pointer bug\nlikewise with casting stone-to-flesh on self for figurine of non-veggy monst\nformat names of not yet id'd artifacts such that obj type shows for non-weapons\nhero with lycanthropy is vulnerable to silver in both human and beast form\nchanging alignment or shape triggers a check for equipment evading hero's grasp\npassive fire effects can damage attackers' weapons\nmake quest leader and nemesis be unlikely to be affected by traps\nwielded bow shouldn't affect outcome of kicked arrows\nranged polearm hit can divide puddings and can use confuse monster effect\ncharge for kicked shop-owned food if it gets used up taming a monster\ngive better feedback when thrown shop-owned food gets used up taming a monster\neffect of negative AC on damage received was calculated differently than\n\tnormal when deciding whether hero poly'd into pudding would split\nuse a more precise jumping path for far, non-straight line destinations\nunicorn horn produced by revived monster will polymorph as if non-magic\nstone-to-flesh on any golem statue or golem figurine creates flesh golem\nstone-to-flesh which activates shop-owned figurine entails shop charges\nmake giants be less likely to be randomly generated in Sokoban\nbear traps dish out some damage on initial entrapment\nbear traps and webs are harmless to water elementals\nhero with polymorph control and inflicted with lycanthropy can specify own\n\twerecritter or human werecritter monster types as polymorph target\nhero undergoing semi-controlled polymorph won't also undergo sex change\nwhen doppelgangers taking on new shape don't specifically pick nasty monster\n\tor role monster, bias the random form towards humanoid\nsalamanders can use green slime corpses to cure themselves of petrification\nincrease damage bonus applies when kicking while polymorphed into a monster\n\tform which has a kicking attack, just like for other kicks\nfeedback about summoned monsters may use singular when it should use plural\nif magically removing steed's saddle is fatal, don't leave it saddled in bones\ncharging prompt used wrong criteria when deciding whether to list rings\nrogue's backstab bonus doesn't apply for throwing attacks\nhiding monsters who are unhidden when hero leaves a level can hide upon return\ntouching a pile of objects while blind affects hero even when the pile is\n\tbig enough to give \"there are many objects here\" and not list them\nexplosion while engulfed only affects engulfer and hero, not adjacent monsters\neliminate case-sensitivity when converting words from singular to plural and\n\tvice versa, so some failing wishes like \"Gauntlets of Power\" now work\nbreath attack directed at self by poly'd hero always hits\nan orc (or gnome) will respond to #chat if hero is also an orc (or gnome)\noverride non-silver vs shades for artifacts which deal extra damage to undead\nassorted mirror fixes--mainly visibility issues\nkicking at \"empty space\" has side-effects so should use current turn\nusing weapon to kill tame engulfer from inside triggered \"placing defunct\n\tmonster onto map?\" warning\nsome monsters can't be strangled; self-polymorph can stop/restart strangulation\nnymphs could steal carried boulders\namnesia of object discoveries would never forget the very last one\nre-adjust gem generation probabilities when revisiting existing dungeon levels\nkick evasion shouldn't move monsters through walls\nkick evasion and jousting/staggering blows shouldn't move grid bugs diagonally\n#untrap didn't check whether hero could reach the ground\ndigging/chopping a closed drawbridge message mentioned digging a \"wall\"\nattacking via applied polearm now honors the \"confirm\" option\nengulfer under influence of conflict or confusion could swallow monster at\n\twater/lava/trap spot and not be affected by destination til next move\nunicorn horn restoration no longer overrides sustain ability characteristic\nhider monster revived from corpse would start out hidden (even if own corpse\n\twas only object around to hide under)\nfix sequencing issues with dropping #invoked Heart of Ahriman\napplying an unpaid stack of potions of oil forced hero to buy all of them\n\tinstead of just the one which got split off and lit\nsometimes when hero is forced to buy an unpaid shop item its price changed\nmonster could attack with a polearm even after attempt to wield that failed\nsometimes got \"you trip over it\" after intervening messages following the\n\tone which described \"it\"\nwizard mode: WIZKIT wishes could overflow inventory's 52 slots\ncode controlling item drops by small monsters still used pre-3.1.0 weight\nmonsters who want the Amulet won't attack the Wizard to try to get it\nwhen loading bones files, censor suspect characters from player-supplied\n\tstrings such as pet and fruit names\nopening or closing the castle drawbridge via music consumes a turn\ncan't swap places with tame grid bug when moving diagonally\ncan't move diagonally through a long worm's body (can still fight that way)\nrequire confirmation to read a scroll of mail if doing so will be the first\n\tviolation of illiteracy conduct\ncould get \"suddenly you cannot see the <mon>\" while invisible mon remained\n\tdisplayed due to telepathy or extended detection\ncutting a long worm in half would trigger segfault/accvio crash if the hit\n\ttook parent down to 1 hit point or if long worms had become extinct\ncutting a level 0 long worm in half produced a new worm with 0 hit points\nusing F to force an attack towards a boulder gave \"you attack thin air\"\nrandom \"treasure drop\" upon monster's death bypassed dropping side-effects\nmelted ice on Valkyrie quest should be pool, not moat\nsome variations of attempting to use open or close commands on a drawbridge\n\tdidn't give drawbridge-specific feedback\ntin contents can now sometimes be accessed on the same turn that the tin\n\tstarts being opened; when not, the opening feedback is more accurate\nNth adjustment of feedback when observing a pet eating\nmonsters who want the Amulet won't attack temple priests to try to get it\nblinded invisible hero can't see self as invisible via ';' or '/'\nit was possible to generate an object of 0 gold pieces by dropping 2**32 gold\nwizard mode's sanity_check option missed nested containers and migrating mons\nalways update map display and use up turn if open or close command attempted\n\twhile blind reveals change in door state or discloses non-door spot\na hangup save while picking up gold from shop floor could duplicate that gold\nsecret door detection's trap finding is no longer blocked by water or clouds\n\ton the Planes of Water and Air\npotion thrown by monster which hit a long worm's tail gave feedback about\n\thitting its head\nimplement energy vortex's previously unused energy drain attack\nchanging alignment type resets alignment record to 0 (nomimally aligned)\njellyfish do not technically have a head\nwhile polymorphed, suppress attribute gain/lose earned by pre-poly exercise\nwizard mode #monpolycontrol prompting asked about \"it\" when monster was unseen\nreprompt if player fails to make a menu choice during inventory identification\npotion explosion during failed alchemy should awaken nearby monsters\nseen eels who were stuck in isolated pools would never re-hide\ncan no longer get both strength and resistance from eating one giant corpse\naborting key/lock pick usage via ESC at direction prompt no longer uses a move\nlit south wall of C quest leader's room contained dark gap at secret door spot\nwhen probing from inside an engulfer, \"not carrying anything\" overlooked hero\narcheologist shouldn't start with sling skill by carrying slingable touchstone\nwearing or removing an amulet of restful sleep clobbered permanent sleepiness\nif attempt to select a co-aligned artifact for first divine gift fails because\n\tnone is available, choose one from among nonaligned artifacts\nensure current_fruit gets set to the correct index when setting fruit\n\toption to existing entry whose fid is not the highest\nmonsters already wearing suits can't put on shirts\nif breaking a wand of polymorph causes hero to drop items, don't transform them\ngive \"shuddering vibrations\" feedback if breaking a poly wand uses up items\nif polymorph causes a monster to drop items, they won't be used up via\n\tshuddering vibrations or as golem creation fodder\nmonsters who ate green slime corpses weren't turned into green slime\n\"hand slip\" while naming an object would never pick 'z' as a substitute letter\nhero would \"gladly take off <armor>\" for nymph or succubus even while asleep\nconcealed mimic wasn't revealed if kicking attmpt yielded a clumsy miss\ntoo accurate feedback given to a blinded hero when a monster summons insects\nif life-saved steed became untame, repeated \"placing steed onto map?\" warnings\n\twould be given as long as the hero remained mounted\nmessage sequencing for fatal explosions was confusing if feedback was given\n\tfor carried items being destroyed\nwhen dipping something in holy/unholy water, only learn its new bless/curse\n\tstate if hero sees it glow\ndescribe lit Sunsword as shining rather than glowing\nprevent poly'd shopkeepers from taking on forms that can't handle objects\nattempting to move direction 'u' as a grid bug performed #untrap command;\n\tthe other diagonals reported \"unknown command\" instead of \"you can't\"\nmimic posing as statue or corpse now picks and maintains particular monst type\ntrying to move down while levitating said \"you are floating high above floor\"\n\teven when being stuck in floor or lava blocked full levitation\nwhen levitating, don't show '>' as a likely direction for digging\npoly'd or mimicking hero who was hidden from monsters would still be treated\n\tas a normal target for their ranged attacks\nhero would remain stuck to an adjacent monster after rehumanizing if he had\n\tbeen attacked while hiding via #monster when poly'd into a small mimic\nhero poly'd into mimic and hiding as an object via #monster didn't unhide\n\twhen polymorphing into non-mimic\nattacking via applied polearm never scuffed engraving underneath hero\nauto-wielding a polearm took no time if ESC was used to cancel target choice\napplying a bullwhip while at very edge of map could target beyond edge,\n\tpotentially leading to a panic or crash\nprevent temple priests and minions from wearing helms of opposite alignment\n'D' drop command didn't handle 'u' choice correctly if the only unpaid items\n\twere inside containers\npearl rings shouldn't rust\nshouldn't be able to read a worn T-shirt when it's covered by a worn suit\nsimplify hero placement on Castle level when climbing up stairs from Valley\nspell attack by low-Int hero could inflict negative damage\nsome wand/spell/breath zaps that hit a secret door failed to reveal it\nwand explosion feedback about adjacent door was phrased as if for a wand zap\nimprove the message sequencing when a thrown poisoned weapon loses is poison\nmessage \"You hit the  with all your might.\" could be issued if a boulder\n\twent away while it was being dug/broken with a pick-axe\nprevent \"object lost\" panic if/when drinking a wielded potion of polymorph\n\tcauses hero's new form to drop weapon\ndocumentation tidbit:  change Guidebook and in-game help for pickup_burden\n\toption to match game's 'O' command (\"Unencumbered\", not \"Unburdened\")\nwriting while blind no longer possible for books, might fail for scrolls\nblanking items in pools while blind shouldn't reveal new obj description\n\tfor ones which had been seen before becoming blind\navoid infinite loop in topten output when killed by long-named monster\ngrid bug could move diagonally 1 step using travel command\nattempting to open, close, or lock/unlock a door while confused or stunned\n\tuses up a move regardless of whether direction choice finds a door\ngrammar fixes for vault guard messages given after player assigns guard a name\nwearing cloak of displacement auto-discovered it even when hero couldn't see\nwearing elven cloak auto-discovered it even when already stealthy\nputting on ring of stealth never auto-discovered it\nforgetting spells due to amnesia now sets memory retention to zero instead\n\tof removing them from hero's list of known spells\nshouldn't have been able write scrolls by guessing type name when they're\n\tonly partly known via name assignment\nscrolls given names can be written by assigned name as well as by description\nfix writing feedback \"the spellbook warps strangely, then turns parchment\"\nmake stone artifacts usually resist stone-to-flesh\nwhen reading an unknown scroll and learning it, discovery of teleporation was\n\ttoo late if hero happened to land on another scroll of teleportation\nusing an unlocking tool on a closed door which was actually a mimic reported\n\tthat there was no door to unlock instead of exposing the mimic\npurple worm could end up in wall or solid rock when swallowing ghost or xorn\nunpaid shop items stolen from hero by a monster remained on hero's shop bill\n#untrap toward known trap location containing concealed mimic would yield\n\t\"{The mimic|It} {is in the way|isn't trapped}.\" but not reveal mimic\nsome actions taken when blind would yield \"Wait!  That's a monster!\" (for a\n\tmimic posing as a door) but not display the unseen monster glyph\nenhance life-saving by preventing subsequent poison from being fatal upon\n\trescue from death due to spiked pit, dart trap, or poisoned missile\ndon't create mail daemons when populating special levels with random demons\nteleport control and polymorph control are ineffective while hero is stunned\ndon't report \"fried to a crisp\" for disintegration from divine wrath\nwhen polymorphed into an opposite sex monster, if you then become a new\n\thuman while failing to polymorph into something else, you'd be told\n\t\"you feel like a new man\" for female or \"a new woman\" for male  \nspellcasting monsters' spell selection became less likely to choose harder\n\tspells as their level got higher (including Wizard's \"double trouble\")\nEye of the Aethiopica, Eyes of the Overworld, and Sceptre of Might must be\n\tworn or wielded rather than just carried to convey magic resistance\nMitre of Holiness and Tsurugi of Muramasa convey Protection when worn/wielded\neffectiveness of magic cancellation by worn armor has been reduced\nProtection improves the effectiveness of magic cancellation\nthe weight of a non-cursed bag of holding was sometimes off by 1 unit\nfor number_pad:2 (MSDOS compatibility), M-5 (Alt+5, or Shift+keypad5 using\n\tMSDOS/Windows keystroke hackery) didn't function as G movement prefix\nif an angry shopkeeper chased the hero to a different level and then got paid\n\toff, he'd dismiss kops on that other level but not on his shop level\nobjects inside the Wizard's Tower can't be teleport to outside and vica versa\ndying in lava and being life-saved or leaving bones would destroy ring of\n\tfire resistance if it happened to be made of wood, and also burn up\n\tscrolls of fire and spellbook of fireball\nsurviving in lava boils away carried potions, but dying in lava and being\n\tlife-saved or leaving bones would keep them intact\nwhen applicable, give \"your body rises from the dead as an <undead>...\"\n\teven when bones data isn't being saved\nunlit candelabrum would become unlightable if its candles had exactly 1 turn\n\tof fuel left and it was applied anywhere other than the invocation spot\nhave shk claim ownership of worn saddle dropped by dying pet if hero is\n\tnot within the same shop at the time of the drop\ntemporary loss of Dex from wounded legs will become permanent if it occurs\n\twhile mounted and hero dismounts before steed's legs have healed\nfor poly'd hero hiding on ceiling who gets attacked, make attacker's position\n\tbe an eligible location for hero when vacating hero's spot for attacker\n\tto prevent ending up far away under crowded conditions\nfor poly'd hero hiding on ceiling, attack by sea monsters won't move them\n\tinto hero's position unless it is over water or they're already on land\nfor poly'd hero hiding on ceiling, attack by long worm might fill hero's\n\tdestination with worm's tail, so double check and maybe choose again\npoly'd hero can't hide on floor or ceiling when on Planes of Air or Water\nwhen shop prices are adjusted, handle roundoff (integer truncation) better\nfor hero poly'd into a monster form that lacks a weapon attack but has a claw\n\tattack, use wielded weapon even when claw attack isn't the very first\nrename the SLEEPING property and Sleeping attribute to SLEEPY and Sleepy, resp.\ncharacter escape sequence handling during options processing was vulernable\n\tto malformed escapes and could potentially be abused to clobber the\n\tstack and launch a buffer overrun attack\ngive alternate message for \"<mon> turns to flee\" when mon can't move\nall statues in a cockatrice nest were for giant ant if 'record' was empty\nwhen dying outside all shops on a level with multiple shopkeepers and one takes\n\thero's stuff, choose one who is owed money over first one on fmon list\nhero poly'd into a critter without hands could still open tins\nif a vault guard was killed, his inventory would be dropped at <0,0>\nthrowing gold to/at a vault guard will no longer be treated as an attack\nnon-pit traps created in vault guard's temporary corridor would remain after\n\tthe location reverted to solid rock\nusing magic to light vault guard's temporary corridor would produce lit solid\n\trock after reversion, and then yield lit corridor if dug out again\nif hero was blind, killing the vault guard while in his temporary corridor\n\twould leave hero encased in solid rock without informing player\nif hero dragged iron ball into temporary corridor and then killed vault guard,\n\tthe portion of corridor currently in existence would become permanent\non Plane of Water, restrict levitation and flying to air bubbles;\n\telsewhere, restrict them such that they don't work inside solid rock\nwand/scroll/spell of light now hurts gremlins (lamp/candle light doesn't)\nditto for hero in gremlin form (camera too)\nautosearch finds and transforms secret doors and corridors even while blind,\n\tbut it wasn't updating the map to show them unless the hero could see\nfix message typo, \"you sold some items inside <container> for N gold piecess\"\nhangup save made during magic mapping or <foo> detection performed while\n\tunderwater could put hero on top of the water after restore\nfix bug preventing stone-resistant monsters w/o gloves from wielding cockatrices\nitems conferring life drain resistance were affected by drain life spell\n'a'pply command could be used to recogniize undiscovered potions of oil\nfix replacing an existing bones file in wizard mode [load?y, unlink?n, die?y,\n\tsave?y, replace?y] for configurations using external file compression\ntheft of worn armor with wear/unwear delay would interfere with completion of\n\twearing or unwearing some other armor which also imposed a delay\n\t(disrupted wear attempt for +N helm of brilliance would result in loss\n\tof N points of Int and Wis; gauntlets of dexterity had similar problem)\n#sit while swallowed would give the wrong message\nalchemical explosion or evaporation only used up one potion instead of all\n\tthe potions being dipped\nfeedback for reverse-genocide was plural even when just one monster was created\nfix message given when part of a stack of items in a monster's inventory is\n\tbeing destroyed\nadd \"Boing!\" message when hero zaps resistant monster with striking/force bolt\nadjust gaze reflection message when your scales are embedded in your skin\nadjust turning-to-stone or -slime messages when you have no limbs\nwizard mode ^F on Plane of Water marked portal as seen but didn't display it\nmagic mapping now displays furniture in preference to known or remembered traps\n\tor objects and known traps in preference to remembered objects\nrestrictions on diagonal movement were ignored when crawling out of water\nwhen using magic whistle, prevent steed from being affected (trap interaction)\ndeclining to attack a peaceful monster via movement used up nutrition even\n\tthough no action took place\ndeclining to attack a peaceful monster via kicking woke nearby monsters and\n\tscuffed engraving at hero's location even though no action took place\nmake hero be immune from stinking cloud damage during successful prayer\nvery fast hero would sometimes take two consecutive moves with very fast\n\tmonsters then getting two moves, instead of interleaving the activity\nwhen a monster zapped by polymorph drops inventory because of its new form,\n\tdon't let that same zap hit the dropped item(s)\nentering an untended shop while blind gave an inappropriate message\nengraving feedback about partial text when weapon became too dull to finish\n\twas lacking sentence-ending period\nimpossible() might display inaccurate feedback after updating paniclog\nfix crash which occurred if hero was teleported onto a sink while busy putting\n\ton or taking off levitation boots\nfix \"object lost\" panic (or even crash) when dropping multiple items while\n\tlevitating and a lit potion of oil explodes and destroys some inventory\nfix \"object_is_local\" panic when saving bones after hero is killed by explosion\n\tproduced by dropped or thrown lit potion of oil\n\n\nPlatform- and/or Interface-Specific Fixes\n-----------------------------------------\nFreeBSD: compilation problems on FreeBSD 6.1\nlinux: compile support for TIOCGWINSZ by default\nsmartphone: do not translate input when command helper is hidden (fixes \n\tMotorola Q keyboard bug)\nsmartphone: new keypad layouts\nsmartphone: wizard mode command layout\nsmartphone: option to feed arbitrary text as a command to nethack core\ntty: when loading user's run-time configuration, explicitly negating one of\n\t{DEC,IBM,MAC}graphics options after enabling another of them switched\n\tto regular ASCII and left the earlier option inaccurately set to \"on\"\ntty: various bugfixes for very wide and/or tall screens\ntty+GOLDOBJ: dropping or looting by menu wouldn't honor a count for gold\nunix: remove use of parentheses in nethack man page usage that confused a\n\tman page conversion tool\nunix: new -wwindowtype option\nunix: don't clobber old level files if 2nd hangup/disconnect occurs while\n\treconnected user is responding to the \"destroy old game?\" prompt\nunix/Qt: saved games were not found if nethack was built with prefixes in use\nunix,vms: allow digits after first character in name at \"Who are you?\" prompt\nvms: the DLB configuration could fail to build if a file without a dot\n\tin its name happened to match a logical name\nWindows: starting a game with nethack.exe (tty) and saving, then restoring\n\tand finishing with nethackW.exe (win32) would display the high scores\n\toutput in a series of popup windows, one for each line of text\nWindows, probably MSDOS and OS/2: attempting to use very first false rumor\n\tfor cookie fortune or random engraving could produce garbled text\n\twhen rumors.tru had CR+LF line ends instead of Unix-style LF lines\n#if CLIPPING: during teleport or hurtle, re-clip the map immediately instead\n\tof waiting until hero's next move\nwinCE: disable processing of double-click messages if the first click\n\tcauses map to scroll\nwinCE: help text windows close immediately after open (unhandled WM_KEYDOWN in mhtext.c)\nwinCE: correct coordinates used by action button\nwinCE: wrap/unwrap text option for text windows\nwinCE: hardware keyboard detection\nwinCE: hide keypad when hardware keyboard is present\nwinCE: backport message window highlighting from winnt port\nwinCE: new icon with recommended image sizes\npocketpc: menu window closes on up/down keys from first/last position\nwin32gui: better handling of \"more\" prompt for messages that would have scrolled\n\toff the window\nwin32gui: set correct checkmark on \"Lock Windows\" menu item on startup\nwin32gui: redraw message window on resizing (it does not update properly otherwise)\nwin32gui: fixed copy/paste error in read registry settings function\nwin32gui: improved calculation of the size of the menu window\nwin32gui: made auto-arrange windows on/off option (it was reset automatically\n\twhich was unintuitive and in some cases annoying\nwin32gui: fix a possible crash with AltGr-4 WM_KEYDOWN handling\nwin32gui: use whatever alternate tile set is loaded in the menus\nwin32tty: prevent early error messages from flashing by too fast and not seen\nwin32tty: work around problem where display symbols were wrong or unrecognizable\n\ton systems where the default language for non-Unicode programs was not \n\tset to \"US English\" - courtesy Ray Chason\nwin32tty: work around problem where some characters did not show up if the\n\tconsole code page was other than 437\nX11: support dynamic switching of map mode via tiled_map option\nX11: added support for hilite_pet to text map mode\nX11: ensure vertical scrollbar shows up in text display windows\nX11: fix typo in mouse click sanity check; result might have pointed to\n\tspurious location after window resizing\nplatforms that support hangup: SAFERHANGUP to avoid losing objects in transit\n\tbetween lists when hangup occurs, and also avoid cheats due to\n\twell-timed hangups to stop a long melee\nbuild-from-source: dlb utility can handle arbitrary number of files\n\n\nGeneral New Features\n--------------------\nwhen you're teetering on the edge of a pit you can use '>' to enter the pit\nwhen you're flying over a pit you can use '>' to enter the pit\nwhen asked for a direction, a response of '?' yields help and then asks again\nwhen adding an item to inventory, try to stack it with the quiver slot\n\tbefore trying against other carried objects\n#adjust can be used to split an inventory stack\ncockatrice meat has a distinct flavor to some\nwish request for \"<something> armor\" will match item named \"<something> mail\"\nFire Brand and Frost Brand have a chance to avoid taking rust damage\nsupport ^R (and ^L in numpad mode) to request display repaint during direction\n\tchoosing and location choosing prompting modes\nintelligent pets will use keys to unlock doors\ndestroyed drawbridge leaves some iron chains\ngive feedback when a nearby monster grows into a stronger form\nfamiliars are now created without any starting inventory\nusing the 'f' command when quiver is empty will fill quiver with player's\n\tresponse to the \"what to throw?\" prompt\nbreaking a wand with the apply command has a chance to wrest an extra charge\nburying a punishment ball no longer ends your punishment\n#tip command (with M-T shortcut) to empty a container's contents onto floor\nadd clicklook option to allow looking at things on the display by clicking \n\tright mouse button when floating mouse pointer over them\nIzchak's lighting store is now able to stock oil for your lamp\nprovide core support for saving of messsage history in save file\nthe following actions can now be continued after save/restore: digging, \n\teating, studying, removing armor\nhero-created and monster-created ice will eventually melt away\nextend Warning to include ice danger\nwishing for particular variety of tin contents (deep fried, broiled, etc.)\ndebug-mode wishing for random monster(s) via '*'\ndebug-mode viewing of fully identified object descriptions without \n\tactually identifying the objects\nhealth-food store that stocks monk-appropriate foods in mine town when monk\ngive more information about your attributes in debug mode\npolywarn to give intrinsic monster detection of limited species while polymorphed\nrocks can skip on the water sometimes allowing them to pass over water creatures\nvampires can now shapeshift into bats and fog clouds; the latter can be done at \n\twill to slip through locked doors\nshapeshifted vampire will transform back to vampire form after you defeat it and\n\tcontinue to fight in its native form\ncontainer lknown flag for locked/unlocked/broken awareness\ncontainer cknown flag for container content awareness\nplname is stored in the save file on all platforms now\nintroduce support for negation of role, race, align, gender values to eliminate\n\tthem from random selection and the pick list of startup choices\nsome intelligent pets will avoid cannibalism\nkeep track of which monsters were cloned from other monsters\ncloned and revived monsters become worth fewer points than ordinary ones\nnumber_pad:3 run-time option to use inverted phone keypad layout for movement\nnumber_pad:-1 to swap function of y and z keys; z to move NW, y to zap wands\ndisplay spell retention information in the spell menu\ntame ghouls can eat old eggs\nnew effect for reading a scroll of light while confused\nallow digging an adjacent pit with wand of digging while trapped in a pit\n#terrain command to show unobstructed view of map (w/o mons, objs, traps)\ndigging can activate or disarm some types of traps\nsome monsters can eat tins in addition to corpses to cure some ailments\nadd Roderick Schertler's pickup_thrown patch\nadd ability to sort the list when viewing known spells with '+' command\ndescribe magic cancellation from worn armor in enlightment/end-of-game feedback\ndisclose half physical and/or spell damage in enlightment/end-of-game feedback\nrephrase see invisibility enlightenment feedback when unable to see at all\nadd atmospheric sound messages for temples\nsometimes give announcement message when monsters teleport to hero's vicinity\nobsolete config file keywords: GRAPHICS, OBJECTS, TRAPS, EFFECTS\ndeprecated options: IBMGraphics, DECGraphics, boulder\nnew options: symset, roguesymset for choosing a symbol set from the symbols file\nnew config file keyword: SYMBOLS for overriding character symbol values by name\nopening magic frees from bear traps and webs, activates trap doors\nclosing magic activates bear traps and webs\nlocking converts a hole into a trap door; striking does the opposite\nadd Malcolm Ryan's Statue Glyphs patch\nlembas and cram never rot unless cursed\nmultiple squeaks for squeaky boards\ninclude time, user ID, and play mode in paniclog entries\nadd oracle and rumor regarding priestly donations\nanti-magic traps have alternate effect on targets who have magic resistance\nthe Amulet can be offered to Moloch\njavelins and spears now share the same weapon skill\nall stackable weapons are capable of being thrown/shot for multi-shot volleys\nworm teeth and crysknives have become stackable\nimproved container interface\nacid can destroy iron bars\nOPTIONS=playmode:normal|explore|debug to choose mode without command-line\nscore bonus for ascending is reduced or denied for changing alignment\nplayer can give a monster class when asked for type of monster to poly into\nlikewise when asked about type for #monpolycontrol\nboth controlled self-polymorph and #monpolycontrol accept ESC, \"*\" or \"random\"\n\twhen asking for type of monster; ESC aborts #polyself command\nscroll of taming/spell of charm monster now gives some feedback\ndoppelgangers can take on the shape of alternate roles' quest guardians\npile_limit option to control when to switch to \"there are objects here\"\n\tvs listing objects on floor when hero goes over objects while moving\nsome monsters will use fire to prevent selves being turned into green slime\nadd `#vanquished' debug mode command\nC and #name commands are now same and use menu to choose monster vs object\nhallucination provides partial protection against gaze attacks\nattempting to read \"dull\" spellbook might cause hero to fall asleep\ndipping prompt is more precise\nusing F to attack wall/boulder/statue while wielding pick digs/breaks target\nshapechangers shouldn't receive starting inventory of their initial shape\nstreamline old ^X output and integrate it with enlightenment feedback;\n\tnew ^X output includes expanded form of abbreviated bottom line info\n\"killed by X\" becomes \"killed by a chameleon imitating X\" when appropriate\neating disenchanter corpses is now considered risky\nmake '[' command more precise when poly'd hero has embedded dragon scales/mail\nfainting while wielding a cockatrice corpse will be fatal\nSunsword's light radius depends on its curse/bless state\nAdd M-C and M-R meta-key shortcuts for #conduct and #ride, respectively \ncan now use ESC to cancel out of prompts for playing musical instruments\nbeing crowned gives an additional benefit:  one extra skill slot/credit\nchatting to a gecko or shopkeeper while hallucinating gives alternate message\nmimic posing as door might steal hero's key when [un]locking is attempted\npolymorphing into a dragon while wearing dragon scale mail will cause that\n\tmail to revert to dragon scales\nadopt/adapt/improve the Paranoid_Quit patch; default is paranoid_confirm:pray\n\tparanoid_confirm:Confirm when requiring \"yes\" instead of y to confirm,\n\t\t\t\t also require explicit \"no\" to reject\n\tparanoid_confirm:quit    yes vs y to quit or to enter explore mode\n\tparanoid_confirm:die     yes vs y to die in explore or wizard mode\n\tparanoid_confirm:bones   yes vs y to save bones when dying in wizard mode\n\tparanoid_confirm:attack  yes vs y to attack a peaceful monster\n\tparanoid_confirm:pray    y to confirm #pray; supersedes prayconfirm\n\tparanoid_confirm:Remove  always pick from inventory for 'R' and 'T'\nflexibility for specifying \"detect <foo>\" vs \"<foo> detection\" when wishing\nwhen a sokoban puzzle has been completed (last pit or hole filled in),\n\tstop assessing luck penalties and lift most movement restrictions\n'`' command to show discoveries for one class of objects\nadd \"about nethack\" to '?' menu as an alternate way to view 'v'+'#version'\ndisplay version and build information at startup\nrepeatedly setting the fruit option will check to see if fruits have been\n    created, so the user can't easily overflow the maximum this way\nbones files now include extra data to identify dead hero and reason for death\ndipping multiple potions in another potion may only dip part of their stack\nmake being inside a stinking cloud (when not immune or resistant) become a\n\tmajor trouble which is fixable by prayer\nintroduce some variation in monster movement rates\n\n\nPlatform- and/or Interface-Specific New Features\n------------------------------------------------\npcmain: check for dlb_init failure rather than relying on dungeon open failure\nwin32gui: support perm_invent\nwin32gui: menu option to add/remove windows captions\nwin32gui: support for saving/restoring message history\nwin32gui: added menu options \"Copy ASCII Screenshot To Clipboard\" and \"Save \n\tASCII Screenshot To File\"\nwin32tty: support for 'selectsaved' option for menu of existing save files\n\tto choose from at game startup\ntty: add window port routines for saving/restoring message history\ntty: enhanced role, race, &c selection at start of new game\nsmartphone: added \"Type Cmd\" command that allows to type arbitrary commands \n\tusing phone keypad\nsmartphone: added Q(quiver) command to \"Attack\" layout\nsmartphone: fixed F command to prompt for direction\nunix,vms: altmeta option to handle terminals which send \"ESC c\" for Alt+c\n\n\nCode Cleanup and Reorganization\n-------------------------------\nremoved OVLx section dividers previously  used for TRAMPOLINE overlay system\nmove all flags that are system or port specific from flag struct to sysflags \n\tstruct which is used only if SYSFLAGS is defined\nall fields in flags struct are unconditionally present\nmonst cham field now a short and uses mons[] index\nrearrange some monster ordering to follow rule #2 listed at top of monst.c\nchange region player_flags to more appropriate unsigned int instead of boolean\nremove remains of sync_hunger, which has been ifdef'd out for years\nnew mextra structure housing pointers to mname, egd, epri, eshk, emin, edog\nconsolidate vault.h, epri.h, eshk.h, emin.h and edog.h into new mextra.h\nnew oextra structure housing pointers to oname, omonst, omid, olong, and omailcmd\ndrawing symbols for DECGraphics, IBMGraphics, MACgraphics are now stored in an\n\texternal symbol file that can be changed without rebuilding\nnew hints-based configuration system\nallow documentation to be specialized to the options in the game binary\nadd param to winsys ini routines to allow cleaner shifting during startup\n</pre>\n==References==\n<references/>\n{{NGPL}}"}