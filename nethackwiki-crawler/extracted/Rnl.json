{"title":"Rnl","url":"https://nethackwiki.com/wiki/Rnl","type":"markdown","data":"- *Not to be confused with [rn1](/wiki/Rn1 \"Rn1\").*\n\n**rnl(`x`)**[\\[1\\]](#cite_note-main-1) is a pseudo-random number function used in *NetHack* when a result should be weighted by [Luck](/wiki/Luck \"Luck\").\n\nrnl(`x`) has the same range as rn2(`x`) (that is, 0 ≤ rnl(`x`) < `x`), but is weighted toward 0 if you have positive Luck, and toward `x` − 1 if you have negative Luck.\n\n[ ]\n\n## Contents\n\n- [1 Formula](#Formula)\n\n- [2 How it's used](#How_it.27s_used)\n\n  - [2.1 Events based solely on Luck](#Events_based_solely_on_Luck)\n  - [2.2 Events based on Luck and other stats](#Events_based_on_Luck_and_other_stats)\n  - [2.3 Numerical distributions](#Numerical_distributions)\n\n- [3 Mathematical analysis](#Mathematical_analysis)\n\n- [4 Sample distribution](#Sample_distribution)\n\n- [5 History](#History)\n\n- [6 References](#References)\n\n## Formula\n\nSee source code in [\\[1\\]](#cite_note-main-1)\n\nFor rnl(`x`), let `L` equal your Luck, including the [luck item](/wiki/Luck_item \"Luck item\") bonus or penalty, whether positive, negative, or zero.\n\nIf `x` ≤ 15, `L` = `L`⁄3, rounded toward the nearest integer.\n\nIf `L` = 0, return [rn2](/wiki/Rn2 \"Rn2\")(`x`).\n\nWith chance 137 + |`L`|, return rn2(`x`).\n\nOtherwise, return rn2(`x`) - `L`, but no less than 0 and no more than `x` - 1.\n\nThis means that rnl(`x`) is almost always equivalent to rn2(`x`) - Luck when `x` > 15. The chance of Luck being ignored is less than 3% in any case, and even smaller for stronger (positive or negative) Luck. For smaller values of `x`, rn2(`x`) - Luck3 is the most likely approximation.\n\n## How it's used\n\nIn the tables below, some very high (99.8%) and very low (0.2%) values above are rounded to 100% or 0%. Nothing is completely 100% or 0% likely, except where spelled out as \"certain\" or \"impossible\".\n\n### Events based solely on Luck\n\n| Situation                                                                                                                                                                                                                                                                                                                                                                         | Code                                                      | Luck  |       |       |       |       |       |       |       |       |\n| --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | --------------------------------------------------------- | ----- | ----- | ----- | ----- | ----- | ----- | ----- | ----- | ----- |\n|                                                                                                                                                                                                                                                                                                                                                                                   |                                                           | −11   | −8    | −5    | −2    | 0     | +2    | +5    | +8    | +11   |\n| Chance of your god helping you if you [pray](/wiki/Pray \"Pray\") with exactly 0 [alignment](/wiki/Alignment_record \"Alignment record\")                                                                                                                                                                                                                                             | `rnl(2)==0`[\\[2\\]](#cite_note-2)                          | 1%    | 1%    | 1%    | 1%    | 50%   | 99%   | 99%   | 99%   | 99%   |\n| Chance of [writing](/wiki/Magic_marker \"Magic marker\") a scroll you have not seen                                                                                                                                                                                                                                                                                                 | `rnl(15)==0`[\\[3\\]](#cite_note-3)                         | 0.2%  | 0.2%  | 0.2%  | 0.2%  | 6.7%  | 13.2% | 19.7% | 26.2% | 32.7% |\n| Chance of [writing](/wiki/Magic_marker \"Magic marker\") a scroll you have not seen, as a [Wizard](/wiki/Wizard \"Wizard\")                                                                                                                                                                                                                                                           | `rnl(5)==0`[\\[4\\]](#cite_note-4)                          | 0.5%  | 0.5%  | 0.5%  | 0.5%  | 20.0% | 39.5% | 59.0% | 78.5% | 98.0% |\n| Chance of failing to set a [land mine](/wiki/Land_mine \"Land mine\") (in which case it blows up) or [beartrap](/wiki/Beartrap \"Beartrap\") (nothing happens) while [riding](/wiki/Riding \"Riding\") and [unskilled](/wiki/Skill \"Skill\") at riding                                                                                                                                   | `rnl(10)>5`[\\[5\\]](#cite_note-5)                          | 79%   | 69%   | 59%   | 50%   | 40%   | 30%   | 21%   | 11%   | 1%    |\n| Chance of failing to set a [land mine](/wiki/Land_mine \"Land mine\") (in which case it blows up) or [beartrap](/wiki/Beartrap \"Beartrap\") (nothing happens) while [riding](/wiki/Riding \"Riding\") and [unskilled](/wiki/Skill \"Skill\") at riding, and [fumbling](/wiki/Fumbling \"Fumbling\") or using a cursed trap                                                                 | `rnl(10)>3`[\\[6\\]](#cite_note-6)                          | 99%   | 89%   | 79%   | 70%   | 60%   | 50%   | 41%   | 31%   | 21%   |\n| Chance that a trap goes off after you set it, if it was cursed or you were [fumbling](/wiki/Fumbling \"Fumbling\")                                                                                                                                                                                                                                                                  | `rnl(10)>5`[\\[7\\]](#cite_note-7)                          | 79%   | 69%   | 59%   | 50%   | 40%   | 30%   | 21%   | 11%   | 1%    |\n| Chance of snagging an item you can pick up when using a [bullwhip](/wiki/Bullwhip \"Bullwhip\") (instead of having it slip free)                                                                                                                                                                                                                                                    | `rnl(6)==0`[\\[8\\]](#cite_note-8)                          | 0.4%  | 0.4%  | 0.4%  | 0.4%  | 16.7% | 32.9% | 49.1% | 65.4% | 81.8% |\n| Chance of finding [secret passages](/wiki/Secret_passage \"Secret passage\") and [doors](/wiki/Secret_door \"Secret door\") on each surrounding square when [searching](/wiki/Search \"Search\")                                                                                                                                                                                        | `rnl(7)==0`[\\[9\\]](#cite_note-9)                          | 0.3%  | 0.4%  | 0.4%  | 0.4%  | 14.3% | 28.2% | 42.1% | 56.1% | 70.0% |\n| Chance of finding [secret passages](/wiki/Secret_passage \"Secret passage\") and [doors](/wiki/Secret_door \"Secret door\") on each surrounding square when [searching](/wiki/Search \"Search\"), while wearing a [pair of lenses](/wiki/Pair_of_lenses \"Pair of lenses\")                                                                                                               | `rnl(5)==0`[\\[10\\]](#cite_note-10)                        | 0.5%  | 0.5%  | 0.5%  | 0.5%  | 20.0% | 39.5% | 59.0% | 78.5% | 98.0% |\n| Chance of finding [secret passages](/wiki/Secret_passage \"Secret passage\") and [doors](/wiki/Secret_door \"Secret door\") on each surrounding square when [searching](/wiki/Search \"Search\"), while wielding a +5 [Excalibur](/wiki/Excalibur \"Excalibur\"), or +3 Excalibur and lenses, or any better combination                                                                   | `rnl(2)==0`[\\[11\\]](#cite_note-11)                        | 1.2%  | 1.3%  | 1.3%  | 1.3%  | 50%   | 98.7% | 98.7% | 98.8% | 98.8% |\n| Chance of finding a hidden [trap](/wiki/Trap \"Trap\") when [searching](/wiki/Search \"Search\")                                                                                                                                                                                                                                                                                      | `rnl(8)==0`[\\[12\\]](#cite_note-12)                        | 0.3%  | 0.3%  | 0.3%  | 0.3%  | 12.5% | 24.7% | 36.9% | 49.1% | 61.3% |\n| Chance of a blessed [projectile](/wiki/Projectile \"Projectile\") *not* breaking when thrown                                                                                                                                                                                                                                                                                        | `rnl(4)==0`[\\[13\\]](#cite_note-13)                        | 0.6%  | 0.6%  | 0.6%  | 0.7%  | 25%   | 49.3% | 73.7% | 98.1% | 98.2% |\n| Chance of being [petrified](/wiki/Stoning \"Stoning\") if your [saddle](/wiki/Saddle \"Saddle\") slips off[\\[14\\]](#cite_note-14) or is destroyed, or you are polymorphed and lose stone resistance,[\\[15\\]](#cite_note-15) when you are riding a steed that petrifies on touch (likely due to your horse having just polymorphed into a [cockatrice](/wiki/Cockatrice \"Cockatrice\")) | `rnl(3)>0`                                                | 99.2% | 99.2% | 99.1% | 99.1% | 66.7% | 34.2% | 1.7%  | 1.7%  | 1.6%  |\n| Chance of a random [levelport](/wiki/Levelport \"Levelport\") when attempting to [controlled](/wiki/Teleport_control \"Teleport control\") levelport (or cancel) while [confused](/wiki/Confused \"Confused\")                                                                                                                                                                          | `rnl(5)>0`[\\[16\\]](#cite_note-16)                         | 99.5% | 99.5% | 99.5% | 99.5% | 80.0% | 60.5% | 41.0% | 21.5% | 2.0%  |\n| Chance of blessed equipment *not* being eroded by rust[\\[17\\]](#cite_note-17) or water[\\[18\\]](#cite_note-18) damage, or blessed flammable items not being burned by fire damage[\\[19\\]](#cite_note-19)                                                                                                                                                                           | `rnl(4)==0`                                               | 0.6%  | 0.6%  | 0.6%  | 0.7%  | 25%   | 49.3% | 73.7% | 98.1% | 98.2% |\n| Chance of a monster becoming angry when it steps in a trap set by you,[\\[20\\]](#cite_note-20) or of you triggering a trap when failing to disarm it[\\[21\\]](#cite_note-21)                                                                                                                                                                                                        | `rnl(5)>0`                                                | 99.5% | 99.5% | 99.5% | 99.5% | 80.0% | 60.5% | 41.0% | 21.5% | 2.0%  |\n| Chance of a hostile, awake, unfrozen, mindful, non-​@ monster becoming peaceful when you free it from a trap not set by you                                                                                                                                                                                                                                                       | `rnl(10)<8`[\\[22\\]](#cite_note-22)                        | 40.1% | 50.8% | 60.5% | 70.3% | 80.0% | 89.7% | 99.5% | 99.5% | 99.5% |\n| Chance of a lawful player getting +1 [alignment](/wiki/Alignment_record \"Alignment record\") for the above                                                                                                                                                                                                                                                                         | `rnl(8)==0`, one-third of the time[\\[23\\]](#cite_note-23) | 0.1%  | 0.1%  | 0.1%  | 0.1%  | 4.2%  | 8.2%  | 12.3% | 16.4% | 20.4% |\n| Chance of getting +1 [alignment](/wiki/Alignment_record \"Alignment record\") for trying and failing to lift a hostile, mobile, mindful, nonhuman monster out of a pit not dug by you                                                                                                                                                                                               | `rnl(10)<3`[\\[24\\]](#cite_note-24)                        | 0.7%  | 0.8%  | 10.5% | 20.2% | 30%   | 39.7% | 49.5% | 59.3% | 69.0% |\n| Chance of having a [boomerang](/wiki/Boomerang \"Boomerang\") break when used as a melee weapon                                                                                                                                                                                                                                                                                     | `rnl(4)==3`[\\[25\\]](#cite_note-25)                        | 98.2% | 98.1% | 73.7% | 49.3% | 25%   | 0.7%  | 0.6%  | 0.6%  | 0.6%  |\n| Chance of having a non-artifact [lance](/wiki/Lance \"Lance\") break when successfully jousting a solid monster                                                                                                                                                                                                                                                                     | `rnl(50)==49`, 1⁄5 of the time[\\[26\\]](#cite_note-26)     | 4.71% | 3.53% | 2.35% | 1.18% | 0.4%  | 0.01% | 0.01% | 0.01% | 0.01% |\n\n### Events based on Luck and other stats\n\n| Situation                                                                                                                                                                                                                                                                  | Code                                                                                                                                        | Luck                                                                                                                        |       |       |       |       |       |       |       |       |\n| -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------- | --------------------------------------------------------------------------------------------------------------------------- | ----- | ----- | ----- | ----- | ----- | ----- | ----- | ----- |\n|                                                                                                                                                                                                                                                                            |                                                                                                                                             | −11                                                                                                                         | −8    | −5    | −2    | 0     | +2    | +5    | +8    | +11   |\n| Chance of kicking down a door                                                                                                                                                                                                                                              | `rnl(35)<X`, where X = avg(str, dex, con) + (dex if [Samurai](/wiki/Samurai \"Samurai\") or [Monk](/wiki/Monk \"Monk\"))[\\[27\\]](#cite_note-27) | Approx `Luck` + X35 chance                                                                                                  |       |       |       |       |       |       |       |       |\n| Chance of kicking down a door when avg(str, dex, con) is 10                                                                                                                                                                                                                | `rnl(35)<10`                                                                                                                                | 0.5%                                                                                                                        | 6.2%  | 14.6% | 23.0% | 28.6% | 34.1% | 42.5% | 50.9% | 59.3% |\n| Chance of kicking down a door when avg(str, dex, con) is 15                                                                                                                                                                                                                | `rnl(35)<15`                                                                                                                                | 12.1%                                                                                                                       | 20.5% | 28.9% | 37.3% | 42.9% | 48.4% | 56.8% | 65.2% | 73.6% |\n| Chance of kicking down a door as a [Samurai](/wiki/Samurai \"Samurai\") or [Monk](/wiki/Monk \"Monk\") when avg(str, con) is 15 and dex is 15                                                                                                                                  | `rnl(35)<30`                                                                                                                                | 54.9%                                                                                                                       | 63.4% | 71.8% | 80.1% | 85.7% | 91.3% | 99.7% | 99.7% | 99.7% |\n| Chance of opening a door                                                                                                                                                                                                                                                   | `rnl(20)<X`, where X = avg(str, dex, con)[\\[28\\]](#cite_note-28)                                                                            | Approx `Luck` + X20 chance[\\[29\\]](#cite_note-29)                                                                           |       |       |       |       |       |       |       |       |\n| Chance of opening a door when avg(str, dex, con) is 10                                                                                                                                                                                                                     | `rnl(20)<10`                                                                                                                                | 1%                                                                                                                          | 11%   | 26%   | 40%   | 50%   | 60%   | 74%   | 89%   | 99%   |\n| Chance of opening a door when avg(str, dex, con) is 15                                                                                                                                                                                                                     | `rnl(20)<15`                                                                                                                                | 21%                                                                                                                         | 36%   | 51%   | 65%   | 75%   | 85%   | 99%   | 99%   | 99%   |\n| One criterion (the other being [alignment](/wiki/Alignment_record \"Alignment record\")-based) for a [minion](/wiki/Minion \"Minion\") to be summoned when converting[\\[30\\]](#cite_note-30) (or attempting to convert[\\[31\\]](#cite_note-31)) an [altar](/wiki/Altar \"Altar\") | `rnl(your level)>6`                                                                                                                         | Impossible before level 8, more likely with low luck or higher level                                                        |       |       |       |       |       |       |       |       |\n| Chance of summoning a minion, all other criteria being met, at level 8                                                                                                                                                                                                     | `rnl(8)>6`                                                                                                                                  | 61.3%                                                                                                                       | 49.1% | 36.9% | 24.7% | 12.5% | 0.3%  | 0.3%  | 0.3%  | 0.3%  |\n| Chance of summoning a minion, all other criteria being met, at level 12                                                                                                                                                                                                    | `rnl(12)>6`                                                                                                                                 | 74.2%                                                                                                                       | 66.0% | 58.0% | 49.8% | 41.7% | 33.6% | 25.4% | 17.3% | 9.1%  |\n| Chance of summoning a minion, all other criteria being met, at level 16                                                                                                                                                                                                    | `rnl(16)>6`                                                                                                                                 | 99.1%                                                                                                                       | 99.0% | 86.8% | 68.4% | 56.3% | 44.1% | 25.7% | 7.4%  | 1.2%  |\n| Chance of summoning a minion, all other criteria being met, at level 24                                                                                                                                                                                                    | `rnl(24)>6`                                                                                                                                 | 99.4%                                                                                                                       | 99.4% | 91.2% | 79.0% | 70.8% | 62.7% | 50.5% | 38.2% | 26.0% |\n| Chance of [angering](/wiki/Anger \"Anger\") your god by praying in [Gehennom](/wiki/Gehennom \"Gehennom\")                                                                                                                                                                     | `rnl(alignment)>0`[\\[32\\]](#cite_note-32)                                                                                                   | Certain with negative alignment, impossible at alignment 1, more likely with higher alignment, less likely with higher luck |       |       |       |       |       |       |       |       |\n| Chance of [angering](/wiki/Anger \"Anger\") your god by praying in [Gehennom](/wiki/Gehennom \"Gehennom\") at alignment 2                                                                                                                                                      | `rnl(2)>0`                                                                                                                                  | 98.8%                                                                                                                       | 98.8% | 98.7% | 98.7% | 50%   | 1.3%  | 1.3%  | 1.3%  | 1.2%  |\n| Chance of [angering](/wiki/Anger \"Anger\") your god by praying in [Gehennom](/wiki/Gehennom \"Gehennom\") at alignment 4                                                                                                                                                      | `rnl(4)>0`                                                                                                                                  | 99.4%                                                                                                                       | 99.4% | 99.3% | 99.3% | 75%   | 50.7% | 26.3% | 1.9%  | 1.8%  |\n| Chance of [angering](/wiki/Anger \"Anger\") your god by praying in [Gehennom](/wiki/Gehennom \"Gehennom\") at alignment 8                                                                                                                                                      | `rnl(8)>0`                                                                                                                                  | 99.7%                                                                                                                       | 99.7% | 99.7% | 99.7% | 87.5% | 75.3% | 63.1% | 50.9% | 38.7% |\n| Chance of [angering](/wiki/Anger \"Anger\") your god by praying in [Gehennom](/wiki/Gehennom \"Gehennom\") at alignment 16                                                                                                                                                     | `rnl(16)>0`                                                                                                                                 | 99.9%                                                                                                                       | 99.9% | 99.9% | 99.9% | 93.8% | 81.6% | 63.2% | 44.9% | 26.4% |\n| Chance of [angering](/wiki/Anger \"Anger\") your god by praying in [Gehennom](/wiki/Gehennom \"Gehennom\") at alignment 32                                                                                                                                                     | `rnl(32)>0`                                                                                                                                 | 99.9%                                                                                                                       | 99.9% | 99.9% | 99.9% | 96.9% | 90.8% | 81.6% | 72.4% | 63.2% |\n\n### Numerical distributions\n\n| Value                                                                                                                                                  | Code                                  | Luck |     |     |     |      |     |     |     |     |\n| ------------------------------------------------------------------------------------------------------------------------------------------------------ | ------------------------------------- | ---- | --- | --- | --- | ---- | --- | --- | --- | --- |\n|                                                                                                                                                        |                                       | −11  | −8  | −5  | −2  | 0    | +2  | +5  | +8  | +11 |\n| Average number of fruit that fall from a [tree](/wiki/Tree \"Tree\") when you kick it                                                                    | `8-rnl(7)`[\\[33\\]](#cite_note-33)     | 2.5  | 2.9 | 3.5 | 4.2 | 5    | 5.8 | 6.5 | 7.1 | 7.5 |\n| Average number of bees that are summoned from a tree if you kick it                                                                                    | `rnl(4)+2`[\\[34\\]](#cite_note-34)     | 5    | 5   | 4.7 | 4.2 | 3.5  | 2.8 | 2.3 | 2   | 2   |\n| Average number of [gold pieces](/wiki/Gold_piece \"Gold piece\") dropped by a [gold golem](/wiki/Gold_golem \"Gold golem\") on death                       | `200-rnl(101)`[\\[35\\]](#cite_note-35) | 140  | 143 | 145 | 148 | 150  | 152 | 155 | 157 | 160 |\n| Average number of darts or arrows left behind when disarming a [dart trap](/wiki/Dart_trap \"Dart trap\") or [arrow trap](/wiki/Arrow_trap \"Arrow trap\") | `50-rnl(50)`[\\[36\\]](#cite_note-36)   | 16   | 18  | 21  | 24  | 25.5 | 27  | 30  | 33  | 35  |\n\n## Mathematical analysis\n\nBasically, rnl(`x`) generates a number between 0 and `x` − 1, and adjusts it in proportion to the player's Luck, with a small chance (which is smaller when Luck tends toward the extremes) of leaving it alone. The net effect is that with positive or negative Luck, the highest or lowest numbers on the list become vanishingly unlikely, and the odds of getting the best and worst result increase, while the odds of getting every result in between stays the same.\n\nFurther complicating the matter is that, when `x` is 15 or less, the adjustment is divided by 3, which means that for those calls there is a stepwise distribution where the odds of everything are almost completely the same within blocks of 3 numbers (−13 to −11, −10 to −8, −7 to −5, −4 to −2, −1 to 1, 2 to 4, 5 to 7, 8 to 10, 11 to 13). Larger parameters have smoother distributions.\n\nIn addition, the function often being called in unusual manners, such as comparing it to a non-zero constant, which results in a \"slice\" being taken from the distribution graph at a less easily explainable point. This is evidenced in the distrubtions for rnl(A)\\<B or rnl(A)>B above.\n\nSince many of the comparisons are made against 0, having even −2 Luck can cause many results to swing against the player's favor with near certainty. −1 Luck is not as bad as most of these calls also have a small parameter, although it does negatively affect many things that do not call rnl (like [prayer](/wiki/Prayer \"Prayer\") or [wishing](/wiki/Wish \"Wish\")). On the flip side, positive Luck's effect tends to be much less dramatic, and +2 Luck still has a lot of room for improvement. +1 Luck changes almost nothing significantly; the only pronounced effect it has is to cause jousting to be much safer.\n\n## Sample distribution\n\nThis table is the computed odds of rnl(10) at each possible Luck for each possible result. The \"0%\" values are actually around 0.24–0.26% depending on the magnitude of the Luck.\n\n| Luck | Simplified results |     |     |     |     |     |     |     |     |     |\n| ---- | ------------------ | --- | --- | --- | --- | --- | --- | --- | --- | --- |\n|      | 0                  | 1   | 2   | 3   | 4   | 5   | 6   | 7   | 8   | 9   |\n| −13  | 0%                 | 0%  | 0%  | 0%  | 10% | 10% | 10% | 10% | 10% | 49% |\n| −12  | 0%                 | 0%  | 0%  | 0%  | 10% | 10% | 10% | 10% | 10% | 49% |\n| −11  | 0%                 | 0%  | 0%  | 0%  | 10% | 10% | 10% | 10% | 10% | 49% |\n| −10  | 0%                 | 0%  | 0%  | 10% | 10% | 10% | 10% | 10% | 10% | 39% |\n| −9   | 0%                 | 0%  | 0%  | 10% | 10% | 10% | 10% | 10% | 10% | 39% |\n| −8   | 0%                 | 0%  | 0%  | 10% | 10% | 10% | 10% | 10% | 10% | 39% |\n| −7   | 0%                 | 0%  | 10% | 10% | 10% | 10% | 10% | 10% | 10% | 29% |\n| −6   | 0%                 | 0%  | 10% | 10% | 10% | 10% | 10% | 10% | 10% | 29% |\n| −5   | 0%                 | 0%  | 10% | 10% | 10% | 10% | 10% | 10% | 10% | 29% |\n| −4   | 0%                 | 10% | 10% | 10% | 10% | 10% | 10% | 10% | 10% | 20% |\n| −3   | 0%                 | 10% | 10% | 10% | 10% | 10% | 10% | 10% | 10% | 20% |\n| −2   | 0%                 | 10% | 10% | 10% | 10% | 10% | 10% | 10% | 10% | 20% |\n| −1   | 10%                | 10% | 10% | 10% | 10% | 10% | 10% | 10% | 10% | 10% |\n| 0    | 10%                | 10% | 10% | 10% | 10% | 10% | 10% | 10% | 10% | 10% |\n| 1    | 10%                | 10% | 10% | 10% | 10% | 10% | 10% | 10% | 10% | 10% |\n| 2    | 20%                | 10% | 10% | 10% | 10% | 10% | 10% | 10% | 10% | 0%  |\n| 3    | 20%                | 10% | 10% | 10% | 10% | 10% | 10% | 10% | 10% | 0%  |\n| 4    | 20%                | 10% | 10% | 10% | 10% | 10% | 10% | 10% | 0%  | 0%  |\n| 5    | 29%                | 10% | 10% | 10% | 10% | 10% | 10% | 10% | 0%  | 0%  |\n| 6    | 29%                | 10% | 10% | 10% | 10% | 10% | 10% | 10% | 0%  | 0%  |\n| 7    | 29%                | 10% | 10% | 10% | 10% | 10% | 10% | 10% | 0%  | 0%  |\n| 8    | 39%                | 10% | 10% | 10% | 10% | 10% | 10% | 0%  | 0%  | 0%  |\n| 9    | 39%                | 10% | 10% | 10% | 10% | 10% | 10% | 0%  | 0%  | 0%  |\n| 10   | 39%                | 10% | 10% | 10% | 10% | 10% | 10% | 0%  | 0%  | 0%  |\n| 11   | 49%                | 10% | 10% | 10% | 10% | 10% | 0%  | 0%  | 0%  | 0%  |\n| 12   | 49%                | 10% | 10% | 10% | 10% | 10% | 0%  | 0%  | 0%  | 0%  |\n| 13   | 49%                | 10% | 10% | 10% | 10% | 10% | 0%  | 0%  | 0%  | 0%  |\n\n## History\n\nIn [NetHack 3.4.3](/wiki/NetHack_3.4.3 \"NetHack 3.4.3\"), the formulas were slightly different.[\\[37\\]](#cite_note-37)\n\nLet `R` be a random integer number from 0 to `x` − 1 (inclusive).\n\nIf Luck = 0, `R` is returned.\n\nOtherwise, with 150 − Luck chance (since Luck ranges from −13 to 13, the chance should be between 137 and 163), `R` is returned.\n\nOtherwise, if `x` ≤  15 and Luck ≥ −5 (that is, `x` is not too big and the player is not too unlucky), Luck3 (truncated towards zero) is subtracted from `R`, then `R` is forced into the interval \\[0, `x` − 1] and returned.\n\nOtherwise, Luck is subtracted from `R`, then `R` is forced into the interval \\[0, `x` − 1] and returned.\n\n## References\n\n1. ↑ [1.0](#cite_ref-main_1-0) [1.1](#cite_ref-main_1-1) [src/rnd.c in NetHack 3.6.6, line 116](https://github.com/NetHack/NetHack/blob/NetHack-3.6.6_Released/src/rnd.c#L116)\n2. [↑](#cite_ref-2) [pray.c in NetHack 3.4.3, line 828](/wiki/Source:NetHack_3.4.3/pray.c#line828 \"Source:NetHack 3.4.3/pray.c\")\n3. [↑](#cite_ref-3) [write.c in NetHack 3.4.3, line 201](/wiki/Source:NetHack_3.4.3/write.c#line201 \"Source:NetHack 3.4.3/write.c\")\n4. [↑](#cite_ref-4) [write.c in NetHack 3.4.3, line 201](/wiki/Source:NetHack_3.4.3/write.c#line201 \"Source:NetHack 3.4.3/write.c\")\n5. [↑](#cite_ref-5) [apply.c in NetHack 3.4.3, line 2034](/wiki/Source:NetHack_3.4.3/apply.c#line2034 \"Source:NetHack 3.4.3/apply.c\")\n6. [↑](#cite_ref-6) [apply.c in NetHack 3.4.3, line 2034](/wiki/Source:NetHack_3.4.3/apply.c#line2034 \"Source:NetHack 3.4.3/apply.c\")\n7. [↑](#cite_ref-7) [apply.c in NetHack 3.4.3, line 2097](/wiki/Source:NetHack_3.4.3/apply.c#line2097 \"Source:NetHack 3.4.3/apply.c\")\n8. [↑](#cite_ref-8) [apply.c in NetHack 3.4.3, line 2174](/wiki/Source:NetHack_3.4.3/apply.c#line2174 \"Source:NetHack 3.4.3/apply.c\")\n9. [↑](#cite_ref-9) [detect.c in NetHack 3.4.3, line 1191](/wiki/Source:NetHack_3.4.3/detect.c#line1191 \"Source:NetHack 3.4.3/detect.c\")\n10. [↑](#cite_ref-10) [detect.c in NetHack 3.4.3, line 1183](/wiki/Source:NetHack_3.4.3/detect.c#line1183 \"Source:NetHack 3.4.3/detect.c\")\n11. [↑](#cite_ref-11) [detect.c in NetHack 3.4.3, line 1183](/wiki/Source:NetHack_3.4.3/detect.c#line1183 \"Source:NetHack 3.4.3/detect.c\")\n12. [↑](#cite_ref-12) [detect.c in NetHack 3.4.3, line 1248](/wiki/Source:NetHack_3.4.3/detect.c#line1248 \"Source:NetHack 3.4.3/detect.c\")\n13. [↑](#cite_ref-13) [dothrow.c in NetHack 3.4.3, line 1332](/wiki/Source:NetHack_3.4.3/dothrow.c#line1332 \"Source:NetHack 3.4.3/dothrow.c\")\n14. [↑](#cite_ref-14) [worn.c in NetHack 3.4.3, line 741](/wiki/Source:NetHack_3.4.3/worn.c#line741 \"Source:NetHack 3.4.3/worn.c\")\n15. [↑](#cite_ref-15) [polyself.c in NetHack 3.4.3, line 485](/wiki/Source:NetHack_3.4.3/polyself.c#line485 \"Source:NetHack 3.4.3/polyself.c\")\n16. [↑](#cite_ref-16) [teleport.c in NetHack 3.4.3, line 606](/wiki/Source:NetHack_3.4.3/teleport.c#line606 \"Source:NetHack 3.4.3/teleport.c\")\n17. [↑](#cite_ref-17) [trap.c in NetHack 3.4.3, line 162](/wiki/Source:NetHack_3.4.3/trap.c#line162 \"Source:NetHack 3.4.3/trap.c\")\n18. [↑](#cite_ref-18) [trap.c in NetHack 3.4.3, line 2735](/wiki/Source:NetHack_3.4.3/trap.c#line2735 \"Source:NetHack 3.4.3/trap.c\")\n19. [↑](#cite_ref-19) [trap.c in NetHack 3.4.3, line 2666](/wiki/Source:NetHack_3.4.3/trap.c#line2666 \"Source:NetHack 3.4.3/trap.c\")\n20. [↑](#cite_ref-20) [trap.c in NetHack 3.4.3, line 1716](/wiki/Source:NetHack_3.4.3/trap.c#line1716 \"Source:NetHack 3.4.3/trap.c\")\n21. [↑](#cite_ref-21) [trap.c in NetHack 3.4.3, line 3122](/wiki/Source:NetHack_3.4.3/trap.c#line3122 \"Source:NetHack 3.4.3/trap.c\")\n22. [↑](#cite_ref-22) [trap.c in NetHack 3.4.3, line 3166](/wiki/Source:NetHack_3.4.3/trap.c#line3166 \"Source:NetHack 3.4.3/trap.c\")\n23. [↑](#cite_ref-23) [trap.c in NetHack 3.4.3, line 3176](/wiki/Source:NetHack_3.4.3/trap.c#line3176 \"Source:NetHack 3.4.3/trap.c\")\n24. [↑](#cite_ref-24) [trap.c in NetHack 3.4.3, line 3294](/wiki/Source:NetHack_3.4.3/trap.c#line3294 \"Source:NetHack 3.4.3/trap.c\")\n25. [↑](#cite_ref-25) [uhitm.c in NetHack 3.4.3, line 587](/wiki/Source:NetHack_3.4.3/uhitm.c#line587 \"Source:NetHack 3.4.3/uhitm.c\")\n26. [↑](#cite_ref-26) [uhitm.c in NetHack 3.4.3, line 1153](/wiki/Source:NetHack_3.4.3/uhitm.c#line1153 \"Source:NetHack 3.4.3/uhitm.c\")\n27. [↑](#cite_ref-27) [dokick.c in NetHack 3.4.3, line 1046](/wiki/Source:NetHack_3.4.3/dokick.c#line1046 \"Source:NetHack 3.4.3/dokick.c\")\n28. [↑](#cite_ref-28) [lock.c in NetHack 3.4.3, line 562](/wiki/Source:NetHack_3.4.3/lock.c#line562 \"Source:NetHack 3.4.3/lock.c\")\n29. [↑](#cite_ref-29) computed numbers slightly incorrect\n30. [↑](#cite_ref-30) [pray.c in NetHack 3.4.3, line 1396](/wiki/Source:NetHack_3.4.3/pray.c#line1396 \"Source:NetHack 3.4.3/pray.c\")\n31. [↑](#cite_ref-31) [pray.c in NetHack 3.4.3, line 1408](/wiki/Source:NetHack_3.4.3/pray.c#line1408 \"Source:NetHack 3.4.3/pray.c\")\n32. [↑](#cite_ref-32) [pray.c in NetHack 3.4.3, line 1618](/wiki/Source:NetHack_3.4.3/pray.c#line1618 \"Source:NetHack 3.4.3/pray.c\")\n33. [↑](#cite_ref-33) [dokick.c in NetHack 3.4.3, line 900](/wiki/Source:NetHack_3.4.3/dokick.c#line900 \"Source:NetHack 3.4.3/dokick.c\")\n34. [↑](#cite_ref-34) [dokick.c in NetHack 3.4.3, line 900](/wiki/Source:NetHack_3.4.3/dokick.c#line900 \"Source:NetHack 3.4.3/dokick.c\")\n35. [↑](#cite_ref-35) [mon.c in NetHack 3.4.3, line 278](/wiki/Source:NetHack_3.4.3/mon.c#line278 \"Source:NetHack 3.4.3/mon.c\")\n36. [↑](#cite_ref-36) [trap.c in NetHack 3.4.3, line 3274](/wiki/Source:NetHack_3.4.3/trap.c#line3274 \"Source:NetHack 3.4.3/trap.c\")\n37. [↑](#cite_ref-37) [rnl in rnd.c for Nethack 3.4.3](https://nethackwiki.com/wiki/Source:NetHack_3.4.3/src/rnd.c#rnl)\n\n[![This article may require revision for the next version of NetHack. Click here for more information.](/images/b/b0/Nh343-icon.png)](/wiki/NetHackWiki:Next_version \"This article may require revision for the next version of NetHack. Click here for more information.\")\n\n**This page may need to be updated for the [current version](/wiki/Current_version \"Current version\") of *NetHack*.**\n\nIt may contain text specific to [NetHack 3.4.3](/wiki/NetHack_3.4.3 \"NetHack 3.4.3\"). Information on this page may be out of date.\n\n**Editors:** After reviewing this page and making necessary edits, please change the {{nethack-343}} tag to the current version's tag or {{noversion}} as appropriate.\n","html":"<!DOCTYPE html>\n<html class=\"client-nojs\" lang=\"en\" dir=\"ltr\">\n<head>\n<meta charset=\"UTF-8\"/>\n<title>rnl - NetHack Wiki</title>\n<script>document.documentElement.className = document.documentElement.className.replace( /(^|\\s)client-nojs(\\s|$)/, \"$1client-js$2\" );</script>\n<script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({\"wgCanonicalNamespace\":\"\",\"wgCanonicalSpecialPageName\":false,\"wgNamespaceNumber\":0,\"wgPageName\":\"Rnl\",\"wgTitle\":\"Rnl\",\"wgCurRevisionId\":173833,\"wgRevisionId\":173833,\"wgArticleId\":11965,\"wgIsArticle\":true,\"wgIsRedirect\":false,\"wgAction\":\"view\",\"wgUserName\":null,\"wgUserGroups\":[\"*\"],\"wgCategories\":[\"Pages with unversioned Refsrc templates\",\"Random number functions\",\"Nethack-343 articles\"],\"wgBreakFrames\":false,\"wgPageContentLanguage\":\"en\",\"wgPageContentModel\":\"wikitext\",\"wgSeparatorTransformTable\":[\"\",\"\"],\"wgDigitTransformTable\":[\"\",\"\"],\"wgDefaultDateFormat\":\"dmy\",\"wgMonthNames\":[\"\",\"January\",\"February\",\"March\",\"April\",\"May\",\"June\",\"July\",\"August\",\"September\",\"October\",\"November\",\"December\"],\"wgMonthNamesShort\":[\"\",\"Jan\",\"Feb\",\"Mar\",\"Apr\",\"May\",\"Jun\",\"Jul\",\"Aug\",\"Sep\",\"Oct\",\"Nov\",\"Dec\"],\"wgRelevantPageName\":\"Rnl\",\"wgRelevantArticleId\":11965,\"wgRequestId\":\"85acc62dd3bccad827cc0545\",\"wgCSPNonce\":false,\"wgIsProbablyEditable\":false,\"wgRelevantPageIsProbablyEditable\":false,\"wgRestrictionEdit\":[],\"wgRestrictionMove\":[],\"wgWikiEditorEnabledModules\":[],\"wgCategoryTreePageCategoryOptions\":\"{\\\"mode\\\":0,\\\"hideprefix\\\":20,\\\"showcount\\\":true,\\\"namespaces\\\":false}\"});mw.loader.state({\"site.styles\":\"ready\",\"noscript\":\"ready\",\"user.styles\":\"ready\",\"user\":\"ready\",\"user.options\":\"ready\",\"user.tokens\":\"loading\",\"ext.cite.styles\":\"ready\",\"mediawiki.legacy.shared\":\"ready\",\"mediawiki.legacy.commonPrint\":\"ready\",\"mediawiki.toc.styles\":\"ready\",\"mediawiki.skinning.interface\":\"ready\",\"skins.vector.styles\":\"ready\"});mw.loader.implement(\"user.tokens@0tffind\",function($,jQuery,require,module){/*@nomin*/mw.user.tokens.set({\"editToken\":\"+\\\\\",\"patrolToken\":\"+\\\\\",\"watchToken\":\"+\\\\\",\"csrfToken\":\"+\\\\\"});\n});RLPAGEMODULES=[\"ext.cite.a11y\",\"site\",\"mediawiki.page.startup\",\"mediawiki.user\",\"mediawiki.page.ready\",\"mediawiki.toc\",\"mediawiki.searchSuggest\",\"skins.vector.js\"];mw.loader.load(RLPAGEMODULES);});</script>\n<link rel=\"stylesheet\" href=\"/load.php?debug=false&amp;lang=en&amp;modules=ext.cite.styles%7Cmediawiki.legacy.commonPrint%2Cshared%7Cmediawiki.skinning.interface%7Cmediawiki.toc.styles%7Cskins.vector.styles&amp;only=styles&amp;skin=vector\"/>\n<script async=\"\" src=\"/load.php?debug=false&amp;lang=en&amp;modules=startup&amp;only=scripts&amp;skin=vector\"></script>\n<meta name=\"ResourceLoaderDynamicStyles\" content=\"\"/>\n<link rel=\"stylesheet\" href=\"/load.php?debug=false&amp;lang=en&amp;modules=site.styles&amp;only=styles&amp;skin=vector\"/>\n<meta name=\"generator\" content=\"MediaWiki 1.32.5\"/>\n<meta name=\"description\" content=\"See source code in &amp;amp;#91;1&amp;amp;#93;\"/>\n<link rel=\"image_src\" href=\"/images/6/65/Nethackwiki-logo.png\"/>\n<link rel=\"shortcut icon\" href=\"/images/6/64/Favicon.ico\"/>\n<link rel=\"search\" type=\"application/opensearchdescription+xml\" href=\"/opensearch_desc.php\" title=\"NetHackWiki\"/>\n<link rel=\"EditURI\" type=\"application/rsd+xml\" href=\"https://nethackwiki.com/api.php?action=rsd\"/>\n<link rel=\"canonical\" href=\"/wiki/Rnl\"/>\n<!--[if lt IE 9]><script src=\"/load.php?debug=false&amp;lang=en&amp;modules=html5shiv&amp;only=scripts&amp;skin=vector&amp;sync=1\"></script><![endif]-->\n</head>\n<body class=\"mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Rnl rootpage-Rnl skin-vector action-view\">\t\t<div id=\"mw-page-base\" class=\"noprint\"></div>\n\t\t<div id=\"mw-head-base\" class=\"noprint\"></div>\n\t\t<div id=\"content\" class=\"mw-body\" role=\"main\">\n\t\t\t<a id=\"top\"></a>\n\t\t\t<div class=\"mw-indicators mw-body-content\">\n</div>\n<h1 id=\"firstHeading\" class=\"firstHeading\" lang=\"en\">rnl</h1>\t\t\t<div id=\"bodyContent\" class=\"mw-body-content\">\n\t\t\t\t<div id=\"siteSub\" class=\"noprint\">From NetHackWiki</div>\t\t\t\t<div id=\"contentSub\"></div>\n\t\t\t\t<div id=\"jump-to-nav\"></div>\t\t\t\t<a class=\"mw-jump-link\" href=\"#mw-head\">Jump to navigation</a>\n\t\t\t\t<a class=\"mw-jump-link\" href=\"#p-search\">Jump to search</a>\n\t\t\t\t<div id=\"mw-content-text\" lang=\"en\" dir=\"ltr\" class=\"mw-content-ltr\"><div class=\"mw-parser-output\"><dl><dd><span class=\"dablink\"><i>Not to be confused with <a href=\"/wiki/Rn1\" title=\"Rn1\">rn1</a>.</i></span></dd></dl>\n<p><b>rnl(<var>x</var>)</b><sup id=\"cite_ref-main_1-0\" class=\"reference\"><a href=\"#cite_note-main-1\">&#91;1&#93;</a></sup> is a pseudo-random number function used in <i>NetHack</i> when a result should be weighted by <a href=\"/wiki/Luck\" title=\"Luck\">Luck</a>.\n</p><p>rnl(<var>x</var>) has the same range as rn2(<var>x</var>) (that is, 0&#160;&#8804; rnl(<var>x</var>)&#160;&lt;&#160;<var>x</var>), but is weighted toward 0 if you have positive Luck, and toward <var>x</var>&#160;&#8722;&#160;1 if you have negative Luck.\n</p>\n<div id=\"toc\" class=\"toc\"><input type=\"checkbox\" role=\"button\" id=\"toctogglecheckbox\" class=\"toctogglecheckbox\" style=\"display:none\" /><div class=\"toctitle\" lang=\"en\" dir=\"ltr\"><h2>Contents</h2><span class=\"toctogglespan\"><label class=\"toctogglelabel\" for=\"toctogglecheckbox\"></label></span></div>\n<ul>\n<li class=\"toclevel-1 tocsection-1\"><a href=\"#Formula\"><span class=\"tocnumber\">1</span> <span class=\"toctext\">Formula</span></a></li>\n<li class=\"toclevel-1 tocsection-2\"><a href=\"#How_it.27s_used\"><span class=\"tocnumber\">2</span> <span class=\"toctext\">How it's used</span></a>\n<ul>\n<li class=\"toclevel-2 tocsection-3\"><a href=\"#Events_based_solely_on_Luck\"><span class=\"tocnumber\">2.1</span> <span class=\"toctext\">Events based solely on Luck</span></a></li>\n<li class=\"toclevel-2 tocsection-4\"><a href=\"#Events_based_on_Luck_and_other_stats\"><span class=\"tocnumber\">2.2</span> <span class=\"toctext\">Events based on Luck and other stats</span></a></li>\n<li class=\"toclevel-2 tocsection-5\"><a href=\"#Numerical_distributions\"><span class=\"tocnumber\">2.3</span> <span class=\"toctext\">Numerical distributions</span></a></li>\n</ul>\n</li>\n<li class=\"toclevel-1 tocsection-6\"><a href=\"#Mathematical_analysis\"><span class=\"tocnumber\">3</span> <span class=\"toctext\">Mathematical analysis</span></a></li>\n<li class=\"toclevel-1 tocsection-7\"><a href=\"#Sample_distribution\"><span class=\"tocnumber\">4</span> <span class=\"toctext\">Sample distribution</span></a></li>\n<li class=\"toclevel-1 tocsection-8\"><a href=\"#History\"><span class=\"tocnumber\">5</span> <span class=\"toctext\">History</span></a></li>\n<li class=\"toclevel-1 tocsection-9\"><a href=\"#References\"><span class=\"tocnumber\">6</span> <span class=\"toctext\">References</span></a></li>\n</ul>\n</div>\n\n<h2><span class=\"mw-headline\" id=\"Formula\">Formula</span></h2>\n<p>See source code in <sup id=\"cite_ref-main_1-1\" class=\"reference\"><a href=\"#cite_note-main-1\">&#91;1&#93;</a></sup>\n</p><p>For rnl(<var>x</var>), let <var>L</var> equal your Luck, including the <a href=\"/wiki/Luck_item\" title=\"Luck item\">luck item</a> bonus or penalty, whether positive, negative, or zero.\n</p><p>If <var>x</var> &#8804; 15, <var>L</var> = <sup><var>L</var></sup>&#8260;<sub>3</sub>, rounded toward the nearest integer.\n</p><p>If <var>L</var> = 0, return <a href=\"/wiki/Rn2\" title=\"Rn2\">rn2</a>(<var>x</var>).\n</p><p>With chance <span class=\"sfrac nowrap\"><span style=\"display:inline-block; vertical-align:-0.5em; font-size:85%; text-align:center;\"><span style=\"display:block; line-height:1em; margin:0 0.1em;\">1</span><span style=\"display:block; line-height:1em; margin:0 0.1em; border-top:1px solid;\">37 + |<var>L</var>|</span></span></span>, return rn2(<var>x</var>).\n</p><p>Otherwise, return rn2(<var>x</var>) - <var>L</var>, but no less than 0 and no more than <var>x</var> - 1.\n</p><p>This means that rnl(<var>x</var>) is almost always equivalent to rn2(<var>x</var>) - Luck when <var>x</var> &gt; 15. The chance of Luck being ignored is less than 3% in any case, and even smaller for stronger (positive or negative) Luck. For smaller values of <var>x</var>, rn2(<var>x</var>) - <span class=\"sfrac nowrap\"><span style=\"display:inline-block; vertical-align:-0.5em; font-size:85%; text-align:center;\"><span style=\"display:block; line-height:1em; margin:0 0.1em;\">Luck</span><span style=\"display:block; line-height:1em; margin:0 0.1em; border-top:1px solid;\">3</span></span></span> is the most likely approximation.\n</p>\n<h2><span id=\"How_it's_used\"></span><span class=\"mw-headline\" id=\"How_it.27s_used\">How it's used</span></h2>\n<p>In the tables below, some very high (99.8%) and very low (0.2%) values above are rounded to 100% or 0%. Nothing is completely 100% or 0% likely, except where spelled out as \"certain\" or \"impossible\".\n</p>\n<h3><span class=\"mw-headline\" id=\"Events_based_solely_on_Luck\">Events based solely on Luck</span></h3>\n<table class=\"wikitable\">\n<tbody><tr>\n<th rowspan=\"2\">Situation</th>\n<th rowspan=\"2\">Code</th>\n<th colspan=\"9\">Luck\n</th></tr>\n<tr>\n<th>&#8722;11</th>\n<th>&#8722;8</th>\n<th>&#8722;5</th>\n<th>&#8722;2</th>\n<th>0</th>\n<th>+2</th>\n<th>+5</th>\n<th>+8</th>\n<th>+11\n</th></tr>\n<tr>\n<td>Chance of your god helping you if you <a href=\"/wiki/Pray\" class=\"mw-redirect\" title=\"Pray\">pray</a> with exactly 0 <a href=\"/wiki/Alignment_record\" title=\"Alignment record\">alignment</a>\n</td>\n<td><code>rnl(2)==0</code><sup id=\"cite_ref-2\" class=\"reference\"><a href=\"#cite_note-2\">&#91;2&#93;</a></sup>\n</td>\n<td>1%</td>\n<td>1%</td>\n<td>1%</td>\n<td>1%</td>\n<td>50%</td>\n<td>99%</td>\n<td>99%</td>\n<td>99%</td>\n<td>99%\n</td></tr>\n<tr>\n<td>Chance of <a href=\"/wiki/Magic_marker\" title=\"Magic marker\">writing</a> a scroll you have not seen\n</td>\n<td><code>rnl(15)==0</code><sup id=\"cite_ref-3\" class=\"reference\"><a href=\"#cite_note-3\">&#91;3&#93;</a></sup>\n</td>\n<td>0.2%</td>\n<td>0.2%</td>\n<td>0.2%</td>\n<td>0.2%</td>\n<td>6.7%</td>\n<td>13.2%</td>\n<td>19.7%</td>\n<td>26.2%</td>\n<td>32.7%\n</td></tr>\n<tr>\n<td>Chance of <a href=\"/wiki/Magic_marker\" title=\"Magic marker\">writing</a> a scroll you have not seen, as a <a href=\"/wiki/Wizard\" title=\"Wizard\">Wizard</a>\n</td>\n<td><code>rnl(5)==0</code><sup id=\"cite_ref-4\" class=\"reference\"><a href=\"#cite_note-4\">&#91;4&#93;</a></sup>\n</td>\n<td>0.5%</td>\n<td>0.5%</td>\n<td>0.5%</td>\n<td>0.5%</td>\n<td>20.0%</td>\n<td>39.5%</td>\n<td>59.0%</td>\n<td>78.5%</td>\n<td>98.0%\n</td></tr>\n<tr>\n<td>Chance of failing to set a <a href=\"/wiki/Land_mine\" title=\"Land mine\">land mine</a> (in which case it blows up) or <a href=\"/wiki/Beartrap\" title=\"Beartrap\">beartrap</a> (nothing happens) while <a href=\"/wiki/Riding\" title=\"Riding\">riding</a> and <a href=\"/wiki/Skill\" title=\"Skill\">unskilled</a> at riding\n</td>\n<td><code>rnl(10)&gt;5</code><sup id=\"cite_ref-5\" class=\"reference\"><a href=\"#cite_note-5\">&#91;5&#93;</a></sup>\n</td>\n<td>79%</td>\n<td>69%</td>\n<td>59%</td>\n<td>50%</td>\n<td>40%</td>\n<td>30%</td>\n<td>21%</td>\n<td>11%</td>\n<td>1%\n</td></tr>\n<tr>\n<td>Chance of failing to set a <a href=\"/wiki/Land_mine\" title=\"Land mine\">land mine</a> (in which case it blows up) or <a href=\"/wiki/Beartrap\" title=\"Beartrap\">beartrap</a> (nothing happens) while <a href=\"/wiki/Riding\" title=\"Riding\">riding</a> and <a href=\"/wiki/Skill\" title=\"Skill\">unskilled</a> at riding, and <a href=\"/wiki/Fumbling\" title=\"Fumbling\">fumbling</a> or using a cursed trap\n</td>\n<td><code>rnl(10)&gt;3</code><sup id=\"cite_ref-6\" class=\"reference\"><a href=\"#cite_note-6\">&#91;6&#93;</a></sup>\n</td>\n<td>99%</td>\n<td>89%</td>\n<td>79%</td>\n<td>70%</td>\n<td>60%</td>\n<td>50%</td>\n<td>41%</td>\n<td>31%</td>\n<td>21%\n</td></tr>\n<tr>\n<td>Chance that a trap goes off after you set it, if it was cursed or you were <a href=\"/wiki/Fumbling\" title=\"Fumbling\">fumbling</a>\n</td>\n<td><code>rnl(10)&gt;5</code><sup id=\"cite_ref-7\" class=\"reference\"><a href=\"#cite_note-7\">&#91;7&#93;</a></sup>\n</td>\n<td>79%</td>\n<td>69%</td>\n<td>59%</td>\n<td>50%</td>\n<td>40%</td>\n<td>30%</td>\n<td>21%</td>\n<td>11%</td>\n<td>1%\n</td></tr>\n<tr>\n<td>Chance of snagging an item you can pick up when using a <a href=\"/wiki/Bullwhip\" title=\"Bullwhip\">bullwhip</a> (instead of having it slip free)\n</td>\n<td><code>rnl(6)==0</code><sup id=\"cite_ref-8\" class=\"reference\"><a href=\"#cite_note-8\">&#91;8&#93;</a></sup>\n</td>\n<td>0.4%</td>\n<td>0.4%</td>\n<td>0.4%</td>\n<td>0.4%</td>\n<td>16.7%</td>\n<td>32.9%</td>\n<td>49.1%</td>\n<td>65.4%</td>\n<td>81.8%\n</td></tr>\n<tr>\n<td>Chance of finding <a href=\"/wiki/Secret_passage\" title=\"Secret passage\">secret passages</a> and <a href=\"/wiki/Secret_door\" class=\"mw-redirect\" title=\"Secret door\">doors</a> on each surrounding square when <a href=\"/wiki/Search\" title=\"Search\">searching</a>\n</td>\n<td><code>rnl(7)==0</code><sup id=\"cite_ref-9\" class=\"reference\"><a href=\"#cite_note-9\">&#91;9&#93;</a></sup>\n</td>\n<td>0.3%</td>\n<td>0.4%</td>\n<td>0.4%</td>\n<td>0.4%</td>\n<td>14.3%</td>\n<td>28.2%</td>\n<td>42.1%</td>\n<td>56.1%</td>\n<td>70.0%\n</td></tr>\n<tr>\n<td>Chance of finding <a href=\"/wiki/Secret_passage\" title=\"Secret passage\">secret passages</a> and <a href=\"/wiki/Secret_door\" class=\"mw-redirect\" title=\"Secret door\">doors</a> on each surrounding square when <a href=\"/wiki/Search\" title=\"Search\">searching</a>, while wearing a <a href=\"/wiki/Pair_of_lenses\" title=\"Pair of lenses\">pair of lenses</a>\n</td>\n<td><code>rnl(5)==0</code><sup id=\"cite_ref-10\" class=\"reference\"><a href=\"#cite_note-10\">&#91;10&#93;</a></sup>\n</td>\n<td>0.5%</td>\n<td>0.5%</td>\n<td>0.5%</td>\n<td>0.5%</td>\n<td>20.0%</td>\n<td>39.5%</td>\n<td>59.0%</td>\n<td>78.5%</td>\n<td>98.0%\n</td></tr>\n<tr>\n<td>Chance of finding <a href=\"/wiki/Secret_passage\" title=\"Secret passage\">secret passages</a> and <a href=\"/wiki/Secret_door\" class=\"mw-redirect\" title=\"Secret door\">doors</a> on each surrounding square when <a href=\"/wiki/Search\" title=\"Search\">searching</a>,  while wielding a +5 <a href=\"/wiki/Excalibur\" title=\"Excalibur\">Excalibur</a>, or +3 Excalibur and lenses, or any better combination\n</td>\n<td><code>rnl(2)==0</code><sup id=\"cite_ref-11\" class=\"reference\"><a href=\"#cite_note-11\">&#91;11&#93;</a></sup>\n</td>\n<td>1.2%</td>\n<td>1.3%</td>\n<td>1.3%</td>\n<td>1.3%</td>\n<td>50%</td>\n<td>98.7%</td>\n<td>98.7%</td>\n<td>98.8%</td>\n<td>98.8%\n</td></tr>\n<tr>\n<td>Chance of finding a hidden <a href=\"/wiki/Trap\" title=\"Trap\">trap</a> when <a href=\"/wiki/Search\" title=\"Search\">searching</a>\n</td>\n<td><code>rnl(8)==0</code><sup id=\"cite_ref-12\" class=\"reference\"><a href=\"#cite_note-12\">&#91;12&#93;</a></sup>\n</td>\n<td>0.3%</td>\n<td>0.3%</td>\n<td>0.3%</td>\n<td>0.3%</td>\n<td>12.5%</td>\n<td>24.7%</td>\n<td>36.9%</td>\n<td>49.1%</td>\n<td>61.3%\n</td></tr>\n<tr>\n<td>Chance of a blessed <a href=\"/wiki/Projectile\" title=\"Projectile\">projectile</a> <em>not</em> breaking when thrown\n</td>\n<td><code>rnl(4)==0</code><sup id=\"cite_ref-13\" class=\"reference\"><a href=\"#cite_note-13\">&#91;13&#93;</a></sup>\n</td>\n<td>0.6%</td>\n<td>0.6%</td>\n<td>0.6%</td>\n<td>0.7%</td>\n<td>25%</td>\n<td>49.3%</td>\n<td>73.7%</td>\n<td>98.1%</td>\n<td>98.2%\n</td></tr>\n<tr>\n<td>Chance of being <a href=\"/wiki/Stoning\" title=\"Stoning\">petrified</a> if your <a href=\"/wiki/Saddle\" title=\"Saddle\">saddle</a> slips off<sup id=\"cite_ref-14\" class=\"reference\"><a href=\"#cite_note-14\">&#91;14&#93;</a></sup> or is destroyed, or you are polymorphed and lose stone resistance,<sup id=\"cite_ref-15\" class=\"reference\"><a href=\"#cite_note-15\">&#91;15&#93;</a></sup> when you are riding a steed that petrifies on touch (likely due to your horse having just polymorphed into a <a href=\"/wiki/Cockatrice\" title=\"Cockatrice\">cockatrice</a>)\n</td>\n<td><code>rnl(3)&gt;0</code>\n</td>\n<td>99.2%</td>\n<td>99.2%</td>\n<td>99.1%</td>\n<td>99.1%</td>\n<td>66.7%</td>\n<td>34.2%</td>\n<td>1.7%</td>\n<td>1.7%</td>\n<td>1.6%\n</td></tr>\n<tr>\n<td>Chance of a random <a href=\"/wiki/Levelport\" class=\"mw-redirect\" title=\"Levelport\">levelport</a> when attempting to <a href=\"/wiki/Teleport_control\" title=\"Teleport control\">controlled</a> levelport (or cancel) while <a href=\"/wiki/Confused\" class=\"mw-redirect\" title=\"Confused\">confused</a>\n</td>\n<td><code>rnl(5)&gt;0</code><sup id=\"cite_ref-16\" class=\"reference\"><a href=\"#cite_note-16\">&#91;16&#93;</a></sup>\n</td>\n<td>99.5%</td>\n<td>99.5%</td>\n<td>99.5%</td>\n<td>99.5%</td>\n<td>80.0%</td>\n<td>60.5%</td>\n<td>41.0%</td>\n<td>21.5%</td>\n<td>2.0%\n</td></tr>\n<tr>\n<td>Chance of blessed equipment <em>not</em> being eroded by rust<sup id=\"cite_ref-17\" class=\"reference\"><a href=\"#cite_note-17\">&#91;17&#93;</a></sup> or water<sup id=\"cite_ref-18\" class=\"reference\"><a href=\"#cite_note-18\">&#91;18&#93;</a></sup> damage, or blessed flammable items not being burned by fire damage<sup id=\"cite_ref-19\" class=\"reference\"><a href=\"#cite_note-19\">&#91;19&#93;</a></sup>\n</td>\n<td><code>rnl(4)==0</code>\n</td>\n<td>0.6%</td>\n<td>0.6%</td>\n<td>0.6%</td>\n<td>0.7%</td>\n<td>25%</td>\n<td>49.3%</td>\n<td>73.7%</td>\n<td>98.1%</td>\n<td>98.2%\n</td></tr>\n<tr>\n<td>Chance of a monster becoming angry when it steps in a trap set by you,<sup id=\"cite_ref-20\" class=\"reference\"><a href=\"#cite_note-20\">&#91;20&#93;</a></sup> or of you triggering a trap when failing to disarm it<sup id=\"cite_ref-21\" class=\"reference\"><a href=\"#cite_note-21\">&#91;21&#93;</a></sup>\n</td>\n<td><code>rnl(5)&gt;0</code>\n</td>\n<td>99.5%</td>\n<td>99.5%</td>\n<td>99.5%</td>\n<td>99.5%</td>\n<td>80.0%</td>\n<td>60.5%</td>\n<td>41.0%</td>\n<td>21.5%</td>\n<td>2.0%\n</td></tr>\n<tr>\n<td>Chance of a hostile, awake, unfrozen, mindful, non-<span class=\"nhsym clr-white\">&#8203;@</span> monster becoming peaceful when you free it from a trap not set by you\n</td>\n<td><code>rnl(10)&lt;8</code><sup id=\"cite_ref-22\" class=\"reference\"><a href=\"#cite_note-22\">&#91;22&#93;</a></sup>\n</td>\n<td>40.1%</td>\n<td>50.8%</td>\n<td>60.5%</td>\n<td>70.3%</td>\n<td>80.0%</td>\n<td>89.7%</td>\n<td>99.5%</td>\n<td>99.5%</td>\n<td>99.5%\n</td></tr>\n<tr>\n<td>Chance of a lawful player getting +1 <a href=\"/wiki/Alignment_record\" title=\"Alignment record\">alignment</a> for the above\n</td>\n<td><code>rnl(8)==0</code>, one-third of the time<sup id=\"cite_ref-23\" class=\"reference\"><a href=\"#cite_note-23\">&#91;23&#93;</a></sup>\n</td>\n<td>0.1%</td>\n<td>0.1%</td>\n<td>0.1%</td>\n<td>0.1%</td>\n<td>4.2%</td>\n<td>8.2%</td>\n<td>12.3%</td>\n<td>16.4%</td>\n<td>20.4%\n</td></tr>\n<tr>\n<td>Chance of getting +1 <a href=\"/wiki/Alignment_record\" title=\"Alignment record\">alignment</a> for trying and failing to lift a hostile, mobile, mindful, nonhuman monster out of a pit not dug by you\n</td>\n<td><code>rnl(10)&lt;3</code><sup id=\"cite_ref-24\" class=\"reference\"><a href=\"#cite_note-24\">&#91;24&#93;</a></sup>\n</td>\n<td>0.7%</td>\n<td>0.8%</td>\n<td>10.5%</td>\n<td>20.2%</td>\n<td>30%</td>\n<td>39.7%</td>\n<td>49.5%</td>\n<td>59.3%</td>\n<td>69.0%\n</td></tr>\n<tr>\n<td>Chance of having a <a href=\"/wiki/Boomerang\" title=\"Boomerang\">boomerang</a> break when used as a melee weapon\n</td>\n<td><code>rnl(4)==3</code><sup id=\"cite_ref-25\" class=\"reference\"><a href=\"#cite_note-25\">&#91;25&#93;</a></sup>\n</td>\n<td>98.2%</td>\n<td>98.1%</td>\n<td>73.7%</td>\n<td>49.3%</td>\n<td>25%</td>\n<td>0.7%</td>\n<td>0.6%</td>\n<td>0.6%</td>\n<td>0.6%\n</td></tr>\n<tr>\n<td>Chance of having a non-artifact <a href=\"/wiki/Lance\" title=\"Lance\">lance</a> break when successfully jousting a solid monster\n</td>\n<td><code>rnl(50)==49</code>, <sup>1</sup>&#8260;<sub>5</sub> of the time<sup id=\"cite_ref-26\" class=\"reference\"><a href=\"#cite_note-26\">&#91;26&#93;</a></sup>\n</td>\n<td>4.71%</td>\n<td>3.53%</td>\n<td>2.35%</td>\n<td>1.18%</td>\n<td>0.4%</td>\n<td>0.01%</td>\n<td>0.01%</td>\n<td>0.01%</td>\n<td>0.01%\n</td></tr></tbody></table>\n<h3><span class=\"mw-headline\" id=\"Events_based_on_Luck_and_other_stats\">Events based on Luck and other stats</span></h3>\n<table class=\"wikitable\">\n<tbody><tr>\n<th rowspan=\"2\">Situation</th>\n<th rowspan=\"2\">Code</th>\n<th colspan=\"9\">Luck\n</th></tr>\n<tr>\n<th>&#8722;11</th>\n<th>&#8722;8</th>\n<th>&#8722;5</th>\n<th>&#8722;2</th>\n<th>0</th>\n<th>+2</th>\n<th>+5</th>\n<th>+8</th>\n<th>+11\n</th></tr>\n<tr>\n<td>Chance of kicking down a door\n</td>\n<td><code>rnl(35)&lt;X</code>, where X = avg(str, dex, con) + (dex if <a href=\"/wiki/Samurai\" title=\"Samurai\">Samurai</a> or <a href=\"/wiki/Monk\" title=\"Monk\">Monk</a>)<sup id=\"cite_ref-27\" class=\"reference\"><a href=\"#cite_note-27\">&#91;27&#93;</a></sup>\n</td>\n<td colspan=\"9\">Approx <span class=\"sfrac nowrap\"><span style=\"display:inline-block; vertical-align:-0.5em; font-size:85%; text-align:center;\"><span style=\"display:block; line-height:1em; margin:0 0.1em;\"><var>Luck</var> + X</span><span style=\"display:block; line-height:1em; margin:0 0.1em; border-top:1px solid;\">35</span></span></span> chance\n</td></tr>\n<tr>\n<td>Chance of kicking down a door when avg(str, dex, con) is 10\n</td>\n<td><code>rnl(35)&lt;10</code>\n</td>\n<td>0.5%</td>\n<td>6.2%</td>\n<td>14.6%</td>\n<td>23.0%</td>\n<td>28.6%</td>\n<td>34.1%</td>\n<td>42.5%</td>\n<td>50.9%</td>\n<td>59.3%\n</td></tr>\n<tr>\n<td>Chance of kicking down a door when avg(str, dex, con) is 15\n</td>\n<td><code>rnl(35)&lt;15</code>\n</td>\n<td>12.1%</td>\n<td>20.5%</td>\n<td>28.9%</td>\n<td>37.3%</td>\n<td>42.9%</td>\n<td>48.4%</td>\n<td>56.8%</td>\n<td>65.2%</td>\n<td>73.6%\n</td></tr>\n<tr>\n<td>Chance of kicking down a door as a <a href=\"/wiki/Samurai\" title=\"Samurai\">Samurai</a> or <a href=\"/wiki/Monk\" title=\"Monk\">Monk</a> when avg(str, con) is 15 and dex is 15\n</td>\n<td><code>rnl(35)&lt;30</code></td>\n<td>54.9%</td>\n<td>63.4%</td>\n<td>71.8%</td>\n<td>80.1%</td>\n<td>85.7%</td>\n<td>91.3%</td>\n<td>99.7%</td>\n<td>99.7%</td>\n<td>99.7%\n</td></tr>\n<tr>\n<td>Chance of opening a door\n</td>\n<td><code>rnl(20)&lt;X</code>, where X = avg(str, dex, con)<sup id=\"cite_ref-28\" class=\"reference\"><a href=\"#cite_note-28\">&#91;28&#93;</a></sup></td>\n<td colspan=\"9\">Approx <span class=\"sfrac nowrap\"><span style=\"display:inline-block; vertical-align:-0.5em; font-size:85%; text-align:center;\"><span style=\"display:block; line-height:1em; margin:0 0.1em;\"><var>Luck</var> + X</span><span style=\"display:block; line-height:1em; margin:0 0.1em; border-top:1px solid;\">20</span></span></span> chance<sup id=\"cite_ref-29\" class=\"reference\"><a href=\"#cite_note-29\">&#91;29&#93;</a></sup>\n</td></tr>\n<tr>\n<td>Chance of opening a door when avg(str, dex, con) is 10\n</td>\n<td><code>rnl(20)&lt;10</code>\n</td>\n<td>1%</td>\n<td>11%</td>\n<td>26%</td>\n<td>40%</td>\n<td>50%</td>\n<td>60%</td>\n<td>74%</td>\n<td>89%</td>\n<td>99%\n</td></tr>\n<tr>\n<td>Chance of opening a door when avg(str, dex, con) is 15\n</td>\n<td><code>rnl(20)&lt;15</code>\n</td>\n<td>21%</td>\n<td>36%</td>\n<td>51%</td>\n<td>65%</td>\n<td>75%</td>\n<td>85%</td>\n<td>99%</td>\n<td>99%</td>\n<td>99%\n</td></tr>\n<tr>\n<td>One criterion (the other being <a href=\"/wiki/Alignment_record\" title=\"Alignment record\">alignment</a>-based) for a <a href=\"/wiki/Minion\" title=\"Minion\">minion</a> to be summoned when converting<sup id=\"cite_ref-30\" class=\"reference\"><a href=\"#cite_note-30\">&#91;30&#93;</a></sup> (or attempting to convert<sup id=\"cite_ref-31\" class=\"reference\"><a href=\"#cite_note-31\">&#91;31&#93;</a></sup>) an <a href=\"/wiki/Altar\" title=\"Altar\">altar</a>\n</td>\n<td><code>rnl(your level)&gt;6</code>\n</td>\n<td colspan=\"9\">Impossible before level 8, more likely with low luck or higher level\n</td></tr>\n<tr>\n<td>Chance of summoning a minion, all other criteria being met, at level 8\n</td>\n<td><code>rnl(8)&gt;6</code>\n</td>\n<td>61.3%</td>\n<td>49.1%</td>\n<td>36.9%</td>\n<td>24.7%</td>\n<td>12.5%</td>\n<td>0.3%</td>\n<td>0.3%</td>\n<td>0.3%</td>\n<td>0.3%\n</td></tr>\n<tr>\n<td>Chance of summoning a minion, all other criteria being met, at level 12\n</td>\n<td><code>rnl(12)&gt;6</code>\n</td>\n<td>74.2%</td>\n<td>66.0%</td>\n<td>58.0%</td>\n<td>49.8%</td>\n<td>41.7%</td>\n<td>33.6%</td>\n<td>25.4%</td>\n<td>17.3%</td>\n<td>9.1%\n</td></tr>\n<tr>\n<td>Chance of summoning a minion, all other criteria being met, at level 16\n</td>\n<td><code>rnl(16)&gt;6</code>\n</td>\n<td>99.1%</td>\n<td>99.0%</td>\n<td>86.8%</td>\n<td>68.4%</td>\n<td>56.3%</td>\n<td>44.1%</td>\n<td>25.7%</td>\n<td>7.4%</td>\n<td>1.2%\n</td></tr>\n<tr>\n<td>Chance of summoning a minion, all other criteria being met, at level 24\n</td>\n<td><code>rnl(24)&gt;6</code>\n</td>\n<td>99.4%</td>\n<td>99.4%</td>\n<td>91.2%</td>\n<td>79.0%</td>\n<td>70.8%</td>\n<td>62.7%</td>\n<td>50.5%</td>\n<td>38.2%</td>\n<td>26.0%\n</td></tr>\n<tr>\n<td>Chance of <a href=\"/wiki/Anger\" title=\"Anger\">angering</a> your god by praying in <a href=\"/wiki/Gehennom\" title=\"Gehennom\">Gehennom</a>\n</td>\n<td><code>rnl(alignment)&gt;0</code><sup id=\"cite_ref-32\" class=\"reference\"><a href=\"#cite_note-32\">&#91;32&#93;</a></sup>\n</td>\n<td colspan=\"9\">Certain with negative alignment, impossible at alignment 1, more likely with higher alignment, less likely with higher luck\n</td></tr>\n<tr>\n<td>Chance of <a href=\"/wiki/Anger\" title=\"Anger\">angering</a> your god by praying in <a href=\"/wiki/Gehennom\" title=\"Gehennom\">Gehennom</a> at alignment 2\n</td>\n<td><code>rnl(2)&gt;0</code>\n</td>\n<td>98.8%</td>\n<td>98.8%</td>\n<td>98.7%</td>\n<td>98.7%</td>\n<td>50%</td>\n<td>1.3%</td>\n<td>1.3%</td>\n<td>1.3%</td>\n<td>1.2%\n</td></tr>\n<tr>\n<td>Chance of <a href=\"/wiki/Anger\" title=\"Anger\">angering</a> your god by praying in <a href=\"/wiki/Gehennom\" title=\"Gehennom\">Gehennom</a> at alignment 4\n</td>\n<td><code>rnl(4)&gt;0</code>\n</td>\n<td>99.4%</td>\n<td>99.4%</td>\n<td>99.3%</td>\n<td>99.3%</td>\n<td>75%</td>\n<td>50.7%</td>\n<td>26.3%</td>\n<td>1.9%</td>\n<td>1.8%\n</td></tr>\n<tr>\n<td>Chance of <a href=\"/wiki/Anger\" title=\"Anger\">angering</a> your god by praying in <a href=\"/wiki/Gehennom\" title=\"Gehennom\">Gehennom</a> at alignment 8\n</td>\n<td><code>rnl(8)&gt;0</code>\n</td>\n<td>99.7%</td>\n<td>99.7%</td>\n<td>99.7%</td>\n<td>99.7%</td>\n<td>87.5%</td>\n<td>75.3%</td>\n<td>63.1%</td>\n<td>50.9%</td>\n<td>38.7%\n</td></tr>\n<tr>\n<td>Chance of <a href=\"/wiki/Anger\" title=\"Anger\">angering</a> your god by praying in <a href=\"/wiki/Gehennom\" title=\"Gehennom\">Gehennom</a> at alignment 16\n</td>\n<td><code>rnl(16)&gt;0</code>\n</td>\n<td>99.9%</td>\n<td>99.9%</td>\n<td>99.9%</td>\n<td>99.9%</td>\n<td>93.8%</td>\n<td>81.6%</td>\n<td>63.2%</td>\n<td>44.9%</td>\n<td>26.4%\n</td></tr>\n<tr>\n<td>Chance of <a href=\"/wiki/Anger\" title=\"Anger\">angering</a> your god by praying in <a href=\"/wiki/Gehennom\" title=\"Gehennom\">Gehennom</a> at alignment 32\n</td>\n<td><code>rnl(32)&gt;0</code>\n</td>\n<td>99.9%</td>\n<td>99.9%</td>\n<td>99.9%</td>\n<td>99.9%</td>\n<td>96.9%</td>\n<td>90.8%</td>\n<td>81.6%</td>\n<td>72.4%</td>\n<td>63.2%\n</td></tr></tbody></table>\n<h3><span class=\"mw-headline\" id=\"Numerical_distributions\">Numerical distributions</span></h3>\n<table class=\"wikitable\">\n<tbody><tr>\n<th rowspan=\"2\">Value</th>\n<th rowspan=\"2\">Code</th>\n<th colspan=\"9\">Luck\n</th></tr>\n<tr>\n<th>&#8722;11</th>\n<th>&#8722;8</th>\n<th>&#8722;5</th>\n<th>&#8722;2</th>\n<th>0</th>\n<th>+2</th>\n<th>+5</th>\n<th>+8</th>\n<th>+11\n</th></tr>\n<tr>\n<td>Average number of fruit that fall from a <a href=\"/wiki/Tree\" title=\"Tree\">tree</a> when you kick it\n</td>\n<td><code>8-rnl(7)</code><sup id=\"cite_ref-33\" class=\"reference\"><a href=\"#cite_note-33\">&#91;33&#93;</a></sup>\n</td>\n<td>2.5</td>\n<td>2.9</td>\n<td>3.5</td>\n<td>4.2</td>\n<td>5</td>\n<td>5.8</td>\n<td>6.5</td>\n<td>7.1</td>\n<td>7.5\n</td></tr>\n<tr>\n<td>Average number of bees that are summoned from a tree if you kick it\n</td>\n<td><code>rnl(4)+2</code><sup id=\"cite_ref-34\" class=\"reference\"><a href=\"#cite_note-34\">&#91;34&#93;</a></sup>\n</td>\n<td>5</td>\n<td>5</td>\n<td>4.7</td>\n<td>4.2</td>\n<td>3.5</td>\n<td>2.8</td>\n<td>2.3</td>\n<td>2</td>\n<td>2\n</td></tr>\n<tr>\n<td>Average number of <a href=\"/wiki/Gold_piece\" class=\"mw-redirect\" title=\"Gold piece\">gold pieces</a> dropped by a <a href=\"/wiki/Gold_golem\" title=\"Gold golem\">gold golem</a> on death\n</td>\n<td><code>200-rnl(101)</code><sup id=\"cite_ref-35\" class=\"reference\"><a href=\"#cite_note-35\">&#91;35&#93;</a></sup>\n</td>\n<td>140</td>\n<td>143</td>\n<td>145</td>\n<td>148</td>\n<td>150</td>\n<td>152</td>\n<td>155</td>\n<td>157</td>\n<td>160\n</td></tr>\n<tr>\n<td>Average number of darts or arrows left behind when disarming a <a href=\"/wiki/Dart_trap\" class=\"mw-redirect\" title=\"Dart trap\">dart trap</a> or <a href=\"/wiki/Arrow_trap\" class=\"mw-redirect\" title=\"Arrow trap\">arrow trap</a>\n</td>\n<td><code>50-rnl(50)</code><sup id=\"cite_ref-36\" class=\"reference\"><a href=\"#cite_note-36\">&#91;36&#93;</a></sup>\n</td>\n<td>16</td>\n<td>18</td>\n<td>21</td>\n<td>24</td>\n<td>25.5</td>\n<td>27</td>\n<td>30</td>\n<td>33</td>\n<td>35\n</td></tr></tbody></table>\n<h2><span class=\"mw-headline\" id=\"Mathematical_analysis\">Mathematical analysis</span></h2>\n<p>Basically, rnl(<var>x</var>) generates a number between 0 and <var>x</var>&#160;&#8722;&#160;1, and adjusts it in proportion to the player's Luck, with a small chance (which is smaller when Luck tends toward the extremes) of leaving it alone. The net effect is that with positive or negative Luck, the highest or lowest numbers on the list become vanishingly unlikely, and the odds of getting the best and worst result increase, while the odds of getting every result in between stays the same.\n</p><p>Further complicating the matter is that, when <var>x</var> is 15 or less, the adjustment is divided by 3, which means that for those calls there is a stepwise distribution where the odds of everything are almost completely the same within blocks of 3 numbers (&#8722;13 to &#8722;11, &#8722;10 to &#8722;8, &#8722;7 to &#8722;5, &#8722;4 to &#8722;2, &#8722;1 to 1, 2 to 4, 5 to 7, 8 to 10, 11 to 13). Larger parameters have smoother distributions.\n</p><p>In addition, the function often being called in unusual manners, such as comparing it to a non-zero constant, which results in a \"slice\" being taken from the distribution graph at a less easily explainable point.  This is evidenced in the distrubtions for rnl(A)&lt;B or rnl(A)&gt;B above.\n</p><p>Since many of the comparisons are made against 0, having even &#8722;2 Luck can cause many results to swing against the player's favor with near certainty. &#8722;1 Luck is not as bad as most of these calls also have a small parameter, although it does negatively affect many things that do not call rnl (like <a href=\"/wiki/Prayer\" title=\"Prayer\">prayer</a> or <a href=\"/wiki/Wish\" title=\"Wish\">wishing</a>). On the flip side, positive Luck's effect tends to be much less dramatic, and +2 Luck still has a lot of room for improvement. +1 Luck changes almost nothing significantly; the only pronounced effect it has is to cause jousting to be much safer.\n</p>\n<h2><span class=\"mw-headline\" id=\"Sample_distribution\">Sample distribution</span></h2>\n<p>This table is the computed odds of rnl(10) at each possible Luck for each possible result. The \"0%\" values are actually around 0.24–0.26% depending on the magnitude of the Luck.\n</p>\n<table class=\"wikitable\">\n<tbody><tr>\n<th>Luck\n</th>\n<th colspan=\"10\">Simplified results\n</th></tr>\n<tr>\n<td></td>\n<td>0</td>\n<td>1</td>\n<td>2</td>\n<td>3</td>\n<td>4</td>\n<td>5</td>\n<td>6</td>\n<td>7</td>\n<td>8</td>\n<td>9\n</td></tr>\n<tr>\n<td>−13</td>\n<td>0%</td>\n<td>0%</td>\n<td>0%</td>\n<td>0%</td>\n<td>10%</td>\n<td>10%</td>\n<td>10%</td>\n<td>10%</td>\n<td>10%</td>\n<td>49%\n</td></tr>\n<tr>\n<td>−12</td>\n<td>0%</td>\n<td>0%</td>\n<td>0%</td>\n<td>0%</td>\n<td>10%</td>\n<td>10%</td>\n<td>10%</td>\n<td>10%</td>\n<td>10%</td>\n<td>49%\n</td></tr>\n<tr>\n<td>−11</td>\n<td>0%</td>\n<td>0%</td>\n<td>0%</td>\n<td>0%</td>\n<td>10%</td>\n<td>10%</td>\n<td>10%</td>\n<td>10%</td>\n<td>10%</td>\n<td>49%\n</td></tr>\n<tr>\n<td>−10</td>\n<td>0%</td>\n<td>0%</td>\n<td>0%</td>\n<td>10%</td>\n<td>10%</td>\n<td>10%</td>\n<td>10%</td>\n<td>10%</td>\n<td>10%</td>\n<td>39%\n</td></tr>\n<tr>\n<td>−9</td>\n<td>0%</td>\n<td>0%</td>\n<td>0%</td>\n<td>10%</td>\n<td>10%</td>\n<td>10%</td>\n<td>10%</td>\n<td>10%</td>\n<td>10%</td>\n<td>39%\n</td></tr>\n<tr>\n<td>−8</td>\n<td>0%</td>\n<td>0%</td>\n<td>0%</td>\n<td>10%</td>\n<td>10%</td>\n<td>10%</td>\n<td>10%</td>\n<td>10%</td>\n<td>10%</td>\n<td>39%\n</td></tr>\n<tr>\n<td>−7</td>\n<td>0%</td>\n<td>0%</td>\n<td>10%</td>\n<td>10%</td>\n<td>10%</td>\n<td>10%</td>\n<td>10%</td>\n<td>10%</td>\n<td>10%</td>\n<td>29%\n</td></tr>\n<tr>\n<td>−6</td>\n<td>0%</td>\n<td>0%</td>\n<td>10%</td>\n<td>10%</td>\n<td>10%</td>\n<td>10%</td>\n<td>10%</td>\n<td>10%</td>\n<td>10%</td>\n<td>29%\n</td></tr>\n<tr>\n<td>−5</td>\n<td>0%</td>\n<td>0%</td>\n<td>10%</td>\n<td>10%</td>\n<td>10%</td>\n<td>10%</td>\n<td>10%</td>\n<td>10%</td>\n<td>10%</td>\n<td>29%\n</td></tr>\n<tr>\n<td>−4</td>\n<td>0%</td>\n<td>10%</td>\n<td>10%</td>\n<td>10%</td>\n<td>10%</td>\n<td>10%</td>\n<td>10%</td>\n<td>10%</td>\n<td>10%</td>\n<td>20%\n</td></tr>\n<tr>\n<td>−3</td>\n<td>0%</td>\n<td>10%</td>\n<td>10%</td>\n<td>10%</td>\n<td>10%</td>\n<td>10%</td>\n<td>10%</td>\n<td>10%</td>\n<td>10%</td>\n<td>20%\n</td></tr>\n<tr>\n<td>−2</td>\n<td>0%</td>\n<td>10%</td>\n<td>10%</td>\n<td>10%</td>\n<td>10%</td>\n<td>10%</td>\n<td>10%</td>\n<td>10%</td>\n<td>10%</td>\n<td>20%\n</td></tr>\n<tr>\n<td>−1</td>\n<td>10%</td>\n<td>10%</td>\n<td>10%</td>\n<td>10%</td>\n<td>10%</td>\n<td>10%</td>\n<td>10%</td>\n<td>10%</td>\n<td>10%</td>\n<td>10%\n</td></tr>\n<tr>\n<td>0</td>\n<td>10%</td>\n<td>10%</td>\n<td>10%</td>\n<td>10%</td>\n<td>10%</td>\n<td>10%</td>\n<td>10%</td>\n<td>10%</td>\n<td>10%</td>\n<td>10%\n</td></tr>\n<tr>\n<td>1</td>\n<td>10%</td>\n<td>10%</td>\n<td>10%</td>\n<td>10%</td>\n<td>10%</td>\n<td>10%</td>\n<td>10%</td>\n<td>10%</td>\n<td>10%</td>\n<td>10%\n</td></tr>\n<tr>\n<td>2</td>\n<td>20%</td>\n<td>10%</td>\n<td>10%</td>\n<td>10%</td>\n<td>10%</td>\n<td>10%</td>\n<td>10%</td>\n<td>10%</td>\n<td>10%</td>\n<td>0%\n</td></tr>\n<tr>\n<td>3</td>\n<td>20%</td>\n<td>10%</td>\n<td>10%</td>\n<td>10%</td>\n<td>10%</td>\n<td>10%</td>\n<td>10%</td>\n<td>10%</td>\n<td>10%</td>\n<td>0%\n</td></tr>\n<tr>\n<td>4</td>\n<td>20%</td>\n<td>10%</td>\n<td>10%</td>\n<td>10%</td>\n<td>10%</td>\n<td>10%</td>\n<td>10%</td>\n<td>10%</td>\n<td>0%</td>\n<td>0%\n</td></tr>\n<tr>\n<td>5</td>\n<td>29%</td>\n<td>10%</td>\n<td>10%</td>\n<td>10%</td>\n<td>10%</td>\n<td>10%</td>\n<td>10%</td>\n<td>10%</td>\n<td>0%</td>\n<td>0%\n</td></tr>\n<tr>\n<td>6</td>\n<td>29%</td>\n<td>10%</td>\n<td>10%</td>\n<td>10%</td>\n<td>10%</td>\n<td>10%</td>\n<td>10%</td>\n<td>10%</td>\n<td>0%</td>\n<td>0%\n</td></tr>\n<tr>\n<td>7</td>\n<td>29%</td>\n<td>10%</td>\n<td>10%</td>\n<td>10%</td>\n<td>10%</td>\n<td>10%</td>\n<td>10%</td>\n<td>10%</td>\n<td>0%</td>\n<td>0%\n</td></tr>\n<tr>\n<td>8</td>\n<td>39%</td>\n<td>10%</td>\n<td>10%</td>\n<td>10%</td>\n<td>10%</td>\n<td>10%</td>\n<td>10%</td>\n<td>0%</td>\n<td>0%</td>\n<td>0%\n</td></tr>\n<tr>\n<td>9</td>\n<td>39%</td>\n<td>10%</td>\n<td>10%</td>\n<td>10%</td>\n<td>10%</td>\n<td>10%</td>\n<td>10%</td>\n<td>0%</td>\n<td>0%</td>\n<td>0%\n</td></tr>\n<tr>\n<td>10</td>\n<td>39%</td>\n<td>10%</td>\n<td>10%</td>\n<td>10%</td>\n<td>10%</td>\n<td>10%</td>\n<td>10%</td>\n<td>0%</td>\n<td>0%</td>\n<td>0%\n</td></tr>\n<tr>\n<td>11</td>\n<td>49%</td>\n<td>10%</td>\n<td>10%</td>\n<td>10%</td>\n<td>10%</td>\n<td>10%</td>\n<td>0%</td>\n<td>0%</td>\n<td>0%</td>\n<td>0%\n</td></tr>\n<tr>\n<td>12</td>\n<td>49%</td>\n<td>10%</td>\n<td>10%</td>\n<td>10%</td>\n<td>10%</td>\n<td>10%</td>\n<td>0%</td>\n<td>0%</td>\n<td>0%</td>\n<td>0%\n</td></tr>\n<tr>\n<td>13</td>\n<td>49%</td>\n<td>10%</td>\n<td>10%</td>\n<td>10%</td>\n<td>10%</td>\n<td>10%</td>\n<td>0%</td>\n<td>0%</td>\n<td>0%</td>\n<td>0%\n</td></tr></tbody></table>\n<h2><span class=\"mw-headline\" id=\"History\">History</span></h2>\n<p>In <a href=\"/wiki/NetHack_3.4.3\" title=\"NetHack 3.4.3\">NetHack 3.4.3</a>, the formulas were slightly different.<sup id=\"cite_ref-37\" class=\"reference\"><a href=\"#cite_note-37\">&#91;37&#93;</a></sup>\n</p><p>Let <var>R</var> be a random integer number from 0 to <var>x</var>&#160;&#8722;&#160;1 (inclusive).\n</p><p>If Luck&#160;=&#160;0, <var>R</var> is returned.\n</p><p>Otherwise, with <span class=\"sfrac nowrap\"><span style=\"display:inline-block; vertical-align:-0.5em; font-size:85%; text-align:center;\"><span style=\"display:block; line-height:1em; margin:0 0.1em;\">1</span><span style=\"display:block; line-height:1em; margin:0 0.1em; border-top:1px solid;\">50 &#8722; Luck</span></span></span> chance (since Luck ranges from &#8722;13 to 13, the chance should be between <span class=\"sfrac nowrap\"><span style=\"display:inline-block; vertical-align:-0.5em; font-size:85%; text-align:center;\"><span style=\"display:block; line-height:1em; margin:0 0.1em;\">1</span><span style=\"display:block; line-height:1em; margin:0 0.1em; border-top:1px solid;\">37</span></span></span> and <span class=\"sfrac nowrap\"><span style=\"display:inline-block; vertical-align:-0.5em; font-size:85%; text-align:center;\"><span style=\"display:block; line-height:1em; margin:0 0.1em;\">1</span><span style=\"display:block; line-height:1em; margin:0 0.1em; border-top:1px solid;\">63</span></span></span>), <var>R</var> is returned.\n</p><p>Otherwise, if <var>x</var>&#160;&#8804;&#160; 15 and Luck&#160;&#8805;&#160;&#8722;5 (that is, <var>x</var> is not too big and the player is not too unlucky), <span class=\"sfrac nowrap\"><span style=\"display:inline-block; vertical-align:-0.5em; font-size:85%; text-align:center;\"><span style=\"display:block; line-height:1em; margin:0 0.1em;\">Luck</span><span style=\"display:block; line-height:1em; margin:0 0.1em; border-top:1px solid;\">3</span></span></span> (truncated towards zero) is subtracted from <var>R</var>, then <var>R</var> is forced into the interval [0, <var>x</var>&#160;&#8722;&#160;1] and returned.\n</p><p>Otherwise, Luck is subtracted from <var>R</var>, then <var>R</var> is forced into the interval [0, <var>x</var>&#160;&#8722;&#160;1] and returned.\n</p>\n<h2><span class=\"mw-headline\" id=\"References\">References</span></h2>\n<div class=\"mw-references-wrap mw-references-columns\"><ol class=\"references\">\n<li id=\"cite_note-main-1\"><span class=\"mw-cite-backlink\">↑ <sup><a href=\"#cite_ref-main_1-0\">1.0</a></sup> <sup><a href=\"#cite_ref-main_1-1\">1.1</a></sup></span> <span class=\"reference-text\"><a class=\"external text\" href=\"https://github.com/NetHack/NetHack/blob/NetHack-3.6.6_Released/src/rnd.c#L116\">src/rnd.c in NetHack 3.6.6, line 116</a>\n      </span>\n</li>\n<li id=\"cite_note-2\"><span class=\"mw-cite-backlink\"><a href=\"#cite_ref-2\">↑</a></span> <span class=\"reference-text\"><a href=\"/wiki/Source:NetHack_3.4.3/pray.c#line828\" class=\"mw-redirect\" title=\"Source:NetHack 3.4.3/pray.c\">pray.c<span></span> in NetHack 3.4.3, line 828</a>\n     </span>\n</li>\n<li id=\"cite_note-3\"><span class=\"mw-cite-backlink\"><a href=\"#cite_ref-3\">↑</a></span> <span class=\"reference-text\"><a href=\"/wiki/Source:NetHack_3.4.3/write.c#line201\" class=\"mw-redirect\" title=\"Source:NetHack 3.4.3/write.c\">write.c<span></span> in NetHack 3.4.3, line 201</a>\n     </span>\n</li>\n<li id=\"cite_note-4\"><span class=\"mw-cite-backlink\"><a href=\"#cite_ref-4\">↑</a></span> <span class=\"reference-text\"><a href=\"/wiki/Source:NetHack_3.4.3/write.c#line201\" class=\"mw-redirect\" title=\"Source:NetHack 3.4.3/write.c\">write.c<span></span> in NetHack 3.4.3, line 201</a>\n     </span>\n</li>\n<li id=\"cite_note-5\"><span class=\"mw-cite-backlink\"><a href=\"#cite_ref-5\">↑</a></span> <span class=\"reference-text\"><a href=\"/wiki/Source:NetHack_3.4.3/apply.c#line2034\" class=\"mw-redirect\" title=\"Source:NetHack 3.4.3/apply.c\">apply.c<span></span> in NetHack 3.4.3, line 2034</a>\n     </span>\n</li>\n<li id=\"cite_note-6\"><span class=\"mw-cite-backlink\"><a href=\"#cite_ref-6\">↑</a></span> <span class=\"reference-text\"><a href=\"/wiki/Source:NetHack_3.4.3/apply.c#line2034\" class=\"mw-redirect\" title=\"Source:NetHack 3.4.3/apply.c\">apply.c<span></span> in NetHack 3.4.3, line 2034</a>\n     </span>\n</li>\n<li id=\"cite_note-7\"><span class=\"mw-cite-backlink\"><a href=\"#cite_ref-7\">↑</a></span> <span class=\"reference-text\"><a href=\"/wiki/Source:NetHack_3.4.3/apply.c#line2097\" class=\"mw-redirect\" title=\"Source:NetHack 3.4.3/apply.c\">apply.c<span></span> in NetHack 3.4.3, line 2097</a>\n     </span>\n</li>\n<li id=\"cite_note-8\"><span class=\"mw-cite-backlink\"><a href=\"#cite_ref-8\">↑</a></span> <span class=\"reference-text\"><a href=\"/wiki/Source:NetHack_3.4.3/apply.c#line2174\" class=\"mw-redirect\" title=\"Source:NetHack 3.4.3/apply.c\">apply.c<span></span> in NetHack 3.4.3, line 2174</a>\n     </span>\n</li>\n<li id=\"cite_note-9\"><span class=\"mw-cite-backlink\"><a href=\"#cite_ref-9\">↑</a></span> <span class=\"reference-text\"><a href=\"/wiki/Source:NetHack_3.4.3/detect.c#line1191\" class=\"mw-redirect\" title=\"Source:NetHack 3.4.3/detect.c\">detect.c<span></span> in NetHack 3.4.3, line 1191</a>\n     </span>\n</li>\n<li id=\"cite_note-10\"><span class=\"mw-cite-backlink\"><a href=\"#cite_ref-10\">↑</a></span> <span class=\"reference-text\"><a href=\"/wiki/Source:NetHack_3.4.3/detect.c#line1183\" class=\"mw-redirect\" title=\"Source:NetHack 3.4.3/detect.c\">detect.c<span></span> in NetHack 3.4.3, line 1183</a>\n     </span>\n</li>\n<li id=\"cite_note-11\"><span class=\"mw-cite-backlink\"><a href=\"#cite_ref-11\">↑</a></span> <span class=\"reference-text\"><a href=\"/wiki/Source:NetHack_3.4.3/detect.c#line1183\" class=\"mw-redirect\" title=\"Source:NetHack 3.4.3/detect.c\">detect.c<span></span> in NetHack 3.4.3, line 1183</a>\n     </span>\n</li>\n<li id=\"cite_note-12\"><span class=\"mw-cite-backlink\"><a href=\"#cite_ref-12\">↑</a></span> <span class=\"reference-text\"><a href=\"/wiki/Source:NetHack_3.4.3/detect.c#line1248\" class=\"mw-redirect\" title=\"Source:NetHack 3.4.3/detect.c\">detect.c<span></span> in NetHack 3.4.3, line 1248</a>\n     </span>\n</li>\n<li id=\"cite_note-13\"><span class=\"mw-cite-backlink\"><a href=\"#cite_ref-13\">↑</a></span> <span class=\"reference-text\"><a href=\"/wiki/Source:NetHack_3.4.3/dothrow.c#line1332\" class=\"mw-redirect\" title=\"Source:NetHack 3.4.3/dothrow.c\">dothrow.c<span></span> in NetHack 3.4.3, line 1332</a>\n     </span>\n</li>\n<li id=\"cite_note-14\"><span class=\"mw-cite-backlink\"><a href=\"#cite_ref-14\">↑</a></span> <span class=\"reference-text\"><a href=\"/wiki/Source:NetHack_3.4.3/worn.c#line741\" class=\"mw-redirect\" title=\"Source:NetHack 3.4.3/worn.c\">worn.c<span></span> in NetHack 3.4.3, line 741</a>\n     </span>\n</li>\n<li id=\"cite_note-15\"><span class=\"mw-cite-backlink\"><a href=\"#cite_ref-15\">↑</a></span> <span class=\"reference-text\"><a href=\"/wiki/Source:NetHack_3.4.3/polyself.c#line485\" class=\"mw-redirect\" title=\"Source:NetHack 3.4.3/polyself.c\">polyself.c<span></span> in NetHack 3.4.3, line 485</a>\n     </span>\n</li>\n<li id=\"cite_note-16\"><span class=\"mw-cite-backlink\"><a href=\"#cite_ref-16\">↑</a></span> <span class=\"reference-text\"><a href=\"/wiki/Source:NetHack_3.4.3/teleport.c#line606\" class=\"mw-redirect\" title=\"Source:NetHack 3.4.3/teleport.c\">teleport.c<span></span> in NetHack 3.4.3, line 606</a>\n     </span>\n</li>\n<li id=\"cite_note-17\"><span class=\"mw-cite-backlink\"><a href=\"#cite_ref-17\">↑</a></span> <span class=\"reference-text\"><a href=\"/wiki/Source:NetHack_3.4.3/trap.c#line162\" class=\"mw-redirect\" title=\"Source:NetHack 3.4.3/trap.c\">trap.c<span></span> in NetHack 3.4.3, line 162</a>\n     </span>\n</li>\n<li id=\"cite_note-18\"><span class=\"mw-cite-backlink\"><a href=\"#cite_ref-18\">↑</a></span> <span class=\"reference-text\"><a href=\"/wiki/Source:NetHack_3.4.3/trap.c#line2735\" class=\"mw-redirect\" title=\"Source:NetHack 3.4.3/trap.c\">trap.c<span></span> in NetHack 3.4.3, line 2735</a>\n     </span>\n</li>\n<li id=\"cite_note-19\"><span class=\"mw-cite-backlink\"><a href=\"#cite_ref-19\">↑</a></span> <span class=\"reference-text\"><a href=\"/wiki/Source:NetHack_3.4.3/trap.c#line2666\" class=\"mw-redirect\" title=\"Source:NetHack 3.4.3/trap.c\">trap.c<span></span> in NetHack 3.4.3, line 2666</a>\n     </span>\n</li>\n<li id=\"cite_note-20\"><span class=\"mw-cite-backlink\"><a href=\"#cite_ref-20\">↑</a></span> <span class=\"reference-text\"><a href=\"/wiki/Source:NetHack_3.4.3/trap.c#line1716\" class=\"mw-redirect\" title=\"Source:NetHack 3.4.3/trap.c\">trap.c<span></span> in NetHack 3.4.3, line 1716</a>\n     </span>\n</li>\n<li id=\"cite_note-21\"><span class=\"mw-cite-backlink\"><a href=\"#cite_ref-21\">↑</a></span> <span class=\"reference-text\"><a href=\"/wiki/Source:NetHack_3.4.3/trap.c#line3122\" class=\"mw-redirect\" title=\"Source:NetHack 3.4.3/trap.c\">trap.c<span></span> in NetHack 3.4.3, line 3122</a>\n     </span>\n</li>\n<li id=\"cite_note-22\"><span class=\"mw-cite-backlink\"><a href=\"#cite_ref-22\">↑</a></span> <span class=\"reference-text\"><a href=\"/wiki/Source:NetHack_3.4.3/trap.c#line3166\" class=\"mw-redirect\" title=\"Source:NetHack 3.4.3/trap.c\">trap.c<span></span> in NetHack 3.4.3, line 3166</a>\n     </span>\n</li>\n<li id=\"cite_note-23\"><span class=\"mw-cite-backlink\"><a href=\"#cite_ref-23\">↑</a></span> <span class=\"reference-text\"><a href=\"/wiki/Source:NetHack_3.4.3/trap.c#line3176\" class=\"mw-redirect\" title=\"Source:NetHack 3.4.3/trap.c\">trap.c<span></span> in NetHack 3.4.3, line 3176</a>\n     </span>\n</li>\n<li id=\"cite_note-24\"><span class=\"mw-cite-backlink\"><a href=\"#cite_ref-24\">↑</a></span> <span class=\"reference-text\"><a href=\"/wiki/Source:NetHack_3.4.3/trap.c#line3294\" class=\"mw-redirect\" title=\"Source:NetHack 3.4.3/trap.c\">trap.c<span></span> in NetHack 3.4.3, line 3294</a>\n     </span>\n</li>\n<li id=\"cite_note-25\"><span class=\"mw-cite-backlink\"><a href=\"#cite_ref-25\">↑</a></span> <span class=\"reference-text\"><a href=\"/wiki/Source:NetHack_3.4.3/uhitm.c#line587\" class=\"mw-redirect\" title=\"Source:NetHack 3.4.3/uhitm.c\">uhitm.c<span></span> in NetHack 3.4.3, line 587</a>\n     </span>\n</li>\n<li id=\"cite_note-26\"><span class=\"mw-cite-backlink\"><a href=\"#cite_ref-26\">↑</a></span> <span class=\"reference-text\"><a href=\"/wiki/Source:NetHack_3.4.3/uhitm.c#line1153\" class=\"mw-redirect\" title=\"Source:NetHack 3.4.3/uhitm.c\">uhitm.c<span></span> in NetHack 3.4.3, line 1153</a>\n     </span>\n</li>\n<li id=\"cite_note-27\"><span class=\"mw-cite-backlink\"><a href=\"#cite_ref-27\">↑</a></span> <span class=\"reference-text\"><a href=\"/wiki/Source:NetHack_3.4.3/dokick.c#line1046\" class=\"mw-redirect\" title=\"Source:NetHack 3.4.3/dokick.c\">dokick.c<span></span> in NetHack 3.4.3, line 1046</a>\n     </span>\n</li>\n<li id=\"cite_note-28\"><span class=\"mw-cite-backlink\"><a href=\"#cite_ref-28\">↑</a></span> <span class=\"reference-text\"><a href=\"/wiki/Source:NetHack_3.4.3/lock.c#line562\" class=\"mw-redirect\" title=\"Source:NetHack 3.4.3/lock.c\">lock.c<span></span> in NetHack 3.4.3, line 562</a>\n     </span>\n</li>\n<li id=\"cite_note-29\"><span class=\"mw-cite-backlink\"><a href=\"#cite_ref-29\">↑</a></span> <span class=\"reference-text\">computed numbers slightly incorrect</span>\n</li>\n<li id=\"cite_note-30\"><span class=\"mw-cite-backlink\"><a href=\"#cite_ref-30\">↑</a></span> <span class=\"reference-text\"><a href=\"/wiki/Source:NetHack_3.4.3/pray.c#line1396\" class=\"mw-redirect\" title=\"Source:NetHack 3.4.3/pray.c\">pray.c<span></span> in NetHack 3.4.3, line 1396</a>\n     </span>\n</li>\n<li id=\"cite_note-31\"><span class=\"mw-cite-backlink\"><a href=\"#cite_ref-31\">↑</a></span> <span class=\"reference-text\"><a href=\"/wiki/Source:NetHack_3.4.3/pray.c#line1408\" class=\"mw-redirect\" title=\"Source:NetHack 3.4.3/pray.c\">pray.c<span></span> in NetHack 3.4.3, line 1408</a>\n     </span>\n</li>\n<li id=\"cite_note-32\"><span class=\"mw-cite-backlink\"><a href=\"#cite_ref-32\">↑</a></span> <span class=\"reference-text\"><a href=\"/wiki/Source:NetHack_3.4.3/pray.c#line1618\" class=\"mw-redirect\" title=\"Source:NetHack 3.4.3/pray.c\">pray.c<span></span> in NetHack 3.4.3, line 1618</a>\n     </span>\n</li>\n<li id=\"cite_note-33\"><span class=\"mw-cite-backlink\"><a href=\"#cite_ref-33\">↑</a></span> <span class=\"reference-text\"><a href=\"/wiki/Source:NetHack_3.4.3/dokick.c#line900\" class=\"mw-redirect\" title=\"Source:NetHack 3.4.3/dokick.c\">dokick.c<span></span> in NetHack 3.4.3, line 900</a>\n     </span>\n</li>\n<li id=\"cite_note-34\"><span class=\"mw-cite-backlink\"><a href=\"#cite_ref-34\">↑</a></span> <span class=\"reference-text\"><a href=\"/wiki/Source:NetHack_3.4.3/dokick.c#line900\" class=\"mw-redirect\" title=\"Source:NetHack 3.4.3/dokick.c\">dokick.c<span></span> in NetHack 3.4.3, line 900</a>\n     </span>\n</li>\n<li id=\"cite_note-35\"><span class=\"mw-cite-backlink\"><a href=\"#cite_ref-35\">↑</a></span> <span class=\"reference-text\"><a href=\"/wiki/Source:NetHack_3.4.3/mon.c#line278\" class=\"mw-redirect\" title=\"Source:NetHack 3.4.3/mon.c\">mon.c<span></span> in NetHack 3.4.3, line 278</a>\n     </span>\n</li>\n<li id=\"cite_note-36\"><span class=\"mw-cite-backlink\"><a href=\"#cite_ref-36\">↑</a></span> <span class=\"reference-text\"><a href=\"/wiki/Source:NetHack_3.4.3/trap.c#line3274\" class=\"mw-redirect\" title=\"Source:NetHack 3.4.3/trap.c\">trap.c<span></span> in NetHack 3.4.3, line 3274</a>\n     </span>\n</li>\n<li id=\"cite_note-37\"><span class=\"mw-cite-backlink\"><a href=\"#cite_ref-37\">↑</a></span> <span class=\"reference-text\"><a class=\"external text\" href=\"https://nethackwiki.com/wiki/Source:NetHack_3.4.3/src/rnd.c#rnl\">rnl in rnd.c for Nethack 3.4.3</a></span>\n</li>\n</ol></div>\n<div style=\"display:none; right:10px; padding-bottom: 17px\" class=\"metadata topicon nopopups\"><div style=\"margin-top: -10px\"><a href=\"/wiki/NetHackWiki:Next_version\" title=\"This article may require revision for the next version of NetHack. Click here for more information.\"><img alt=\"This article may require revision for the next version of NetHack. Click here for more information.\" src=\"/images/b/b0/Nh343-icon.png\" width=\"32\" height=\"32\" /></a></div></div>\n<div class=\"todo\">\n<p><b>This page may need to be updated for the <a href=\"/wiki/Current_version\" class=\"mw-redirect\" title=\"Current version\">current version</a> of <i>NetHack</i>.</b>\n</p><p>It may contain text specific to <a href=\"/wiki/NetHack_3.4.3\" title=\"NetHack 3.4.3\">NetHack 3.4.3</a>. Information on this page may be out of date.\n</p><p><b>Editors:</b> After reviewing this page and making necessary edits, please change the {{nethack-343}} tag to the current version's tag or {{noversion}} as appropriate.\n</p>\n</div>\n\n<!-- \nNewPP limit report\nCached time: 20240926190020\nCache expiry: 604800\nDynamic content: false\nCPU time usage: 0.114 seconds\nReal time usage: 0.129 seconds\nPreprocessor visited node count: 2847/1000000\nPreprocessor generated node count: 3531/1000000\nPost‐expand include size: 22042/2097152 bytes\nTemplate argument size: 3371/2097152 bytes\nHighest expansion depth: 9/40\nExpensive parser function count: 0/100\nUnstrip recursion depth: 0/20\nUnstrip post‐expand size: 9590/5000000 bytes\n-->\n<!--\nTransclusion expansion time report (%,ms,calls,template)\n100.00%   80.799      1 -total\n 66.48%   53.714     35 Template:Refsrc\n 25.89%   20.920     35 Template:Refsrc/link\n  6.30%    5.087      1 Template:Nethack-343\n  4.47%    3.613      1 Template:Version_icon\n  3.74%    3.025      1 Template:Monclasssym\n  3.69%    2.981      8 Template:Sfrac\n  2.80%    2.260      1 Template:Top_icon\n  1.83%    1.478      2 Template:Frac\n  1.59%    1.285      1 Template:White\n-->\n\n<!-- Saved in parser cache with key wikihackdb:pcache:idhash:11965-0!canonical and timestamp 20240926190020 and revision id 173833\n -->\n</div></div>\t\t\t\t\t<div class=\"printfooter\">\n\t\t\t\t\t\tRetrieved from \"<a dir=\"ltr\" href=\"https://nethackwiki.com/index.php?title=Rnl&amp;oldid=173833\">https://nethackwiki.com/index.php?title=Rnl&amp;oldid=173833</a>\"\t\t\t\t\t</div>\n\t\t\t\t<div id=\"catlinks\" class=\"catlinks\" data-mw=\"interface\"><div id=\"mw-normal-catlinks\" class=\"mw-normal-catlinks\"><a href=\"/wiki/Special:Categories\" title=\"Special:Categories\">Categories</a>: <ul><li><a href=\"/wiki/Category:Pages_with_unversioned_Refsrc_templates\" title=\"Category:Pages with unversioned Refsrc templates\">Pages with unversioned Refsrc templates</a></li><li><a href=\"/wiki/Category:Random_number_functions\" title=\"Category:Random number functions\">Random number functions</a></li><li><a href=\"/wiki/Category:Nethack-343_articles\" title=\"Category:Nethack-343 articles\">Nethack-343 articles</a></li></ul></div></div>\t\t\t\t<div class=\"visualClear\"></div>\n\t\t\t\t\t\t\t</div>\n\t\t</div>\n\t\t<div id=\"mw-navigation\">\n\t\t\t<h2>Navigation menu</h2>\n\t\t\t<div id=\"mw-head\">\n\t\t\t\t\t\t\t\t\t<div id=\"p-personal\" role=\"navigation\" class=\"\" aria-labelledby=\"p-personal-label\">\n\t\t\t\t\t\t<h3 id=\"p-personal-label\">Personal tools</h3>\n\t\t\t\t\t\t<ul>\n\t\t\t\t\t\t\t<li id=\"pt-createaccount\"><a href=\"/index.php?title=Special:CreateAccount&amp;returnto=Rnl\" title=\"You are encouraged to create an account and log in; however, it is not mandatory\">Create account</a></li><li id=\"pt-login\"><a href=\"/index.php?title=Special:UserLogin&amp;returnto=Rnl\" title=\"You are encouraged to log in; however, it is not mandatory [o]\" accesskey=\"o\">Log in</a></li>\t\t\t\t\t\t</ul>\n\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div id=\"left-navigation\">\n\t\t\t\t\t\t\t\t\t\t<div id=\"p-namespaces\" role=\"navigation\" class=\"vectorTabs\" aria-labelledby=\"p-namespaces-label\">\n\t\t\t\t\t\t<h3 id=\"p-namespaces-label\">Namespaces</h3>\n\t\t\t\t\t\t<ul>\n\t\t\t\t\t\t\t<li id=\"ca-nstab-main\" class=\"selected\"><span><a href=\"/wiki/Rnl\" title=\"View the content page [c]\" accesskey=\"c\">Page</a></span></li><li id=\"ca-talk\"><span><a href=\"/wiki/Talk:Rnl\" rel=\"discussion\" title=\"Discussion about the content page [t]\" accesskey=\"t\">Discussion</a></span></li>\t\t\t\t\t\t</ul>\n\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div id=\"p-variants\" role=\"navigation\" class=\"vectorMenu emptyPortlet\" aria-labelledby=\"p-variants-label\">\n\t\t\t\t\t\t\t\t\t\t\t\t<input type=\"checkbox\" class=\"vectorMenuCheckbox\" aria-labelledby=\"p-variants-label\" />\n\t\t\t\t\t\t<h3 id=\"p-variants-label\">\n\t\t\t\t\t\t\t<span>Variants</span>\n\t\t\t\t\t\t</h3>\n\t\t\t\t\t\t<div class=\"menu\">\n\t\t\t\t\t\t\t<ul>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t<div id=\"right-navigation\">\n\t\t\t\t\t\t\t\t\t\t<div id=\"p-views\" role=\"navigation\" class=\"vectorTabs\" aria-labelledby=\"p-views-label\">\n\t\t\t\t\t\t<h3 id=\"p-views-label\">Views</h3>\n\t\t\t\t\t\t<ul>\n\t\t\t\t\t\t\t<li id=\"ca-view\" class=\"collapsible selected\"><span><a href=\"/wiki/Rnl\">Read</a></span></li><li id=\"ca-viewsource\" class=\"collapsible\"><span><a href=\"/index.php?title=Rnl&amp;action=edit\" title=\"This page is protected.&#10;You can view its source [e]\" accesskey=\"e\">View source</a></span></li><li id=\"ca-history\" class=\"collapsible\"><span><a href=\"/index.php?title=Rnl&amp;action=history\" title=\"Past revisions of this page [h]\" accesskey=\"h\">View history</a></span></li>\t\t\t\t\t\t</ul>\n\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div id=\"p-cactions\" role=\"navigation\" class=\"vectorMenu emptyPortlet\" aria-labelledby=\"p-cactions-label\">\n\t\t\t\t\t\t<input type=\"checkbox\" class=\"vectorMenuCheckbox\" aria-labelledby=\"p-cactions-label\" />\n\t\t\t\t\t\t<h3 id=\"p-cactions-label\"><span>More</span></h3>\n\t\t\t\t\t\t<div class=\"menu\">\n\t\t\t\t\t\t\t<ul>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div id=\"p-search\" role=\"search\">\n\t\t\t\t\t\t<h3>\n\t\t\t\t\t\t\t<label for=\"searchInput\">Search</label>\n\t\t\t\t\t\t</h3>\n\t\t\t\t\t\t<form action=\"/index.php\" id=\"searchform\">\n\t\t\t\t\t\t\t<div id=\"simpleSearch\">\n\t\t\t\t\t\t\t\t<input type=\"search\" name=\"search\" placeholder=\"Search NetHackWiki\" title=\"Search NetHackWiki [f]\" accesskey=\"f\" id=\"searchInput\"/><input type=\"hidden\" value=\"Special:Search\" name=\"title\"/><input type=\"submit\" name=\"fulltext\" value=\"Search\" title=\"Search the pages for this text\" id=\"mw-searchButton\" class=\"searchButton mw-fallbackSearchButton\"/><input type=\"submit\" name=\"go\" value=\"Go\" title=\"Go to a page with this exact name if it exists\" id=\"searchButton\" class=\"searchButton\"/>\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</form>\n\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div id=\"mw-panel\">\n\t\t\t\t<div id=\"p-logo\" role=\"banner\"><a class=\"mw-wiki-logo\" href=\"/wiki/Main_Page\"  title=\"Visit the main page\"></a></div>\n\t\t\t\t\t\t<div class=\"portal\" role=\"navigation\" id=\"p-navigation\" aria-labelledby=\"p-navigation-label\">\n\t\t\t<h3 id=\"p-navigation-label\">Navigation</h3>\n\t\t\t<div class=\"body\">\n\t\t\t\t\t\t\t\t<ul>\n\t\t\t\t\t<li id=\"n-NetHack-Wiki\"><a href=\"/wiki/Main_Page\">NetHack Wiki</a></li><li id=\"n-Forum\"><a href=\"/wiki/Forum:Watercooler\">Forum</a></li><li id=\"n-portal\"><a href=\"/wiki/NetHackWiki:Community_Portal\" title=\"About the project, what you can do, where to find things\">Community portal</a></li><li id=\"n-recentchanges\"><a href=\"/wiki/Special:RecentChanges\" title=\"A list of recent changes in the wiki [r]\" accesskey=\"r\">Recent changes</a></li><li id=\"n-randompage\"><a href=\"/wiki/Special:Random\" title=\"Load a random page [x]\" accesskey=\"x\">Random page</a></li>\t\t\t\t</ul>\n\t\t\t\t\t\t\t</div>\n\t\t</div>\n\t\t\t<div class=\"portal\" role=\"navigation\" id=\"p-Popular_pages\" aria-labelledby=\"p-Popular_pages-label\">\n\t\t\t<h3 id=\"p-Popular_pages-label\">Popular pages</h3>\n\t\t\t<div class=\"body\">\n\t\t\t\t\t\t\t\t<ul>\n\t\t\t\t\t<li id=\"n-Dungeon-features\"><a href=\"/wiki/Dungeon_feature\">Dungeon features</a></li><li id=\"n-Monsters\"><a href=\"/wiki/Monster#Canonical_list_of_monsters\">Monsters</a></li><li id=\"n-In.2FExtrinsics\"><a href=\"/wiki/Property#Intrinsic_properties\">In/Extrinsics</a></li><li id=\"n-Items\"><a href=\"/wiki/Item\">Items</a></li><li id=\"n-Spells\"><a href=\"/wiki/Spellbook#List_of_spellbooks\">Spells</a></li><li id=\"n-Game-options\"><a href=\"/wiki/Options\">Game options</a></li><li id=\"n-Websites\"><a href=\"/wiki/Websites\">Websites</a></li>\t\t\t\t</ul>\n\t\t\t\t\t\t\t</div>\n\t\t</div>\n\t\t\t<div class=\"portal\" role=\"navigation\" id=\"p-contributing\" aria-labelledby=\"p-contributing-label\">\n\t\t\t<h3 id=\"p-contributing-label\">Contributing</h3>\n\t\t\t<div class=\"body\">\n\t\t\t\t\t\t\t\t<ul>\n\t\t\t\t\t<li id=\"n-Style-guide\"><a href=\"/wiki/NetHackWiki:Style_guide\">Style guide</a></li><li id=\"n-help\"><a href=\"/wiki/NetHackWiki:How_to_help\" title=\"The place to find out\">How to help</a></li><li id=\"n-Current-projects\"><a href=\"/wiki/NetHackWiki:Current_projects\">Current projects</a></li>\t\t\t\t</ul>\n\t\t\t\t\t\t\t</div>\n\t\t</div>\n\t\t\t<div class=\"portal\" role=\"navigation\" id=\"p-tb\" aria-labelledby=\"p-tb-label\">\n\t\t\t<h3 id=\"p-tb-label\">Tools</h3>\n\t\t\t<div class=\"body\">\n\t\t\t\t\t\t\t\t<ul>\n\t\t\t\t\t<li id=\"t-whatlinkshere\"><a href=\"/wiki/Special:WhatLinksHere/Rnl\" title=\"A list of all wiki pages that link here [j]\" accesskey=\"j\">What links here</a></li><li id=\"t-recentchangeslinked\"><a href=\"/wiki/Special:RecentChangesLinked/Rnl\" rel=\"nofollow\" title=\"Recent changes in pages linked from this page [k]\" accesskey=\"k\">Related changes</a></li><li id=\"t-specialpages\"><a href=\"/wiki/Special:SpecialPages\" title=\"A list of all special pages [q]\" accesskey=\"q\">Special pages</a></li><li id=\"t-print\"><a href=\"/index.php?title=Rnl&amp;printable=yes\" rel=\"alternate\" title=\"Printable version of this page [p]\" accesskey=\"p\">Printable version</a></li><li id=\"t-permalink\"><a href=\"/index.php?title=Rnl&amp;oldid=173833\" title=\"Permanent link to this revision of the page\">Permanent link</a></li><li id=\"t-info\"><a href=\"/index.php?title=Rnl&amp;action=info\" title=\"More information about this page\">Page information</a></li>\t\t\t\t</ul>\n\t\t\t\t\t\t\t</div>\n\t\t</div>\n\t\t\t\t</div>\n\t\t</div>\n\t\t\t\t<div id=\"footer\" role=\"contentinfo\">\n\t\t\t\t\t\t<ul id=\"footer-info\">\n\t\t\t\t\t\t\t\t<li id=\"footer-info-lastmod\"> This page was last edited on 3 July 2024, at 01:55.</li>\n\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t<ul id=\"footer-places\">\n\t\t\t\t\t\t\t\t<li id=\"footer-places-about\"><a href=\"/wiki/NetHackWiki:About\" title=\"NetHackWiki:About\">About NetHackWiki</a></li>\n\t\t\t\t\t\t\t\t<li id=\"footer-places-disclaimer\"><a href=\"/wiki/NetHackWiki:General_disclaimer\" title=\"NetHackWiki:General disclaimer\">Disclaimers</a></li>\n\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t\t\t\t<ul id=\"footer-icons\" class=\"noprint\">\n\t\t\t\t\t\t\t\t\t\t<li id=\"footer-poweredbyico\">\n\t\t\t\t\t\t<a href=\"//www.mediawiki.org/\"><img src=\"/resources/assets/poweredby_mediawiki_88x31.png\" alt=\"Powered by MediaWiki\" srcset=\"/resources/assets/poweredby_mediawiki_132x47.png 1.5x, /resources/assets/poweredby_mediawiki_176x62.png 2x\" width=\"88\" height=\"31\"/></a>\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t<div style=\"clear: both;\"></div>\n\t\t</div>\n\t\t\n<script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({\"wgPageParseReport\":{\"limitreport\":{\"cputime\":\"0.114\",\"walltime\":\"0.129\",\"ppvisitednodes\":{\"value\":2847,\"limit\":1000000},\"ppgeneratednodes\":{\"value\":3531,\"limit\":1000000},\"postexpandincludesize\":{\"value\":22042,\"limit\":2097152},\"templateargumentsize\":{\"value\":3371,\"limit\":2097152},\"expansiondepth\":{\"value\":9,\"limit\":40},\"expensivefunctioncount\":{\"value\":0,\"limit\":100},\"unstrip-depth\":{\"value\":0,\"limit\":20},\"unstrip-size\":{\"value\":9590,\"limit\":5000000},\"timingprofile\":[\"100.00%   80.799      1 -total\",\" 66.48%   53.714     35 Template:Refsrc\",\" 25.89%   20.920     35 Template:Refsrc/link\",\"  6.30%    5.087      1 Template:Nethack-343\",\"  4.47%    3.613      1 Template:Version_icon\",\"  3.74%    3.025      1 Template:Monclasssym\",\"  3.69%    2.981      8 Template:Sfrac\",\"  2.80%    2.260      1 Template:Top_icon\",\"  1.83%    1.478      2 Template:Frac\",\"  1.59%    1.285      1 Template:White\"]},\"cachereport\":{\"timestamp\":\"20240926190020\",\"ttl\":604800,\"transientcontent\":false}}});mw.config.set({\"wgBackendResponseTime\":170});});</script>\n\t</body>\n</html>\n","rawPage":"{{DISPLAYTITLE:rnl}}\n{{distinguish|rn1}}\n'''rnl(<var>x</var>)'''{{refsrc|src/rnd.c|116|nethack=3.6.6|name=main}} is a pseudo-random number function used in ''NetHack'' when a result should be weighted by [[Luck]].\n\nrnl(<var>x</var>) has the same range as rn2(<var>x</var>) (that is, 0&nbsp;&le; rnl(<var>x</var>)&nbsp;&lt;&nbsp;<var>x</var>), but is weighted toward 0 if you have positive Luck, and toward <var>x</var>&nbsp;&minus;&nbsp;1 if you have negative Luck.\n\n== Formula ==\n\nSee source code in <ref name=main/>\n\nFor rnl(<var>x</var>), let <var>L</var> equal your Luck, including the [[luck item]] bonus or penalty, whether positive, negative, or zero.\n\nIf <var>x</var> &le; 15, <var>L</var> = {{frac|<var>L</var>|3}}, rounded toward the nearest integer.\n\nIf <var>L</var> = 0, return [[rn2]](<var>x</var>).\n\nWith chance {{sfrac|1|37 + {{!}}<var>L</var>{{!}}}}, return rn2(<var>x</var>).\n\nOtherwise, return rn2(<var>x</var>) - <var>L</var>, but no less than 0 and no more than <var>x</var> - 1.\n\nThis means that rnl(<var>x</var>) is almost always equivalent to rn2(<var>x</var>) - Luck when <var>x</var> > 15. The chance of Luck being ignored is less than 3% in any case, and even smaller for stronger (positive or negative) Luck. For smaller values of <var>x</var>, rn2(<var>x</var>) - {{sfrac|Luck|3}} is the most likely approximation.\n\n== How it's used ==\n\nIn the tables below, some very high (99.8%) and very low (0.2%) values above are rounded to 100% or 0%. Nothing is completely 100% or 0% likely, except where spelled out as \"certain\" or \"impossible\".\n\n=== Events based solely on Luck ===\n\n{| class=\"wikitable\"\n!rowspan=2|Situation !! rowspan=2|Code !! colspan=9|Luck\n|-\n!&minus;11 !! &minus;8 !! &minus;5 !! &minus;2 !! 0 !! +2 !! +5 !! +8 !! +11\n|-\n| Chance of your god helping you if you [[pray]] with exactly 0 [[alignment record|alignment]]\n| <code>rnl(2)==0</code>{{refsrc|pray.c|828}}\n| 1% || 1% || 1% || 1% || 50% || 99% || 99% || 99% || 99%\n|-\n| Chance of [[Magic marker|writing]] a scroll you have not seen\n| <code>rnl(15)==0</code>{{refsrc|write.c|201}}\n| 0.2% || 0.2% || 0.2% || 0.2% || 6.7% || 13.2% || 19.7% || 26.2% || 32.7%\n|-\n| Chance of [[Magic marker|writing]] a scroll you have not seen, as a [[Wizard]]\n| <code>rnl(5)==0</code>{{refsrc|write.c|201}}\n| 0.5% || 0.5% || 0.5% || 0.5% || 20.0% || 39.5% || 59.0% || 78.5% || 98.0%\n|-\n| Chance of failing to set a [[land mine]] (in which case it blows up) or [[beartrap]] (nothing happens) while [[riding]] and [[Skill|unskilled]] at riding\n| <code>rnl(10)>5</code>{{refsrc|apply.c|2034}}\n| 79% || 69% || 59% || 50% || 40% || 30% || 21% || 11% || 1%\n|-\n| Chance of failing to set a [[land mine]] (in which case it blows up) or [[beartrap]] (nothing happens) while [[riding]] and [[Skill|unskilled]] at riding, and [[fumbling]] or using a cursed trap\n| <code>rnl(10)>3</code>{{refsrc|apply.c|2034}}\n| 99% || 89% || 79% || 70% || 60% || 50% || 41% || 31% || 21%\n|-\n| Chance that a trap goes off after you set it, if it was cursed or you were [[fumbling]]\n| <code>rnl(10)>5</code>{{refsrc|apply.c|2097}}\n| 79% || 69% || 59% || 50% || 40% || 30% || 21% || 11% || 1%\n|-\n| Chance of snagging an item you can pick up when using a [[bullwhip]] (instead of having it slip free)\n| <code>rnl(6)==0</code>{{refsrc|apply.c|2174}}\n| 0.4% || 0.4% || 0.4% || 0.4% || 16.7% || 32.9% || 49.1% || 65.4% || 81.8%\n|-\n| Chance of finding [[secret passage]]s and [[Secret door|doors]] on each surrounding square when [[search]]ing\n| <code>rnl(7)==0</code>{{refsrc|detect.c|1191}}\n| 0.3% || 0.4% || 0.4% || 0.4% || 14.3% || 28.2% || 42.1% || 56.1% || 70.0%\n|-\n| Chance of finding [[secret passage]]s and [[Secret door|doors]] on each surrounding square when [[search]]ing, while wearing a [[pair of lenses]]\n| <code>rnl(5)==0</code>{{refsrc|detect.c|1183}}\n| 0.5% || 0.5% || 0.5% || 0.5% || 20.0% || 39.5% || 59.0% || 78.5% || 98.0%\n|-\n| Chance of finding [[secret passage]]s and [[Secret door|doors]] on each surrounding square when [[search]]ing,  while wielding a +5 [[Excalibur]], or +3 Excalibur and lenses, or any better combination\n| <code>rnl(2)==0</code>{{refsrc|detect.c|1183}}\n| 1.2% || 1.3% || 1.3% || 1.3% || 50% || 98.7% || 98.7% || 98.8% || 98.8%\n|-\n| Chance of finding a hidden [[trap]] when [[search]]ing\n| <code>rnl(8)==0</code>{{refsrc|detect.c|1248}}\n| 0.3% || 0.3% || 0.3% || 0.3% || 12.5% || 24.7% || 36.9% || 49.1% || 61.3%\n|-\n| Chance of a blessed [[projectile]] <em>not</em> breaking when thrown\n| <code>rnl(4)==0</code>{{refsrc|dothrow.c|1332}}\n| 0.6% || 0.6% || 0.6% || 0.7% || 25% || 49.3% || 73.7% || 98.1% || 98.2%\n|-\n| Chance of being [[stoning|petrified]] if your [[saddle]] slips off{{refsrc|worn.c|741}} or is destroyed<!-- verify -->, or you are polymorphed and lose stone resistance,{{refsrc|polyself.c|485}} when you are riding a steed that petrifies on touch (likely due to your horse having just polymorphed into a [[cockatrice]])\n| <code>rnl(3)>0</code>\n| 99.2% || 99.2% || 99.1% || 99.1% || 66.7% || 34.2% || 1.7% || 1.7% || 1.6%\n|-\n| Chance of a random [[levelport]] when attempting to [[teleport control|controlled]] levelport (or cancel) while [[confused]]\n| <code>rnl(5)>0</code>{{refsrc|teleport.c|606}}\n| 99.5% || 99.5% || 99.5% || 99.5% || 80.0% || 60.5% || 41.0% || 21.5% || 2.0%\n|-\n| Chance of blessed equipment <em>not</em> being eroded by rust{{refsrc|trap.c|162}} or water{{refsrc|trap.c|2735}} damage, or blessed flammable items not being burned by fire damage{{refsrc|trap.c|2666}}\n| <code>rnl(4)==0</code>\n| 0.6% || 0.6% || 0.6% || 0.7% || 25% || 49.3% || 73.7% || 98.1% || 98.2%\n|-\n| Chance of a monster becoming angry when it steps in a trap set by you,{{refsrc|trap.c|1716}} or of you triggering a trap when failing to disarm it{{refsrc|trap.c|3122}}\n| <code>rnl(5)>0</code>\n| 99.5% || 99.5% || 99.5% || 99.5% || 80.0% || 60.5% || 41.0% || 21.5% || 2.0%\n|-\n| Chance of a hostile, awake, unfrozen, mindful, non-{{monclasssym|@}} monster becoming peaceful when you free it from a trap not set by you\n| <code>rnl(10)<8</code>{{refsrc|trap.c|3166}}\n| 40.1% || 50.8% || 60.5% || 70.3% || 80.0% || 89.7% || 99.5% || 99.5% || 99.5%\n|-\n| Chance of a lawful player getting +1 [[alignment record|alignment]] for the above\n| <code>rnl(8)==0</code>, one-third of the time{{refsrc|trap.c|3176}}\n| 0.1% || 0.1% || 0.1% || 0.1% || 4.2% || 8.2% || 12.3% || 16.4% || 20.4%\n|-\n| Chance of getting +1 [[alignment record|alignment]] for trying and failing to lift a hostile, mobile, mindful, nonhuman monster out of a pit not dug by you\n| <code>rnl(10)<3</code>{{refsrc|trap.c|3294}}\n| 0.7% || 0.8% || 10.5% || 20.2% || 30% || 39.7% || 49.5% || 59.3% || 69.0%\n|-\n| Chance of having a [[boomerang]] break when used as a melee weapon\n| <code>rnl(4)==3</code>{{refsrc|uhitm.c|587}}\n| 98.2% || 98.1% || 73.7% || 49.3% || 25% || 0.7% || 0.6% || 0.6% || 0.6%\n|-\n| Chance of having a non-artifact [[lance]] break when successfully jousting a solid monster\n| <code>rnl(50)==49</code>, {{frac|5}} of the time{{refsrc|uhitm.c|1153}}\n| 4.71% || 3.53% || 2.35% || 1.18% || 0.4% || 0.01% || 0.01% || 0.01% || 0.01%\n|}\n\n=== Events based on Luck and other stats ===\n\n{| class=\"wikitable\"\n!rowspan=2|Situation !! rowspan=2|Code !! colspan=9|Luck\n|-\n!&minus;11 !! &minus;8 !! &minus;5 !! &minus;2 !! 0 !! +2 !! +5 !! +8 !! +11\n|-\n| Chance of kicking down a door\n| <code>rnl(35)<X</code>, where X = avg(str, dex, con) + (dex if [[Samurai]] or [[Monk]]){{refsrc|dokick.c|1046}}\n| colspan=\"9\"| Approx {{sfrac|<var>Luck</var> + X|35}} chance<!-- computed numbers slightly incorrect -->\n|-\n| Chance of kicking down a door when avg(str, dex, con) is 10\n| <code>rnl(35)<10</code>\n| 0.5% || 6.2% || 14.6% || 23.0% || 28.6% || 34.1% || 42.5% || 50.9% || 59.3%\n|-\n| Chance of kicking down a door when avg(str, dex, con) is 15\n| <code>rnl(35)<15</code>\n| 12.1% || 20.5% || 28.9% || 37.3% || 42.9% || 48.4% || 56.8% || 65.2% || 73.6%\n|-\n| Chance of kicking down a door as a [[Samurai]] or [[Monk]] when avg(str, con) is 15 and dex is 15\n| <code>rnl(35)<30</code> || 54.9% || 63.4% || 71.8% || 80.1% || 85.7% || 91.3% || 99.7% || 99.7% || 99.7%\n|-\n| Chance of opening a door\n| <code>rnl(20)<X</code>, where X = avg(str, dex, con){{refsrc|lock.c|562}} || colspan=\"9\"|Approx {{sfrac|<var>Luck</var> + X|20}} chance<ref>computed numbers slightly incorrect</ref>\n|-\n| Chance of opening a door when avg(str, dex, con) is 10\n| <code>rnl(20)<10</code>\n| 1% || 11% || 26% || 40% || 50% || 60% || 74% || 89% || 99%\n|-\n| Chance of opening a door when avg(str, dex, con) is 15\n| <code>rnl(20)<15</code>\n| 21% || 36% || 51% || 65% || 75% || 85% || 99% || 99% || 99%\n|-\n| One criterion (the other being [[alignment record|alignment]]-based) for a [[minion]] to be summoned when converting{{refsrc|pray.c|1396}} (or attempting to convert{{refsrc|pray.c|1408}}) an [[altar]]\n| <code>rnl(your level)>6</code>\n| colspan=\"9\"|Impossible before level 8, more likely with low luck or higher level\n|-\n| Chance of summoning a minion, all other criteria being met, at level 8\n| <code>rnl(8)>6</code>\n| 61.3% || 49.1% || 36.9% || 24.7% || 12.5% || 0.3% || 0.3% || 0.3% || 0.3%\n|-\n| Chance of summoning a minion, all other criteria being met, at level 12\n| <code>rnl(12)>6</code>\n| 74.2% || 66.0% || 58.0% || 49.8% || 41.7% || 33.6% || 25.4% || 17.3% || 9.1%\n|-\n| Chance of summoning a minion, all other criteria being met, at level 16\n| <code>rnl(16)>6</code>\n| 99.1% || 99.0% || 86.8% || 68.4% || 56.3% || 44.1% || 25.7% || 7.4% || 1.2%\n|-\n| Chance of summoning a minion, all other criteria being met, at level 24\n| <code>rnl(24)>6</code>\n| 99.4% || 99.4% || 91.2% || 79.0% || 70.8% || 62.7% || 50.5% || 38.2% || 26.0%\n|-\n| Chance of [[anger]]ing your god by praying in [[Gehennom]]\n| <code>rnl(alignment)>0</code>{{refsrc|pray.c|1618}}\n| colspan=\"9\"|Certain with negative alignment, impossible at alignment 1, more likely with higher alignment, less likely with higher luck\n|-\n| Chance of [[anger]]ing your god by praying in [[Gehennom]] at alignment 2\n| <code>rnl(2)>0</code>\n| 98.8% || 98.8% || 98.7% || 98.7% || 50% || 1.3% || 1.3% || 1.3% || 1.2%\n|-\n| Chance of [[anger]]ing your god by praying in [[Gehennom]] at alignment 4\n| <code>rnl(4)>0</code>\n| 99.4% || 99.4% || 99.3% || 99.3% || 75% || 50.7% || 26.3% || 1.9% || 1.8%\n|-\n| Chance of [[anger]]ing your god by praying in [[Gehennom]] at alignment 8\n| <code>rnl(8)>0</code>\n| 99.7% || 99.7% || 99.7% || 99.7% || 87.5% || 75.3% || 63.1% || 50.9% || 38.7%\n|-\n| Chance of [[anger]]ing your god by praying in [[Gehennom]] at alignment 16\n| <code>rnl(16)>0</code>\n| 99.9% || 99.9% || 99.9% || 99.9% || 93.8% || 81.6% || 63.2% || 44.9% || 26.4%\n|-\n| Chance of [[anger]]ing your god by praying in [[Gehennom]] at alignment 32\n| <code>rnl(32)>0</code>\n| 99.9% || 99.9% || 99.9% || 99.9% || 96.9% || 90.8% || 81.6% || 72.4% || 63.2%\n|}\n\n=== Numerical distributions ===\n{| class=\"wikitable\"\n!rowspan=2|Value !! rowspan=2|Code !! colspan=9|Luck\n|-\n!&minus;11 !! &minus;8 !! &minus;5 !! &minus;2 !! 0 !! +2 !! +5 !! +8 !! +11\n|-\n| Average number of fruit that fall from a [[tree]] when you kick it\n| <code>8-rnl(7)</code>{{refsrc|dokick.c|900}}\n| 2.5 || 2.9 || 3.5 || 4.2 || 5 || 5.8 || 6.5 || 7.1 || 7.5\n|-\n| Average number of bees that are summoned from a tree if you kick it\n| <code>rnl(4)+2</code>{{refsrc|dokick.c|900}}\n| 5 || 5 || 4.7 || 4.2 || 3.5 || 2.8 || 2.3 || 2 || 2\n|-\n| Average number of [[gold piece]]s dropped by a [[gold golem]] on death\n| <code>200-rnl(101)</code>{{refsrc|mon.c|278}}\n| 140 || 143 || 145 || 148 || 150 || 152 || 155 || 157 || 160\n|-\n| Average number of darts or arrows left behind when disarming a [[dart trap]] or [[arrow trap]]\n| <code>50-rnl(50)</code>{{refsrc|trap.c|3274}}\n| 16 || 18 || 21 || 24 || 25.5 || 27 || 30 || 33 || 35\n|}\n\n== Mathematical analysis ==\n\nBasically, rnl(<var>x</var>) generates a number between 0 and <var>x</var>&nbsp;&minus;&nbsp;1, and adjusts it in proportion to the player's Luck, with a small chance (which is smaller when Luck tends toward the extremes) of leaving it alone. The net effect is that with positive or negative Luck, the highest or lowest numbers on the list become vanishingly unlikely, and the odds of getting the best and worst result increase, while the odds of getting every result in between stays the same.\n\nFurther complicating the matter is that, when <var>x</var> is 15 or less, the adjustment is divided by 3, which means that for those calls there is a stepwise distribution where the odds of everything are almost completely the same within blocks of 3 numbers (&minus;13 to &minus;11, &minus;10 to &minus;8, &minus;7 to &minus;5, &minus;4 to &minus;2, &minus;1 to 1, 2 to 4, 5 to 7, 8 to 10, 11 to 13). Larger parameters have smoother distributions.\n\nIn addition, the function often being called in unusual manners, such as comparing it to a non-zero constant, which results in a \"slice\" being taken from the distribution graph at a less easily explainable point.  This is evidenced in the distrubtions for rnl(A)&lt;B or rnl(A)&gt;B above.\n\nSince many of the comparisons are made against 0, having even &minus;2 Luck can cause many results to swing against the player's favor with near certainty. &minus;1 Luck is not as bad as most of these calls also have a small parameter, although it does negatively affect many things that do not call rnl (like [[prayer]] or [[wish]]ing). On the flip side, positive Luck's effect tends to be much less dramatic, and +2 Luck still has a lot of room for improvement. +1 Luck changes almost nothing significantly; the only pronounced effect it has is to cause jousting to be much safer.\n\n== Sample distribution ==\n\nThis table is the computed odds of rnl(10) at each possible Luck for each possible result. The \"0%\" values are actually around 0.24–0.26% depending on the magnitude of the Luck.\n\n{| class=\"wikitable\"\n!Luck\n!colspan=\"10\"|Simplified results\n|-\n| ||0||1||2||3||4||5||6||7||8||9\n|-\n| −13|| 0%|| 0%|| 0%|| 0%||10%||10%||10%||10%||10%||49%\n|-\n| −12|| 0%|| 0%|| 0%|| 0%||10%||10%||10%||10%||10%||49%\n|-\n| −11|| 0%|| 0%|| 0%|| 0%||10%||10%||10%||10%||10%||49%\n|-\n| −10|| 0%|| 0%|| 0%||10%||10%||10%||10%||10%||10%||39%\n|-\n|  −9|| 0%|| 0%|| 0%||10%||10%||10%||10%||10%||10%||39%\n|-\n|  −8|| 0%|| 0%|| 0%||10%||10%||10%||10%||10%||10%||39%\n|-\n|  −7|| 0%|| 0%||10%||10%||10%||10%||10%||10%||10%||29%\n|-\n|  −6|| 0%|| 0%||10%||10%||10%||10%||10%||10%||10%||29%\n|-\n|  −5|| 0%|| 0%||10%||10%||10%||10%||10%||10%||10%||29%\n|-\n|  −4|| 0%||10%||10%||10%||10%||10%||10%||10%||10%||20%\n|-\n|  −3|| 0%||10%||10%||10%||10%||10%||10%||10%||10%||20%\n|-\n|  −2|| 0%||10%||10%||10%||10%||10%||10%||10%||10%||20%\n|-\n|  −1||10%||10%||10%||10%||10%||10%||10%||10%||10%||10%\n|-\n|   0||10%||10%||10%||10%||10%||10%||10%||10%||10%||10%\n|-\n|   1||10%||10%||10%||10%||10%||10%||10%||10%||10%||10%\n|-\n|   2||20%||10%||10%||10%||10%||10%||10%||10%||10%|| 0%\n|-\n|   3||20%||10%||10%||10%||10%||10%||10%||10%||10%|| 0%\n|-\n|   4||20%||10%||10%||10%||10%||10%||10%||10%|| 0%|| 0%\n|-\n|   5||29%||10%||10%||10%||10%||10%||10%||10%|| 0%|| 0%\n|-\n|   6||29%||10%||10%||10%||10%||10%||10%||10%|| 0%|| 0%\n|-\n|   7||29%||10%||10%||10%||10%||10%||10%||10%|| 0%|| 0%\n|-\n|   8||39%||10%||10%||10%||10%||10%||10%|| 0%|| 0%|| 0%\n|-\n|   9||39%||10%||10%||10%||10%||10%||10%|| 0%|| 0%|| 0%\n|-\n|  10||39%||10%||10%||10%||10%||10%||10%|| 0%|| 0%|| 0%\n|-\n|  11||49%||10%||10%||10%||10%||10%|| 0%|| 0%|| 0%|| 0%\n|-\n|  12||49%||10%||10%||10%||10%||10%|| 0%|| 0%|| 0%|| 0%\n|-\n|  13||49%||10%||10%||10%||10%||10%|| 0%|| 0%|| 0%|| 0%\n|}\n\n== History ==\n\nIn [[NetHack 3.4.3]], the formulas were slightly different.<ref>[https://nethackwiki.com/wiki/Source:NetHack_3.4.3/src/rnd.c#rnl rnl in rnd.c for Nethack 3.4.3]</ref>\n\nLet <var>R</var> be a random integer number from 0 to <var>x</var>&nbsp;&minus;&nbsp;1 (inclusive).\n\nIf Luck&nbsp;=&nbsp;0, <var>R</var> is returned.\n\nOtherwise, with {{sfrac|1|50 &minus; Luck}} chance (since Luck ranges from &minus;13 to 13, the chance should be between {{sfrac|37}} and {{sfrac|63}}), <var>R</var> is returned.\n\nOtherwise, if <var>x</var>&nbsp;&le;&nbsp; 15 and Luck&nbsp;&ge;&nbsp;&minus;5 (that is, <var>x</var> is not too big and the player is not too unlucky), {{sfrac|Luck|3}} (truncated towards zero) is subtracted from <var>R</var>, then <var>R</var> is forced into the interval [0, <var>x</var>&nbsp;&minus;&nbsp;1] and returned.\n\nOtherwise, Luck is subtracted from <var>R</var>, then <var>R</var> is forced into the interval [0, <var>x</var>&nbsp;&minus;&nbsp;1] and returned.\n\n== References ==\n\n<references />\n\n[[Category:Random number functions]]\n{{nethack-343}}"}