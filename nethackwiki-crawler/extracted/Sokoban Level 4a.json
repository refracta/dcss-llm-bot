{"title":"Sokoban Level 4a","url":"https://nethackwiki.com/wiki/Sokoban_Level_4a","type":"markdown","data":"**Sokoban Level 4a** is one of two possible maps for the last level of [Sokoban](/wiki/Sokoban \"Sokoban\") in *[NetHack](/wiki/NetHack \"NetHack\")*, and is among the various possible maps for that level in variants of *NetHack*. Behind the holes is a [treasure zoo](/wiki/Treasure_zoo \"Treasure zoo\") with three doors - inside one of the doors is the branch prize, which has an equal chance of being a [bag of holding](/wiki/Bag_of_holding \"Bag of holding\") or an [amulet of reflection](/wiki/Amulet_of_reflection \"Amulet of reflection\"). There are 18 [boulders](/wiki/Boulder \"Boulder\") and 16 [holes](/wiki/Hole \"Hole\"), leaving 2 spare boulders.\n\n*The following information pertains to an upcoming version ([NetHack 3.7.0](/wiki/NetHack_3.7.0 \"NetHack 3.7.0\")). If this version is now released, please verify that it is still accurate, then update the page to incorporate this information.*\n\nBoth prizes are no longer equally likely for each floor. Instead, this version has a 75% chance for a bag of holding, and 4b has a 75% chance for an amulet of reflection. Also, the level may be vertically reflected.\n\n```\n0 boulder\n^ hole\n@ starting position/downstairs\n< upstairs\n```\n\n```\n--------------------------\n|@......^^^^^^^^^^^^^^^^.|\n|.......----------------.|\n-------.------         |.|\n |...........|         |.|\n |.0.0.0.0.0.|         |.|\n--------.----|         |.|\n|...0.0..0.0.|         |.|\n|...0........|         |.|\n-----.--------   ------|.|\n |..0.0.0...|  --|.....|.|\n |.....0....|  |.+.....|.|\n |.0.0...0.--  |-|.....|.|\n-------.----   |.+.....+.|\n|..0.....|     |-|.....|--\n|........|     |.+.....|\n|...------     --|.....|\n-----            -------\n```\n\n[ ]\n\n## Contents\n\n- [1 Strategy](#Strategy)\n\n- [2 History](#History)\n\n- [3 Variants](#Variants)\n\n  - [3.1 UnNetHack](#UnNetHack)\n  - [3.2 EvilHack](#EvilHack)\n  - [3.3 Hack'EM](#Hack.27EM)\n\n## Strategy\n\nThe following solution solves the level without putting any boulders in an immobile position. You can [watch this solution as a ttyrec video](http://alt.org/nethack/trd/?file=http://alt.org/nethack/userdata/t/tjraux02/ttyrec/2011-06-07.05:00:46.ttyrec.bz2) or [a YouTube video](https://youtu.be/no2C69Nk58Y). Faster solutions which do not necessarily leave every boulder free might exist.\n\nAll boulders are replaced by letters so they can be referred to. Moving the boulders is shortened to **r** for right, **l** for left, **u** for up, **d** for down. An asterisk is used to denote the last move filled a hole (and thus removed the boulder from the game). So **Nddrr\\*** means move boulder **N** two times down and two times to the right into a hole.\n\nStore some boulders of the 3rd room in the 4th and make some way:\n\n```\n-------------------------- K l\n|@......^^^^^^^^^^^^^^^^.| N rrr\n|.......----------------.| R rrr\n-------.------         |.| P rrdd dlll lur \n |...........|         |.| F ll\n |.A.B.C.D.E.|         |.| J rddd drrd ddll lllu\n--------.----|         |.|\n|...F.G..H.I.|         |.|\n|...J........|         |.|\n-----.--------   ------|.|\n |..K.L.M...|  --|.....|.|\n |.....N....|  |.+.....|.|\n |.O.P...Q.--  |-|.....|.|\n-------.----   |.+.....+.|\n|..R.....|     |-|.....|--\n|........|     |.+.....|\n|...------     --|.....|\n-----            -------\n```\n\nPush **G** and **H** out of the way so you can move some of the boulders of the 1st room to the 3rd and 4th room:\n\n```\n-------------------------- G ll\n|>......^^^^^^^^^^^^^^^^.| H ll\n|.......----------------.| D lddd llld dddr\n-------.------         |.| C rddd llld dd\n |...........|         |.|\n |.A.B.C.D.E.|         |.|\n--------.----|         |.|\n|.F...G..H.I.|         |.|\n|............|         |.|\n-----.--------   ------|.|\n |.K..L.M...|  --|.....|.|\n |........N.|  |.+.....|.|\n |.O.....Q.--  |-|.....|.|\n-------.----   |.+.....+.|\n|.J.P.R..|     |-|.....|--\n|.@......|     |.+.....|\n|...------     --|.....|\n-----            -------\n```\n\nIt is also possible to push **D** into the 4th room under **J** and move **C** to where **D** is now if you want some more leeway to move boulders around. Now everything is set up to start filling holes. Cleanup most of rooms 2 and 3:\n\n```\n-------------------------- H ruuu luuu r*\n|>......^^^^^^^^^^^^^^^^.| G rrrr uuul uuur r*\n|.......----------------.| F rrrr rruu uluu urrr*\n-------.------         |.| I lllu uulu uurr rr*\n |...........|         |.| C uuuu rrru uulu uurr rrr*\n |.A.B.....E.|         |.| K rruu urrr uuul uuur rrrr r*\n--------.----|         |.| L luuu rrru uulu uurr rrrr r*\n|.F.G..H...I.|         |.| M lllu uurr ruuu luuu rrrr rrrr*\n|............|         |.| N llll luuu urrr uuul uuur rrrr rrrr*\n-----.--------   ------|.|\n |.K.@L.M...|  --|.....|.|\n |...C....N.|  |.+.....|.|\n |.O..D..Q.--  |-|.....|.|\n-------.----   |.+.....+.|\n|.J.P.R..|     |-|.....|--\n|........|     |.+.....|\n|...------     --|.....|\n-----            -------\n```\n\nNow there are only a few boulders left with a lot of space. The boulders in room 4 can be cleared directly, the boulders in room 1 and 3 should first be moved through room 3 and 4 respectively:\n\n```\n-------------------------- R ruuu ullu uurr ruuu luuu rrrr rrrr rr*\n|>.............@.^^^^^^^.| P rrru uuul luuu rrru uulu uurr rrrr rrrr r*\n|.......----------------.| J rrrr ruuu ullu uurr ruuu luuu rrrr rrrr rrrr*\n-------.------         |.| D rddd llll lurr rrru uuul luuu rrru uulu uurr rrrr rrrr rrr*\n |...........|         |.| B rrrd ddll lddd uuuu rrru uulu uurr rrrr rrrr rrrr*\n |.A.B.....E.|         |.| A rrrr rddd llld dduu uurr ruuu luuu rrrr rrrr rrrr rrr*\n--------.----|         |.| E llld ddll lddd uuuu rrru uulu uurr rrrr rrrr rrrr rr*     \n|............|         |.|\n|............|         |.|\n-----.--------   ------|.|\n |..........|  --|.....|.|\n |..........|  |.+.....|.|\n |.O..D..Q.--  |-|.....|.|\n-------.----   |.+.....+.|\n|.J.P.R..|     |-|.....|--\n|........|     |.+.....|\n|...------     --|.....|\n-----            -------\n```\n\nIn the large room behind the door is a [treasure zoo](/wiki/Treasure_zoo \"Treasure zoo\"). Behind one of the three doors in the zoo is a square with the prize item atop a burnt \"[Elbereth](/wiki/Elbereth \"Elbereth\")\" and a cursed [scroll of scare monster](/wiki/Scroll_of_scare_monster \"Scroll of scare monster\"). Also remember to check under the boulders **O** and **Q** for possible usable items.\n\n```\n--------------------------\n|>.......................|\n|.......----------------.|\n-------.------         |.|\n |...........|         |.|\n |...........|         |.|\n--------.----|         |.|\n|............|         |.|\n|............|         |.|\n-----.--------   ------|.|\n |..........|  --|.....|.|\n |..........|  |.+.....|.|\n |.O.....Q.--  |-|.....|.|\n-------.----   |.+.....+@|\n|........|     |-|.....|--\n|........|     |.+.....|\n|...------     --|.....|\n-----            -------\n```\n\n## History\n\nThe level originates from Level 23 of the 1984 Thinking Rabbit game *Sokoban 2*, with the storage area beyond the holes added on.\n\nIn [NetHack 3.4.3](/wiki/NetHack_3.4.3 \"NetHack 3.4.3\") and earlier versions, including some [variants](/wiki/Variant \"Variant\") based on these versions, the prize is always a bag of holding, with no cursed scroll of scare monster underneath it. As of [NetHack 3.6.0](/wiki/NetHack_3.6.0 \"NetHack 3.6.0\"), the cursed scroll of scare monster is added, and there is a 50% chance for the prize to be either a bag of holding or an amulet of reflection.\n\n## Variants\n\n### UnNetHack\n\nIn [UnNetHack](/wiki/UnNetHack \"UnNetHack\"), this level may be flipped horizontally or vertically like all Sokoban levels. The prize is also changed to a choice from one of the following: a bag of holding, a [cloak](/wiki/Cloak \"Cloak\") (of magic resistance or [displacement](/wiki/Cloak_of_displacement \"Cloak of displacement\")) and an [amulet](/wiki/Amulet \"Amulet\") (of reflection, [life saving](/wiki/Amulet_of_life_saving \"Amulet of life saving\") or [ESP](/wiki/Amulet_of_ESP \"Amulet of ESP\")).\n\n### EvilHack\n\nIn [EvilHack](/wiki/EvilHack \"EvilHack\"), the choice is between a prize tool (a bag of holding or a [magic marker](/wiki/Magic_marker \"Magic marker\")), a prize armor (a [helm of speed](/wiki/Helm_of_speed \"Helm of speed\") or a pair of [gauntlets of protection](/wiki/Gauntlets_of_protection \"Gauntlets of protection\")), or a prize amulet (an amulet of reflection or [magic resistance](/wiki/Amulet_of_magic_resistance \"Amulet of magic resistance\")). As soon as one of the doors is opened, the others will seal: some form of [object detection](/wiki/Object_detection \"Object detection\") is recommended if you are aiming for a specific reward.\n\n### Hack'EM\n\nIn [Hack'EM](/wiki/Hack%27EM \"Hack'EM\"), this level is named **\"Left Holding the Bag\"**. Like EvilHack, the choice is between a prize tool (a bag of holding or a magic marker), a prize armor (a helm of speed or a pair of gauntlets of protection), or a prize amulet (an amulet of reflection or magic resistance). As soon as one of the doors is opened, the others will seal: as in EvilHack, a form of detecting the prizes is recommended if you are aiming for a specific reward.\n\n[![This article has been updated to reflect NetHack 3.6.7. Click here for more information.](/images/f/f7/Nh367-icon.png)](/wiki/NetHackWiki:Next_version \"This article has been updated to reflect NetHack 3.6.7. Click here for more information.\")\n","html":"<!DOCTYPE html>\n<html class=\"client-nojs\" lang=\"en\" dir=\"ltr\">\n<head>\n<meta charset=\"UTF-8\"/>\n<title>Sokoban Level 4a - NetHack Wiki</title>\n<script>document.documentElement.className = document.documentElement.className.replace( /(^|\\s)client-nojs(\\s|$)/, \"$1client-js$2\" );</script>\n<script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({\"wgCanonicalNamespace\":\"\",\"wgCanonicalSpecialPageName\":false,\"wgNamespaceNumber\":0,\"wgPageName\":\"Sokoban_Level_4a\",\"wgTitle\":\"Sokoban Level 4a\",\"wgCurRevisionId\":152138,\"wgRevisionId\":152138,\"wgArticleId\":4571,\"wgIsArticle\":true,\"wgIsRedirect\":false,\"wgAction\":\"view\",\"wgUserName\":null,\"wgUserGroups\":[\"*\"],\"wgCategories\":[\"Upcoming\",\"Nethack-367 articles\",\"Sokoban\"],\"wgBreakFrames\":false,\"wgPageContentLanguage\":\"en\",\"wgPageContentModel\":\"wikitext\",\"wgSeparatorTransformTable\":[\"\",\"\"],\"wgDigitTransformTable\":[\"\",\"\"],\"wgDefaultDateFormat\":\"dmy\",\"wgMonthNames\":[\"\",\"January\",\"February\",\"March\",\"April\",\"May\",\"June\",\"July\",\"August\",\"September\",\"October\",\"November\",\"December\"],\"wgMonthNamesShort\":[\"\",\"Jan\",\"Feb\",\"Mar\",\"Apr\",\"May\",\"Jun\",\"Jul\",\"Aug\",\"Sep\",\"Oct\",\"Nov\",\"Dec\"],\"wgRelevantPageName\":\"Sokoban_Level_4a\",\"wgRelevantArticleId\":4571,\"wgRequestId\":\"03f894c09b02f5ca2f672324\",\"wgCSPNonce\":false,\"wgIsProbablyEditable\":false,\"wgRelevantPageIsProbablyEditable\":false,\"wgRestrictionEdit\":[],\"wgRestrictionMove\":[],\"wgWikiEditorEnabledModules\":[],\"wgCategoryTreePageCategoryOptions\":\"{\\\"mode\\\":0,\\\"hideprefix\\\":20,\\\"showcount\\\":true,\\\"namespaces\\\":false}\"});mw.loader.state({\"site.styles\":\"ready\",\"noscript\":\"ready\",\"user.styles\":\"ready\",\"user\":\"ready\",\"user.options\":\"ready\",\"user.tokens\":\"loading\",\"mediawiki.legacy.shared\":\"ready\",\"mediawiki.legacy.commonPrint\":\"ready\",\"mediawiki.toc.styles\":\"ready\",\"mediawiki.skinning.interface\":\"ready\",\"skins.vector.styles\":\"ready\"});mw.loader.implement(\"user.tokens@0tffind\",function($,jQuery,require,module){/*@nomin*/mw.user.tokens.set({\"editToken\":\"+\\\\\",\"patrolToken\":\"+\\\\\",\"watchToken\":\"+\\\\\",\"csrfToken\":\"+\\\\\"});\n});RLPAGEMODULES=[\"site\",\"mediawiki.page.startup\",\"mediawiki.user\",\"mediawiki.page.ready\",\"mediawiki.toc\",\"mediawiki.searchSuggest\",\"skins.vector.js\"];mw.loader.load(RLPAGEMODULES);});</script>\n<link rel=\"stylesheet\" href=\"/load.php?debug=false&amp;lang=en&amp;modules=mediawiki.legacy.commonPrint%2Cshared%7Cmediawiki.skinning.interface%7Cmediawiki.toc.styles%7Cskins.vector.styles&amp;only=styles&amp;skin=vector\"/>\n<script async=\"\" src=\"/load.php?debug=false&amp;lang=en&amp;modules=startup&amp;only=scripts&amp;skin=vector\"></script>\n<meta name=\"ResourceLoaderDynamicStyles\" content=\"\"/>\n<link rel=\"stylesheet\" href=\"/load.php?debug=false&amp;lang=en&amp;modules=site.styles&amp;only=styles&amp;skin=vector\"/>\n<meta name=\"generator\" content=\"MediaWiki 1.32.5\"/>\n<meta name=\"description\" content=\"The following solution solves the level without putting any boulders in an immobile position. You can watch this solution as a ttyrec video or a YouTube video. Faster solutions which do not necessarily leave every boulder free might exist.\"/>\n<link rel=\"image_src\" href=\"/images/6/65/Nethackwiki-logo.png\"/>\n<link rel=\"shortcut icon\" href=\"/images/6/64/Favicon.ico\"/>\n<link rel=\"search\" type=\"application/opensearchdescription+xml\" href=\"/opensearch_desc.php\" title=\"NetHackWiki\"/>\n<link rel=\"EditURI\" type=\"application/rsd+xml\" href=\"https://nethackwiki.com/api.php?action=rsd\"/>\n<link rel=\"canonical\" href=\"/wiki/Sokoban_Level_4a\"/>\n<!--[if lt IE 9]><script src=\"/load.php?debug=false&amp;lang=en&amp;modules=html5shiv&amp;only=scripts&amp;skin=vector&amp;sync=1\"></script><![endif]-->\n</head>\n<body class=\"mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Sokoban_Level_4a rootpage-Sokoban_Level_4a skin-vector action-view\">\t\t<div id=\"mw-page-base\" class=\"noprint\"></div>\n\t\t<div id=\"mw-head-base\" class=\"noprint\"></div>\n\t\t<div id=\"content\" class=\"mw-body\" role=\"main\">\n\t\t\t<a id=\"top\"></a>\n\t\t\t<div class=\"mw-indicators mw-body-content\">\n</div>\n<h1 id=\"firstHeading\" class=\"firstHeading\" lang=\"en\">Sokoban Level 4a</h1>\t\t\t<div id=\"bodyContent\" class=\"mw-body-content\">\n\t\t\t\t<div id=\"siteSub\" class=\"noprint\">From NetHackWiki</div>\t\t\t\t<div id=\"contentSub\"></div>\n\t\t\t\t<div id=\"jump-to-nav\"></div>\t\t\t\t<a class=\"mw-jump-link\" href=\"#mw-head\">Jump to navigation</a>\n\t\t\t\t<a class=\"mw-jump-link\" href=\"#p-search\">Jump to search</a>\n\t\t\t\t<div id=\"mw-content-text\" lang=\"en\" dir=\"ltr\" class=\"mw-content-ltr\"><div class=\"mw-parser-output\"><p><b>Sokoban Level 4a</b> is one of two possible maps for the last level of <a href=\"/wiki/Sokoban\" title=\"Sokoban\">Sokoban</a> in <i><a href=\"/wiki/NetHack\" title=\"NetHack\">NetHack</a></i>, and is among the various possible maps for that level in variants of <i>NetHack</i>. Behind the holes is a <a href=\"/wiki/Treasure_zoo\" class=\"mw-redirect\" title=\"Treasure zoo\">treasure zoo</a> with three doors - inside one of the doors is the branch prize, which has an equal chance of being a <a href=\"/wiki/Bag_of_holding\" title=\"Bag of holding\">bag of holding</a> or an <a href=\"/wiki/Amulet_of_reflection\" title=\"Amulet of reflection\">amulet of reflection</a>. There are 18 <a href=\"/wiki/Boulder\" title=\"Boulder\">boulders</a> and 16 <a href=\"/wiki/Hole\" title=\"Hole\">holes</a>, leaving 2 spare boulders.\n</p>\n<div class=\"upcoming\">\n<p><i>The following information pertains to an upcoming version (<a href=\"/wiki/NetHack_3.7.0\" title=\"NetHack 3.7.0\">NetHack 3.7.0</a>). If this version is now released, please verify that it is still accurate, then update the page to incorporate this information.</i>\n</p>\nBoth prizes are no longer equally likely for each floor. Instead, this version has a 75% chance for a bag of holding, and 4b has a 75% chance for an amulet of reflection. Also, the level may be vertically reflected.</div>\n<pre>0 boulder\n^ hole\n@ starting position/downstairs\n&lt; upstairs\n</pre>\n<pre>--------------------------\n|@......^^^^^^^^^^^^^^^^.|\n|.......----------------.|\n-------.------         |.|\n |...........|         |.|\n |.0.0.0.0.0.|         |.|\n--------.----|         |.|\n|...0.0..0.0.|         |.|\n|...0........|         |.|\n-----.--------   ------|.|\n |..0.0.0...|  --|.....|.|\n |.....0....|  |.+.....|.|\n |.0.0...0.--  |-|.....|.|\n-------.----   |.+.....+.|\n|..0.....|     |-|.....|--\n|........|     |.+.....|\n|...------     --|.....|\n-----            -------\n</pre>\n<div id=\"toc\" class=\"toc\"><input type=\"checkbox\" role=\"button\" id=\"toctogglecheckbox\" class=\"toctogglecheckbox\" style=\"display:none\" /><div class=\"toctitle\" lang=\"en\" dir=\"ltr\"><h2>Contents</h2><span class=\"toctogglespan\"><label class=\"toctogglelabel\" for=\"toctogglecheckbox\"></label></span></div>\n<ul>\n<li class=\"toclevel-1 tocsection-1\"><a href=\"#Strategy\"><span class=\"tocnumber\">1</span> <span class=\"toctext\">Strategy</span></a></li>\n<li class=\"toclevel-1 tocsection-2\"><a href=\"#History\"><span class=\"tocnumber\">2</span> <span class=\"toctext\">History</span></a></li>\n<li class=\"toclevel-1 tocsection-3\"><a href=\"#Variants\"><span class=\"tocnumber\">3</span> <span class=\"toctext\">Variants</span></a>\n<ul>\n<li class=\"toclevel-2 tocsection-4\"><a href=\"#UnNetHack\"><span class=\"tocnumber\">3.1</span> <span class=\"toctext\">UnNetHack</span></a></li>\n<li class=\"toclevel-2 tocsection-5\"><a href=\"#EvilHack\"><span class=\"tocnumber\">3.2</span> <span class=\"toctext\">EvilHack</span></a></li>\n<li class=\"toclevel-2 tocsection-6\"><a href=\"#Hack.27EM\"><span class=\"tocnumber\">3.3</span> <span class=\"toctext\">Hack'EM</span></a></li>\n</ul>\n</li>\n</ul>\n</div>\n\n<h2><span class=\"mw-headline\" id=\"Strategy\">Strategy</span></h2>\n<p>The following solution solves the level without putting any boulders in an immobile position. You can <a class=\"external text\" href=\"http://alt.org/nethack/trd/?file=http://alt.org/nethack/userdata/t/tjraux02/ttyrec/2011-06-07.05:00:46.ttyrec.bz2\">watch this solution as a ttyrec video</a> or <a class=\"external text\" href=\"https://youtu.be/no2C69Nk58Y\">a YouTube video</a>. Faster solutions which do not necessarily leave every boulder free might exist.\n</p><p>All boulders are replaced by letters so they can be referred to. Moving the boulders is shortened to <b>r</b> for right, <b>l</b> for left, <b>u</b> for up, <b>d</b> for down. An asterisk is used to denote the last move filled a hole (and thus removed the boulder from the game). So <b>Nddrr*</b> means move boulder <b>N</b> two times down and two times to the right into a hole.\n</p><p>Store some boulders of the 3rd room in the 4th and make some way:\n</p>\n<pre>-------------------------- <b>K</b> l\n|@......^^^^^^^^^^^^^^^^.| <b>N</b> rrr\n|.......----------------.| <b>R</b> rrr\n-------.------         |.| <b>P</b> rrdd dlll lur \n |...........|         |.| <b>F</b> ll\n |.A.B.C.D.E.|         |.| <b>J</b> rddd drrd ddll lllu\n--------.----|         |.|\n|...F.G..H.I.|         |.|\n|...J........|         |.|\n-----.--------   ------|.|\n |..K.L.M...|  --|.....|.|\n |.....N....|  |.+.....|.|\n |.O.P...Q.--  |-|.....|.|\n-------.----   |.+.....+.|\n|..R.....|     |-|.....|--\n|........|     |.+.....|\n|...------     --|.....|\n-----            -------\n</pre>\n<p>Push <b>G</b> and <b>H</b> out of the way so you can move some of the boulders of the 1st room to the 3rd and 4th room:\n</p>\n<pre>-------------------------- <b>G</b> ll\n|&gt;......^^^^^^^^^^^^^^^^.| <b>H</b> ll\n|.......----------------.| <b>D</b> lddd llld dddr\n-------.------         |.| <b>C</b> rddd llld dd\n |...........|         |.|\n |.A.B.C.D.E.|         |.|\n--------.----|         |.|\n|.F...G..H.I.|         |.|\n|............|         |.|\n-----.--------   ------|.|\n |.K..L.M...|  --|.....|.|\n |........N.|  |.+.....|.|\n |.O.....Q.--  |-|.....|.|\n-------.----   |.+.....+.|\n|.J.P.R..|     |-|.....|--\n|.@......|     |.+.....|\n|...------     --|.....|\n-----            -------\n</pre>\n<p>It is also possible to push <b>D</b> into the 4th room under <b>J</b> and move <b>C</b> to where <b>D</b> is now if you want some more leeway to move boulders around. Now everything is set up to start filling holes. Cleanup most of rooms 2 and 3:\n</p>\n<pre>-------------------------- <b>H</b> ruuu luuu r*\n|&gt;......^^^^^^^^^^^^^^^^.| <b>G</b> rrrr uuul uuur r*\n|.......----------------.| <b>F</b> rrrr rruu uluu urrr*\n-------.------         |.| <b>I</b> lllu uulu uurr rr*\n |...........|         |.| <b>C</b> uuuu rrru uulu uurr rrr*\n |.A.B.....E.|         |.| <b>K</b> rruu urrr uuul uuur rrrr r*\n--------.----|         |.| <b>L</b> luuu rrru uulu uurr rrrr r*\n|.F.G..H...I.|         |.| <b>M</b> lllu uurr ruuu luuu rrrr rrrr*\n|............|         |.| <b>N</b> llll luuu urrr uuul uuur rrrr rrrr*\n-----.--------   ------|.|\n |.K.@L.M...|  --|.....|.|\n |...C....N.|  |.+.....|.|\n |.O..D..Q.--  |-|.....|.|\n-------.----   |.+.....+.|\n|.J.P.R..|     |-|.....|--\n|........|     |.+.....|\n|...------     --|.....|\n-----            -------\n</pre>\n<p>Now there are only a few boulders left with a lot of space. The boulders in room 4 can be cleared directly, the boulders in room 1 and 3 should first be moved through room 3 and 4 respectively:\n</p>\n<pre>-------------------------- <b>R</b> ruuu ullu uurr ruuu luuu rrrr rrrr rr*\n|&gt;.............@.^^^^^^^.| <b>P</b> rrru uuul luuu rrru uulu uurr rrrr rrrr r*\n|.......----------------.| <b>J</b> rrrr ruuu ullu uurr ruuu luuu rrrr rrrr rrrr*\n-------.------         |.| <b>D</b> rddd llll lurr rrru uuul luuu rrru uulu uurr rrrr rrrr rrr*\n |...........|         |.| <b>B</b> rrrd ddll lddd uuuu rrru uulu uurr rrrr rrrr rrrr*\n |.A.B.....E.|         |.| <b>A</b> rrrr rddd llld dduu uurr ruuu luuu rrrr rrrr rrrr rrr*\n--------.----|         |.| <b>E</b> llld ddll lddd uuuu rrru uulu uurr rrrr rrrr rrrr rr*     \n|............|         |.|\n|............|         |.|\n-----.--------   ------|.|\n |..........|  --|.....|.|\n |..........|  |.+.....|.|\n |.O..D..Q.--  |-|.....|.|\n-------.----   |.+.....+.|\n|.J.P.R..|     |-|.....|--\n|........|     |.+.....|\n|...------     --|.....|\n-----            -------\n</pre>\n<p>In the large room behind the door is a <a href=\"/wiki/Treasure_zoo\" class=\"mw-redirect\" title=\"Treasure zoo\">treasure zoo</a>. Behind one of the three doors in the zoo is a square with the prize item atop a burnt \"<a href=\"/wiki/Elbereth\" title=\"Elbereth\">Elbereth</a>\" and a cursed <a href=\"/wiki/Scroll_of_scare_monster\" title=\"Scroll of scare monster\">scroll of scare monster</a>. Also remember to check under the boulders <b>O</b> and <b>Q</b> for possible usable items.\n</p>\n<pre>--------------------------\n|&gt;.......................|\n|.......----------------.|\n-------.------         |.|\n |...........|         |.|\n |...........|         |.|\n--------.----|         |.|\n|............|         |.|\n|............|         |.|\n-----.--------   ------|.|\n |..........|  --|.....|.|\n |..........|  |.+.....|.|\n |.O.....Q.--  |-|.....|.|\n-------.----   |.+.....+@|\n|........|     |-|.....|--\n|........|     |.+.....|\n|...------     --|.....|\n-----            -------\n</pre>\n<h2><span class=\"mw-headline\" id=\"History\">History</span></h2>\n<p>The level originates from Level 23 of the 1984 Thinking Rabbit game <i>Sokoban 2</i>, with the storage area beyond the holes added on.\n</p><p>In <a href=\"/wiki/NetHack_3.4.3\" title=\"NetHack 3.4.3\">NetHack 3.4.3</a> and earlier versions, including some <a href=\"/wiki/Variant\" title=\"Variant\">variants</a> based on these versions, the prize is always a bag of holding, with no cursed scroll of scare monster underneath it. As of <a href=\"/wiki/NetHack_3.6.0\" title=\"NetHack 3.6.0\">NetHack 3.6.0</a>, the cursed scroll of scare monster is added, and there is a 50% chance for the prize to be either a bag of holding or an amulet of reflection.\n</p>\n<h2><span class=\"mw-headline\" id=\"Variants\">Variants</span></h2>\n<h3><span class=\"mw-headline\" id=\"UnNetHack\">UnNetHack</span></h3>\n<p>In <a href=\"/wiki/UnNetHack\" title=\"UnNetHack\">UnNetHack</a>, this level may be flipped horizontally or vertically like all Sokoban levels. The prize is also changed to a choice from one of the following: a bag of holding, a <a href=\"/wiki/Cloak\" title=\"Cloak\">cloak</a> (of magic resistance or <a href=\"/wiki/Cloak_of_displacement\" title=\"Cloak of displacement\">displacement</a>) and an <a href=\"/wiki/Amulet\" title=\"Amulet\">amulet</a> (of reflection, <a href=\"/wiki/Amulet_of_life_saving\" title=\"Amulet of life saving\">life saving</a> or <a href=\"/wiki/Amulet_of_ESP\" title=\"Amulet of ESP\">ESP</a>).\n</p>\n<h3><span class=\"mw-headline\" id=\"EvilHack\">EvilHack</span></h3>\n<p>In <a href=\"/wiki/EvilHack\" title=\"EvilHack\">EvilHack</a>, the choice is between a prize tool (a bag of holding or a <a href=\"/wiki/Magic_marker\" title=\"Magic marker\">magic marker</a>), a prize armor (a <a href=\"/wiki/Helm_of_speed\" title=\"Helm of speed\">helm of speed</a> or a pair of <a href=\"/wiki/Gauntlets_of_protection\" title=\"Gauntlets of protection\">gauntlets of protection</a>), or a prize amulet (an amulet of reflection or <a href=\"/wiki/Amulet_of_magic_resistance\" title=\"Amulet of magic resistance\">magic resistance</a>). As soon as one of the doors is opened, the others will seal: some form of <a href=\"/wiki/Object_detection\" class=\"mw-redirect\" title=\"Object detection\">object detection</a> is recommended if you are aiming for a specific reward.\n</p>\n<h3><span id=\"Hack'EM\"></span><span class=\"mw-headline\" id=\"Hack.27EM\">Hack'EM</span></h3>\n<p>In <a href=\"/wiki/Hack%27EM\" title=\"Hack&#39;EM\">Hack'EM</a>, this level is named <b>\"Left Holding the Bag\"</b>. Like EvilHack, the choice is between a prize tool (a bag of holding or a magic marker), a prize armor (a helm of speed or a pair of gauntlets of protection), or a prize amulet (an amulet of reflection or magic resistance). As soon as one of the doors is opened, the others will seal: as in EvilHack, a form of detecting the prizes is recommended if you are aiming for a specific reward.\n</p>\n<div style=\"display:none; right:10px; padding-bottom: 17px\" class=\"metadata topicon nopopups\"><div style=\"margin-top: -10px\"><a href=\"/wiki/NetHackWiki:Next_version\" title=\"This article has been updated to reflect NetHack 3.6.7. Click here for more information.\"><img alt=\"This article has been updated to reflect NetHack 3.6.7. Click here for more information.\" src=\"/images/f/f7/Nh367-icon.png\" width=\"32\" height=\"32\" /></a></div></div>\n\n<!-- \nNewPP limit report\nCached time: 20240926190520\nCache expiry: 604800\nDynamic content: false\nCPU time usage: 0.014 seconds\nReal time usage: 0.017 seconds\nPreprocessor visited node count: 103/1000000\nPreprocessor generated node count: 491/1000000\nPost‐expand include size: 1706/2097152 bytes\nTemplate argument size: 478/2097152 bytes\nHighest expansion depth: 8/40\nExpensive parser function count: 0/100\nUnstrip recursion depth: 0/20\nUnstrip post‐expand size: 0/5000000 bytes\n-->\n<!--\nTransclusion expansion time report (%,ms,calls,template)\n100.00%    6.467      1 -total\n 77.46%    5.009      1 Template:Nethack-367\n 60.03%    3.882      1 Template:Version_icon\n 33.14%    2.143      1 Template:Top_icon\n 19.39%    1.254      1 Template:Upcoming\n-->\n\n<!-- Saved in parser cache with key wikihackdb:pcache:idhash:4571-0!canonical and timestamp 20240926190520 and revision id 152138\n -->\n</div></div>\t\t\t\t\t<div class=\"printfooter\">\n\t\t\t\t\t\tRetrieved from \"<a dir=\"ltr\" href=\"https://nethackwiki.com/index.php?title=Sokoban_Level_4a&amp;oldid=152138\">https://nethackwiki.com/index.php?title=Sokoban_Level_4a&amp;oldid=152138</a>\"\t\t\t\t\t</div>\n\t\t\t\t<div id=\"catlinks\" class=\"catlinks\" data-mw=\"interface\"><div id=\"mw-normal-catlinks\" class=\"mw-normal-catlinks\"><a href=\"/wiki/Special:Categories\" title=\"Special:Categories\">Categories</a>: <ul><li><a href=\"/wiki/Category:Upcoming\" title=\"Category:Upcoming\">Upcoming</a></li><li><a href=\"/wiki/Category:Nethack-367_articles\" title=\"Category:Nethack-367 articles\">Nethack-367 articles</a></li><li><a href=\"/wiki/Category:Sokoban\" title=\"Category:Sokoban\">Sokoban</a></li></ul></div></div>\t\t\t\t<div class=\"visualClear\"></div>\n\t\t\t\t\t\t\t</div>\n\t\t</div>\n\t\t<div id=\"mw-navigation\">\n\t\t\t<h2>Navigation menu</h2>\n\t\t\t<div id=\"mw-head\">\n\t\t\t\t\t\t\t\t\t<div id=\"p-personal\" role=\"navigation\" class=\"\" aria-labelledby=\"p-personal-label\">\n\t\t\t\t\t\t<h3 id=\"p-personal-label\">Personal tools</h3>\n\t\t\t\t\t\t<ul>\n\t\t\t\t\t\t\t<li id=\"pt-createaccount\"><a href=\"/index.php?title=Special:CreateAccount&amp;returnto=Sokoban+Level+4a\" title=\"You are encouraged to create an account and log in; however, it is not mandatory\">Create account</a></li><li id=\"pt-login\"><a href=\"/index.php?title=Special:UserLogin&amp;returnto=Sokoban+Level+4a\" title=\"You are encouraged to log in; however, it is not mandatory [o]\" accesskey=\"o\">Log in</a></li>\t\t\t\t\t\t</ul>\n\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div id=\"left-navigation\">\n\t\t\t\t\t\t\t\t\t\t<div id=\"p-namespaces\" role=\"navigation\" class=\"vectorTabs\" aria-labelledby=\"p-namespaces-label\">\n\t\t\t\t\t\t<h3 id=\"p-namespaces-label\">Namespaces</h3>\n\t\t\t\t\t\t<ul>\n\t\t\t\t\t\t\t<li id=\"ca-nstab-main\" class=\"selected\"><span><a href=\"/wiki/Sokoban_Level_4a\" title=\"View the content page [c]\" accesskey=\"c\">Page</a></span></li><li id=\"ca-talk\"><span><a href=\"/wiki/Talk:Sokoban_Level_4a\" rel=\"discussion\" title=\"Discussion about the content page [t]\" accesskey=\"t\">Discussion</a></span></li>\t\t\t\t\t\t</ul>\n\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div id=\"p-variants\" role=\"navigation\" class=\"vectorMenu emptyPortlet\" aria-labelledby=\"p-variants-label\">\n\t\t\t\t\t\t\t\t\t\t\t\t<input type=\"checkbox\" class=\"vectorMenuCheckbox\" aria-labelledby=\"p-variants-label\" />\n\t\t\t\t\t\t<h3 id=\"p-variants-label\">\n\t\t\t\t\t\t\t<span>Variants</span>\n\t\t\t\t\t\t</h3>\n\t\t\t\t\t\t<div class=\"menu\">\n\t\t\t\t\t\t\t<ul>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t<div id=\"right-navigation\">\n\t\t\t\t\t\t\t\t\t\t<div id=\"p-views\" role=\"navigation\" class=\"vectorTabs\" aria-labelledby=\"p-views-label\">\n\t\t\t\t\t\t<h3 id=\"p-views-label\">Views</h3>\n\t\t\t\t\t\t<ul>\n\t\t\t\t\t\t\t<li id=\"ca-view\" class=\"collapsible selected\"><span><a href=\"/wiki/Sokoban_Level_4a\">Read</a></span></li><li id=\"ca-viewsource\" class=\"collapsible\"><span><a href=\"/index.php?title=Sokoban_Level_4a&amp;action=edit\" title=\"This page is protected.&#10;You can view its source [e]\" accesskey=\"e\">View source</a></span></li><li id=\"ca-history\" class=\"collapsible\"><span><a href=\"/index.php?title=Sokoban_Level_4a&amp;action=history\" title=\"Past revisions of this page [h]\" accesskey=\"h\">View history</a></span></li>\t\t\t\t\t\t</ul>\n\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div id=\"p-cactions\" role=\"navigation\" class=\"vectorMenu emptyPortlet\" aria-labelledby=\"p-cactions-label\">\n\t\t\t\t\t\t<input type=\"checkbox\" class=\"vectorMenuCheckbox\" aria-labelledby=\"p-cactions-label\" />\n\t\t\t\t\t\t<h3 id=\"p-cactions-label\"><span>More</span></h3>\n\t\t\t\t\t\t<div class=\"menu\">\n\t\t\t\t\t\t\t<ul>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div id=\"p-search\" role=\"search\">\n\t\t\t\t\t\t<h3>\n\t\t\t\t\t\t\t<label for=\"searchInput\">Search</label>\n\t\t\t\t\t\t</h3>\n\t\t\t\t\t\t<form action=\"/index.php\" id=\"searchform\">\n\t\t\t\t\t\t\t<div id=\"simpleSearch\">\n\t\t\t\t\t\t\t\t<input type=\"search\" name=\"search\" placeholder=\"Search NetHackWiki\" title=\"Search NetHackWiki [f]\" accesskey=\"f\" id=\"searchInput\"/><input type=\"hidden\" value=\"Special:Search\" name=\"title\"/><input type=\"submit\" name=\"fulltext\" value=\"Search\" title=\"Search the pages for this text\" id=\"mw-searchButton\" class=\"searchButton mw-fallbackSearchButton\"/><input type=\"submit\" name=\"go\" value=\"Go\" title=\"Go to a page with this exact name if it exists\" id=\"searchButton\" class=\"searchButton\"/>\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</form>\n\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div id=\"mw-panel\">\n\t\t\t\t<div id=\"p-logo\" role=\"banner\"><a class=\"mw-wiki-logo\" href=\"/wiki/Main_Page\"  title=\"Visit the main page\"></a></div>\n\t\t\t\t\t\t<div class=\"portal\" role=\"navigation\" id=\"p-navigation\" aria-labelledby=\"p-navigation-label\">\n\t\t\t<h3 id=\"p-navigation-label\">Navigation</h3>\n\t\t\t<div class=\"body\">\n\t\t\t\t\t\t\t\t<ul>\n\t\t\t\t\t<li id=\"n-NetHack-Wiki\"><a href=\"/wiki/Main_Page\">NetHack Wiki</a></li><li id=\"n-Forum\"><a href=\"/wiki/Forum:Watercooler\">Forum</a></li><li id=\"n-portal\"><a href=\"/wiki/NetHackWiki:Community_Portal\" title=\"About the project, what you can do, where to find things\">Community portal</a></li><li id=\"n-recentchanges\"><a href=\"/wiki/Special:RecentChanges\" title=\"A list of recent changes in the wiki [r]\" accesskey=\"r\">Recent changes</a></li><li id=\"n-randompage\"><a href=\"/wiki/Special:Random\" title=\"Load a random page [x]\" accesskey=\"x\">Random page</a></li>\t\t\t\t</ul>\n\t\t\t\t\t\t\t</div>\n\t\t</div>\n\t\t\t<div class=\"portal\" role=\"navigation\" id=\"p-Popular_pages\" aria-labelledby=\"p-Popular_pages-label\">\n\t\t\t<h3 id=\"p-Popular_pages-label\">Popular pages</h3>\n\t\t\t<div class=\"body\">\n\t\t\t\t\t\t\t\t<ul>\n\t\t\t\t\t<li id=\"n-Dungeon-features\"><a href=\"/wiki/Dungeon_feature\">Dungeon features</a></li><li id=\"n-Monsters\"><a href=\"/wiki/Monster#Canonical_list_of_monsters\">Monsters</a></li><li id=\"n-In.2FExtrinsics\"><a href=\"/wiki/Property#Intrinsic_properties\">In/Extrinsics</a></li><li id=\"n-Items\"><a href=\"/wiki/Item\">Items</a></li><li id=\"n-Spells\"><a href=\"/wiki/Spellbook#List_of_spellbooks\">Spells</a></li><li id=\"n-Game-options\"><a href=\"/wiki/Options\">Game options</a></li><li id=\"n-Websites\"><a href=\"/wiki/Websites\">Websites</a></li>\t\t\t\t</ul>\n\t\t\t\t\t\t\t</div>\n\t\t</div>\n\t\t\t<div class=\"portal\" role=\"navigation\" id=\"p-contributing\" aria-labelledby=\"p-contributing-label\">\n\t\t\t<h3 id=\"p-contributing-label\">Contributing</h3>\n\t\t\t<div class=\"body\">\n\t\t\t\t\t\t\t\t<ul>\n\t\t\t\t\t<li id=\"n-Style-guide\"><a href=\"/wiki/NetHackWiki:Style_guide\">Style guide</a></li><li id=\"n-help\"><a href=\"/wiki/NetHackWiki:How_to_help\" title=\"The place to find out\">How to help</a></li><li id=\"n-Current-projects\"><a href=\"/wiki/NetHackWiki:Current_projects\">Current projects</a></li>\t\t\t\t</ul>\n\t\t\t\t\t\t\t</div>\n\t\t</div>\n\t\t\t<div class=\"portal\" role=\"navigation\" id=\"p-tb\" aria-labelledby=\"p-tb-label\">\n\t\t\t<h3 id=\"p-tb-label\">Tools</h3>\n\t\t\t<div class=\"body\">\n\t\t\t\t\t\t\t\t<ul>\n\t\t\t\t\t<li id=\"t-whatlinkshere\"><a href=\"/wiki/Special:WhatLinksHere/Sokoban_Level_4a\" title=\"A list of all wiki pages that link here [j]\" accesskey=\"j\">What links here</a></li><li id=\"t-recentchangeslinked\"><a href=\"/wiki/Special:RecentChangesLinked/Sokoban_Level_4a\" rel=\"nofollow\" title=\"Recent changes in pages linked from this page [k]\" accesskey=\"k\">Related changes</a></li><li id=\"t-specialpages\"><a href=\"/wiki/Special:SpecialPages\" title=\"A list of all special pages [q]\" accesskey=\"q\">Special pages</a></li><li id=\"t-print\"><a href=\"/index.php?title=Sokoban_Level_4a&amp;printable=yes\" rel=\"alternate\" title=\"Printable version of this page [p]\" accesskey=\"p\">Printable version</a></li><li id=\"t-permalink\"><a href=\"/index.php?title=Sokoban_Level_4a&amp;oldid=152138\" title=\"Permanent link to this revision of the page\">Permanent link</a></li><li id=\"t-info\"><a href=\"/index.php?title=Sokoban_Level_4a&amp;action=info\" title=\"More information about this page\">Page information</a></li>\t\t\t\t</ul>\n\t\t\t\t\t\t\t</div>\n\t\t</div>\n\t\t\t\t</div>\n\t\t</div>\n\t\t\t\t<div id=\"footer\" role=\"contentinfo\">\n\t\t\t\t\t\t<ul id=\"footer-info\">\n\t\t\t\t\t\t\t\t<li id=\"footer-info-lastmod\"> This page was last edited on 9 July 2023, at 20:26.</li>\n\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t<ul id=\"footer-places\">\n\t\t\t\t\t\t\t\t<li id=\"footer-places-about\"><a href=\"/wiki/NetHackWiki:About\" title=\"NetHackWiki:About\">About NetHackWiki</a></li>\n\t\t\t\t\t\t\t\t<li id=\"footer-places-disclaimer\"><a href=\"/wiki/NetHackWiki:General_disclaimer\" title=\"NetHackWiki:General disclaimer\">Disclaimers</a></li>\n\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t\t\t\t<ul id=\"footer-icons\" class=\"noprint\">\n\t\t\t\t\t\t\t\t\t\t<li id=\"footer-poweredbyico\">\n\t\t\t\t\t\t<a href=\"//www.mediawiki.org/\"><img src=\"/resources/assets/poweredby_mediawiki_88x31.png\" alt=\"Powered by MediaWiki\" srcset=\"/resources/assets/poweredby_mediawiki_132x47.png 1.5x, /resources/assets/poweredby_mediawiki_176x62.png 2x\" width=\"88\" height=\"31\"/></a>\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t<div style=\"clear: both;\"></div>\n\t\t</div>\n\t\t\n<script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({\"wgPageParseReport\":{\"limitreport\":{\"cputime\":\"0.014\",\"walltime\":\"0.017\",\"ppvisitednodes\":{\"value\":103,\"limit\":1000000},\"ppgeneratednodes\":{\"value\":491,\"limit\":1000000},\"postexpandincludesize\":{\"value\":1706,\"limit\":2097152},\"templateargumentsize\":{\"value\":478,\"limit\":2097152},\"expansiondepth\":{\"value\":8,\"limit\":40},\"expensivefunctioncount\":{\"value\":0,\"limit\":100},\"unstrip-depth\":{\"value\":0,\"limit\":20},\"unstrip-size\":{\"value\":0,\"limit\":5000000},\"timingprofile\":[\"100.00%    6.467      1 -total\",\" 77.46%    5.009      1 Template:Nethack-367\",\" 60.03%    3.882      1 Template:Version_icon\",\" 33.14%    2.143      1 Template:Top_icon\",\" 19.39%    1.254      1 Template:Upcoming\"]},\"cachereport\":{\"timestamp\":\"20240926190520\",\"ttl\":604800,\"transientcontent\":false}}});mw.config.set({\"wgBackendResponseTime\":58});});</script>\n\t</body>\n</html>\n","rawPage":"'''Sokoban Level 4a''' is one of two possible maps for the last level of [[Sokoban]] in ''[[NetHack]]'', and is among the various possible maps for that level in variants of ''NetHack''. Behind the holes is a [[treasure zoo]] with three doors - inside one of the doors is the branch prize, which has an equal chance of being a [[bag of holding]] or an [[amulet of reflection]]. There are 18 [[boulder]]s and 16 [[hole]]s, leaving 2 spare boulders.\n\n{{upcoming|NetHack 3.7.0|Both prizes are no longer equally likely for each floor. Instead, this version has a 75% chance for a bag of holding, and 4b has a 75% chance for an amulet of reflection. Also, the level may be vertically reflected.}}\n\n 0 boulder\n ^ hole\n @ starting position/downstairs\n < upstairs\n\n --------------------------\n |@......^^^^^^^^^^^^^^^^.|\n |.......----------------.|\n -------.------         |.|\n  |...........|         |.|\n  |.0.0.0.0.0.|         |.|\n --------.----|         |.|\n |...0.0..0.0.|         |.|\n |...0........|         |.|\n -----.--------   ------|.|\n  |..0.0.0...|  --|.....|.|\n  |.....0....|  |.+.....|.|\n  |.0.0...0.--  |-|.....|.|\n -------.----   |.+.....+.|\n |..0.....|     |-|.....|--\n |........|     |.+.....|\n |...------     --|.....|\n -----            -------\n\n== Strategy ==\nThe following solution solves the level without putting any boulders in an immobile position. You can [http://alt.org/nethack/trd/?file=http://alt.org/nethack/userdata/t/tjraux02/ttyrec/2011-06-07.05:00:46.ttyrec.bz2 watch this solution as a ttyrec video] or [https://youtu.be/no2C69Nk58Y a YouTube video]. Faster solutions which do not necessarily leave every boulder free might exist.\n\nAll boulders are replaced by letters so they can be referred to. Moving the boulders is shortened to '''r''' for right, '''l''' for left, '''u''' for up, '''d''' for down. An asterisk is used to denote the last move filled a hole (and thus removed the boulder from the game). So '''Nddrr*''' means move boulder '''N''' two times down and two times to the right into a hole.\n\nStore some boulders of the 3rd room in the 4th and make some way:\n -------------------------- '''K''' l\n |@......^^^^^^^^^^^^^^^^.| '''N''' rrr\n |.......----------------.| '''R''' rrr\n -------.------         |.| '''P''' rrdd dlll lur \n  |...........|         |.| '''F''' ll\n  |.A.B.C.D.E.|         |.| '''J''' rddd drrd ddll lllu\n --------.----|         |.|\n |...F.G..H.I.|         |.|\n |...J........|         |.|\n -----.--------   ------|.|\n  |..K.L.M...|  --|.....|.|\n  |.....N....|  |.+.....|.|\n  |.O.P...Q.--  |-|.....|.|\n -------.----   |.+.....+.|\n |..R.....|     |-|.....|--\n |........|     |.+.....|\n |...------     --|.....|\n -----            -------\n\nPush '''G''' and '''H''' out of the way so you can move some of the boulders of the 1st room to the 3rd and 4th room:\n -------------------------- '''G''' ll\n |>......^^^^^^^^^^^^^^^^.| '''H''' ll\n |.......----------------.| '''D''' lddd llld dddr\n -------.------         |.| '''C''' rddd llld dd\n  |...........|         |.|\n  |.A.B.C.D.E.|         |.|\n --------.----|         |.|\n |.F...G..H.I.|         |.|\n |............|         |.|\n -----.--------   ------|.|\n  |.K..L.M...|  --|.....|.|\n  |........N.|  |.+.....|.|\n  |.O.....Q.--  |-|.....|.|\n -------.----   |.+.....+.|\n |.J.P.R..|     |-|.....|--\n |.@......|     |.+.....|\n |...------     --|.....|\n -----            -------\n\nIt is also possible to push '''D''' into the 4th room under '''J''' and move '''C''' to where '''D''' is now if you want some more leeway to move boulders around. Now everything is set up to start filling holes. Cleanup most of rooms 2 and 3:\n -------------------------- '''H''' ruuu luuu r*\n |>......^^^^^^^^^^^^^^^^.| '''G''' rrrr uuul uuur r*\n |.......----------------.| '''F''' rrrr rruu uluu urrr*\n -------.------         |.| '''I''' lllu uulu uurr rr*\n  |...........|         |.| '''C''' uuuu rrru uulu uurr rrr*\n  |.A.B.....E.|         |.| '''K''' rruu urrr uuul uuur rrrr r*\n --------.----|         |.| '''L''' luuu rrru uulu uurr rrrr r*\n |.F.G..H...I.|         |.| '''M''' lllu uurr ruuu luuu rrrr rrrr*\n |............|         |.| '''N''' llll luuu urrr uuul uuur rrrr rrrr*\n -----.--------   ------|.|\n  |.K.@L.M...|  --|.....|.|\n  |...C....N.|  |.+.....|.|\n  |.O..D..Q.--  |-|.....|.|\n -------.----   |.+.....+.|\n |.J.P.R..|     |-|.....|--\n |........|     |.+.....|\n |...------     --|.....|\n -----            -------\n\nNow there are only a few boulders left with a lot of space. The boulders in room 4 can be cleared directly, the boulders in room 1 and 3 should first be moved through room 3 and 4 respectively:\n -------------------------- '''R''' ruuu ullu uurr ruuu luuu rrrr rrrr rr*\n |>.............@.^^^^^^^.| '''P''' rrru uuul luuu rrru uulu uurr rrrr rrrr r*\n |.......----------------.| '''J''' rrrr ruuu ullu uurr ruuu luuu rrrr rrrr rrrr*\n -------.------         |.| '''D''' rddd llll lurr rrru uuul luuu rrru uulu uurr rrrr rrrr rrr*\n  |...........|         |.| '''B''' rrrd ddll lddd uuuu rrru uulu uurr rrrr rrrr rrrr*\n  |.A.B.....E.|         |.| '''A''' rrrr rddd llld dduu uurr ruuu luuu rrrr rrrr rrrr rrr*\n --------.----|         |.| '''E''' llld ddll lddd uuuu rrru uulu uurr rrrr rrrr rrrr rr*     \n |............|         |.|\n |............|         |.|\n -----.--------   ------|.|\n  |..........|  --|.....|.|\n  |..........|  |.+.....|.|\n  |.O..D..Q.--  |-|.....|.|\n -------.----   |.+.....+.|\n |.J.P.R..|     |-|.....|--\n |........|     |.+.....|\n |...------     --|.....|\n -----            -------\n\nIn the large room behind the door is a [[treasure zoo]]. Behind one of the three doors in the zoo is a square with the prize item atop a burnt \"[[Elbereth]]\" and a cursed [[scroll of scare monster]]. Also remember to check under the boulders '''O''' and '''Q''' for possible usable items.\n --------------------------\n |>.......................|\n |.......----------------.|\n -------.------         |.|\n  |...........|         |.|\n  |...........|         |.|\n --------.----|         |.|\n |............|         |.|\n |............|         |.|\n -----.--------   ------|.|\n  |..........|  --|.....|.|\n  |..........|  |.+.....|.|\n  |.O.....Q.--  |-|.....|.|\n -------.----   |.+.....+@|\n |........|     |-|.....|--\n |........|     |.+.....|\n |...------     --|.....|\n -----            -------\n\n==History==\nThe level originates from Level 23 of the 1984 Thinking Rabbit game ''Sokoban 2'', with the storage area beyond the holes added on.\n\nIn [[NetHack 3.4.3]] and earlier versions, including some [[variant]]s based on these versions, the prize is always a bag of holding, with no cursed scroll of scare monster underneath it. As of [[NetHack 3.6.0]], the cursed scroll of scare monster is added, and there is a 50% chance for the prize to be either a bag of holding or an amulet of reflection.\n\n==Variants==\n===UnNetHack===\nIn [[UnNetHack]], this level may be flipped horizontally or vertically like all Sokoban levels. The prize is also changed to a choice from one of the following: a bag of holding, a [[cloak]] (of magic resistance or [[cloak of displacement|displacement]]) and an [[amulet]] (of reflection, [[amulet of life saving|life saving]] or [[amulet of ESP|ESP]]).\n\n===EvilHack===\nIn [[EvilHack]], the choice is between a prize tool (a bag of holding or a [[magic marker]]), a prize armor (a [[helm of speed]] or a pair of [[gauntlets of protection]]), or a prize amulet (an amulet of reflection or [[amulet of magic resistance|magic resistance]]). As soon as one of the doors is opened, the others will seal: some form of [[object detection]] is recommended if you are aiming for a specific reward.\n\n===Hack'EM===\nIn [[Hack'EM]], this level is named '''\"Left Holding the Bag\"'''. Like EvilHack, the choice is between a prize tool (a bag of holding or a magic marker), a prize armor (a helm of speed or a pair of gauntlets of protection), or a prize amulet (an amulet of reflection or magic resistance). As soon as one of the doors is opened, the others will seal: as in EvilHack, a form of detecting the prizes is recommended if you are aiming for a specific reward.\n{{nethack-367}}\n[[Category:Sokoban|4a]]"}