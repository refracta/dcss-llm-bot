{"title":"Segfault","url":"https://nethackwiki.com/wiki/Segfault","type":"markdown","data":"[![Wikipedia](/images/thumb/f/f8/Fair-use-wikipedia-logo.png/50px-Fair-use-wikipedia-logo.png)](/wiki/File:Fair-use-wikipedia-logo.png \"Wikipedia\")\n\n[Wikipedia](http://en.wikipedia.org/wiki/Main_Page \"wikipedia:Main Page\") has an article about:\n\n***[segmentation fault](http://en.wikipedia.org/wiki/segmentation_fault \"wikipedia:segmentation fault\")***\n\n*[NetHack](/wiki/NetHack \"NetHack\")* **segfaults** in certain rare situations where a function expects the game to be in a state that it is not; this always indicates a bug in the code. The most common reason is the nonexistence of something that a function assumes will exist.\n\n## Behaviour\n\nDepending on the operating system used, the behavior can be slightly different; on Windows, Nethack closes and often displays a message saying \"NETHACK.EXE has stopped working\"; on Linux, you normally get a \"Segmentation fault\" error message printed at whatever location the cursor happens to be onscreen (followed by a prompt); and most public servers will handle the segmentation fault internally and just send you back to the launch screen (eu.un.nethack.nu additionally sends a message to its IRC channel when this happens).\n\nA segfault will leave files on disk exactly as-is, without any attempt to save the game. In most cases (i.e. any codebase that is not derived from [NitroHack](/wiki/NitroHack \"NitroHack\"), with the INSURANCE compile-time configuration option set and the in-game [checkpoint](/wiki/Options#checkpoint \"Options\") option set), the game will be left in a state where it needs [recovery](/wiki/Recover \"Recover\"), and after recovery, will return the game to the state at which it was in when the player entered their current dungeon level, or saved (whichever is more recent).\n\nIn the case where the game can detect an impossible state before it happens, you get a [panic](/wiki/Panic \"Panic\") instead. This has clearer messages than a segfault, and often recovers in a different way, because the game has a chance to handle it. (For example, sometimes you will get an \"emergency save\" file created.)\n\n## Core dump\n\n[![Unix manual pages](/images/b/bf/Man_icon.png)](/wiki/File:Man_icon.png \"Unix manual pages\")\n\n[Unix](/wiki/Unix \"Unix\") manual for **ulimit:**\n\n- [FreeBSD](https://www.freebsd.org/cgi/man.cgi?query=ulimit)\n- [NetBSD](https://man.netbsd.org/cgi-bin/man-cgi?ulimit)\n- [OpenBSD](https://www.openbsd.org/cgi-bin/man.cgi?query=ulimit)\n- [Linux](https://linux.die.net/man/1/ulimit)\n\nIf you are working on developing a NetHack [variant](/wiki/Variant \"Variant\") (or NetHack itself!) on Linux or Mac OS X, you can configure your terminal so that a segfault leads to a useful \"core dump\" file that can be opened in a debugger to allow you to know what went wrong. The command to use depends on the operating system and shell you are using. For Linux with `bash`, you can use this command before running the program:\n\n```\nulimit -Sc unlimited\n```\n\nA user has suggested improving this page or section as follows:\n\n*\"commands for other shells and operating systems\"*\n\nNote that many operating systems will only save one core dump (per program, or per working directory) at a time, so you will need to delete the old one before you can get new ones.\n\n## Variants\n\nIn [DynaHack](/wiki/DynaHack \"DynaHack\") and [NetHack 4](/wiki/NetHack_4 \"NetHack 4\") (and theoretically in [NitroHack](/wiki/NitroHack \"NitroHack\"), although the mechanism normally fails in practice), the game will normally be able to recover from a segfault automatically (returning to the start of the turn in DynaHack, or the exact point of the segfault in NetHack 4), although if the bug that caused it has not been fixed in the meantime, the game will normally segfault in the exact same way again.\n","html":"<!DOCTYPE html>\n<html class=\"client-nojs\" lang=\"en\" dir=\"ltr\">\n<head>\n<meta charset=\"UTF-8\"/>\n<title>Segfault - NetHack Wiki</title>\n<script>document.documentElement.className = document.documentElement.className.replace( /(^|\\s)client-nojs(\\s|$)/, \"$1client-js$2\" );</script>\n<script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({\"wgCanonicalNamespace\":\"\",\"wgCanonicalSpecialPageName\":false,\"wgNamespaceNumber\":0,\"wgPageName\":\"Segfault\",\"wgTitle\":\"Segfault\",\"wgCurRevisionId\":148527,\"wgRevisionId\":148527,\"wgArticleId\":23959,\"wgIsArticle\":true,\"wgIsRedirect\":false,\"wgAction\":\"view\",\"wgUserName\":null,\"wgUserGroups\":[\"*\"],\"wgCategories\":[\"Todo\",\"Bugs\"],\"wgBreakFrames\":false,\"wgPageContentLanguage\":\"en\",\"wgPageContentModel\":\"wikitext\",\"wgSeparatorTransformTable\":[\"\",\"\"],\"wgDigitTransformTable\":[\"\",\"\"],\"wgDefaultDateFormat\":\"dmy\",\"wgMonthNames\":[\"\",\"January\",\"February\",\"March\",\"April\",\"May\",\"June\",\"July\",\"August\",\"September\",\"October\",\"November\",\"December\"],\"wgMonthNamesShort\":[\"\",\"Jan\",\"Feb\",\"Mar\",\"Apr\",\"May\",\"Jun\",\"Jul\",\"Aug\",\"Sep\",\"Oct\",\"Nov\",\"Dec\"],\"wgRelevantPageName\":\"Segfault\",\"wgRelevantArticleId\":23959,\"wgRequestId\":\"7ed79f3e8dd4d4fd9d921ed9\",\"wgCSPNonce\":false,\"wgIsProbablyEditable\":false,\"wgRelevantPageIsProbablyEditable\":false,\"wgRestrictionEdit\":[],\"wgRestrictionMove\":[],\"wgWikiEditorEnabledModules\":[],\"wgCategoryTreePageCategoryOptions\":\"{\\\"mode\\\":0,\\\"hideprefix\\\":20,\\\"showcount\\\":true,\\\"namespaces\\\":false}\"});mw.loader.state({\"site.styles\":\"ready\",\"noscript\":\"ready\",\"user.styles\":\"ready\",\"user\":\"ready\",\"user.options\":\"ready\",\"user.tokens\":\"loading\",\"mediawiki.legacy.shared\":\"ready\",\"mediawiki.legacy.commonPrint\":\"ready\",\"mediawiki.skinning.interface\":\"ready\",\"skins.vector.styles\":\"ready\"});mw.loader.implement(\"user.tokens@0tffind\",function($,jQuery,require,module){/*@nomin*/mw.user.tokens.set({\"editToken\":\"+\\\\\",\"patrolToken\":\"+\\\\\",\"watchToken\":\"+\\\\\",\"csrfToken\":\"+\\\\\"});\n});RLPAGEMODULES=[\"site\",\"mediawiki.page.startup\",\"mediawiki.user\",\"mediawiki.page.ready\",\"mediawiki.searchSuggest\",\"skins.vector.js\"];mw.loader.load(RLPAGEMODULES);});</script>\n<link rel=\"stylesheet\" href=\"/load.php?debug=false&amp;lang=en&amp;modules=mediawiki.legacy.commonPrint%2Cshared%7Cmediawiki.skinning.interface%7Cskins.vector.styles&amp;only=styles&amp;skin=vector\"/>\n<script async=\"\" src=\"/load.php?debug=false&amp;lang=en&amp;modules=startup&amp;only=scripts&amp;skin=vector\"></script>\n<meta name=\"ResourceLoaderDynamicStyles\" content=\"\"/>\n<link rel=\"stylesheet\" href=\"/load.php?debug=false&amp;lang=en&amp;modules=site.styles&amp;only=styles&amp;skin=vector\"/>\n<meta name=\"generator\" content=\"MediaWiki 1.32.5\"/>\n<meta name=\"description\" content=\"NetHack segfaults in certain rare situations where a function expects the game to be in a state that it is not; this always indicates a bug in the code. The most common reason is the nonexistence of something that a function assumes will exist.\"/>\n<link rel=\"image_src\" href=\"/images/6/65/Nethackwiki-logo.png\"/>\n<link rel=\"shortcut icon\" href=\"/images/6/64/Favicon.ico\"/>\n<link rel=\"search\" type=\"application/opensearchdescription+xml\" href=\"/opensearch_desc.php\" title=\"NetHackWiki\"/>\n<link rel=\"EditURI\" type=\"application/rsd+xml\" href=\"https://nethackwiki.com/api.php?action=rsd\"/>\n<link rel=\"canonical\" href=\"/wiki/Segfault\"/>\n<!--[if lt IE 9]><script src=\"/load.php?debug=false&amp;lang=en&amp;modules=html5shiv&amp;only=scripts&amp;skin=vector&amp;sync=1\"></script><![endif]-->\n</head>\n<body class=\"mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Segfault rootpage-Segfault skin-vector action-view\">\t\t<div id=\"mw-page-base\" class=\"noprint\"></div>\n\t\t<div id=\"mw-head-base\" class=\"noprint\"></div>\n\t\t<div id=\"content\" class=\"mw-body\" role=\"main\">\n\t\t\t<a id=\"top\"></a>\n\t\t\t<div class=\"mw-indicators mw-body-content\">\n</div>\n<h1 id=\"firstHeading\" class=\"firstHeading\" lang=\"en\">Segfault</h1>\t\t\t<div id=\"bodyContent\" class=\"mw-body-content\">\n\t\t\t\t<div id=\"siteSub\" class=\"noprint\">From NetHackWiki</div>\t\t\t\t<div id=\"contentSub\"></div>\n\t\t\t\t<div id=\"jump-to-nav\"></div>\t\t\t\t<a class=\"mw-jump-link\" href=\"#mw-head\">Jump to navigation</a>\n\t\t\t\t<a class=\"mw-jump-link\" href=\"#p-search\">Jump to search</a>\n\t\t\t\t<div id=\"mw-content-text\" lang=\"en\" dir=\"ltr\" class=\"mw-content-ltr\"><div class=\"mw-parser-output\"><div class=\"noprint sidebox\">\n<div style=\"float: left;\"><div class=\"floatnone\"><a href=\"/wiki/File:Fair-use-wikipedia-logo.png\" class=\"image\" title=\"Wikipedia\"><img alt=\"Wikipedia\" src=\"/images/thumb/f/f8/Fair-use-wikipedia-logo.png/50px-Fair-use-wikipedia-logo.png\" width=\"50\" height=\"50\" srcset=\"/images/f/f8/Fair-use-wikipedia-logo.png 1.5x\" /></a></div></div>\n<div style=\"margin-left: 60px;\"><a href=\"http://en.wikipedia.org/wiki/Main_Page\" class=\"extiw\" title=\"wikipedia:Main Page\">Wikipedia</a> has an article about:\n<div style=\"margin-left: 10px;\"><i><b><a href=\"http://en.wikipedia.org/wiki/segmentation_fault\" class=\"extiw\" title=\"wikipedia:segmentation fault\">segmentation fault</a></b></i></div>\n</div>\n</div>\n<p><i><a href=\"/wiki/NetHack\" title=\"NetHack\">NetHack</a></i> <b>segfaults</b> in certain rare situations where a function expects the game to be in a state that it is not; this always indicates a bug in the code. The most common reason is the nonexistence of something that a function assumes will exist.\n</p>\n<h2><span class=\"mw-headline\" id=\"Behaviour\">Behaviour</span></h2>\n<p>Depending on the operating system used, the behavior can be slightly different; on Windows, Nethack closes and often displays a message saying \"NETHACK.EXE has stopped working\"; on Linux, you normally get a \"Segmentation fault\" error message printed at whatever location the cursor happens to be onscreen (followed by a prompt); and most public servers will handle the segmentation fault internally and just send you back to the launch screen (eu.un.nethack.nu additionally sends a message to its IRC channel when this happens).\n</p><p>A segfault will leave files on disk exactly as-is, without any attempt to save the game. In most cases (i.e. any codebase that is not derived from <a href=\"/wiki/NitroHack\" title=\"NitroHack\">NitroHack</a>, with the INSURANCE compile-time configuration option set and the in-game <a href=\"/wiki/Options#checkpoint\" title=\"Options\">checkpoint</a> option set), the game will be left in a state where it needs <a href=\"/wiki/Recover\" title=\"Recover\">recovery</a>, and after recovery, will return the game to the state at which it was in when the player entered their current dungeon level, or saved (whichever is more recent).\n</p><p>In the case where the game can detect an impossible state before it happens, you get a <a href=\"/wiki/Panic\" title=\"Panic\">panic</a> instead. This has clearer messages than a segfault, and often recovers in a different way, because the game has a chance to handle it. (For example, sometimes you will get an \"emergency save\" file created.)\n</p>\n<h2><span class=\"mw-headline\" id=\"Core_dump\">Core dump</span></h2>\n<div class=\"noprint sidebox\" style=\"clear: right; border: solid #aaa 1px; margin: 0 0 1em 1em; font-size: 90%; background: #f9f9f9; width: 250px; padding: 4px; spacing: 0px; text-align: left; float: right;\">\n<div style=\"float: left;\"><div class=\"floatnone\"><a href=\"/wiki/File:Man_icon.png\" class=\"image\" title=\"Unix manual pages\"><img alt=\"Unix manual pages\" src=\"/images/b/bf/Man_icon.png\" width=\"50\" height=\"50\" /></a></div></div>\n<div style=\"margin-left: 60px;\"><a href=\"/wiki/Unix\" title=\"Unix\">Unix</a> manual for <b>ulimit:</b>\n<ul><li><a class=\"external text\" href=\"https://www.freebsd.org/cgi/man.cgi?query=ulimit\">FreeBSD</a></li>\n<li><a class=\"external text\" href=\"https://man.netbsd.org/cgi-bin/man-cgi?ulimit\">NetBSD</a></li>\n<li><a class=\"external text\" href=\"https://www.openbsd.org/cgi-bin/man.cgi?query=ulimit\">OpenBSD</a></li>\n<li><a class=\"external text\" href=\"https://linux.die.net/man/1/ulimit\">Linux</a></li></ul>\n</div>\n</div>\n<p>If you are working on developing a NetHack <a href=\"/wiki/Variant\" title=\"Variant\">variant</a> (or NetHack itself!) on Linux or Mac OS X, you can configure your terminal so that a segfault leads to a useful \"core dump\" file that can be opened in a debugger to allow you to know what went wrong. The command to use depends on the operating system and shell you are using. For Linux with <tt>bash</tt>, you can use this command before running the program:\n</p>\n<pre>ulimit -Sc unlimited\n</pre>\n<div class=\"todo\">\n<p>A user has suggested improving this page or section as follows:\n</p><p><i>\"commands for other shells and operating systems\"</i>\n</p>\n</div>\n<p>Note that many operating systems will only save one core dump (per program, or per working directory) at a time, so you will need to delete the old one before you can get new ones.\n</p>\n<h2><span class=\"mw-headline\" id=\"Variants\">Variants</span></h2>\n<p>In <a href=\"/wiki/DynaHack\" title=\"DynaHack\">DynaHack</a> and <a href=\"/wiki/NetHack_4\" title=\"NetHack 4\">NetHack 4</a> (and theoretically in <a href=\"/wiki/NitroHack\" title=\"NitroHack\">NitroHack</a>, although the mechanism normally fails in practice), the game will normally be able to recover from a segfault automatically (returning to the start of the turn in DynaHack, or the exact point of the segfault in NetHack 4), although if the bug that caused it has not been fixed in the meantime, the game will normally segfault in the exact same way again.\n</p>\n<!-- \nNewPP limit report\nCached time: 20240926190320\nCache expiry: 604800\nDynamic content: false\nCPU time usage: 0.012 seconds\nReal time usage: 0.029 seconds\nPreprocessor visited node count: 66/1000000\nPreprocessor generated node count: 359/1000000\nPost‐expand include size: 1400/2097152 bytes\nTemplate argument size: 255/2097152 bytes\nHighest expansion depth: 4/40\nExpensive parser function count: 0/100\nUnstrip recursion depth: 0/20\nUnstrip post‐expand size: 0/5000000 bytes\n-->\n<!--\nTransclusion expansion time report (%,ms,calls,template)\n100.00%   12.823      1 -total\n 45.54%    5.840      1 Template:Wikipedia\n 43.99%    5.641      1 Template:Man\n 29.32%    3.760      1 Template:Generic_project_link\n  9.04%    1.159      1 Template:Todo\n-->\n\n<!-- Saved in parser cache with key wikihackdb:pcache:idhash:23959-0!canonical and timestamp 20240926190320 and revision id 148527\n -->\n</div></div>\t\t\t\t\t<div class=\"printfooter\">\n\t\t\t\t\t\tRetrieved from \"<a dir=\"ltr\" href=\"https://nethackwiki.com/index.php?title=Segfault&amp;oldid=148527\">https://nethackwiki.com/index.php?title=Segfault&amp;oldid=148527</a>\"\t\t\t\t\t</div>\n\t\t\t\t<div id=\"catlinks\" class=\"catlinks\" data-mw=\"interface\"><div id=\"mw-normal-catlinks\" class=\"mw-normal-catlinks\"><a href=\"/wiki/Special:Categories\" title=\"Special:Categories\">Categories</a>: <ul><li><a href=\"/wiki/Category:Todo\" title=\"Category:Todo\">Todo</a></li><li><a href=\"/wiki/Category:Bugs\" title=\"Category:Bugs\">Bugs</a></li></ul></div></div>\t\t\t\t<div class=\"visualClear\"></div>\n\t\t\t\t\t\t\t</div>\n\t\t</div>\n\t\t<div id=\"mw-navigation\">\n\t\t\t<h2>Navigation menu</h2>\n\t\t\t<div id=\"mw-head\">\n\t\t\t\t\t\t\t\t\t<div id=\"p-personal\" role=\"navigation\" class=\"\" aria-labelledby=\"p-personal-label\">\n\t\t\t\t\t\t<h3 id=\"p-personal-label\">Personal tools</h3>\n\t\t\t\t\t\t<ul>\n\t\t\t\t\t\t\t<li id=\"pt-createaccount\"><a href=\"/index.php?title=Special:CreateAccount&amp;returnto=Segfault\" title=\"You are encouraged to create an account and log in; however, it is not mandatory\">Create account</a></li><li id=\"pt-login\"><a href=\"/index.php?title=Special:UserLogin&amp;returnto=Segfault\" title=\"You are encouraged to log in; however, it is not mandatory [o]\" accesskey=\"o\">Log in</a></li>\t\t\t\t\t\t</ul>\n\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div id=\"left-navigation\">\n\t\t\t\t\t\t\t\t\t\t<div id=\"p-namespaces\" role=\"navigation\" class=\"vectorTabs\" aria-labelledby=\"p-namespaces-label\">\n\t\t\t\t\t\t<h3 id=\"p-namespaces-label\">Namespaces</h3>\n\t\t\t\t\t\t<ul>\n\t\t\t\t\t\t\t<li id=\"ca-nstab-main\" class=\"selected\"><span><a href=\"/wiki/Segfault\" title=\"View the content page [c]\" accesskey=\"c\">Page</a></span></li><li id=\"ca-talk\" class=\"new\"><span><a href=\"/index.php?title=Talk:Segfault&amp;action=edit&amp;redlink=1\" rel=\"discussion\" title=\"Discussion about the content page (page does not exist) [t]\" accesskey=\"t\">Discussion</a></span></li>\t\t\t\t\t\t</ul>\n\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div id=\"p-variants\" role=\"navigation\" class=\"vectorMenu emptyPortlet\" aria-labelledby=\"p-variants-label\">\n\t\t\t\t\t\t\t\t\t\t\t\t<input type=\"checkbox\" class=\"vectorMenuCheckbox\" aria-labelledby=\"p-variants-label\" />\n\t\t\t\t\t\t<h3 id=\"p-variants-label\">\n\t\t\t\t\t\t\t<span>Variants</span>\n\t\t\t\t\t\t</h3>\n\t\t\t\t\t\t<div class=\"menu\">\n\t\t\t\t\t\t\t<ul>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t<div id=\"right-navigation\">\n\t\t\t\t\t\t\t\t\t\t<div id=\"p-views\" role=\"navigation\" class=\"vectorTabs\" aria-labelledby=\"p-views-label\">\n\t\t\t\t\t\t<h3 id=\"p-views-label\">Views</h3>\n\t\t\t\t\t\t<ul>\n\t\t\t\t\t\t\t<li id=\"ca-view\" class=\"collapsible selected\"><span><a href=\"/wiki/Segfault\">Read</a></span></li><li id=\"ca-viewsource\" class=\"collapsible\"><span><a href=\"/index.php?title=Segfault&amp;action=edit\" title=\"This page is protected.&#10;You can view its source [e]\" accesskey=\"e\">View source</a></span></li><li id=\"ca-history\" class=\"collapsible\"><span><a href=\"/index.php?title=Segfault&amp;action=history\" title=\"Past revisions of this page [h]\" accesskey=\"h\">View history</a></span></li>\t\t\t\t\t\t</ul>\n\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div id=\"p-cactions\" role=\"navigation\" class=\"vectorMenu emptyPortlet\" aria-labelledby=\"p-cactions-label\">\n\t\t\t\t\t\t<input type=\"checkbox\" class=\"vectorMenuCheckbox\" aria-labelledby=\"p-cactions-label\" />\n\t\t\t\t\t\t<h3 id=\"p-cactions-label\"><span>More</span></h3>\n\t\t\t\t\t\t<div class=\"menu\">\n\t\t\t\t\t\t\t<ul>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div id=\"p-search\" role=\"search\">\n\t\t\t\t\t\t<h3>\n\t\t\t\t\t\t\t<label for=\"searchInput\">Search</label>\n\t\t\t\t\t\t</h3>\n\t\t\t\t\t\t<form action=\"/index.php\" id=\"searchform\">\n\t\t\t\t\t\t\t<div id=\"simpleSearch\">\n\t\t\t\t\t\t\t\t<input type=\"search\" name=\"search\" placeholder=\"Search NetHackWiki\" title=\"Search NetHackWiki [f]\" accesskey=\"f\" id=\"searchInput\"/><input type=\"hidden\" value=\"Special:Search\" name=\"title\"/><input type=\"submit\" name=\"fulltext\" value=\"Search\" title=\"Search the pages for this text\" id=\"mw-searchButton\" class=\"searchButton mw-fallbackSearchButton\"/><input type=\"submit\" name=\"go\" value=\"Go\" title=\"Go to a page with this exact name if it exists\" id=\"searchButton\" class=\"searchButton\"/>\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</form>\n\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div id=\"mw-panel\">\n\t\t\t\t<div id=\"p-logo\" role=\"banner\"><a class=\"mw-wiki-logo\" href=\"/wiki/Main_Page\"  title=\"Visit the main page\"></a></div>\n\t\t\t\t\t\t<div class=\"portal\" role=\"navigation\" id=\"p-navigation\" aria-labelledby=\"p-navigation-label\">\n\t\t\t<h3 id=\"p-navigation-label\">Navigation</h3>\n\t\t\t<div class=\"body\">\n\t\t\t\t\t\t\t\t<ul>\n\t\t\t\t\t<li id=\"n-NetHack-Wiki\"><a href=\"/wiki/Main_Page\">NetHack Wiki</a></li><li id=\"n-Forum\"><a href=\"/wiki/Forum:Watercooler\">Forum</a></li><li id=\"n-portal\"><a href=\"/wiki/NetHackWiki:Community_Portal\" title=\"About the project, what you can do, where to find things\">Community portal</a></li><li id=\"n-recentchanges\"><a href=\"/wiki/Special:RecentChanges\" title=\"A list of recent changes in the wiki [r]\" accesskey=\"r\">Recent changes</a></li><li id=\"n-randompage\"><a href=\"/wiki/Special:Random\" title=\"Load a random page [x]\" accesskey=\"x\">Random page</a></li>\t\t\t\t</ul>\n\t\t\t\t\t\t\t</div>\n\t\t</div>\n\t\t\t<div class=\"portal\" role=\"navigation\" id=\"p-Popular_pages\" aria-labelledby=\"p-Popular_pages-label\">\n\t\t\t<h3 id=\"p-Popular_pages-label\">Popular pages</h3>\n\t\t\t<div class=\"body\">\n\t\t\t\t\t\t\t\t<ul>\n\t\t\t\t\t<li id=\"n-Dungeon-features\"><a href=\"/wiki/Dungeon_feature\">Dungeon features</a></li><li id=\"n-Monsters\"><a href=\"/wiki/Monster#Canonical_list_of_monsters\">Monsters</a></li><li id=\"n-In.2FExtrinsics\"><a href=\"/wiki/Property#Intrinsic_properties\">In/Extrinsics</a></li><li id=\"n-Items\"><a href=\"/wiki/Item\">Items</a></li><li id=\"n-Spells\"><a href=\"/wiki/Spellbook#List_of_spellbooks\">Spells</a></li><li id=\"n-Game-options\"><a href=\"/wiki/Options\">Game options</a></li><li id=\"n-Websites\"><a href=\"/wiki/Websites\">Websites</a></li>\t\t\t\t</ul>\n\t\t\t\t\t\t\t</div>\n\t\t</div>\n\t\t\t<div class=\"portal\" role=\"navigation\" id=\"p-contributing\" aria-labelledby=\"p-contributing-label\">\n\t\t\t<h3 id=\"p-contributing-label\">Contributing</h3>\n\t\t\t<div class=\"body\">\n\t\t\t\t\t\t\t\t<ul>\n\t\t\t\t\t<li id=\"n-Style-guide\"><a href=\"/wiki/NetHackWiki:Style_guide\">Style guide</a></li><li id=\"n-help\"><a href=\"/wiki/NetHackWiki:How_to_help\" title=\"The place to find out\">How to help</a></li><li id=\"n-Current-projects\"><a href=\"/wiki/NetHackWiki:Current_projects\">Current projects</a></li>\t\t\t\t</ul>\n\t\t\t\t\t\t\t</div>\n\t\t</div>\n\t\t\t<div class=\"portal\" role=\"navigation\" id=\"p-tb\" aria-labelledby=\"p-tb-label\">\n\t\t\t<h3 id=\"p-tb-label\">Tools</h3>\n\t\t\t<div class=\"body\">\n\t\t\t\t\t\t\t\t<ul>\n\t\t\t\t\t<li id=\"t-whatlinkshere\"><a href=\"/wiki/Special:WhatLinksHere/Segfault\" title=\"A list of all wiki pages that link here [j]\" accesskey=\"j\">What links here</a></li><li id=\"t-recentchangeslinked\"><a href=\"/wiki/Special:RecentChangesLinked/Segfault\" rel=\"nofollow\" title=\"Recent changes in pages linked from this page [k]\" accesskey=\"k\">Related changes</a></li><li id=\"t-specialpages\"><a href=\"/wiki/Special:SpecialPages\" title=\"A list of all special pages [q]\" accesskey=\"q\">Special pages</a></li><li id=\"t-print\"><a href=\"/index.php?title=Segfault&amp;printable=yes\" rel=\"alternate\" title=\"Printable version of this page [p]\" accesskey=\"p\">Printable version</a></li><li id=\"t-permalink\"><a href=\"/index.php?title=Segfault&amp;oldid=148527\" title=\"Permanent link to this revision of the page\">Permanent link</a></li><li id=\"t-info\"><a href=\"/index.php?title=Segfault&amp;action=info\" title=\"More information about this page\">Page information</a></li>\t\t\t\t</ul>\n\t\t\t\t\t\t\t</div>\n\t\t</div>\n\t\t\t\t</div>\n\t\t</div>\n\t\t\t\t<div id=\"footer\" role=\"contentinfo\">\n\t\t\t\t\t\t<ul id=\"footer-info\">\n\t\t\t\t\t\t\t\t<li id=\"footer-info-lastmod\"> This page was last edited on 5 October 2022, at 01:53.</li>\n\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t<ul id=\"footer-places\">\n\t\t\t\t\t\t\t\t<li id=\"footer-places-about\"><a href=\"/wiki/NetHackWiki:About\" title=\"NetHackWiki:About\">About NetHackWiki</a></li>\n\t\t\t\t\t\t\t\t<li id=\"footer-places-disclaimer\"><a href=\"/wiki/NetHackWiki:General_disclaimer\" title=\"NetHackWiki:General disclaimer\">Disclaimers</a></li>\n\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t\t\t\t<ul id=\"footer-icons\" class=\"noprint\">\n\t\t\t\t\t\t\t\t\t\t<li id=\"footer-poweredbyico\">\n\t\t\t\t\t\t<a href=\"//www.mediawiki.org/\"><img src=\"/resources/assets/poweredby_mediawiki_88x31.png\" alt=\"Powered by MediaWiki\" srcset=\"/resources/assets/poweredby_mediawiki_132x47.png 1.5x, /resources/assets/poweredby_mediawiki_176x62.png 2x\" width=\"88\" height=\"31\"/></a>\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t<div style=\"clear: both;\"></div>\n\t\t</div>\n\t\t\n<script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({\"wgPageParseReport\":{\"limitreport\":{\"cputime\":\"0.012\",\"walltime\":\"0.029\",\"ppvisitednodes\":{\"value\":66,\"limit\":1000000},\"ppgeneratednodes\":{\"value\":359,\"limit\":1000000},\"postexpandincludesize\":{\"value\":1400,\"limit\":2097152},\"templateargumentsize\":{\"value\":255,\"limit\":2097152},\"expansiondepth\":{\"value\":4,\"limit\":40},\"expensivefunctioncount\":{\"value\":0,\"limit\":100},\"unstrip-depth\":{\"value\":0,\"limit\":20},\"unstrip-size\":{\"value\":0,\"limit\":5000000},\"timingprofile\":[\"100.00%   12.823      1 -total\",\" 45.54%    5.840      1 Template:Wikipedia\",\" 43.99%    5.641      1 Template:Man\",\" 29.32%    3.760      1 Template:Generic_project_link\",\"  9.04%    1.159      1 Template:Todo\"]},\"cachereport\":{\"timestamp\":\"20240926190320\",\"ttl\":604800,\"transientcontent\":false}}});mw.config.set({\"wgBackendResponseTime\":77});});</script>\n\t</body>\n</html>\n","rawPage":"{{wikipedia|segmentation fault}}\n\n''[[NetHack]]'' '''segfaults''' in certain rare situations where a function expects the game to be in a state that it is not; this always indicates a bug in the code. The most common reason is the nonexistence of something that a function assumes will exist.\n\n== Behaviour ==\n\nDepending on the operating system used, the behavior can be slightly different; on Windows, Nethack closes and often displays a message saying \"NETHACK.EXE has stopped working\"; on Linux, you normally get a \"Segmentation fault\" error message printed at whatever location the cursor happens to be onscreen (followed by a prompt); and most public servers will handle the segmentation fault internally and just send you back to the launch screen (eu.un.nethack.nu additionally sends a message to its IRC channel when this happens).\n\nA segfault will leave files on disk exactly as-is, without any attempt to save the game. In most cases (i.e. any codebase that is not derived from [[NitroHack]], with the INSURANCE compile-time configuration option set and the in-game [[options#checkpoint|checkpoint]] option set), the game will be left in a state where it needs [[recover]]y, and after recovery, will return the game to the state at which it was in when the player entered their current dungeon level, or saved (whichever is more recent).\n\nIn the case where the game can detect an impossible state before it happens, you get a [[panic]] instead. This has clearer messages than a segfault, and often recovers in a different way, because the game has a chance to handle it. (For example, sometimes you will get an \"emergency save\" file created.)\n\n==Core dump==\n{{man|ulimit}}\n\nIf you are working on developing a NetHack [[variant]] (or NetHack itself!) on Linux or Mac OS X, you can configure your terminal so that a segfault leads to a useful \"core dump\" file that can be opened in a debugger to allow you to know what went wrong. The command to use depends on the operating system and shell you are using. For Linux with <tt>bash</tt>, you can use this command before running the program:\n\n ulimit -Sc unlimited\n\n{{todo|commands for other shells and operating systems}}\n\nNote that many operating systems will only save one core dump (per program, or per working directory) at a time, so you will need to delete the old one before you can get new ones.\n\n==Variants==\n\nIn [[DynaHack]] and [[NetHack 4]] (and theoretically in [[NitroHack]], although the mechanism normally fails in practice), the game will normally be able to recover from a segfault automatically (returning to the start of the turn in DynaHack, or the exact point of the segfault in NetHack 4), although if the bug that caused it has not been fixed in the meantime, the game will normally segfault in the exact same way again.\n\n[[Category:Bugs]]"}