{"title":"Polypiling","url":"https://nethackwiki.com/wiki/Polypiling","type":"markdown","data":"**[English]()**\n\n • [한국어](/wiki/Polypiling/ko \"Polypiling/ko\")\n\nIn *[NetHack](/wiki/NetHack \"NetHack\")*, **polypiling** is the action of [polymorphing](/wiki/Polymorph \"Polymorph\") a pile of [items](/wiki/Item \"Item\") in hopes of getting some useful items as a result. Objects polypiled are often referred to as **polyfodder** and usually consist of [junk](/wiki/Junk \"Junk\"). Polymorph can be caused by a [spell](/wiki/Spellbook_of_polymorph \"Spellbook of polymorph\"), [wand](/wiki/Wand_of_polymorph \"Wand of polymorph\"), or [potion](/wiki/Potion_of_polymorph \"Potion of polymorph\") of polymorph.\n\nPolypiling has its drawbacks: Polyfodder may be destroyed, and hostile [golems](/wiki/Golem \"Golem\") may be generated. The exact mechanics of item destruction are rather complex, but understanding them is important if you want to get the most out of your resources - see [the next section](#Probability_of_item_loss_and_golem_generation) for more details.\n\n[ ]\n\n## Contents\n\n- [1 Introduction](#Introduction)\n\n- [2 Probability of item loss and golem generation](#Probability_of_item_loss_and_golem_generation)\n\n  - [2.1 Shuddering](#Shuddering)\n  - [2.2 Golem absorption and types](#Golem_absorption_and_types)\n  - [2.3 Artifacts](#Artifacts)\n  - [2.4 Summary of polyfodder destruction](#Summary_of_polyfodder_destruction)\n\n- [3 Probability of item transformation](#Probability_of_item_transformation)\n\n- [4 Forbidden items](#Forbidden_items)\n\n- [5 Strategy](#Strategy)\n\n  - [5.1 General tips](#General_tips)\n  - [5.2 Preparing](#Preparing)\n  - [5.3 When to polypile](#When_to_polypile)\n  - [5.4 When not to polypile](#When_not_to_polypile)\n\n- [6 Stacking strategies](#Stacking_strategies)\n\n  - [6.1 Seven small piles](#Seven_small_piles)\n\n    - [6.1.1 Step by step](#Step_by_step)\n    - [6.1.2 Explanation](#Explanation)\n\n  - [6.2 One large pile](#One_large_pile)\n\n    - [6.2.1 Step by step](#Step_by_step_2)\n    - [6.2.2 Explanation](#Explanation_2)\n    - [6.2.3 One large pile with meatballs](#One_large_pile_with_meatballs)\n\n- [7 Variants](#Variants)\n\n  - [7.1 SLASH'EM](#SLASH.27EM)\n  - [7.2 SlashTHEM](#SlashTHEM)\n\n- [8 Code](#Code)\n\n- [9 References](#References)\n\n- [10 External links](#External_links)\n\n## Introduction\n\nWhen considering polypiling, it is important to distinguish *stacks* of items, which are all of one type (e.g., \"4 [blessed](/wiki/Blessed \"Blessed\") [scrolls of blank paper](/wiki/Scroll_of_blank_paper \"Scroll of blank paper\")\"), from *piles* of items, which are all of the items on the floor in one [square](/wiki/Square \"Square\"). The terms *stack* and *pile* will be used rigorously on this page.\n\nThe spell and wand supply a beam with a random range between 6 and 13 (long enough to hit 3 to 7 piles if they are all in line and contiguous and you are adjacent to the first) so you can work on several piles at once. A [potion of polymorph](/wiki/Potion_of_polymorph \"Potion of polymorph\") works on one item stack at a time, the item stack you dip into it.\n\nPolymorphed items do not change item class: Potions will always yield potions, scrolls will yield scrolls, armor will always yield armor, etc. - the exception to this is polymorphing a [crocodile](/wiki/Crocodile \"Crocodile\") [corpse](/wiki/Corpse \"Corpse\"), which will yield a pair of non-[cursed](/wiki/Cursed \"Cursed\") [fireproof](/wiki/Fireproof \"Fireproof\") +0 [low boots](/wiki/Low_boots \"Low boots\") instead of another [comestible](/wiki/Comestible \"Comestible\"). [Stackable](/wiki/Stackable \"Stackable\") [weapons](/wiki/Weapons \"Weapons\") and [tools](/wiki/Tools \"Tools\") can \"merge\" into non-stackable ones (e.g. a stack of 4 daggers morphing into a single long sword); other stackable objects are not subject to this.[\\[1\\]](#cite_note-1)[\\[2\\]](#cite_note-2)[\\[3\\]](#cite_note-3) [Unicorn horns](/wiki/Unicorn_horn \"Unicorn horn\") are especially popular polyfodder because they may polymorph into other [magical tools](/wiki/Magical_tool \"Magical tool\"), such as [magic markers](/wiki/Magic_marker \"Magic marker\"). Another useful thing to do if you gain polymorph in the early game is to polypile [spellbooks](/wiki/Spellbook \"Spellbook\"). Polymorphing retains the [charges](/wiki/Charge \"Charge\") and [enchantment](/wiki/Enchantment \"Enchantment\") of polymorphed items.\n\nWhen polymorphing [wands](/wiki/Wand \"Wand\") and spellbooks, their quality degrades. A spellbook will act as if it had been [read](/wiki/Read \"Read\") once more. If the book's combined read/polymorph-count is four or more, it will turn into a blank spellbook counted as read 0–3 times;[\\[4\\]](#cite_note-4) it will thus subsequently be able to be polymorphed into a non-blank spellbook with 75% chance.\n\nLikewise, a wand may count as if it had been [recharged](/wiki/Charging#wands \"Charging\"), increasing the chance of an explosion if you attempt to recharge it; thus, it is not generally worthwhile to polypile empty wands, even if they become something worth charging, the chances of the new wand exploding instead of [charging](/wiki/Charging \"Charging\") are already higher than normal. The chance of a wand's charge counter being incremented by polymorphing it is 6 − `x`7 where `x` is the number of times the wand has been recharged.[\\[5\\]](#cite_note-5)\n\nThe recharge count of [tools](/wiki/Tool \"Tool\") is not affected by polymorphing them, unless the tool becomes a [magic marker](/wiki/Magic_marker \"Magic marker\"), in which case its charge counter will be set to 1.\n\nPolypiling items that belong to a [shopkeeper](/wiki/Shopkeeper \"Shopkeeper\") can anger the shopkeeper.\n\n## Probability of item loss and golem generation\n\nThe polymorph [beam](/wiki/Beam \"Beam\") generated by the wand and spell acts on each pile separately.[\\[6\\]](#cite_note-6)\n\nFirst, each item stack in the pile has a chance of resisting, which is 5% for normal items and 95% for artifacts; [unique items](/wiki/Unique_item \"Unique item\") cannot shudder, polymorph, or be absorbed by forming golems.\n\nA user has suggested improving this page or section as follows:\n\n*\"List which materials can produce specific golems.\"*\n\n### Shuddering\n\nThen, each item stack that did not resist has a chance of \"shuddering\" (i.e., undergoing a [system shock](/wiki/System_shock \"System shock\")).[\\[7\\]](#cite_note-7)[\\[8\\]](#cite_note-8)\n\nThe probability of an item stack undergoing [system shock](/wiki/System_shock \"System shock\") depends on its [BUC status](/wiki/BUC_status \"BUC status\"), unless it is a [wand](/wiki/Wand \"Wand\"), and its size, as follows:[\\[9\\]](#cite_note-9)\n\n- For stacks of less than 5 items:\n\n  - Blessed non-wand: 1⁄12\n  - Uncursed non-wand: 1⁄8\n  - Wand of any BUC or stack of any cursed items: 1⁄3\n\n* For stacks of 5 items or more:\n\n  - Blessed: 1⁄6\n  - Uncursed: 1⁄4\n  - Cursed: 1\n\nWhen a stack shudders, it loses 1d(items in stack − 1) items, except in the case of single items, which are always destroyed.\n\nFor each item stack in the pile that undergoes a system shock, there is a chance of a [golem](/wiki/Golem \"Golem\") being created. For each item in a shuddering stack (counting those items destroyed by the shock itself) there is a 1[luck](/wiki/Luck \"Luck\") + 45 probability of creating a [golem](/wiki/Golem \"Golem\").[\\[10\\]](#cite_note-10) A 1[luck](/wiki/Luck \"Luck\") + 45 chance for each item means the chance that a stack generates a golem is approximately `s`[luck](/wiki/Luck \"Luck\") + 45 for small `s`. No more than one golem can be created per pile.[\\[11\\]](#cite_note-11) However, even after NetHack has decided to create a golem, additional stacks in the pile can shudder.\n\nIf an item stack shuddered, even if some of the items that were in the stack remain, it will *not* be polymorphed. The rest of the stacks in the pile still have a chance of being polymorphed.[\\[12\\]](#cite_note-12)[\\[13\\]](#cite_note-13)[\\[14\\]](#cite_note-14)[\\[15\\]](#cite_note-15)\n\nFor any stack that did not shudder, the polymorph process continues. There is a (number of items in stack/1000) probability that the entire stack merges into a single item.[\\[16\\]](#cite_note-16)\n\nAdditionally, when attempting to polypile [rocks](/wiki/Rock \"Rock\") or [gray stones](/wiki/Gray_stone \"Gray stone\") into [gems](/wiki/Gem \"Gem\") or [worthless glass](/wiki/Worthless_glass \"Worthless glass\"), an 1d4 is rolled against stack size; if the stack is larger, transmutation \"backfires\", destroying half of the stack and turning the rest into rocks unconditionally.[\\[17\\]](#cite_note-17)\n\nThe actual polymorph is now performed. See [the next section](/wiki/Polypile#Probability_of_item_transformation \"Polypile\") for exactly what your item stack will be turning into.\n\nThis process is repeated for each item stack in the pile.\n\n### Golem absorption and types\n\nIf a golem is created from any stack in a pile, it can \"absorb\" additional item stacks in the pile, destroying them. The material destroyed by the golem is separate from that destroyed by the original system shock(s). If, after every stack has been polymorphed, zero or one item remains in the pile (due perhaps to bad system shocks), golem creation is aborted, if it had been planned at all. According to a comment in the source: \"no golems if you zap only one object – not enough stuff\".[\\[18\\]](#cite_note-18) (This comment is slightly inaccurate; it's possible to zap several items, reach this point in the code, and have the material check fail because all or all but one of the items were destroyed by system shocks.)\n\nThe golem will attempt to absorb a number of individual items (not item stacks, \"4 scrolls\" counts for 4, not 1), equal to its weight.[\\[19\\]](#cite_note-19)[\\[20\\]](#cite_note-20)[\\[21\\]](#cite_note-21) Only items that are made of the same [material](/wiki/Material \"Material\") as the item stack whose shuddering cause the golem to form are eligible for absorption. For instance, if a mithril-coat shudders and results in an iron golem, that iron golem will absorb other mithril items on the pile, but leave iron items untouched. Each eligible item stack has a 1 in (golem weight + 1) chance of escaping absorption. Given the high weights of golems, 400 for straw and paper up to 2000 for iron, it is highly unlikely that any eligible item will survive this process. Also, this absorption occurs after the items have been polymorphed. If a mithril item shudders and creates an iron golem, and several other mithril objects on the pile are polymorphed into other materials, e.g. leather coats or iron helmets, they will *not* be absorbed, though any leather coats or iron helmets polymorphed into mithril items *will* be absorbed.[\\[22\\]](#cite_note-22)\n\nEach stack in a pile is polymorphed separately, in order of the most recently dropped, and the type of golem is determined by the material of the first item stack to shudder and result in golem creation.[\\[23\\]](#cite_note-23)[\\[24\\]](#cite_note-24)[\\[25\\]](#cite_note-25) This is exploitable; see [§ One large pile](#One_large_pile) for details.\n\n### Artifacts\n\n[Artifacts](/wiki/Artifact \"Artifact\") have a 95% chance of resisting. (Compare to 5% for normal items.) If this 95% chance fails, they are polymorphed just like every other item, first undergoing a shuddering check and then, if they aren't destroyed, undergoing a polymorph to a random non-artifact weapon. Artifacts have *no* resistance to being absorbed by a forming golem. Excalibur may be mostly safe from shuddering or polymorphing atop that pile of iron junk, but if an iron golem forms it is virtually guaranteed that Excalibur will be destroyed.[\\[26\\]](#cite_note-26)\n\n### Summary of polyfodder destruction\n\nThis process, from the resistance check to here, is repeated for each pile hit by the beam.\n\nIn other words, there are 3 ways polyfodder can be destroyed:\n\n- Shuddering, the probability of which is decreased by blessing, polymorphing items other than wands, and keep the size of individual stacks under 4.\n\n- Merging, the probability of which is reduced by lowering the size of individual stacks.\n\n- Stackable weapons and tools merging into non-stackables (separate from the n/1000 chance outlined above), which is mitigated by lowering stack size of weapons and tools.\n\n- Absorption into forming golems, the probability of which is reduced by:\n\n  - Increasing your luck, reducing the chance of golem formation.\n  - Reducing the size of the individual item stacks, reducing the chance of golem formation.\n  - Reducing the number of item stacks on the pile, reducing the number of opportunities for golems to form.\n  - Limiting the number of items on the pile that are made of the same material, reducing the number of items a forming golem can absorb.\n    - In particular, the items on the top of the pile, the ones you drop last, should be a different material than the most valuable items in the pile. Potential golems will likely be made out of the material of the top items, not the material of the valuable items. Thus the valuable items will survive while the cheaper ones are destroyed. See [§ One large pile](#One_large_pile) for details.\n\n## Probability of item transformation\n\nWhen polymorphing a [magical object](/wiki/Magical_object \"Magical object\"), the game will try to change it into another random magical object, retrying up to two times if the replacement would be non-magical.[\\[27\\]](#cite_note-27) The third item generated will be used, regardless if it is magical. The reverse is true when polymorphing a non-magical object. The upshot is that a magical object has a significantly higher probability than a non-magical object of turning into another magical object. So don't expect many magic markers from polypiling pick-axes and mirrors; you will have much better odds polypiling unicorn horns. The exceptions are potions of water, blank scrolls, blank spellbooks, and wands of nothing, all of which have a high chance of becoming more-useful items of the same type. As mentioned above, blessed items have only a 1/12 chance of undergoing system shock, so blessing your polypile items is definitely worth the expenditure if you have a surplus of holy water.\n\nA user has suggested improving this page or section as follows:\n\n*\"Numbers for rings (and scrolls?) would be nice.\"*\n\n| Class                                    | Magical → Non-magical | Non-magical → Magical |\n| ---------------------------------------- | --------------------- | --------------------- |\n| [Armor](/wiki/Armor \"Armor\")             | 54%                   | 0.60%                 |\n| [Gem](/wiki/Gem \"Gem\")                   | 92%                   | negligible            |\n| [Potion](/wiki/Potion \"Potion\")          | 1.70%                 | 41%                   |\n| [Spellbook](/wiki/Spellbook \"Spellbook\") | negligible            | 95%                   |\n| [Tool](/wiki/Tool \"Tool\")                | 60%                   | 0.30%                 |\n| [Wand](/wiki/Wand \"Wand\")                | negligible            | 93%                   |\n\n## Forbidden items\n\nThe following items cannot be produced by polymorph:\n\n- [magic lamp](/wiki/Magic_lamp \"Magic lamp\")[\\[28\\]](#cite_note-28)\n- [wand of wishing](/wiki/Wand_of_wishing \"Wand of wishing\")\n- [wand of polymorph](/wiki/Wand_of_polymorph \"Wand of polymorph\")[\\[29\\]](#cite_note-29)\n- [potion of polymorph](/wiki/Potion_of_polymorph \"Potion of polymorph\")[\\[30\\]](#cite_note-30)\n- [spellbook of polymorph](/wiki/Spellbook_of_polymorph \"Spellbook of polymorph\")[\\[31\\]](#cite_note-31)\n- [artifacts](/wiki/Artifact \"Artifact\")[\\[32\\]](#cite_note-32)\n- any item not normally randomly generated, such as [athames](/wiki/Athame \"Athame\") and [fedoras](/wiki/Fedora \"Fedora\")\n\nThe following items cannot be polymorphed:\n\n- [Rider](/wiki/Rider \"Rider\") corpses\n- [wand of polymorph](/wiki/Wand_of_polymorph \"Wand of polymorph\")\n- [potion of polymorph](/wiki/Potion_of_polymorph \"Potion of polymorph\")\n- [spellbook of polymorph](/wiki/Spellbook_of_polymorph \"Spellbook of polymorph\")\n\n## Strategy\n\nPolypiling is often used to get [ascension kit](/wiki/Ascension_kit \"Ascension kit\") [armor](/wiki/Armor \"Armor\") (and completed by [wishing](/wiki/Wish \"Wish\")). Therefore, you might want to collect all those [elven cloaks](/wiki/Elven_cloak \"Elven cloak\") and [boots](/wiki/Elven_boots \"Elven boots\") in the game.\n\nPolypiling is most often used by [conduct](/wiki/Conduct \"Conduct\") players who need certain items: It can substitute for wishing, [prayer](/wiki/Prayer \"Prayer\") and [sacrifice](/wiki/Sacrifice \"Sacrifice\") benefits, or [literacy](/wiki/Illiterate \"Illiterate\"), and it can be done relatively safely. Generated monsters offer an almost unlimited supply of polyfodder. However, polypiling is time-consuming and tedious. Generally, it is not worth it unless you are trying for conducts, or unless you are looking for many items at once.\n\nOver-preparing is the other common reason for polypiling. This goes for many first ascenders, [pacifist](/wiki/Pacifist \"Pacifist\") characters who want the most [protection](/wiki/Protection \"Protection\"), or even an attempt to get a very high score by polypiling rocks into gems.\n\n### General tips\n\n- Never handle both polyfodder and items you want to keep in your main inventory at the same time, and never ever drop anything useful on your polypile line. People have wondered where their [bag of holding](/wiki/Bag_of_holding \"Bag of holding\") with all the artifacts went.\n- Even if you do not care about polyfodder loss, #name rocks to get stacks of at most four. There is a limit to how many gems can be created.\n- Max out your [luck](/wiki/Luck \"Luck\") to minimize golem creation. That reduces the total material lost. This is particular useful for larger stacks and piles, where any golem will do comparatively more damage. Do not max your luck if using the [one large pile strategy below](#One_large_pile).\n- Configure [autopickup exceptions](/wiki/Autopickup_exception \"Autopickup exception\") to pick up good morphs and your want-to-keeps from the pile.\n- Polypile your items near a [general store](/wiki/General_store \"General store\") to help identify good morphs. Be *very* careful of polypiling in a store; if any of the shopkeeper's items are polymorphed, they will become angry and attack you without giving you a chance to pay.\n- Familiarize yourself with the ways polyfodder is lost to determine how much risk to take on, given your available polyfodder and the amount of polypile sources you have available to you. Your patience is also a factor, perfect optimization is time consuming and tedious.\n\n### Preparing\n\n- To minimize loss, it is a good idea to mass-[bless](/wiki/Bless \"Bless\") magical polyfodder, which is much less abundant than ordinary junk. [Potions](/wiki/Potion \"Potion\") and [scrolls](/wiki/Scroll \"Scroll\") can be [canceled](/wiki/Cancel \"Cancel\") so they will [stack](/wiki/Stack \"Stack\"), and then dipped in [holy water](/wiki/Potion_of_holy_water \"Potion of holy water\"). Name and separate them into stacks of at most four items before polymorphing. Only armor and weapons (and wands) retain their enchantment; these should be canceled if negative before blessing. A large stack of [darts](/wiki/Dart \"Dart\") can be enchanted to +7 in one go and then polypiled individually for potentially powerful weapons. Magical armor and tools tend to become non-magical rather than shuddering, so there is no point blessing them.\n  - Non-stackables, such as [rings](/wiki/Ring \"Ring\"), require more work to bless. Often, it is not worth the costs. The most efficient way is with a blessed, confused [scroll of remove curse](/wiki/Scroll_of_remove_curse \"Scroll of remove curse\"). In a safe location, pick up as much polyfodder as possible but carry no other uncursed items. Then confuse yourself, read a blessed scroll of remove curse, end confusion, and mass-uncurse cursed items with the [remove curse](/wiki/Spellbook_of_remove_curse \"Spellbook of remove curse\") spell at a skilled level. The light blue aura boon when carefully [praying](/wiki/Pray \"Pray\") on an altar or even another scroll can also uncurse your entire main inventory. This procedure yields 12.5 blessings per scroll on average.\n- Unless you will need only one read, name [spellbooks](/wiki/Spellbook \"Spellbook\") individually how often you have read them, and sort them accordingly. Under each pile you intend to polymorph, engrave that number. Any nameless books after the polymorph will count as read one more time. Keep in mind how often you will have to re-read the spells you get.\n- Sort polyfodder by [BUC](/wiki/BUC \"BUC\") status so you won't have to re-test after polypiling.\n\n### When to polypile\n\n- If a game has been unforgiving, a good time to consider polypiling is when there are many things needed at once; the odds of getting *at least one* of them is improved. For example, if you're looking for a [magic marker](/wiki/Magic_marker \"Magic marker\") in particular, getting a [tinning kit](/wiki/Tinning_kit \"Tinning kit\") would be seen as a waste. However, if you were looking for both a magic marker *and* a tinning kit, the effective odds of getting something you want go up. If you're looking for a [horn of plenty](/wiki/Horn_of_plenty \"Horn of plenty\"), a magic marker, a [pair of lenses](/wiki/Pair_of_lenses \"Pair of lenses\"), and a tinning kit all at once, polypiling unicorn horns begins to look increasingly attractive.\n- **[Potions](/wiki/Potion \"Potion\")** are attractive to polymorph, due to the ease of creating fruit juice and water, and mass blessing them. Furthermore, with the help of [alchemy](/wiki/Alchemy \"Alchemy\"), a good third of the available potions are useful in some way. While you may not get the potion of enlightenment, or gain level, that you wanted, you are likely to end with various healing potions, levitation, etc, that can be quickly used to work towards what you really want.\n- **[Scrolls](/wiki/Scroll \"Scroll\")** are commonly polymorphed for similar reasons. Here, part of the motivation is in doing away with magic markers. It adds a great deal of randomness to the mix, but scrolls are still cheaper than marker charges.\n- **[Magical tools](/wiki/Magical_tool \"Magical tool\")**, especially [unicorn horns](/wiki/Unicorn_horn \"Unicorn horn\"), are a common fodder due to the large number of useful magical tools and the abundance of unicorn horns. (Revived unicorns have a 50% chance of leaving another horn.) Certainly, the magic marker is generally what most would go for, but in the attempt you might find other goodies. A [horn of plenty](/wiki/Horn_of_plenty \"Horn of plenty\"), for instance, spawns potions you can polypile; a [fire](/wiki/Fire_horn \"Fire horn\") or [frost](/wiki/Frost_horn \"Frost horn\") horn may also be of help, as may a [magic harp](/wiki/Magic_harp \"Magic harp\") or [magic flute](/wiki/Magic_flute \"Magic flute\"). This is especially helpful to Tourists or other neutral players with the [PYEC](/wiki/PYEC \"PYEC\").\n- **[Magical armor](/wiki/Magical_armor \"Magical armor\")** can help finish off an [ascension kit](/wiki/Ascension_kit \"Ascension kit\"), most often using the various abundant [elven](/wiki/Elven \"Elven\") equipment as fodder. This is mostly only useful to ([wishless](/wiki/Wishless \"Wishless\")) conduct players, as the [castle](/wiki/Castle \"Castle\")'s guaranteed five wishes are good enough to get all the missing types of armor; furthermore, its armor stores might contain missing pieces.\n  - A common trick is to polymorph elven armor, which can safely be enchanted to +7, into a +7 [T-shirt](/wiki/T-shirt \"T-shirt\"). The number of +7 armors isn't terribly prohibitive: the blessed [scroll of enchant armor](/wiki/Scroll_of_enchant_armor \"Scroll of enchant armor\") (to get to +7) will also bless the armor and reduce the odds of shuddering.\n\n* * | Confidence              | Base chance | 25%   | 50%   | 75%    | 95%    |\n    | ----------------------- | ----------- | ----- | ----- | ------ | ------ |\n    | Polymorphs              | 1 in 100    | 28.62 | 68.97 | 137.94 | 298.07 |\n    | Shuddering              | 1 in 12     | 3.31  | 7.97  | 15.93  | 34.43  |\n    | Armors needed (approx.) | —           | 3.59  | 8.66  | 17.32  | 37.41  |\n\n- **[Rings](/wiki/Ring \"Ring\")** can help finish off an [ascension kit](/wiki/Ascension_kit \"Ascension kit\"), particularly with rings of [levitation](/wiki/Ring_of_levitation \"Ring of levitation\"), [slow digestion](/wiki/Ring_of_slow_digestion \"Ring of slow digestion\"), or [free action](/wiki/Ring_of_free_action \"Ring of free action\"), if you haven't found them before [Medusa's Island](/wiki/Medusa%27s_Island \"Medusa's Island\"). Most other rings are only useful in specific situations, polypiling or not.\n  - One cheesy trick is to polypile for rings of [protection](/wiki/Ring_of_protection \"Ring of protection\") or [increase damage](/wiki/Ring_of_increase_damage \"Ring of increase damage\"), with the intention of [eating](/wiki/Eating_jewelry \"Eating jewelry\") them. It's possible to get a ridiculously low [AC](/wiki/AC \"AC\") or ridiculously high damage. The former is pointless, other than to sound impressive, because you can reasonably get to −40AC without such mind-numbing busywork, and that is enough to make even a [minotaur](/wiki/Minotaur \"Minotaur\") barely scrape the polish on your armor. The latter may be for [Death farming](/wiki/Death_farming \"Death farming\") to a ludicrously high score.\n- **[Spellbooks](/wiki/Spellbook \"Spellbook\")**, if you are happy with any random book and accept you cannot re-read it. Early in the game, when you don't know many spells yet, you can get dozens of new ones out of a few spellbooks. In [3.6.0](/wiki/3.6.0 \"3.6.0\") the bug allowing to always learn new spells from overpolymorphed spellbooks has been fixed; a non-blank polymorphed spellbook will be counted as read 1–3 times, and you can only learn a new spell from it if this number is lower than 3. Otherwise, it will turn blank on reading. Thus, it is advised to formally [identify](/wiki/Identify \"Identify\") unknown polymorphed spellbooks before reading, so you could overwrite them with a [magic marker](/wiki/Magic_marker \"Magic marker\") in the latter case. Newbies might carry books and rings along (unencumbered) into a [Minetown](/wiki/Minetown \"Minetown\") shop in the early game and polymorph there.\n- **Junk armor**: Shirts are annoyingly rare in the main dungeon, but other armors are not. Zapping a wand of polymorph at that 15 pages pile of items in [Fort Ludios](/wiki/Fort_Ludios \"Fort Ludios\") is probably the easiest way to get a shirt outside of bones, wishing, or playing a Tourist.\n- **When** can also be considered \"in the temporal sense\". By the time you reach [Vlad's Tower](/wiki/Vlad%27s_Tower \"Vlad's Tower\"), you can take a little break, lock the door and begin the process in peace and quiet, after having accumulated a backbreaking load of loot. One nice benefit is that you can also use that location to summon wraiths that will leave a corpse to eat, unlike the rest of [Gehennom](/wiki/Gehennom \"Gehennom\"), should your efforts yield [magic markers](/wiki/Magic_marker \"Magic marker\") for writing [genocide](/wiki/Scroll_of_genocide \"Scroll of genocide\") on any cursed blank scrolls (for generating the last, note the guaranteed [water walking boots](/wiki/Water_walking_boots \"Water walking boots\") there).\n\n### When not to polypile\n\n- **[Wands](/wiki/Wand \"Wand\")** are *generally* not worth it. This is mostly because by the usual time the player has a serious stash of wands, and abundant means to polymorph objects (read: the spell), there is only one wand seriously worth going after: [death](/wiki/Wand_of_death \"Wand of death\"). But this late into the game, there are only four monsters that it matters on—[Pestilence](/wiki/Pestilence \"Pestilence\"), [Famine](/wiki/Famine \"Famine\"), the [Wizard of Yendor](/wiki/Wizard_of_Yendor \"Wizard of Yendor\"), and the [high priest of Moloch](/wiki/High_priest_of_Moloch \"High priest of Moloch\"). Likely (but not *necessarily*), you already have enough wands of death to deal with those enemies. Also, polymorphed wands will more likely explode if charged again.\n  - In the midgame, however, it may be worth it. If the player doesn't quite have enough items to make a full polypile line, a square of scrap wands may not make anything that you need, but it *might* make a wand you've yet to identify (if it has charges left). It may also be that you need a wand's special properties—for example, a [wand of fire](/wiki/Wand_of_fire \"Wand of fire\")'s ability to engrave a permanent [Elbereth](/wiki/Elbereth \"Elbereth\") square.\n- **Specific [spellbooks](/wiki/Spellbook \"Spellbook\")**: If you only need one specific spellbook (or a [spellbook of polymorph](/wiki/Spellbook_of_polymorph \"Spellbook of polymorph\") to start with), there are better methods than polypiling. Wizards with sufficient [luck](/wiki/Luck \"Luck\") can write one using a [magic marker](/wiki/Magic_marker \"Magic marker\"). Anyone willing to do the [altar](/wiki/Altar \"Altar\") work can get books from their god, especially the last few ones you do not yet know.\n- There are better ways to get various other items. For example, a [trident](/wiki/Trident \"Trident\"), while normally quite rare, can be found in the [death drop](/wiki/Death_drop \"Death drop\") of a salamander or a [horned devil](/wiki/Horned_devil \"Horned devil\"). A silver saber, very desirable for [twoweapon](/wiki/Twoweapon \"Twoweapon\") combat, can be found in the inventory of the Minetown watch, or the various captains that show up in the [Castle](/wiki/Castle \"Castle\").\n- Items not generated randomly aren't available from polypiling, e.g. [athames](/wiki/Athame \"Athame\").\n\n## Stacking strategies\n\n### Seven small piles\n\n#### Step by step\n\n- Maximize your [luck](/wiki/Luck \"Luck\"). (+13 is best.)\n- Collect your items. See the section above to decide what to polypile.\n- Individually name stackables to separate them into stacks of two (preferable), three, or four. Try to avoid single items, except for weapons and tools, which should be completely unstacked.\n- Distribute the item stacks over seven small piles in a straight line, each pile containing a good mix of different types of material. Put the items you want polymorphed most at the front of the line. (First three piles are guaranteed, each of the four piles after that is progressively less likely.)\n- Zap polymorph.\n- Review results. [Autopickup](/wiki/Autopickup \"Autopickup\") with [exceptions](/wiki/Autopickup_exceptions \"Autopickup exceptions\") can automate this for you.\n- Repeat.\n\n#### Explanation\n\nSeparating your stackables minimizes the chances of merging and shuddering. Weapons and tools will eventually turn into something unstackable, and you lose all but one. For other items, stacks of one are less desirable, since shuddering destroys them completely, while larger stacks only lose half of the stack on average.\n\nMaximizing your luck minimizes the chances of golems forming.\n\nDistributing your item stacks over 7 squares minimizes the damage a forming golem can do, because a golem can only absorb items from the square it forms on.\n\nEnsuring a good mix of different materials also minimizes the damage a forming golem can do, because the golem can only absorb items that are made of the same material as the shuddered item that led to its formation.\n\n### One large pile\n\n#### Step by step\n\n- Minimize your luck. (0 is good; −13 is better!)\n- Collect your items. See the section above to decide what to polypile, but avoid items made of [mineral](/wiki/Mineral \"Mineral\") (e.g. some rings, wands). The number of [wands](/wiki/Wand \"Wand\") and [rings](/wiki/Ring \"Ring\") destroyed by this method will be slightly greater than the number destroyed by the seven small piles method. If you want to polypile mineral-based items, do *not* use this method.\n- Individually name stackables to separate them, especially weapons and tools. Separating them all the way into stacks of just one single item is best, but just getting them into stacks of four or fewer is almost as good.\n- Put every item stack in one large pile.\n- Obtain a very large number of rocks.\n- Curse the rocks.\n- Individually name the rocks to break them into small stacks. Five rocks per stack is best, get as close to that as your patience allows. Do not make stacks smaller than five.\n- Drop all the rocks on top of the item pile. Make sure you drop the rocks *after* the items so they are on top!\n- Zap polymorph.\n- Kill the stone golem.\n- Review results.\n- Repeat.\n\nYou *want* a stone golem to form from those rocks, because it will prevent other types of golems from forming and damaging your valuable polyfodder. Assuming cursed rocks in stacks of 5, and [Luck](/wiki/Luck \"Luck\") of 10: 50 rocks is approximately a 58% chance of a stone golem, 200 rocks is approximately a 97% chance of a stone golem, and 300 rocks is approximately a 99.5% chance of a stone golem.\n\nA [rubber chicken](/wiki/Rubber_chicken \"Rubber chicken\") and a [pick-axe](/wiki/Pick-axe \"Pick-axe\") are quite helpful here, in order to create a large number of rocks near the fodder pile.\n\n#### Explanation\n\nThis method exploits the specifics of the polypiling algorithm.\n\nSeparating your stackables minimizes the chances of merging and shuddering. The only threat to deal with now is golem absorption.\n\nOrdinarily putting every item stack on one pile would be a terrible idea, because any forming golem would have access to every item you were polypiling. However, in this strategy we ensure that the golem won't be able to absorb anything useful, by manipulating the material it is made of. A golem can only absorb items made of the same material it is. An iron golem generated from shuddering mithril can only absorb other mithril items. A wood golem generated from shuddering wood can only absorb other wood items. And—most importantly in this case—a stone golem generated from a shuddering mineral item can only absorb other mineral items.\n\nOnly one golem can be generated from a pile, and the first item stack to shudder and lead to golem formation gets to decide the material. By putting the rocks on top we ensure that they get processed first.\n\nCursing the rocks increases the chances that they will shudder.\n\nKeeping the rocks in stacks of more than 4 (5 in this case) also increases this chance.\n\nMinimizing our luck increases the chances that our rocks will give rise to a golem once they shudder.\n\nThe probability of an individual stack *not* giving rise to a golem, *if* it shudders, is (luck + 44luck + 45)`s`, where `s` is the stack size. The probability of the stack shuddering (and not resisting initial polymorph) is 95% for stacks of 5 or more cursed items; this is the highest chance we can get. Thus the probability of a stack *not* forming a golem is 0.05 + 0.95 × (luck + 44luck + 45)`s`. If every stack of rocks in a pile is identical (all contain 5 cursed rocks), then the chance of none of them giving rise to a golem is (0.05 + 0.95 × (luck + 44luck + 45)`s`)`n`, where `n` is the number of stacks. Thus we want our stacks to be as small as possible, so that we can have as many as possible, *without* having fewer than 5 rocks per stack.\n\nFor the most part, there are no items made from mineral you might be interested in polypiling for. The exceptions are marble wands and granite, opal, clay, coral, moonstone and black onyx rings. The material an item is made of can change when it is polymorphed, and it is the final material that matters for golem absorption. Since any polymorphed wand or ring could end up being one of the mineral ones, the effect is that this technique will consume slighty more wands and rings than the other technique, and that the specific item types that are made of mineral cannot be polypiled for (with this method).\n\nThere is a 5% chance of a normal item resisting polymorph and reaching this point unchanged, so the initial material matters somewhat as well. For instance if you try to polypile a figurine and it resists, it is almost guaranteed to be absorbed (because figurines are mineral).\n\nBeware! In the unlikely event that a stone golem does *not* form from the rocks: then, given the large pile underneath, there is a good chance a golem *will* form from another material, possibly doing a lot of damage. With enough cursed rocks, less material is lost on average with the one-pile than with the multi-pile technique.\n\n#### One large pile with meatballs\n\nIf you know [stone to flesh](/wiki/Stone_to_flesh \"Stone to flesh\") spell, you should cast it at your rocks to turn them into [meatballs](/wiki/Meatball \"Meatball\"), then use them instead of rocks in the advice above. In this case, you can polypile for mineral items, but can't polypile for [eggs](/wiki/Egg \"Egg\") and [tripe rations](/wiki/Tripe_ration \"Tripe ration\"). The golem rising from the pile will be a [flesh golem](/wiki/Flesh_golem \"Flesh golem\") instead of a [stone golem](/wiki/Stone_golem \"Stone golem\").\n\n## Variants\n\n### SLASH'EM\n\nIn SLASH'EM, polymorphed items revert back to their original form after 500–999 turns.[\\[33\\]](#cite_note-33) Items that will eventually revert are described as \"hazy\" in [wizard mode](/wiki/Wizard_mode \"Wizard mode\"). Hazy items can be \"fixed\" by dipping them in a [potion of restore ability](/wiki/Potion_of_restore_ability \"Potion of restore ability\").\n\nThere are some exceptions to this:\n\n- Items that were initially eggs laid by the player[\\[34\\]](#cite_note-34) or corpses[\\[35\\]](#cite_note-35) do not revert.\n- If a [magic lamp](/wiki/Magic_lamp \"Magic lamp\") is randomly chosen at first, the [oil lamp](/wiki/Oil_lamp \"Oil lamp\") with which it is replaced does not revert.[\\[36\\]](#cite_note-36)\n- Items that become [land mines](/wiki/Land_mine \"Land mine\") or [beartraps](/wiki/Beartrap \"Beartrap\") do not revert.[\\[37\\]](#cite_note-37)\n- Items that become the same object type as they were before do not revert, even if they otherwise changed (such as a diluted potion of sickness becoming an undiluted potion of sickness).[\\[38\\]](#cite_note-38)\n\nThe reversion is done not by restoring the original item but by changing the item to the original item's type,[\\[39\\]](#cite_note-39) which has some consequences that may not be expected, including the following:\n\n- Some properties, such as [beatitude](/wiki/Beatitude \"Beatitude\") and [erosion](/wiki/Erosion \"Erosion\"), are carried over from the transformed item rather than the original.\n- Some other properties, such as being an [artifact](/wiki/Artifact \"Artifact\"), are lost.\n- A stack of multiple items that became a single item reverts to a single item of the original type.\n- An item that became an [amulet of unchanging](/wiki/Amulet_of_unchanging \"Amulet of unchanging\") does not revert.[\\[40\\]](#cite_note-40)\n\nThe transmutation limits the usefulness of polypiling somewhat, as obtaining permanent items requires a commensurate supply of potions. However, polypiling is still just as useful to obtain items that can be useful right away or relatively soon; for example, a polypiled [magic marker](/wiki/Magic_marker \"Magic marker\") can be immediately used to write a few scrolls, and then allowed to transmute back after it is empty.\n\nIn some cases, the reversion can be useful:\n\n- When polypiling magical items, if they turn into non-magical items, one can simply wait for them to revert, and try again.\n\n- [Boulders](/wiki/Boulder \"Boulder\") can be polymorphed into statues and transported more easily, and will turn back into boulders.\n\n- Any armor can be safely enchanted to +7 by polymorphing it into [elven armor](/wiki/Elven_armor \"Elven armor\").\n  - If you have a [wand of polymorph](/wiki/Wand_of_polymorph \"Wand of polymorph\") and two or three [potions of gain level](/wiki/Potion_of_gain_level \"Potion of gain level\"), you can easily get a +7 [helm of brilliance](/wiki/Helm_of_brilliance \"Helm of brilliance\") by polypiling ubiquitous orcish and dwarven helmets until you get an elven item (or something that can be [upgraded](/wiki/Upgrade \"Upgrade\") into one), enchanting, and upgrading the enchanted helmet after it reverts.\n\n- Some further consequences are probably bugs:\n\n  - After polymorphing a boulder into a statue, breaking it will result in a number of rocks; if they are separated, each separate stack reverts to a boulder.\n  - Weapons can be polymorphed into [dwarvish mattocks](/wiki/Dwarvish_mattock \"Dwarvish mattock\"), [upgraded](/wiki/Upgrade \"Upgrade\") to [pick-axes](/wiki/Pick-axe \"Pick-axe\"), and polymorphed further into other tools, particularly charged ones; when they revert, the weapon's enchantment will be the tool's number of charges, which can be much higher than normally feasible.\n\n### SlashTHEM\n\nIn [SlashTHEM](/wiki/SlashTHEM \"SlashTHEM\"), polymorphed items that will revert after a certain amount of turns are displayed as \"hazy\" in normal play; the same mechanics apply for \"fixing\" that item in its current form.\n\n## Code\n\n[bhito](/wiki/Source:Zap.c#bhito \"Source:Zap.c\") in [zap.c](/wiki/Source:Zap.c \"Source:Zap.c\") is the root of item polymorphs from the spell and wand. It is called for each stack of items a polymorph zap hits by [bhitpile](/wiki/Zap.c#bhitpile \"Zap.c\"). First it refuses to polymorph polymorph-sources, and allows items to resist.[\\[41\\]](#cite_note-41) It calls [obj\\_shudders](/wiki/Zap.c#obj_shudders \"Zap.c\") to check for system shocks[\\[42\\]](#cite_note-42) and calls [do\\_osshock](/wiki/Zap.c#do_osshock \"Zap.c\") to perform them.[\\[43\\]](#cite_note-43) Finally bhito calls [polyobj](/wiki/Zap.c#polyobj \"Zap.c\") to actually transform the stack.[\\[44\\]](#cite_note-44)\n\n[do\\_osshock](/wiki/Zap.c#do_osshock \"Zap.c\") determines whether or not to generate a [golem](/wiki/Golem \"Golem\"), and after all the stacks in the pile have been polymorphed by repeated calls to bhito, bhitpile calls [create\\_polymon](/wiki/Zap.c#create_polymon \"Zap.c\") to actually generate thegolem.\n\nIf create\\_polymon is called, it possibly creates the golem and then, if the golem was created, in turn calls [polyuse](/wiki/Zap.c#polyuse \"Zap.c\") to consume additional polyfodder.[\\[45\\]](#cite_note-45)\n\n## References\n\n1. [↑](#cite_ref-1) [zap.c in NetHack 3.4.3, line 1234](/wiki/Source:NetHack_3.4.3/zap.c#line1234 \"Source:NetHack 3.4.3/zap.c\")\n2. [↑](#cite_ref-2) [zap.c in NetHack 3.4.3, line 1312](/wiki/Source:NetHack_3.4.3/zap.c#line1312 \"Source:NetHack 3.4.3/zap.c\")\n3. [↑](#cite_ref-3) [objclass.h in NetHack 3.4.3, line 15](/wiki/Source:NetHack_3.4.3/objclass.h#line15 \"Source:NetHack 3.4.3/objclass.h\")\n4. [↑](#cite_ref-4) [zap.c in NetHack 3.6.1, line 1552](https://github.com/NetHack/NetHack/blob/NetHack-3.6.1_Release/zap.c#L1552)\n5. [↑](#cite_ref-5) [zap.c in NetHack 3.4.3, line 1333](/wiki/Source:NetHack_3.4.3/zap.c#line1333 \"Source:NetHack 3.4.3/zap.c\"): *recharge count < rn2(7) to see if polymorph increments charge counter on wands*\n6. [↑](#cite_ref-6) [zap.c in NetHack 3.4.3, line 2744](/wiki/Source:NetHack_3.4.3/zap.c#line2744 \"Source:NetHack 3.4.3/zap.c\"): *bhit calls bhitpile for each square/pile*\n7. [↑](#cite_ref-7) [zap.c in NetHack 3.4.3, line 1733](/wiki/Source:NetHack_3.4.3/zap.c#line1733 \"Source:NetHack 3.4.3/zap.c\"): *bhitpile goes through each stack separately, calling bhito--to which a function pointer has been passed in as fhito--to perform the actual polymorph*\n8. [↑](#cite_ref-8) [zap.c in NetHack 3.4.3, line 1515](/wiki/Source:NetHack_3.4.3/zap.c#line1515 \"Source:NetHack 3.4.3/zap.c\"): *bhito calls obj\\_shudders on just one object, and obj\\_shudders does not inspect other items on the square, i.e. in the pile*\n9. [↑](#cite_ref-9) [obj\\_shudders](/wiki/Source:Zap.c#obj_shudders \"Source:Zap.c\") in [zap.c](/wiki/Source:Zap.c \"Source:Zap.c\") (obj\\_shudders determines whether a given stack will shudder.)\n10. [↑](#cite_ref-10) [zap.c in NetHack 3.4.3, line 1162](/wiki/Source:NetHack_3.4.3/zap.c#line1162 \"Source:NetHack 3.4.3/zap.c\"): *do\\_osshock decides whether or not it should make a golem*\n11. [↑](#cite_ref-11) [zap.c in NetHack 3.4.3, line 1160](/wiki/Source:NetHack_3.4.3/zap.c#line1160 \"Source:NetHack 3.4.3/zap.c\"): *poly\\_zapped is a file level static variable, visible to every function in zap.c, −1 means no golem created yet, else it contains the material of the item whose shuddering resulted in golem creation. do\\_osshock checks that its −1 before trying to make a golem.*\n12. [↑](#cite_ref-12) [zap.c in NetHack 3.4.3, line 1519](/wiki/Source:NetHack_3.4.3/zap.c#line1519 \"Source:NetHack 3.4.3/zap.c\"): *if the obj shuddered, bhito exits WITHOUT polymorphing the object.*\n13. [↑](#cite_ref-13) [splitobj](/wiki/Source:Mkobj.c#splitobj \"Source:Mkobj.c\") in [mkobj.c](/wiki/Source:Mkobj.c \"Source:Mkobj.c\") (If any items remained after the shuddering occurred, they will have been reinserted in the item tracking linked list, but they will have been inserted before the deleted ones, and bhitpile will not return to them.)\n14. [↑](#cite_ref-14) [zap.c in NetHack 3.4.3, line 1735](/wiki/Source:NetHack_3.4.3/zap.c#line1735 \"Source:NetHack 3.4.3/zap.c\"): *bhitpile decides the next object before bhito has a chance to call do\\_osshock and destroy/split item stacks.*\n15. [↑](#cite_ref-15) [zap.c in NetHack 3.4.3, line 1521](/wiki/Source:NetHack_3.4.3/zap.c#line1521 \"Source:NetHack 3.4.3/zap.c\"): *poly\\_obj is called AFTER do\\_osshock has finished with the stack.*\n16. [↑](#cite_ref-16) [zap.c in NetHack 3.4.3, line 1312](/wiki/Source:NetHack_3.4.3/zap.c#line1312 \"Source:NetHack 3.4.3/zap.c\"): *poly\\_obj decides whether or not to merge the items in the stack*\n17. [↑](#cite_ref-17) [zap.c in NetHack 3.6.1, line 1561](https://github.com/NetHack/NetHack/blob/NetHack-3.6.1_Release/zap.c#L1561)\n18. [↑](#cite_ref-18) [zap.c in NetHack 3.4.3, line 1076](/wiki/Source:NetHack_3.4.3/zap.c#line1076 \"Source:NetHack 3.4.3/zap.c\"): *golem creation aborted for not enough items*\n19. [↑](#cite_ref-19) [zap.c in NetHack 3.4.3, line 1140](/wiki/Source:NetHack_3.4.3/zap.c#line1140 \"Source:NetHack 3.4.3/zap.c\"): *mons\\[pm\\_index] is a permonst structure, defined in permonst.h, the cwt field is the weight of the monsters corpse, which is defined for golems even though they leave no corpses.*\n20. [↑](#cite_ref-20) [zap.c in NetHack 3.4.3, line 1035](/wiki/Source:NetHack_3.4.3/zap.c#line1035 \"Source:NetHack 3.4.3/zap.c\"): *polyuse doesn't stop absorbing items until minwt is 0, minwt is initialized to golem corpse weight*\n21. [↑](#cite_ref-21) [zap.c in NetHack 3.4.3, line 1054](/wiki/Source:NetHack_3.4.3/zap.c#line1054 \"Source:NetHack 3.4.3/zap.c\"): *not that polyuse is subtracting the QUANTITY of objects from minwt, not the WEIGHT of those objects. iron golems will absorb up to 2000 iron items*\n22. [↑](#cite_ref-22) [zap.c in NetHack 3.4.3, line 1043](/wiki/Source:NetHack_3.4.3/zap.c#line1043 \"Source:NetHack 3.4.3/zap.c\"): *which items are eligible for absorption; note that \"mat\" is the material of the shuddered item stack NOT of the golem created*\n23. [↑](#cite_ref-23) [zap.c in NetHack 3.4.3, line 1160](/wiki/Source:NetHack_3.4.3/zap.c#line1160 \"Source:NetHack 3.4.3/zap.c\"): *once NetHack decides to create a golem it records the shuddering stack's material and stops trying to create golems for additional stacks.*\n24. [↑](#cite_ref-24) [zap.c in NetHack 3.4.3, line 1733](/wiki/Source:NetHack_3.4.3/zap.c#line1733 \"Source:NetHack 3.4.3/zap.c\"): *bhitpile goes through objects forwards through the list*\n25. [↑](#cite_ref-25) [mkobj.c in NetHack 3.4.3, line 1115](/wiki/Source:NetHack_3.4.3/mkobj.c#line1115 \"Source:NetHack 3.4.3/mkobj.c\"): *place\\_object adds dropped objects to the front of the list, where bhitpile will encounter them first.*\n26. [↑](#cite_ref-26) [zap.c in NetHack 3.4.3, line 1038](/wiki/Source:NetHack_3.4.3/zap.c#line1038 \"Source:NetHack 3.4.3/zap.c\"): *resistance check only serves to protect the invocation items and the amulet*\n27. [↑](#cite_ref-27) [zap.c in NetHack 3.4.3, line 1215](/wiki/Source:NetHack_3.4.3/zap.c#line1215 \"Source:NetHack 3.4.3/zap.c\")\n28. [↑](#cite_ref-28) [zap.c in NetHack 3.4.3, line 1319](/wiki/Source:NetHack_3.4.3/zap.c#line1319 \"Source:NetHack 3.4.3/zap.c\"): *no magic lamps*\n29. [↑](#cite_ref-29) [zap.c in NetHack 3.4.3, line 1329](/wiki/Source:NetHack_3.4.3/zap.c#line1329 \"Source:NetHack 3.4.3/zap.c\"): *no wands of wishing or polymorph*\n30. [↑](#cite_ref-30) [zap.c in NetHack 3.4.3, line 1338](/wiki/Source:NetHack_3.4.3/zap.c#line1338 \"Source:NetHack 3.4.3/zap.c\"): *no potions of polymorph*\n31. [↑](#cite_ref-31) [zap.c in NetHack 3.4.3, line 1343](/wiki/Source:NetHack_3.4.3/zap.c#line1343 \"Source:NetHack 3.4.3/zap.c\"): *no spellbooks of polymorph*\n32. [↑](#cite_ref-32) [zap.c in NetHack 3.4.3, line 1225](/wiki/Source:NetHack_3.4.3/zap.c#line1225 \"Source:NetHack 3.4.3/zap.c\"): *mksobj is called with \"artif\" set to false -- no artis*\n33. [↑](#cite_ref-33) [timeout.c in SLASH'EM 0.0.7E7F2, line 455](/wiki/Source:SLASH%27EM_0.0.7E7F2/timeout.c#line455 \"Source:SLASH'EM 0.0.7E7F2/timeout.c\")\n34. [↑](#cite_ref-34) [zap.c in SLASH'EM 0.0.7E7F2, line 1443](/wiki/Source:SLASH%27EM_0.0.7E7F2/zap.c#line1443 \"Source:SLASH'EM 0.0.7E7F2/zap.c\")\n35. [↑](#cite_ref-35) [zap.c in SLASH'EM 0.0.7E7F2, line 1489](/wiki/Source:SLASH%27EM_0.0.7E7F2/zap.c#line1489 \"Source:SLASH'EM 0.0.7E7F2/zap.c\")\n36. [↑](#cite_ref-36) [zap.c in SLASH'EM 0.0.7E7F2, line 1518](/wiki/Source:SLASH%27EM_0.0.7E7F2/zap.c#line1518 \"Source:SLASH'EM 0.0.7E7F2/zap.c\")\n37. [↑](#cite_ref-37) [zap.c in SLASH'EM 0.0.7E7F2, line 1526](/wiki/Source:SLASH%27EM_0.0.7E7F2/zap.c#line1526 \"Source:SLASH'EM 0.0.7E7F2/zap.c\")\n38. [↑](#cite_ref-38) [timeout.c in SLASH'EM 0.0.7E7F2, line 453](/wiki/Source:SLASH%27EM_0.0.7E7F2/timeout.c#line453 \"Source:SLASH'EM 0.0.7E7F2/timeout.c\")\n39. [↑](#cite_ref-39) [timeout.c in SLASH'EM 0.0.7E7F2, line 480](/wiki/Source:SLASH%27EM_0.0.7E7F2/timeout.c#line480 \"Source:SLASH'EM 0.0.7E7F2/timeout.c\")\n40. [↑](#cite_ref-40) [zap.c in SLASH'EM 0.0.7E7F2, line 1374](/wiki/Source:SLASH%27EM_0.0.7E7F2/zap.c#line1374 \"Source:SLASH'EM 0.0.7E7F2/zap.c\")\n41. [↑](#cite_ref-41) [zap.c in NetHack 3.4.3, line 1503](/wiki/Source:NetHack_3.4.3/zap.c#line1503 \"Source:NetHack 3.4.3/zap.c\"): *bhito does a resistance check for each item*\n42. [↑](#cite_ref-42) [zap.c in NetHack 3.4.3, line 1515](/wiki/Source:NetHack_3.4.3/zap.c#line1515 \"Source:NetHack 3.4.3/zap.c\"): *bhito checks for system shocks*\n43. [↑](#cite_ref-43) [zap.c in NetHack 3.4.3, line 1518](/wiki/Source:NetHack_3.4.3/zap.c#line1518 \"Source:NetHack 3.4.3/zap.c\"): *bhito performs a system shock*\n44. [↑](#cite_ref-44) [zap.c in NetHack 3.4.3, line 1521](/wiki/Source:NetHack_3.4.3/zap.c#line1521 \"Source:NetHack 3.4.3/zap.c\"): *bhito calls polyobj*\n45. [↑](#cite_ref-45) [zap.c in NetHack 3.4.3, line 1140](/wiki/Source:NetHack_3.4.3/zap.c#line1140 \"Source:NetHack 3.4.3/zap.c\"): *create\\_polymon calls polyuse*\n\n## External links\n\n- [Breaking wands, cancelling, and polymorphing in NetHack 3.4](http://www.steelypips.org/nethack/343/wan2-343.html)\n\n[![This article may require revision for the next version of NetHack. Click here for more information.](/images/b/b0/Nh343-icon.png)](/wiki/NetHackWiki:Next_version \"This article may require revision for the next version of NetHack. Click here for more information.\")\n\n**This page may need to be updated for the [current version](/wiki/Current_version \"Current version\") of *NetHack*.**\n\nIt may contain text specific to [NetHack 3.4.3](/wiki/NetHack_3.4.3 \"NetHack 3.4.3\"). Information on this page may be out of date.\n\n**Editors:** After reviewing this page and making necessary edits, please change the {{nethack-343}} tag to the current version's tag or {{noversion}} as appropriate.\n","html":"<!DOCTYPE html>\n<html class=\"client-nojs\" lang=\"en\" dir=\"ltr\">\n<head>\n<meta charset=\"UTF-8\"/>\n<title>Polypiling - NetHack Wiki</title>\n<script>document.documentElement.className = document.documentElement.className.replace( /(^|\\s)client-nojs(\\s|$)/, \"$1client-js$2\" );</script>\n<script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({\"wgCanonicalNamespace\":\"\",\"wgCanonicalSpecialPageName\":false,\"wgNamespaceNumber\":0,\"wgPageName\":\"Polypiling\",\"wgTitle\":\"Polypiling\",\"wgCurRevisionId\":169895,\"wgRevisionId\":169895,\"wgArticleId\":3687,\"wgIsArticle\":true,\"wgIsRedirect\":false,\"wgAction\":\"view\",\"wgUserName\":null,\"wgUserGroups\":[\"*\"],\"wgCategories\":[\"Pages with missing directory in Refsrc\",\"Pages with unversioned Function templates\",\"Pages with unversioned Refsrc templates\",\"Todo\",\"Strategy\",\"Nethack-343 articles\"],\"wgBreakFrames\":false,\"wgPageContentLanguage\":\"en\",\"wgPageContentModel\":\"wikitext\",\"wgSeparatorTransformTable\":[\"\",\"\"],\"wgDigitTransformTable\":[\"\",\"\"],\"wgDefaultDateFormat\":\"dmy\",\"wgMonthNames\":[\"\",\"January\",\"February\",\"March\",\"April\",\"May\",\"June\",\"July\",\"August\",\"September\",\"October\",\"November\",\"December\"],\"wgMonthNamesShort\":[\"\",\"Jan\",\"Feb\",\"Mar\",\"Apr\",\"May\",\"Jun\",\"Jul\",\"Aug\",\"Sep\",\"Oct\",\"Nov\",\"Dec\"],\"wgRelevantPageName\":\"Polypiling\",\"wgRelevantArticleId\":3687,\"wgRequestId\":\"4d767703b2616ffca02b2f6b\",\"wgCSPNonce\":false,\"wgIsProbablyEditable\":false,\"wgRelevantPageIsProbablyEditable\":false,\"wgRestrictionEdit\":[],\"wgRestrictionMove\":[],\"wgWikiEditorEnabledModules\":[],\"wgCategoryTreePageCategoryOptions\":\"{\\\"mode\\\":0,\\\"hideprefix\\\":20,\\\"showcount\\\":true,\\\"namespaces\\\":false}\"});mw.loader.state({\"site.styles\":\"ready\",\"noscript\":\"ready\",\"user.styles\":\"ready\",\"user\":\"ready\",\"user.options\":\"ready\",\"user.tokens\":\"loading\",\"ext.cite.styles\":\"ready\",\"mediawiki.legacy.shared\":\"ready\",\"mediawiki.legacy.commonPrint\":\"ready\",\"mediawiki.toc.styles\":\"ready\",\"mediawiki.skinning.interface\":\"ready\",\"skins.vector.styles\":\"ready\"});mw.loader.implement(\"user.tokens@0tffind\",function($,jQuery,require,module){/*@nomin*/mw.user.tokens.set({\"editToken\":\"+\\\\\",\"patrolToken\":\"+\\\\\",\"watchToken\":\"+\\\\\",\"csrfToken\":\"+\\\\\"});\n});RLPAGEMODULES=[\"ext.cite.a11y\",\"site\",\"mediawiki.page.startup\",\"mediawiki.user\",\"mediawiki.page.ready\",\"mediawiki.toc\",\"mediawiki.searchSuggest\",\"skins.vector.js\"];mw.loader.load(RLPAGEMODULES);});</script>\n<link rel=\"stylesheet\" href=\"/load.php?debug=false&amp;lang=en&amp;modules=ext.cite.styles%7Cmediawiki.legacy.commonPrint%2Cshared%7Cmediawiki.skinning.interface%7Cmediawiki.toc.styles%7Cskins.vector.styles&amp;only=styles&amp;skin=vector\"/>\n<script async=\"\" src=\"/load.php?debug=false&amp;lang=en&amp;modules=startup&amp;only=scripts&amp;skin=vector\"></script>\n<meta name=\"ResourceLoaderDynamicStyles\" content=\"\"/>\n<link rel=\"stylesheet\" href=\"/load.php?debug=false&amp;lang=en&amp;modules=site.styles&amp;only=styles&amp;skin=vector\"/>\n<meta name=\"generator\" content=\"MediaWiki 1.32.5\"/>\n<meta name=\"description\" content=\"In NetHack, polypiling is the action of polymorphing a pile of items in hopes of getting some useful items as a result. Objects polypiled are often referred to as polyfodder and usually consist of junk. Polymorph can be caused by a spell, wand, or potion of polymorph.\"/>\n<link rel=\"image_src\" href=\"/images/6/65/Nethackwiki-logo.png\"/>\n<link rel=\"shortcut icon\" href=\"/images/6/64/Favicon.ico\"/>\n<link rel=\"search\" type=\"application/opensearchdescription+xml\" href=\"/opensearch_desc.php\" title=\"NetHackWiki\"/>\n<link rel=\"EditURI\" type=\"application/rsd+xml\" href=\"https://nethackwiki.com/api.php?action=rsd\"/>\n<link rel=\"canonical\" href=\"/wiki/Polypiling\"/>\n<!--[if lt IE 9]><script src=\"/load.php?debug=false&amp;lang=en&amp;modules=html5shiv&amp;only=scripts&amp;skin=vector&amp;sync=1\"></script><![endif]-->\n</head>\n<body class=\"mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Polypiling rootpage-Polypiling skin-vector action-view\">\t\t<div id=\"mw-page-base\" class=\"noprint\"></div>\n\t\t<div id=\"mw-head-base\" class=\"noprint\"></div>\n\t\t<div id=\"content\" class=\"mw-body\" role=\"main\">\n\t\t\t<a id=\"top\"></a>\n\t\t\t<div class=\"mw-indicators mw-body-content\">\n</div>\n<h1 id=\"firstHeading\" class=\"firstHeading\" lang=\"en\">Polypiling</h1>\t\t\t<div id=\"bodyContent\" class=\"mw-body-content\">\n\t\t\t\t<div id=\"siteSub\" class=\"noprint\">From NetHackWiki</div>\t\t\t\t<div id=\"contentSub\"></div>\n\t\t\t\t<div id=\"jump-to-nav\"></div>\t\t\t\t<a class=\"mw-jump-link\" href=\"#mw-head\">Jump to navigation</a>\n\t\t\t\t<a class=\"mw-jump-link\" href=\"#p-search\">Jump to search</a>\n\t\t\t\t<div id=\"mw-content-text\" lang=\"en\" dir=\"ltr\" class=\"mw-content-ltr\"><div class=\"mw-parser-output\"><div class=\"languages\"><b><a class=\"mw-selflink selflink\">English</a></b>\n<p><span></span>\n<span></span>\n<span></span>\n&#160;&#8226;&#32;<span lang=\"ko\"><a href=\"/wiki/Polypiling/ko\" title=\"Polypiling/ko\">한국어</a></span>\n</p>\n<span></span></div>\n<p>In <i><a href=\"/wiki/NetHack\" title=\"NetHack\">NetHack</a></i>, <b>polypiling</b> is the action of <a href=\"/wiki/Polymorph\" title=\"Polymorph\">polymorphing</a> a pile of <a href=\"/wiki/Item\" title=\"Item\">items</a> in hopes of getting some useful items as a result. Objects polypiled are often referred to as <b>polyfodder</b> and usually consist of <a href=\"/wiki/Junk\" title=\"Junk\">junk</a>. Polymorph can be caused by a <a href=\"/wiki/Spellbook_of_polymorph\" title=\"Spellbook of polymorph\">spell</a>, <a href=\"/wiki/Wand_of_polymorph\" title=\"Wand of polymorph\">wand</a>, or <a href=\"/wiki/Potion_of_polymorph\" title=\"Potion of polymorph\">potion</a> of polymorph.\n</p><p>Polypiling has its drawbacks: Polyfodder may be destroyed, and hostile <a href=\"/wiki/Golem\" title=\"Golem\">golems</a> may be generated. The exact mechanics of item destruction are rather complex, but understanding them is important if you want to get the most out of your resources - see <a href=\"#Probability_of_item_loss_and_golem_generation\">the next section</a> for more details.\n</p>\n<div id=\"toc\" class=\"toc\"><input type=\"checkbox\" role=\"button\" id=\"toctogglecheckbox\" class=\"toctogglecheckbox\" style=\"display:none\" /><div class=\"toctitle\" lang=\"en\" dir=\"ltr\"><h2>Contents</h2><span class=\"toctogglespan\"><label class=\"toctogglelabel\" for=\"toctogglecheckbox\"></label></span></div>\n<ul>\n<li class=\"toclevel-1 tocsection-1\"><a href=\"#Introduction\"><span class=\"tocnumber\">1</span> <span class=\"toctext\">Introduction</span></a></li>\n<li class=\"toclevel-1 tocsection-2\"><a href=\"#Probability_of_item_loss_and_golem_generation\"><span class=\"tocnumber\">2</span> <span class=\"toctext\">Probability of item loss and golem generation</span></a>\n<ul>\n<li class=\"toclevel-2 tocsection-3\"><a href=\"#Shuddering\"><span class=\"tocnumber\">2.1</span> <span class=\"toctext\">Shuddering</span></a></li>\n<li class=\"toclevel-2 tocsection-4\"><a href=\"#Golem_absorption_and_types\"><span class=\"tocnumber\">2.2</span> <span class=\"toctext\">Golem absorption and types</span></a></li>\n<li class=\"toclevel-2 tocsection-5\"><a href=\"#Artifacts\"><span class=\"tocnumber\">2.3</span> <span class=\"toctext\">Artifacts</span></a></li>\n<li class=\"toclevel-2 tocsection-6\"><a href=\"#Summary_of_polyfodder_destruction\"><span class=\"tocnumber\">2.4</span> <span class=\"toctext\">Summary of polyfodder destruction</span></a></li>\n</ul>\n</li>\n<li class=\"toclevel-1 tocsection-7\"><a href=\"#Probability_of_item_transformation\"><span class=\"tocnumber\">3</span> <span class=\"toctext\">Probability of item transformation</span></a></li>\n<li class=\"toclevel-1 tocsection-8\"><a href=\"#Forbidden_items\"><span class=\"tocnumber\">4</span> <span class=\"toctext\">Forbidden items</span></a></li>\n<li class=\"toclevel-1 tocsection-9\"><a href=\"#Strategy\"><span class=\"tocnumber\">5</span> <span class=\"toctext\">Strategy</span></a>\n<ul>\n<li class=\"toclevel-2 tocsection-10\"><a href=\"#General_tips\"><span class=\"tocnumber\">5.1</span> <span class=\"toctext\">General tips</span></a></li>\n<li class=\"toclevel-2 tocsection-11\"><a href=\"#Preparing\"><span class=\"tocnumber\">5.2</span> <span class=\"toctext\">Preparing</span></a></li>\n<li class=\"toclevel-2 tocsection-12\"><a href=\"#When_to_polypile\"><span class=\"tocnumber\">5.3</span> <span class=\"toctext\">When to polypile</span></a></li>\n<li class=\"toclevel-2 tocsection-13\"><a href=\"#When_not_to_polypile\"><span class=\"tocnumber\">5.4</span> <span class=\"toctext\">When not to polypile</span></a></li>\n</ul>\n</li>\n<li class=\"toclevel-1 tocsection-14\"><a href=\"#Stacking_strategies\"><span class=\"tocnumber\">6</span> <span class=\"toctext\">Stacking strategies</span></a>\n<ul>\n<li class=\"toclevel-2 tocsection-15\"><a href=\"#Seven_small_piles\"><span class=\"tocnumber\">6.1</span> <span class=\"toctext\">Seven small piles</span></a>\n<ul>\n<li class=\"toclevel-3 tocsection-16\"><a href=\"#Step_by_step\"><span class=\"tocnumber\">6.1.1</span> <span class=\"toctext\">Step by step</span></a></li>\n<li class=\"toclevel-3 tocsection-17\"><a href=\"#Explanation\"><span class=\"tocnumber\">6.1.2</span> <span class=\"toctext\">Explanation</span></a></li>\n</ul>\n</li>\n<li class=\"toclevel-2 tocsection-18\"><a href=\"#One_large_pile\"><span class=\"tocnumber\">6.2</span> <span class=\"toctext\">One large pile</span></a>\n<ul>\n<li class=\"toclevel-3 tocsection-19\"><a href=\"#Step_by_step_2\"><span class=\"tocnumber\">6.2.1</span> <span class=\"toctext\">Step by step</span></a></li>\n<li class=\"toclevel-3 tocsection-20\"><a href=\"#Explanation_2\"><span class=\"tocnumber\">6.2.2</span> <span class=\"toctext\">Explanation</span></a></li>\n<li class=\"toclevel-3 tocsection-21\"><a href=\"#One_large_pile_with_meatballs\"><span class=\"tocnumber\">6.2.3</span> <span class=\"toctext\">One large pile with meatballs</span></a></li>\n</ul>\n</li>\n</ul>\n</li>\n<li class=\"toclevel-1 tocsection-22\"><a href=\"#Variants\"><span class=\"tocnumber\">7</span> <span class=\"toctext\">Variants</span></a>\n<ul>\n<li class=\"toclevel-2 tocsection-23\"><a href=\"#SLASH.27EM\"><span class=\"tocnumber\">7.1</span> <span class=\"toctext\">SLASH'EM</span></a></li>\n<li class=\"toclevel-2 tocsection-24\"><a href=\"#SlashTHEM\"><span class=\"tocnumber\">7.2</span> <span class=\"toctext\">SlashTHEM</span></a></li>\n</ul>\n</li>\n<li class=\"toclevel-1 tocsection-25\"><a href=\"#Code\"><span class=\"tocnumber\">8</span> <span class=\"toctext\">Code</span></a></li>\n<li class=\"toclevel-1 tocsection-26\"><a href=\"#References\"><span class=\"tocnumber\">9</span> <span class=\"toctext\">References</span></a></li>\n<li class=\"toclevel-1 tocsection-27\"><a href=\"#External_links\"><span class=\"tocnumber\">10</span> <span class=\"toctext\">External links</span></a></li>\n</ul>\n</div>\n\n<h2><span class=\"mw-headline\" id=\"Introduction\">Introduction</span></h2>\n<p>When considering polypiling, it is important to distinguish <i>stacks</i> of items, which are all of one type (e.g., \"4 <a href=\"/wiki/Blessed\" class=\"mw-redirect\" title=\"Blessed\">blessed</a> <a href=\"/wiki/Scroll_of_blank_paper\" title=\"Scroll of blank paper\">scrolls of blank paper</a>\"), from <i>piles</i> of items, which are all of the items on the floor in one <a href=\"/wiki/Square\" title=\"Square\">square</a>. The terms <i>stack</i> and <i>pile</i> will be used rigorously on this page.\n</p><p>The spell and wand supply a beam with a random range between 6 and 13 (long enough to hit 3 to 7 piles if they are all in line and contiguous and you are adjacent to the first) so you can work on several piles at once. A <a href=\"/wiki/Potion_of_polymorph\" title=\"Potion of polymorph\">potion of polymorph</a> works on one item stack at a time, the item stack you dip into it.\n</p><p>Polymorphed items do not change item class: Potions will always yield potions, scrolls will yield scrolls, armor will always yield armor, etc. - the exception to this is polymorphing a <a href=\"/wiki/Crocodile\" title=\"Crocodile\">crocodile</a> <a href=\"/wiki/Corpse\" title=\"Corpse\">corpse</a>, which will yield a pair of non-<a href=\"/wiki/Cursed\" class=\"mw-redirect\" title=\"Cursed\">cursed</a> <a href=\"/wiki/Fireproof\" class=\"mw-redirect\" title=\"Fireproof\">fireproof</a> +0 <a href=\"/wiki/Low_boots\" title=\"Low boots\">low boots</a> instead of another <a href=\"/wiki/Comestible\" title=\"Comestible\">comestible</a>. <a href=\"/wiki/Stackable\" title=\"Stackable\">Stackable</a> <a href=\"/wiki/Weapons\" class=\"mw-redirect\" title=\"Weapons\">weapons</a> and <a href=\"/wiki/Tools\" class=\"mw-redirect\" title=\"Tools\">tools</a> can \"merge\" into non-stackable ones (e.g. a stack of 4 daggers morphing into a single long sword); other stackable objects are not subject to this.<sup id=\"cite_ref-1\" class=\"reference\"><a href=\"#cite_note-1\">&#91;1&#93;</a></sup><sup id=\"cite_ref-2\" class=\"reference\"><a href=\"#cite_note-2\">&#91;2&#93;</a></sup><sup id=\"cite_ref-3\" class=\"reference\"><a href=\"#cite_note-3\">&#91;3&#93;</a></sup> <a href=\"/wiki/Unicorn_horn\" title=\"Unicorn horn\">Unicorn horns</a> are especially popular polyfodder because they may polymorph into other <a href=\"/wiki/Magical_tool\" class=\"mw-redirect\" title=\"Magical tool\">magical tools</a>, such as <a href=\"/wiki/Magic_marker\" title=\"Magic marker\">magic markers</a>. Another useful thing to do if you gain polymorph in the early game is to polypile <a href=\"/wiki/Spellbook\" title=\"Spellbook\">spellbooks</a>. Polymorphing retains the <a href=\"/wiki/Charge\" class=\"mw-redirect\" title=\"Charge\">charges</a> and <a href=\"/wiki/Enchantment\" title=\"Enchantment\">enchantment</a> of polymorphed items.\n</p><p>When polymorphing <a href=\"/wiki/Wand\" title=\"Wand\">wands</a> and spellbooks, their quality degrades. A spellbook will act as if it had been <a href=\"/wiki/Read\" title=\"Read\">read</a> once more. If the book's combined read/polymorph-count is four or more, it will turn into a blank spellbook counted as read 0&#8211;3 times;<sup id=\"cite_ref-4\" class=\"reference\"><a href=\"#cite_note-4\">&#91;4&#93;</a></sup> it will thus subsequently be able to be polymorphed into a non-blank spellbook with 75% chance.\n</p><p>Likewise, a wand may count as if it had been <a href=\"/wiki/Charging#wands\" title=\"Charging\">recharged</a>, increasing the chance of an explosion if you attempt to recharge it; thus, it is not generally worthwhile to polypile empty wands, even if they become something worth charging, the chances of the new wand exploding instead of <a href=\"/wiki/Charging\" title=\"Charging\">charging</a> are already higher than normal. The chance of a wand's charge counter being incremented by polymorphing it is <span class=\"sfrac nowrap\"><span style=\"display:inline-block; vertical-align:-0.5em; font-size:85%; text-align:center;\"><span style=\"display:block; line-height:1em; margin:0 0.1em;\">6 &#8722; <var>x</var></span><span style=\"display:block; line-height:1em; margin:0 0.1em; border-top:1px solid;\">7</span></span></span> where <var>x</var> is the number of times the wand has been recharged.<sup id=\"cite_ref-5\" class=\"reference\"><a href=\"#cite_note-5\">&#91;5&#93;</a></sup>\n</p><p>The recharge count of <a href=\"/wiki/Tool\" title=\"Tool\">tools</a> is not affected by polymorphing them, unless the tool becomes a <a href=\"/wiki/Magic_marker\" title=\"Magic marker\">magic marker</a>, in which case its charge counter will be set to 1.\n</p><p>Polypiling items that belong to a <a href=\"/wiki/Shopkeeper\" title=\"Shopkeeper\">shopkeeper</a> can anger the shopkeeper.\n</p>\n<h2><span class=\"mw-headline\" id=\"Probability_of_item_loss_and_golem_generation\">Probability of item loss and golem generation</span></h2>\n<p>The polymorph <a href=\"/wiki/Beam\" title=\"Beam\">beam</a> generated by the wand and spell acts on each pile separately.<sup id=\"cite_ref-6\" class=\"reference\"><a href=\"#cite_note-6\">&#91;6&#93;</a></sup> \n</p><p>First, each item stack in the pile has a chance of resisting, which is 5% for normal items and 95% for artifacts; <a href=\"/wiki/Unique_item\" title=\"Unique item\">unique items</a> cannot shudder, polymorph, or be absorbed by forming golems.\n</p>\n<div class=\"todo\">\n<p>A user has suggested improving this page or section as follows:\n</p><p><i>\"List which materials can produce specific golems.\"</i>\n</p>\n</div>\n<h3><span class=\"mw-headline\" id=\"Shuddering\">Shuddering</span></h3>\n<p>Then, each item stack that did not resist has a chance of \"shuddering\" (i.e., undergoing a <a href=\"/wiki/System_shock\" title=\"System shock\">system shock</a>).<sup id=\"cite_ref-7\" class=\"reference\"><a href=\"#cite_note-7\">&#91;7&#93;</a></sup><sup id=\"cite_ref-8\" class=\"reference\"><a href=\"#cite_note-8\">&#91;8&#93;</a></sup>\n</p><p>The probability of an item stack undergoing <a href=\"/wiki/System_shock\" title=\"System shock\">system shock</a> depends on its <a href=\"/wiki/BUC_status\" class=\"mw-redirect\" title=\"BUC status\">BUC status</a>, unless it is a <a href=\"/wiki/Wand\" title=\"Wand\">wand</a>, and its size, as follows:<sup id=\"cite_ref-9\" class=\"reference\"><a href=\"#cite_note-9\">&#91;9&#93;</a></sup>\n</p>\n<ul><li>For stacks of less than 5 items:\n<ul><li>Blessed non-wand: <sup>1</sup>&#8260;<sub>12</sub></li>\n<li>Uncursed non-wand: <sup>1</sup>&#8260;<sub>8</sub></li>\n<li>Wand of any BUC or stack of any cursed items: <sup>1</sup>&#8260;<sub>3</sub></li></ul></li></ul>\n<ul><li>For stacks of 5 items or more:\n<ul><li>Blessed: <sup>1</sup>&#8260;<sub>6</sub></li>\n<li>Uncursed: <sup>1</sup>&#8260;<sub>4</sub></li>\n<li>Cursed: 1</li></ul></li></ul>\n<p>When a stack shudders, it loses 1d(items in stack &#8722; 1) items, except in the case of single items, which are always destroyed.\n</p><p>For each item stack in the pile that undergoes a system shock, there is a chance of a <a href=\"/wiki/Golem\" title=\"Golem\">golem</a> being created. For each item in a shuddering stack (counting those items destroyed by the shock itself) there is a <span class=\"sfrac nowrap\"><span style=\"display:inline-block; vertical-align:-0.5em; font-size:85%; text-align:center;\"><span style=\"display:block; line-height:1em; margin:0 0.1em;\">1</span><span style=\"display:block; line-height:1em; margin:0 0.1em; border-top:1px solid;\"><a href=\"/wiki/Luck\" title=\"Luck\">luck</a> + 45</span></span></span> probability of creating a <a href=\"/wiki/Golem\" title=\"Golem\">golem</a>.<sup id=\"cite_ref-10\" class=\"reference\"><a href=\"#cite_note-10\">&#91;10&#93;</a></sup> A <span class=\"sfrac nowrap\"><span style=\"display:inline-block; vertical-align:-0.5em; font-size:85%; text-align:center;\"><span style=\"display:block; line-height:1em; margin:0 0.1em;\">1</span><span style=\"display:block; line-height:1em; margin:0 0.1em; border-top:1px solid;\"><a href=\"/wiki/Luck\" title=\"Luck\">luck</a> + 45</span></span></span> chance for each item means the chance that a stack generates a golem is approximately <span class=\"sfrac nowrap\"><span style=\"display:inline-block; vertical-align:-0.5em; font-size:85%; text-align:center;\"><span style=\"display:block; line-height:1em; margin:0 0.1em;\"><var>s</var></span><span style=\"display:block; line-height:1em; margin:0 0.1em; border-top:1px solid;\"><a href=\"/wiki/Luck\" title=\"Luck\">luck</a> + 45</span></span></span> for small <var>s</var>. No more than one golem can be created per pile.<sup id=\"cite_ref-11\" class=\"reference\"><a href=\"#cite_note-11\">&#91;11&#93;</a></sup> However, even after NetHack has decided to create a golem, additional stacks in the pile can shudder. \n</p><p>If an item stack shuddered, even if some of the items that were in the stack remain, it will <i>not</i> be polymorphed. The rest of the stacks in the pile still have a chance of being polymorphed.<sup id=\"cite_ref-12\" class=\"reference\"><a href=\"#cite_note-12\">&#91;12&#93;</a></sup><sup id=\"cite_ref-13\" class=\"reference\"><a href=\"#cite_note-13\">&#91;13&#93;</a></sup><sup id=\"cite_ref-14\" class=\"reference\"><a href=\"#cite_note-14\">&#91;14&#93;</a></sup><sup id=\"cite_ref-15\" class=\"reference\"><a href=\"#cite_note-15\">&#91;15&#93;</a></sup>\n</p><p>For any stack that did not shudder, the polymorph process continues. There is a (number of items in stack/1000) probability that the entire stack merges into a single item.<sup id=\"cite_ref-16\" class=\"reference\"><a href=\"#cite_note-16\">&#91;16&#93;</a></sup>\n</p><p>Additionally, when attempting to polypile <a href=\"/wiki/Rock\" title=\"Rock\">rocks</a> or <a href=\"/wiki/Gray_stone\" title=\"Gray stone\">gray stones</a> into <a href=\"/wiki/Gem\" title=\"Gem\">gems</a> or <a href=\"/wiki/Worthless_glass\" class=\"mw-redirect\" title=\"Worthless glass\">worthless glass</a>, an 1d4 is rolled against stack size; if the stack is larger, transmutation \"backfires\", destroying half of the stack and turning the rest into rocks unconditionally.<sup id=\"cite_ref-17\" class=\"reference\"><a href=\"#cite_note-17\">&#91;17&#93;</a></sup>\n</p><p>The actual polymorph is now performed. See <a href=\"/wiki/Polypile#Probability_of_item_transformation\" class=\"mw-redirect\" title=\"Polypile\">the next section</a> for exactly what your item stack will be turning into.\n</p><p>This process is repeated for each item stack in the pile.\n</p>\n<h3><span class=\"mw-headline\" id=\"Golem_absorption_and_types\">Golem absorption and types</span></h3>\n<p>If a golem is created from any stack in a pile, it can \"absorb\" additional item stacks in the pile, destroying them. The material destroyed by the golem is separate from that destroyed by the original system shock(s). If, after every stack has been polymorphed, zero or one item remains in the pile (due perhaps to bad system shocks), golem creation is aborted, if it had been planned at all. According to a comment in the source: \"no golems if you zap only one object – not enough stuff\".<sup id=\"cite_ref-18\" class=\"reference\"><a href=\"#cite_note-18\">&#91;18&#93;</a></sup> (This comment is slightly inaccurate; it's possible to zap several items, reach this point in the code, and have the material check fail because all or all but one of the items were destroyed by system shocks.)\n</p><p>The golem will attempt to absorb a number of individual items (not item stacks, \"4 scrolls\" counts for 4, not 1), equal to its weight.<sup id=\"cite_ref-19\" class=\"reference\"><a href=\"#cite_note-19\">&#91;19&#93;</a></sup><sup id=\"cite_ref-20\" class=\"reference\"><a href=\"#cite_note-20\">&#91;20&#93;</a></sup><sup id=\"cite_ref-21\" class=\"reference\"><a href=\"#cite_note-21\">&#91;21&#93;</a></sup> Only items that are made of the same <a href=\"/wiki/Material\" title=\"Material\">material</a> as the item stack whose shuddering cause the golem to form are eligible for absorption. For instance, if a mithril-coat shudders and results in an iron golem, that iron golem will absorb other mithril items on the pile, but leave iron items untouched. Each eligible item stack has a 1 in (golem weight + 1) chance of escaping absorption. Given the high weights of golems, 400 for straw and paper up to 2000 for iron, it is highly unlikely that any eligible item will survive this process. Also, this absorption occurs after the items have been polymorphed. If a mithril item shudders and creates an iron golem, and several other mithril objects on the pile are polymorphed into other materials, e.g. leather coats or iron helmets, they will <i>not</i> be absorbed, though any leather coats or iron helmets polymorphed into mithril items <i>will</i> be absorbed.<sup id=\"cite_ref-22\" class=\"reference\"><a href=\"#cite_note-22\">&#91;22&#93;</a></sup>\n</p><p>Each stack in a pile is polymorphed separately, in order of the most recently dropped, and the type of golem is determined by the material of the first item stack to shudder and result in golem creation.<sup id=\"cite_ref-23\" class=\"reference\"><a href=\"#cite_note-23\">&#91;23&#93;</a></sup><sup id=\"cite_ref-24\" class=\"reference\"><a href=\"#cite_note-24\">&#91;24&#93;</a></sup><sup id=\"cite_ref-25\" class=\"reference\"><a href=\"#cite_note-25\">&#91;25&#93;</a></sup> This is exploitable; see <a href=\"#One_large_pile\">§&#160;One large pile</a> for details.\n</p>\n<h3><span class=\"mw-headline\" id=\"Artifacts\">Artifacts</span></h3>\n<p><a href=\"/wiki/Artifact\" title=\"Artifact\">Artifacts</a> have a 95% chance of resisting. (Compare to 5% for normal items.) If this 95% chance fails, they are polymorphed just like every other item, first undergoing a shuddering check and then, if they aren't destroyed, undergoing a polymorph to a random non-artifact weapon. Artifacts have <i>no</i> resistance to being absorbed by a forming golem. Excalibur may be mostly safe from shuddering or polymorphing atop that pile of iron junk, but if an iron golem forms it is virtually guaranteed that Excalibur will be destroyed.<sup id=\"cite_ref-26\" class=\"reference\"><a href=\"#cite_note-26\">&#91;26&#93;</a></sup>\n</p>\n<h3><span class=\"mw-headline\" id=\"Summary_of_polyfodder_destruction\">Summary of polyfodder destruction</span></h3>\n<p>This process, from the resistance check to here, is repeated for each pile hit by the beam.\n</p><p>In other words, there are 3 ways polyfodder can be destroyed:\n</p>\n<ul><li>Shuddering, the probability of which is decreased by blessing, polymorphing items other than wands, and keep the size of individual stacks under 4.</li>\n<li>Merging, the probability of which is reduced by lowering the size of individual stacks.</li>\n<li>Stackable weapons and tools merging into non-stackables (separate from the n/1000 chance outlined above), which is mitigated by lowering stack size of weapons and tools.</li>\n<li>Absorption into forming golems, the probability of which is reduced by:\n<ul><li>Increasing your luck, reducing the chance of golem formation.</li>\n<li>Reducing the size of the individual item stacks, reducing the chance of golem formation.</li>\n<li>Reducing the number of item stacks on the pile, reducing the number of opportunities for golems to form.</li>\n<li>Limiting the number of items on the pile that are made of the same material, reducing the number of items a forming golem can absorb.\n<ul><li>In particular, the items on the top of the pile, the ones you drop last, should be a different material than the most valuable items in the pile. Potential golems will likely be made out of the material of the top items, not the material of the valuable items. Thus the valuable items will survive while the cheaper ones are destroyed. See <a href=\"#One_large_pile\">§&#160;One large pile</a> for details.</li></ul></li></ul></li></ul>\n<h2><span class=\"mw-headline\" id=\"Probability_of_item_transformation\">Probability of item transformation</span></h2>\n<p>When polymorphing a <a href=\"/wiki/Magical_object\" class=\"mw-redirect\" title=\"Magical object\">magical object</a>, the game will try to change it into another random magical object, retrying up to two times if the replacement would be non-magical.<sup id=\"cite_ref-27\" class=\"reference\"><a href=\"#cite_note-27\">&#91;27&#93;</a></sup> The third item generated will be used, regardless if it is magical. The reverse is true when polymorphing a non-magical object. The upshot is that a magical object has a significantly higher probability than a non-magical object of turning into another magical object. So don't expect many magic markers from polypiling pick-axes and mirrors; you will have much better odds polypiling unicorn horns. The exceptions are potions of water, blank scrolls, blank spellbooks, and wands of nothing, all of which have a high chance of becoming more-useful items of the same type. As mentioned above, blessed items have only a 1/12 chance of undergoing system shock, so blessing your polypile items is definitely worth the expenditure if you have a surplus of holy water.\n</p>\n<div class=\"todo\">\n<p>A user has suggested improving this page or section as follows:\n</p><p><i>\"Numbers for rings (and scrolls?) would be nice.\"</i>\n</p>\n</div>\n<table class=\"prettytable\">\n<tbody><tr>\n<th>Class</th>\n<th>Magical → Non-magical</th>\n<th>Non-magical → Magical\n</th></tr>\n<tr>\n<td><a href=\"/wiki/Armor\" title=\"Armor\">Armor</a></td>\n<td>54%</td>\n<td>0.60%\n</td></tr>\n<tr>\n<td><a href=\"/wiki/Gem\" title=\"Gem\">Gem</a></td>\n<td>92%</td>\n<td>negligible\n</td></tr>\n<tr>\n<td><a href=\"/wiki/Potion\" title=\"Potion\">Potion</a></td>\n<td>1.70%</td>\n<td>41%\n</td></tr>\n<tr>\n<td><a href=\"/wiki/Spellbook\" title=\"Spellbook\">Spellbook</a></td>\n<td>negligible</td>\n<td>95%\n</td></tr>\n<tr>\n<td><a href=\"/wiki/Tool\" title=\"Tool\">Tool</a></td>\n<td>60%</td>\n<td>0.30%\n</td></tr>\n<tr>\n<td><a href=\"/wiki/Wand\" title=\"Wand\">Wand</a></td>\n<td>negligible</td>\n<td>93%\n</td></tr></tbody></table>\n<h2><span class=\"mw-headline\" id=\"Forbidden_items\">Forbidden items</span></h2>\n<p>The following items cannot be produced by polymorph:\n</p>\n<ul><li><a href=\"/wiki/Magic_lamp\" title=\"Magic lamp\">magic lamp</a><sup id=\"cite_ref-28\" class=\"reference\"><a href=\"#cite_note-28\">&#91;28&#93;</a></sup></li>\n<li><a href=\"/wiki/Wand_of_wishing\" title=\"Wand of wishing\">wand of wishing</a></li>\n<li><a href=\"/wiki/Wand_of_polymorph\" title=\"Wand of polymorph\">wand of polymorph</a><sup id=\"cite_ref-29\" class=\"reference\"><a href=\"#cite_note-29\">&#91;29&#93;</a></sup></li>\n<li><a href=\"/wiki/Potion_of_polymorph\" title=\"Potion of polymorph\">potion of polymorph</a><sup id=\"cite_ref-30\" class=\"reference\"><a href=\"#cite_note-30\">&#91;30&#93;</a></sup></li>\n<li><a href=\"/wiki/Spellbook_of_polymorph\" title=\"Spellbook of polymorph\">spellbook of polymorph</a><sup id=\"cite_ref-31\" class=\"reference\"><a href=\"#cite_note-31\">&#91;31&#93;</a></sup></li>\n<li><a href=\"/wiki/Artifact\" title=\"Artifact\">artifacts</a><sup id=\"cite_ref-32\" class=\"reference\"><a href=\"#cite_note-32\">&#91;32&#93;</a></sup></li>\n<li>any item not normally randomly generated, such as <a href=\"/wiki/Athame\" title=\"Athame\">athames</a> and <a href=\"/wiki/Fedora\" title=\"Fedora\">fedoras</a></li></ul>\n<p>The following items cannot be polymorphed:\n</p>\n<ul><li><a href=\"/wiki/Rider\" class=\"mw-redirect\" title=\"Rider\">Rider</a> corpses</li>\n<li><a href=\"/wiki/Wand_of_polymorph\" title=\"Wand of polymorph\">wand of polymorph</a></li>\n<li><a href=\"/wiki/Potion_of_polymorph\" title=\"Potion of polymorph\">potion of polymorph</a></li>\n<li><a href=\"/wiki/Spellbook_of_polymorph\" title=\"Spellbook of polymorph\">spellbook of polymorph</a></li></ul>\n<h2><span class=\"mw-headline\" id=\"Strategy\">Strategy</span></h2>\n<p>Polypiling is often used to get <a href=\"/wiki/Ascension_kit\" title=\"Ascension kit\">ascension kit</a> <a href=\"/wiki/Armor\" title=\"Armor\">armor</a> (and completed by <a href=\"/wiki/Wish\" title=\"Wish\">wishing</a>). Therefore, you might want to collect all those <a href=\"/wiki/Elven_cloak\" title=\"Elven cloak\">elven cloaks</a> and <a href=\"/wiki/Elven_boots\" title=\"Elven boots\">boots</a> in the game.\n</p><p>Polypiling is most often used by <a href=\"/wiki/Conduct\" title=\"Conduct\">conduct</a> players who need certain items: It can substitute for wishing, <a href=\"/wiki/Prayer\" title=\"Prayer\">prayer</a> and <a href=\"/wiki/Sacrifice\" title=\"Sacrifice\">sacrifice</a> benefits, or <a href=\"/wiki/Illiterate\" title=\"Illiterate\">literacy</a>, and it can be done relatively safely. Generated monsters offer an almost unlimited supply of polyfodder. However, polypiling is time-consuming and tedious. Generally, it is not worth it unless you are trying for conducts, or unless you are looking for many items at once.\n</p><p>Over-preparing is the other common reason for polypiling. This goes for many first ascenders, <a href=\"/wiki/Pacifist\" title=\"Pacifist\">pacifist</a> characters who want the most <a href=\"/wiki/Protection\" title=\"Protection\">protection</a>, or even an attempt to get a very high score by polypiling rocks into gems.\n</p>\n<h3><span class=\"mw-headline\" id=\"General_tips\">General tips</span></h3>\n<ul><li>Never handle both polyfodder and items you want to keep in your main inventory at the same time, and never ever drop anything useful on your polypile line. People have wondered where their <a href=\"/wiki/Bag_of_holding\" title=\"Bag of holding\">bag of holding</a> with all the artifacts went.</li>\n<li>Even if you do not care about polyfodder loss, #name rocks to get stacks of at most four. There is a limit to how many gems can be created.</li>\n<li>Max out your <a href=\"/wiki/Luck\" title=\"Luck\">luck</a> to minimize golem creation. That reduces the total material lost. This is particular useful for larger stacks and piles, where any golem will do comparatively more damage. Do not max your luck if using the <a href=\"#One_large_pile\">one large pile strategy below</a>.</li>\n<li>Configure <a href=\"/wiki/Autopickup_exception\" title=\"Autopickup exception\">autopickup exceptions</a> to pick up good morphs and your want-to-keeps from the pile.</li>\n<li>Polypile your items near a <a href=\"/wiki/General_store\" class=\"mw-redirect\" title=\"General store\">general store</a> to help identify good morphs. Be <i>very</i> careful of polypiling in a store; if any of the shopkeeper's items are polymorphed, they will become angry and attack you without giving you a chance to pay.</li>\n<li>Familiarize yourself with the ways polyfodder is lost to determine how much risk to take on, given your available polyfodder and the amount of polypile sources you have available to you. Your patience is also a factor, perfect optimization is time consuming and tedious.</li></ul>\n<h3><span class=\"mw-headline\" id=\"Preparing\">Preparing</span></h3>\n<ul><li>To minimize loss, it is a good idea to mass-<a href=\"/wiki/Bless\" class=\"mw-redirect\" title=\"Bless\">bless</a> magical polyfodder, which is much less abundant than ordinary junk. <a href=\"/wiki/Potion\" title=\"Potion\">Potions</a> and <a href=\"/wiki/Scroll\" title=\"Scroll\">scrolls</a> can be <a href=\"/wiki/Cancel\" class=\"mw-redirect\" title=\"Cancel\">canceled</a> so they will <a href=\"/wiki/Stack\" class=\"mw-redirect\" title=\"Stack\">stack</a>, and then dipped in <a href=\"/wiki/Potion_of_holy_water\" title=\"Potion of holy water\">holy water</a>. Name and separate them into stacks of at most four items before polymorphing. Only armor and weapons (and wands) retain their enchantment; these should be canceled if negative before blessing. A large stack of <a href=\"/wiki/Dart\" title=\"Dart\">darts</a> can be enchanted to +7 in one go and then polypiled individually for potentially powerful weapons. Magical armor and tools tend to become non-magical rather than shuddering, so there is no point blessing them.\n<ul><li>Non-stackables, such as <a href=\"/wiki/Ring\" title=\"Ring\">rings</a>, require more work to bless. Often, it is not worth the costs. The most efficient way is with a blessed, confused <a href=\"/wiki/Scroll_of_remove_curse\" title=\"Scroll of remove curse\">scroll of remove curse</a>. In a safe location, pick up as much polyfodder as possible but carry no other uncursed items. Then confuse yourself, read a blessed scroll of remove curse, end confusion, and mass-uncurse cursed items with the <a href=\"/wiki/Spellbook_of_remove_curse\" title=\"Spellbook of remove curse\">remove curse</a> spell at a skilled level. The light blue aura boon when carefully <a href=\"/wiki/Pray\" class=\"mw-redirect\" title=\"Pray\">praying</a> on an altar or even another scroll can also uncurse your entire main inventory. This procedure yields 12.5 blessings per scroll on average.</li></ul></li>\n<li>Unless you will need only one read, name <a href=\"/wiki/Spellbook\" title=\"Spellbook\">spellbooks</a> individually how often you have read them, and sort them accordingly. Under each pile you intend to polymorph, engrave that number. Any nameless books after the polymorph will count as read one more time. Keep in mind how often you will have to re-read the spells you get.</li>\n<li>Sort polyfodder by <a href=\"/wiki/BUC\" title=\"BUC\">BUC</a> status so you won't have to re-test after polypiling.</li></ul>\n<h3><span class=\"mw-headline\" id=\"When_to_polypile\">When to polypile</span></h3>\n<ul><li>If a game has been unforgiving, a good time to consider polypiling is when there are many things needed at once; the odds of getting <i>at least one</i> of them is improved. For example, if you're looking for a <a href=\"/wiki/Magic_marker\" title=\"Magic marker\">magic marker</a> in particular, getting a <a href=\"/wiki/Tinning_kit\" title=\"Tinning kit\">tinning kit</a> would be seen as a waste. However, if you were looking for both a magic marker <i>and</i> a tinning kit, the effective odds of getting something you want go up. If you're looking for a <a href=\"/wiki/Horn_of_plenty\" title=\"Horn of plenty\">horn of plenty</a>, a magic marker, a <a href=\"/wiki/Pair_of_lenses\" title=\"Pair of lenses\">pair of lenses</a>, and a tinning kit all at once, polypiling unicorn horns begins to look increasingly attractive.</li>\n<li><b><a href=\"/wiki/Potion\" title=\"Potion\">Potions</a></b> are attractive to polymorph, due to the ease of creating fruit juice and water, and mass blessing them. Furthermore, with the help of <a href=\"/wiki/Alchemy\" title=\"Alchemy\">alchemy</a>, a good third of the available potions are useful in some way. While you may not get the potion of enlightenment, or gain level, that you wanted, you are likely to end with various healing potions, levitation, etc, that can be quickly used to work towards what you really want.</li>\n<li><b><a href=\"/wiki/Scroll\" title=\"Scroll\">Scrolls</a></b> are commonly polymorphed for similar reasons. Here, part of the motivation is in doing away with magic markers. It adds a great deal of randomness to the mix, but scrolls are still cheaper than marker charges.</li>\n<li><b><a href=\"/wiki/Magical_tool\" class=\"mw-redirect\" title=\"Magical tool\">Magical tools</a></b>, especially <a href=\"/wiki/Unicorn_horn\" title=\"Unicorn horn\">unicorn horns</a>, are a common fodder due to the large number of useful magical tools and the abundance of unicorn horns. (Revived unicorns have a 50% chance of leaving another horn.) Certainly, the magic marker is generally what most would go for, but in the attempt you might find other goodies. A <a href=\"/wiki/Horn_of_plenty\" title=\"Horn of plenty\">horn of plenty</a>, for instance, spawns potions you can polypile; a <a href=\"/wiki/Fire_horn\" class=\"mw-redirect\" title=\"Fire horn\">fire</a> or <a href=\"/wiki/Frost_horn\" class=\"mw-redirect\" title=\"Frost horn\">frost</a> horn may also be of help, as may a <a href=\"/wiki/Magic_harp\" title=\"Magic harp\">magic harp</a> or <a href=\"/wiki/Magic_flute\" title=\"Magic flute\">magic flute</a>. This is especially helpful to Tourists or other neutral players with the <a href=\"/wiki/PYEC\" class=\"mw-redirect\" title=\"PYEC\">PYEC</a>.</li>\n<li><b><a href=\"/wiki/Magical_armor\" class=\"mw-redirect\" title=\"Magical armor\">Magical armor</a></b> can help finish off an <a href=\"/wiki/Ascension_kit\" title=\"Ascension kit\">ascension kit</a>, most often using the various abundant <a href=\"/wiki/Elven\" class=\"mw-redirect\" title=\"Elven\">elven</a> equipment as fodder. This is mostly only useful to (<a href=\"/wiki/Wishless\" title=\"Wishless\">wishless</a>) conduct players, as the <a href=\"/wiki/Castle\" title=\"Castle\">castle</a>'s guaranteed five wishes are good enough to get all the missing types of armor; furthermore, its armor stores might contain missing pieces.\n<ul><li>A common trick is to polymorph elven armor, which can safely be enchanted to +7, into a +7 <a href=\"/wiki/T-shirt\" title=\"T-shirt\">T-shirt</a>. The number of +7 armors isn't terribly prohibitive: the blessed <a href=\"/wiki/Scroll_of_enchant_armor\" title=\"Scroll of enchant armor\">scroll of enchant armor</a> (to get to +7) will also bless the armor and reduce the odds of shuddering.</li></ul></li></ul>\n<dl><dd><dl><dd><table class=\"prettytable\">\n<tbody><tr>\n<th>Confidence</th>\n<th>Base chance</th>\n<th>25%</th>\n<th>50%</th>\n<th>75%</th>\n<th>95%\n</th></tr>\n<tr>\n<th>Polymorphs</th>\n<th>1 in 100\n</th>\n<td>28.62\n</td>\n<td>68.97\n</td>\n<td>137.94\n</td>\n<td>298.07\n</td></tr>\n<tr>\n<th>Shuddering</th>\n<th>1 in 12\n</th>\n<td>3.31\n</td>\n<td>7.97\n</td>\n<td>15.93\n</td>\n<td>34.43\n</td></tr>\n<tr>\n<th>Armors needed (approx.)</th>\n<th>—\n</th>\n<td>3.59\n</td>\n<td>8.66\n</td>\n<td>17.32\n</td>\n<td>37.41\n</td></tr></tbody></table></dd></dl></dd></dl>\n<ul><li><b><a href=\"/wiki/Ring\" title=\"Ring\">Rings</a></b> can help finish off an <a href=\"/wiki/Ascension_kit\" title=\"Ascension kit\">ascension kit</a>, particularly with rings of <a href=\"/wiki/Ring_of_levitation\" title=\"Ring of levitation\">levitation</a>, <a href=\"/wiki/Ring_of_slow_digestion\" title=\"Ring of slow digestion\">slow digestion</a>, or <a href=\"/wiki/Ring_of_free_action\" title=\"Ring of free action\">free action</a>, if you haven't found them before <a href=\"/wiki/Medusa%27s_Island\" title=\"Medusa&#39;s Island\">Medusa's Island</a>. Most other rings are only useful in specific situations, polypiling or not.\n<ul><li>One cheesy trick is to polypile for rings of <a href=\"/wiki/Ring_of_protection\" title=\"Ring of protection\">protection</a>&#32;or <a href=\"/wiki/Ring_of_increase_damage\" title=\"Ring of increase damage\">increase damage</a>, with the intention of <a href=\"/wiki/Eating_jewelry\" title=\"Eating jewelry\">eating</a> them. It's possible to get a ridiculously low <a href=\"/wiki/AC\" class=\"mw-redirect\" title=\"AC\">AC</a>  or ridiculously high damage. The former is pointless, other than to sound impressive, because you can reasonably get to &#8722;40AC without such mind-numbing busywork, and that is enough to make even a <a href=\"/wiki/Minotaur\" title=\"Minotaur\">minotaur</a> barely scrape the polish on your armor. The latter may be for <a href=\"/wiki/Death_farming\" class=\"mw-redirect\" title=\"Death farming\">Death farming</a> to a ludicrously high score.</li></ul></li>\n<li><b><a href=\"/wiki/Spellbook\" title=\"Spellbook\">Spellbooks</a></b>, if you are happy with any random book and accept you cannot re-read it. Early in the game, when you don't know many spells yet, you can get dozens of new ones out of a few spellbooks.  In <a href=\"/wiki/3.6.0\" class=\"mw-redirect\" title=\"3.6.0\">3.6.0</a> the bug allowing to always learn new spells from overpolymorphed spellbooks has been fixed; a non-blank polymorphed spellbook will be counted as read 1&#8211;3 times, and you can only learn a new spell from it if this number is lower than 3. Otherwise, it will turn blank on reading. Thus, it is advised to formally <a href=\"/wiki/Identify\" class=\"mw-redirect\" title=\"Identify\">identify</a> unknown polymorphed spellbooks before reading, so you could overwrite them with a <a href=\"/wiki/Magic_marker\" title=\"Magic marker\">magic marker</a> in the latter case.  Newbies might carry books and rings along (unencumbered) into a <a href=\"/wiki/Minetown\" title=\"Minetown\">Minetown</a> shop in the early game and polymorph there.</li>\n<li><b>Junk armor</b>: Shirts are annoyingly rare in the main dungeon, but other armors are not. Zapping a wand of polymorph at that 15 pages pile of items in <a href=\"/wiki/Fort_Ludios\" title=\"Fort Ludios\">Fort Ludios</a> is probably the easiest way to get a shirt outside of bones, wishing, or playing a Tourist.</li>\n<li><b>When</b> can also be considered \"in the temporal sense\". By the time you reach <a href=\"/wiki/Vlad%27s_Tower\" title=\"Vlad&#39;s Tower\">Vlad's Tower</a>, you can take a little break, lock the door and begin the process in peace and quiet, after having accumulated a backbreaking load of loot. One nice benefit is that you can also use that location to summon wraiths that will leave a corpse to eat, unlike the rest of <a href=\"/wiki/Gehennom\" title=\"Gehennom\">Gehennom</a>, should your efforts yield <a href=\"/wiki/Magic_marker\" title=\"Magic marker\">magic markers</a> for writing <a href=\"/wiki/Scroll_of_genocide\" title=\"Scroll of genocide\">genocide</a> on any cursed blank scrolls (for generating the last, note the guaranteed <a href=\"/wiki/Water_walking_boots\" title=\"Water walking boots\">water walking boots</a> there).</li></ul>\n<h3><span class=\"mw-headline\" id=\"When_not_to_polypile\">When not to polypile</span></h3>\n<ul><li><b><a href=\"/wiki/Wand\" title=\"Wand\">Wands</a></b> are <i>generally</i> not worth it. This is mostly because by the usual time the player has a serious stash of wands, and abundant means to polymorph objects (read: the spell), there is only one wand seriously worth going after: <a href=\"/wiki/Wand_of_death\" title=\"Wand of death\">death</a>. But this late into the game, there are only four monsters that it matters on—<a href=\"/wiki/Pestilence\" class=\"mw-redirect\" title=\"Pestilence\">Pestilence</a>, <a href=\"/wiki/Famine\" class=\"mw-redirect\" title=\"Famine\">Famine</a>, the <a href=\"/wiki/Wizard_of_Yendor\" title=\"Wizard of Yendor\">Wizard of Yendor</a>, and the <a href=\"/wiki/High_priest_of_Moloch\" class=\"mw-redirect\" title=\"High priest of Moloch\">high priest of Moloch</a>. Likely (but not <i>necessarily</i>), you already have enough wands of death to deal with those enemies. Also, polymorphed wands will more likely explode if charged again.\n<ul><li>In the midgame, however, it may be worth it. If the player doesn't quite have enough items to make a full polypile line, a square of scrap wands may not make anything that you need, but it <i>might</i> make a wand you've yet to identify (if it has charges left). It may also be that you need a wand's special properties—for example, a <a href=\"/wiki/Wand_of_fire\" title=\"Wand of fire\">wand of fire</a>'s ability to engrave a permanent <a href=\"/wiki/Elbereth\" title=\"Elbereth\">Elbereth</a> square.</li></ul></li>\n<li><b>Specific <a href=\"/wiki/Spellbook\" title=\"Spellbook\">spellbooks</a></b>: If you only need one specific spellbook (or a <a href=\"/wiki/Spellbook_of_polymorph\" title=\"Spellbook of polymorph\">spellbook of polymorph</a> to start with), there are better methods than polypiling. Wizards with sufficient <a href=\"/wiki/Luck\" title=\"Luck\">luck</a> can write one using a <a href=\"/wiki/Magic_marker\" title=\"Magic marker\">magic marker</a>. Anyone willing to do the <a href=\"/wiki/Altar\" title=\"Altar\">altar</a> work can get books from their god, especially the last few ones you do not yet know.</li>\n<li>There are better ways to get various other items. For example, a <a href=\"/wiki/Trident\" title=\"Trident\">trident</a>, while normally quite rare, can be found in the <a href=\"/wiki/Death_drop\" title=\"Death drop\">death drop</a> of a salamander or a <a href=\"/wiki/Horned_devil\" title=\"Horned devil\">horned devil</a>. A silver saber, very desirable for <a href=\"/wiki/Twoweapon\" title=\"Twoweapon\">twoweapon</a> combat, can be found in the inventory of the Minetown watch, or the various captains that show up in the <a href=\"/wiki/Castle\" title=\"Castle\">Castle</a>.</li>\n<li>Items not generated randomly aren't available from polypiling, e.g. <a href=\"/wiki/Athame\" title=\"Athame\">athames</a>.</li></ul>\n<h2><span class=\"mw-headline\" id=\"Stacking_strategies\">Stacking strategies</span></h2>\n<h3><span class=\"mw-headline\" id=\"Seven_small_piles\">Seven small piles</span></h3>\n<h4><span class=\"mw-headline\" id=\"Step_by_step\">Step by step</span></h4>\n<ul><li>Maximize your <a href=\"/wiki/Luck\" title=\"Luck\">luck</a>. (+13 is best.)</li>\n<li>Collect your items. See the section above to decide what to polypile.</li>\n<li>Individually name stackables to separate them into stacks of two (preferable), three, or four. Try to avoid single items, except for weapons and tools, which should be completely unstacked.</li>\n<li>Distribute the item stacks over seven small piles in a straight line, each pile containing a good mix of different types of material. Put the items you want polymorphed most at the front of the line. (First three piles are guaranteed, each of the four piles after that is progressively less likely.)</li>\n<li>Zap polymorph.</li>\n<li>Review results. <a href=\"/wiki/Autopickup\" title=\"Autopickup\">Autopickup</a> with <a href=\"/wiki/Autopickup_exceptions\" class=\"mw-redirect\" title=\"Autopickup exceptions\">exceptions</a> can automate this for you.</li>\n<li>Repeat.</li></ul>\n<h4><span class=\"mw-headline\" id=\"Explanation\">Explanation</span></h4>\n<p>Separating your stackables minimizes the chances of merging and shuddering. Weapons and tools will eventually turn into something unstackable, and you lose all but one. For other items, stacks of one are less desirable, since shuddering destroys them completely, while larger stacks only lose half of the stack on average.\n</p><p>Maximizing your luck minimizes the chances of golems forming.\n</p><p>Distributing your item stacks over 7 squares minimizes the damage a forming golem can do, because a golem can only absorb items from the square it forms on. \n</p><p>Ensuring a good mix of different materials also minimizes the damage a forming golem can do, because the golem can only absorb items that are made of the same material as the shuddered item that led to its formation.\n</p>\n<h3><span class=\"mw-headline\" id=\"One_large_pile\">One large pile</span></h3>\n<h4><span class=\"mw-headline\" id=\"Step_by_step_2\">Step by step</span></h4>\n<ul><li>Minimize your luck. (0 is good; &#8722;13 is better!)</li>\n<li>Collect your items. See the section above to decide what to polypile, but avoid items made of <a href=\"/wiki/Mineral\" title=\"Mineral\">mineral</a> (e.g. some rings, wands). The number of <a href=\"/wiki/Wand\" title=\"Wand\">wands</a> and <a href=\"/wiki/Ring\" title=\"Ring\">rings</a> destroyed by this method will be slightly greater than the number destroyed by the seven small piles method. If you want to polypile mineral-based items, do <i>not</i> use this method.</li>\n<li>Individually name stackables to separate them, especially weapons and tools. Separating them all the way into stacks of just one single item is best, but just getting them into stacks of four or fewer is almost as good.</li>\n<li>Put every item stack in one large pile.</li>\n<li>Obtain a very large number of rocks.</li>\n<li>Curse the rocks.</li>\n<li>Individually name the rocks to break them into small stacks. Five rocks per stack is best, get as close to that as your patience allows. Do not make stacks smaller than five.</li>\n<li>Drop all the rocks on top of the item pile. Make sure you drop the rocks <i>after</i> the items so they are on top!</li>\n<li>Zap polymorph.</li>\n<li>Kill the stone golem.</li>\n<li>Review results.</li>\n<li>Repeat.</li></ul>\n<p>You <i>want</i> a stone golem to form from those rocks, because it will prevent other types of golems from forming and damaging your valuable polyfodder. Assuming cursed rocks in stacks of 5, and <a href=\"/wiki/Luck\" title=\"Luck\">Luck</a> of 10: 50 rocks is approximately a 58% chance of a stone golem, 200 rocks is approximately a 97% chance of a stone golem, and 300 rocks is approximately a 99.5% chance of a stone golem.\n</p><p>A <a href=\"/wiki/Rubber_chicken\" class=\"mw-redirect\" title=\"Rubber chicken\">rubber chicken</a> and a <a href=\"/wiki/Pick-axe\" title=\"Pick-axe\">pick-axe</a> are quite helpful here, in order to create a large number of rocks near the fodder pile.\n</p>\n<h4><span class=\"mw-headline\" id=\"Explanation_2\">Explanation</span></h4>\n<p>This method exploits the specifics of the polypiling algorithm.\n</p><p>Separating your stackables minimizes the chances of merging and shuddering. The only threat to deal with now is golem absorption.\n</p><p>Ordinarily putting every item stack on one pile would be a terrible idea, because any forming golem would have access to every item you were polypiling. However, in this strategy we ensure that the golem won't be able to absorb anything useful, by manipulating the material it is made of. A golem can only absorb items made of the same material it is. An iron golem generated from shuddering mithril can only absorb other mithril items. A wood golem generated from shuddering wood can only absorb other wood items. And&#8212;most importantly in this case&#8212;a stone golem generated from a shuddering mineral item can only absorb other mineral items.\n</p><p>Only one golem can be generated from a pile, and the first item stack to shudder and lead to golem formation gets to decide the material. By putting the rocks on top we ensure that they get processed first.\n</p><p>Cursing the rocks increases the chances that they will shudder.\n</p><p>Keeping the rocks in stacks of more than 4 (5 in this case) also increases this chance.\n</p><p>Minimizing our luck increases the chances that our rocks will give rise to a golem once they shudder.\n</p><p>The probability of an individual stack <i>not</i> giving rise to a golem, <i>if</i> it shudders, is (<small><span class=\"sfrac nowrap\"><span style=\"display:inline-block; vertical-align:-0.5em; font-size:85%; text-align:center;\"><span style=\"display:block; line-height:1em; margin:0 0.1em;\">luck + 44</span><span style=\"display:block; line-height:1em; margin:0 0.1em; border-top:1px solid;\">luck + 45</span></span></span></small>)<sup><var>s</var></sup>, where <var>s</var> is the stack size. The probability of the stack shuddering (and not resisting initial polymorph) is 95% for stacks of 5 or more cursed items; this is the highest chance we can get. Thus the probability of a stack <i>not</i> forming a golem is 0.05 + 0.95 × (<small><span class=\"sfrac nowrap\"><span style=\"display:inline-block; vertical-align:-0.5em; font-size:85%; text-align:center;\"><span style=\"display:block; line-height:1em; margin:0 0.1em;\">luck + 44</span><span style=\"display:block; line-height:1em; margin:0 0.1em; border-top:1px solid;\">luck + 45</span></span></span></small>)<sup><var>s</var></sup>. If every stack of rocks in a pile is identical (all contain 5 cursed rocks), then the chance of none of them giving rise to a golem is (0.05 + 0.95 × (<small><span class=\"sfrac nowrap\"><span style=\"display:inline-block; vertical-align:-0.5em; font-size:85%; text-align:center;\"><span style=\"display:block; line-height:1em; margin:0 0.1em;\">luck + 44</span><span style=\"display:block; line-height:1em; margin:0 0.1em; border-top:1px solid;\">luck + 45</span></span></span></small>)<sup><var>s</var></sup>)<sup><var>n</var></sup>, where <var>n</var> is the number of stacks. Thus we want our stacks to be as small as possible, so that we can have as many as possible, <i>without</i> having fewer than 5 rocks per stack.\n</p><p>For the most part, there are no items made from mineral you might be interested in polypiling for. The exceptions are marble wands and granite, opal, clay, coral, moonstone and black onyx rings. The material an item is made of can change when it is polymorphed, and it is the final material that matters for golem absorption. Since any polymorphed wand or ring could end up being one of the mineral ones, the effect is that this technique will consume slighty more wands and rings than the other technique, and that the specific item types that are made of mineral cannot be polypiled for (with this method).\n</p><p>There is a 5% chance of a normal item resisting polymorph and reaching this point unchanged, so the initial material matters somewhat as well. For instance if you try to polypile a figurine and it resists, it is almost guaranteed to be absorbed (because figurines are mineral).\n</p><p>Beware! In the unlikely event that a stone golem does <i>not</i> form from the rocks: then, given the large pile underneath, there is a good chance a golem <i>will</i> form from another material, possibly doing a lot of damage. With enough cursed rocks, less material is lost on average with the one-pile than with the multi-pile technique.\n</p>\n<h4><span class=\"mw-headline\" id=\"One_large_pile_with_meatballs\">One large pile with meatballs</span></h4>\n<p>If you know <a href=\"/wiki/Stone_to_flesh\" class=\"mw-redirect\" title=\"Stone to flesh\">stone to flesh</a> spell, you should cast it at your rocks to turn them into <a href=\"/wiki/Meatball\" title=\"Meatball\">meatballs</a>, then use them instead of rocks in the advice above. In this case, you can polypile for mineral items, but can't polypile for <a href=\"/wiki/Egg\" title=\"Egg\">eggs</a> and <a href=\"/wiki/Tripe_ration\" title=\"Tripe ration\">tripe rations</a>. The golem rising from the pile will be a <a href=\"/wiki/Flesh_golem\" title=\"Flesh golem\">flesh golem</a> instead of a <a href=\"/wiki/Stone_golem\" title=\"Stone golem\">stone golem</a>.\n</p>\n<h2><span class=\"mw-headline\" id=\"Variants\">Variants</span></h2>\n<h3><span id=\"SLASH'EM\"></span><span class=\"mw-headline\" id=\"SLASH.27EM\">SLASH'EM</span></h3>\n<p>In SLASH'EM, polymorphed items revert back to their original form after 500&#8211;999 turns.<sup id=\"cite_ref-33\" class=\"reference\"><a href=\"#cite_note-33\">&#91;33&#93;</a></sup> Items that will eventually revert are described as \"hazy\" in <a href=\"/wiki/Wizard_mode\" title=\"Wizard mode\">wizard mode</a>. Hazy items can be \"fixed\" by dipping them in a <a href=\"/wiki/Potion_of_restore_ability\" title=\"Potion of restore ability\">potion of restore ability</a>.\n</p><p>There are some exceptions to this:\n</p>\n<ul><li>Items that were initially eggs laid by the player<sup id=\"cite_ref-34\" class=\"reference\"><a href=\"#cite_note-34\">&#91;34&#93;</a></sup> or corpses<sup id=\"cite_ref-35\" class=\"reference\"><a href=\"#cite_note-35\">&#91;35&#93;</a></sup> do not revert.</li>\n<li>If a <a href=\"/wiki/Magic_lamp\" title=\"Magic lamp\">magic lamp</a> is randomly chosen at first, the <a href=\"/wiki/Oil_lamp\" title=\"Oil lamp\">oil lamp</a> with which it is replaced does not revert.<sup id=\"cite_ref-36\" class=\"reference\"><a href=\"#cite_note-36\">&#91;36&#93;</a></sup></li>\n<li>Items that become <a href=\"/wiki/Land_mine\" title=\"Land mine\">land mines</a> or <a href=\"/wiki/Beartrap\" title=\"Beartrap\">beartraps</a> do not revert.<sup id=\"cite_ref-37\" class=\"reference\"><a href=\"#cite_note-37\">&#91;37&#93;</a></sup></li>\n<li>Items that become the same object type as they were before do not revert, even if they otherwise changed (such as a diluted potion of sickness becoming an undiluted potion of sickness).<sup id=\"cite_ref-38\" class=\"reference\"><a href=\"#cite_note-38\">&#91;38&#93;</a></sup></li></ul>\n<p>The reversion is done not by restoring the original item but by changing the item to the original item's type,<sup id=\"cite_ref-39\" class=\"reference\"><a href=\"#cite_note-39\">&#91;39&#93;</a></sup> which has some consequences that may not be expected, including the following:\n</p>\n<ul><li>Some properties, such as <a href=\"/wiki/Beatitude\" class=\"mw-redirect\" title=\"Beatitude\">beatitude</a> and <a href=\"/wiki/Erosion\" title=\"Erosion\">erosion</a>, are carried over from the transformed item rather than the original.</li>\n<li>Some other properties, such as being an <a href=\"/wiki/Artifact\" title=\"Artifact\">artifact</a>, are lost.</li>\n<li>A stack of multiple items that became a single item reverts to a single item of the original type.</li>\n<li>An item that became an <a href=\"/wiki/Amulet_of_unchanging\" title=\"Amulet of unchanging\">amulet of unchanging</a> does not revert.<sup id=\"cite_ref-40\" class=\"reference\"><a href=\"#cite_note-40\">&#91;40&#93;</a></sup></li></ul>\n<p>The transmutation limits the usefulness of polypiling somewhat, as obtaining permanent items requires a commensurate supply of potions. However, polypiling is still just as useful to obtain items that can be useful right away or relatively soon; for example, a polypiled <a href=\"/wiki/Magic_marker\" title=\"Magic marker\">magic marker</a> can be immediately used to write a few scrolls, and then allowed to transmute back after it is empty.\n</p><p>In some cases, the reversion can be useful:\n</p>\n<ul><li>When polypiling magical items, if they turn into non-magical items, one can simply wait for them to revert, and try again.</li>\n<li><a href=\"/wiki/Boulder\" title=\"Boulder\">Boulders</a> can be polymorphed into statues and transported more easily, and will turn back into boulders.</li>\n<li>Any armor can be safely enchanted to +7 by polymorphing it into <a href=\"/wiki/Elven_armor\" class=\"mw-redirect\" title=\"Elven armor\">elven armor</a>.\n<ul><li>If you have a <a href=\"/wiki/Wand_of_polymorph\" title=\"Wand of polymorph\">wand of polymorph</a> and two or three <a href=\"/wiki/Potion_of_gain_level\" title=\"Potion of gain level\">potions of gain level</a>, you can easily get a +7 <a href=\"/wiki/Helm_of_brilliance\" title=\"Helm of brilliance\">helm of brilliance</a> by polypiling ubiquitous orcish and dwarven helmets until you get an elven item (or something that can be <a href=\"/wiki/Upgrade\" class=\"mw-redirect\" title=\"Upgrade\">upgraded</a> into one), enchanting, and upgrading the enchanted helmet after it reverts.</li></ul></li>\n<li>Some further consequences are probably bugs:\n<ul><li>After polymorphing a boulder into a statue, breaking it will result in a number of rocks; if they are separated, each separate stack reverts to a boulder.</li>\n<li>Weapons can be polymorphed into <a href=\"/wiki/Dwarvish_mattock\" title=\"Dwarvish mattock\">dwarvish mattocks</a>, <a href=\"/wiki/Upgrade\" class=\"mw-redirect\" title=\"Upgrade\">upgraded</a> to <a href=\"/wiki/Pick-axe\" title=\"Pick-axe\">pick-axes</a>, and polymorphed further into other tools, particularly charged ones; when they revert, the weapon's enchantment will be the tool's number of charges, which can be much higher than normally feasible.</li></ul></li></ul>\n<h3><span class=\"mw-headline\" id=\"SlashTHEM\">SlashTHEM</span></h3>\n<p>In <a href=\"/wiki/SlashTHEM\" title=\"SlashTHEM\">SlashTHEM</a>, polymorphed items that will revert after a certain amount of turns are displayed as \"hazy\" in normal play; the same mechanics apply for \"fixing\" that item in its current form.\n</p>\n<h2><span class=\"mw-headline\" id=\"Code\">Code</span></h2>\n<p><a href=\"/wiki/Source:Zap.c#bhito\" class=\"mw-redirect\" title=\"Source:Zap.c\">bhito</a> in <a href=\"/wiki/Source:Zap.c\" class=\"mw-redirect\" title=\"Source:Zap.c\">zap.c</a> is the root of item polymorphs from the spell and wand. It is called for each stack of items a polymorph zap hits by <a href=\"/wiki/Zap.c#bhitpile\" class=\"mw-redirect\" title=\"Zap.c\">bhitpile</a>. First it refuses to polymorph polymorph-sources, and allows items to resist.<sup id=\"cite_ref-41\" class=\"reference\"><a href=\"#cite_note-41\">&#91;41&#93;</a></sup> It calls <a href=\"/wiki/Zap.c#obj_shudders\" class=\"mw-redirect\" title=\"Zap.c\">obj_shudders</a> to check for system shocks<sup id=\"cite_ref-42\" class=\"reference\"><a href=\"#cite_note-42\">&#91;42&#93;</a></sup> and calls <a href=\"/wiki/Zap.c#do_osshock\" class=\"mw-redirect\" title=\"Zap.c\">do_osshock</a> to perform them.<sup id=\"cite_ref-43\" class=\"reference\"><a href=\"#cite_note-43\">&#91;43&#93;</a></sup> Finally bhito calls <a href=\"/wiki/Zap.c#polyobj\" class=\"mw-redirect\" title=\"Zap.c\">polyobj</a> to actually transform the stack.<sup id=\"cite_ref-44\" class=\"reference\"><a href=\"#cite_note-44\">&#91;44&#93;</a></sup>\n</p><p><a href=\"/wiki/Zap.c#do_osshock\" class=\"mw-redirect\" title=\"Zap.c\">do_osshock</a> determines whether or not to generate a <a href=\"/wiki/Golem\" title=\"Golem\">golem</a>, and after all the stacks in the pile have been polymorphed by repeated calls to bhito, bhitpile calls <a href=\"/wiki/Zap.c#create_polymon\" class=\"mw-redirect\" title=\"Zap.c\">create_polymon</a> to actually generate thegolem.\n</p><p>If create_polymon is called, it possibly creates the golem and then, if the golem was created, in turn calls <a href=\"/wiki/Zap.c#polyuse\" class=\"mw-redirect\" title=\"Zap.c\">polyuse</a> to consume additional polyfodder.<sup id=\"cite_ref-45\" class=\"reference\"><a href=\"#cite_note-45\">&#91;45&#93;</a></sup>\n</p>\n<h2><span class=\"mw-headline\" id=\"References\">References</span></h2>\n<div class=\"mw-references-wrap mw-references-columns\"><ol class=\"references\">\n<li id=\"cite_note-1\"><span class=\"mw-cite-backlink\"><a href=\"#cite_ref-1\">↑</a></span> <span class=\"reference-text\"><a href=\"/wiki/Source:NetHack_3.4.3/zap.c#line1234\" class=\"mw-redirect\" title=\"Source:NetHack 3.4.3/zap.c\">zap.c<span></span> in NetHack 3.4.3, line 1234</a>\n     </span>\n</li>\n<li id=\"cite_note-2\"><span class=\"mw-cite-backlink\"><a href=\"#cite_ref-2\">↑</a></span> <span class=\"reference-text\"><a href=\"/wiki/Source:NetHack_3.4.3/zap.c#line1312\" class=\"mw-redirect\" title=\"Source:NetHack 3.4.3/zap.c\">zap.c<span></span> in NetHack 3.4.3, line 1312</a>\n     </span>\n</li>\n<li id=\"cite_note-3\"><span class=\"mw-cite-backlink\"><a href=\"#cite_ref-3\">↑</a></span> <span class=\"reference-text\"><a href=\"/wiki/Source:NetHack_3.4.3/objclass.h#line15\" class=\"mw-redirect\" title=\"Source:NetHack 3.4.3/objclass.h\">objclass.h<span></span> in NetHack 3.4.3, line 15</a>\n     </span>\n</li>\n<li id=\"cite_note-4\"><span class=\"mw-cite-backlink\"><a href=\"#cite_ref-4\">↑</a></span> <span class=\"reference-text\"><a class=\"external text\" href=\"https://github.com/NetHack/NetHack/blob/NetHack-3.6.1_Release/zap.c#L1552\">zap.c in NetHack 3.6.1, line 1552</a>\n     </span>\n</li>\n<li id=\"cite_note-5\"><span class=\"mw-cite-backlink\"><a href=\"#cite_ref-5\">↑</a></span> <span class=\"reference-text\"><a href=\"/wiki/Source:NetHack_3.4.3/zap.c#line1333\" class=\"mw-redirect\" title=\"Source:NetHack 3.4.3/zap.c\">zap.c<span></span> in NetHack 3.4.3, line 1333</a><span>:</span> <i>recharge count &lt; rn2(7)  to see if polymorph increments charge counter on wands</i>\n     </span>\n</li>\n<li id=\"cite_note-6\"><span class=\"mw-cite-backlink\"><a href=\"#cite_ref-6\">↑</a></span> <span class=\"reference-text\"><a href=\"/wiki/Source:NetHack_3.4.3/zap.c#line2744\" class=\"mw-redirect\" title=\"Source:NetHack 3.4.3/zap.c\">zap.c<span></span> in NetHack 3.4.3, line 2744</a><span>:</span> <i>bhit calls bhitpile for each square/pile</i>\n     </span>\n</li>\n<li id=\"cite_note-7\"><span class=\"mw-cite-backlink\"><a href=\"#cite_ref-7\">↑</a></span> <span class=\"reference-text\"><a href=\"/wiki/Source:NetHack_3.4.3/zap.c#line1733\" class=\"mw-redirect\" title=\"Source:NetHack 3.4.3/zap.c\">zap.c<span></span> in NetHack 3.4.3, line 1733</a><span>:</span> <i>bhitpile goes through each stack separately, calling bhito--to which a function pointer has been passed in as fhito--to perform the actual polymorph</i>\n     </span>\n</li>\n<li id=\"cite_note-8\"><span class=\"mw-cite-backlink\"><a href=\"#cite_ref-8\">↑</a></span> <span class=\"reference-text\"><a href=\"/wiki/Source:NetHack_3.4.3/zap.c#line1515\" class=\"mw-redirect\" title=\"Source:NetHack 3.4.3/zap.c\">zap.c<span></span> in NetHack 3.4.3, line 1515</a><span>:</span> <i>bhito calls obj_shudders on just one object, and obj_shudders does not inspect other items on the square, i.e. in the pile</i>\n     </span>\n</li>\n<li id=\"cite_note-9\"><span class=\"mw-cite-backlink\"><a href=\"#cite_ref-9\">↑</a></span> <span class=\"reference-text\"><a href=\"/wiki/Source:Zap.c#obj_shudders\" class=\"mw-redirect\" title=\"Source:Zap.c\">obj_shudders</a> in <a href=\"/wiki/Source:Zap.c\" class=\"mw-redirect\" title=\"Source:Zap.c\">zap.c</a> (obj_shudders determines whether a given stack will shudder.)</span>\n</li>\n<li id=\"cite_note-10\"><span class=\"mw-cite-backlink\"><a href=\"#cite_ref-10\">↑</a></span> <span class=\"reference-text\"><a href=\"/wiki/Source:NetHack_3.4.3/zap.c#line1162\" class=\"mw-redirect\" title=\"Source:NetHack 3.4.3/zap.c\">zap.c<span></span> in NetHack 3.4.3, line 1162</a><span>:</span> <i>do_osshock decides whether or not it should make a golem</i>\n     </span>\n</li>\n<li id=\"cite_note-11\"><span class=\"mw-cite-backlink\"><a href=\"#cite_ref-11\">↑</a></span> <span class=\"reference-text\"><a href=\"/wiki/Source:NetHack_3.4.3/zap.c#line1160\" class=\"mw-redirect\" title=\"Source:NetHack 3.4.3/zap.c\">zap.c<span></span> in NetHack 3.4.3, line 1160</a><span>:</span> <i>poly_zapped is a file level static variable, visible to every function in zap.c, −1 means no golem created yet, else it contains the material of the item whose shuddering resulted in golem creation. do_osshock checks that its −1 before trying to make a golem.</i>\n     </span>\n</li>\n<li id=\"cite_note-12\"><span class=\"mw-cite-backlink\"><a href=\"#cite_ref-12\">↑</a></span> <span class=\"reference-text\"><a href=\"/wiki/Source:NetHack_3.4.3/zap.c#line1519\" class=\"mw-redirect\" title=\"Source:NetHack 3.4.3/zap.c\">zap.c<span></span> in NetHack 3.4.3, line 1519</a><span>:</span> <i>if the obj shuddered, bhito exits WITHOUT polymorphing the object.</i>\n     </span>\n</li>\n<li id=\"cite_note-13\"><span class=\"mw-cite-backlink\"><a href=\"#cite_ref-13\">↑</a></span> <span class=\"reference-text\"><a href=\"/wiki/Source:Mkobj.c#splitobj\" class=\"mw-redirect\" title=\"Source:Mkobj.c\">splitobj</a> in <a href=\"/wiki/Source:Mkobj.c\" class=\"mw-redirect\" title=\"Source:Mkobj.c\">mkobj.c</a> (If any items remained after the shuddering occurred, they will have been reinserted in the item tracking linked list, but they will have been inserted before the deleted ones, and bhitpile will not return to them.)</span>\n</li>\n<li id=\"cite_note-14\"><span class=\"mw-cite-backlink\"><a href=\"#cite_ref-14\">↑</a></span> <span class=\"reference-text\"><a href=\"/wiki/Source:NetHack_3.4.3/zap.c#line1735\" class=\"mw-redirect\" title=\"Source:NetHack 3.4.3/zap.c\">zap.c<span></span> in NetHack 3.4.3, line 1735</a><span>:</span> <i>bhitpile decides the next object before bhito has a chance to call do_osshock and destroy/split item stacks.</i>\n     </span>\n</li>\n<li id=\"cite_note-15\"><span class=\"mw-cite-backlink\"><a href=\"#cite_ref-15\">↑</a></span> <span class=\"reference-text\"><a href=\"/wiki/Source:NetHack_3.4.3/zap.c#line1521\" class=\"mw-redirect\" title=\"Source:NetHack 3.4.3/zap.c\">zap.c<span></span> in NetHack 3.4.3, line 1521</a><span>:</span> <i>poly_obj is called AFTER do_osshock has finished with the stack.</i>\n     </span>\n</li>\n<li id=\"cite_note-16\"><span class=\"mw-cite-backlink\"><a href=\"#cite_ref-16\">↑</a></span> <span class=\"reference-text\"><a href=\"/wiki/Source:NetHack_3.4.3/zap.c#line1312\" class=\"mw-redirect\" title=\"Source:NetHack 3.4.3/zap.c\">zap.c<span></span> in NetHack 3.4.3, line 1312</a><span>:</span> <i>poly_obj decides whether or not to merge the items in the stack</i>\n     </span>\n</li>\n<li id=\"cite_note-17\"><span class=\"mw-cite-backlink\"><a href=\"#cite_ref-17\">↑</a></span> <span class=\"reference-text\"><a class=\"external text\" href=\"https://github.com/NetHack/NetHack/blob/NetHack-3.6.1_Release/zap.c#L1561\">zap.c in NetHack 3.6.1, line 1561</a>\n     </span>\n</li>\n<li id=\"cite_note-18\"><span class=\"mw-cite-backlink\"><a href=\"#cite_ref-18\">↑</a></span> <span class=\"reference-text\"><a href=\"/wiki/Source:NetHack_3.4.3/zap.c#line1076\" class=\"mw-redirect\" title=\"Source:NetHack 3.4.3/zap.c\">zap.c<span></span> in NetHack 3.4.3, line 1076</a><span>:</span> <i>golem creation aborted for not enough items</i>\n     </span>\n</li>\n<li id=\"cite_note-19\"><span class=\"mw-cite-backlink\"><a href=\"#cite_ref-19\">↑</a></span> <span class=\"reference-text\"><a href=\"/wiki/Source:NetHack_3.4.3/zap.c#line1140\" class=\"mw-redirect\" title=\"Source:NetHack 3.4.3/zap.c\">zap.c<span></span> in NetHack 3.4.3, line 1140</a><span>:</span> <i>mons[pm_index] is a permonst structure, defined in permonst.h, the cwt field is the weight of the monsters corpse, which is defined for golems even though they leave no corpses.</i>\n     </span>\n</li>\n<li id=\"cite_note-20\"><span class=\"mw-cite-backlink\"><a href=\"#cite_ref-20\">↑</a></span> <span class=\"reference-text\"><a href=\"/wiki/Source:NetHack_3.4.3/zap.c#line1035\" class=\"mw-redirect\" title=\"Source:NetHack 3.4.3/zap.c\">zap.c<span></span> in NetHack 3.4.3, line 1035</a><span>:</span> <i>polyuse doesn't stop absorbing items until minwt is 0, minwt is initialized to golem corpse weight</i>\n     </span>\n</li>\n<li id=\"cite_note-21\"><span class=\"mw-cite-backlink\"><a href=\"#cite_ref-21\">↑</a></span> <span class=\"reference-text\"><a href=\"/wiki/Source:NetHack_3.4.3/zap.c#line1054\" class=\"mw-redirect\" title=\"Source:NetHack 3.4.3/zap.c\">zap.c<span></span> in NetHack 3.4.3, line 1054</a><span>:</span> <i>not that polyuse is subtracting the QUANTITY of objects from minwt, not the WEIGHT of those objects. iron golems will absorb up to 2000 iron items</i>\n     </span>\n</li>\n<li id=\"cite_note-22\"><span class=\"mw-cite-backlink\"><a href=\"#cite_ref-22\">↑</a></span> <span class=\"reference-text\"><a href=\"/wiki/Source:NetHack_3.4.3/zap.c#line1043\" class=\"mw-redirect\" title=\"Source:NetHack 3.4.3/zap.c\">zap.c<span></span> in NetHack 3.4.3, line 1043</a><span>:</span> <i>which items are eligible for absorption; note that \"mat\" is the material of the shuddered item stack NOT of the golem created</i>\n     </span>\n</li>\n<li id=\"cite_note-23\"><span class=\"mw-cite-backlink\"><a href=\"#cite_ref-23\">↑</a></span> <span class=\"reference-text\"><a href=\"/wiki/Source:NetHack_3.4.3/zap.c#line1160\" class=\"mw-redirect\" title=\"Source:NetHack 3.4.3/zap.c\">zap.c<span></span> in NetHack 3.4.3, line 1160</a><span>:</span> <i>once NetHack decides to create a golem it records the shuddering stack's material and stops trying to create golems for additional stacks.</i>\n     </span>\n</li>\n<li id=\"cite_note-24\"><span class=\"mw-cite-backlink\"><a href=\"#cite_ref-24\">↑</a></span> <span class=\"reference-text\"><a href=\"/wiki/Source:NetHack_3.4.3/zap.c#line1733\" class=\"mw-redirect\" title=\"Source:NetHack 3.4.3/zap.c\">zap.c<span></span> in NetHack 3.4.3, line 1733</a><span>:</span> <i>bhitpile goes through objects forwards through the list</i>\n     </span>\n</li>\n<li id=\"cite_note-25\"><span class=\"mw-cite-backlink\"><a href=\"#cite_ref-25\">↑</a></span> <span class=\"reference-text\"><a href=\"/wiki/Source:NetHack_3.4.3/mkobj.c#line1115\" class=\"mw-redirect\" title=\"Source:NetHack 3.4.3/mkobj.c\">mkobj.c<span></span> in NetHack 3.4.3, line 1115</a><span>:</span> <i>place_object adds dropped objects to the front of the list, where bhitpile will encounter them first.</i>\n     </span>\n</li>\n<li id=\"cite_note-26\"><span class=\"mw-cite-backlink\"><a href=\"#cite_ref-26\">↑</a></span> <span class=\"reference-text\"><a href=\"/wiki/Source:NetHack_3.4.3/zap.c#line1038\" class=\"mw-redirect\" title=\"Source:NetHack 3.4.3/zap.c\">zap.c<span></span> in NetHack 3.4.3, line 1038</a><span>:</span> <i>resistance check only serves to protect the invocation items and the amulet</i>\n     </span>\n</li>\n<li id=\"cite_note-27\"><span class=\"mw-cite-backlink\"><a href=\"#cite_ref-27\">↑</a></span> <span class=\"reference-text\"><a href=\"/wiki/Source:NetHack_3.4.3/zap.c#line1215\" class=\"mw-redirect\" title=\"Source:NetHack 3.4.3/zap.c\">zap.c<span></span> in NetHack 3.4.3, line 1215</a>\n     </span>\n</li>\n<li id=\"cite_note-28\"><span class=\"mw-cite-backlink\"><a href=\"#cite_ref-28\">↑</a></span> <span class=\"reference-text\"><a href=\"/wiki/Source:NetHack_3.4.3/zap.c#line1319\" class=\"mw-redirect\" title=\"Source:NetHack 3.4.3/zap.c\">zap.c<span></span> in NetHack 3.4.3, line 1319</a><span>:</span> <i>no magic lamps</i>\n     </span>\n</li>\n<li id=\"cite_note-29\"><span class=\"mw-cite-backlink\"><a href=\"#cite_ref-29\">↑</a></span> <span class=\"reference-text\"><a href=\"/wiki/Source:NetHack_3.4.3/zap.c#line1329\" class=\"mw-redirect\" title=\"Source:NetHack 3.4.3/zap.c\">zap.c<span></span> in NetHack 3.4.3, line 1329</a><span>:</span> <i>no wands of wishing or polymorph</i>\n     </span>\n</li>\n<li id=\"cite_note-30\"><span class=\"mw-cite-backlink\"><a href=\"#cite_ref-30\">↑</a></span> <span class=\"reference-text\"><a href=\"/wiki/Source:NetHack_3.4.3/zap.c#line1338\" class=\"mw-redirect\" title=\"Source:NetHack 3.4.3/zap.c\">zap.c<span></span> in NetHack 3.4.3, line 1338</a><span>:</span> <i>no potions of polymorph</i>\n     </span>\n</li>\n<li id=\"cite_note-31\"><span class=\"mw-cite-backlink\"><a href=\"#cite_ref-31\">↑</a></span> <span class=\"reference-text\"><a href=\"/wiki/Source:NetHack_3.4.3/zap.c#line1343\" class=\"mw-redirect\" title=\"Source:NetHack 3.4.3/zap.c\">zap.c<span></span> in NetHack 3.4.3, line 1343</a><span>:</span> <i>no spellbooks of polymorph</i>\n     </span>\n</li>\n<li id=\"cite_note-32\"><span class=\"mw-cite-backlink\"><a href=\"#cite_ref-32\">↑</a></span> <span class=\"reference-text\"><a href=\"/wiki/Source:NetHack_3.4.3/zap.c#line1225\" class=\"mw-redirect\" title=\"Source:NetHack 3.4.3/zap.c\">zap.c<span></span> in NetHack 3.4.3, line 1225</a><span>:</span> <i>mksobj is called with \"artif\" set to false -- no artis</i>\n     </span>\n</li>\n<li id=\"cite_note-33\"><span class=\"mw-cite-backlink\"><a href=\"#cite_ref-33\">↑</a></span> <span class=\"reference-text\"><a href=\"/wiki/Source:SLASH%27EM_0.0.7E7F2/timeout.c#line455\" title=\"Source:SLASH&#39;EM 0.0.7E7F2/timeout.c\">timeout.c<span></span> in SLASH'EM 0.0.7E7F2, line 455</a>\n     </span>\n</li>\n<li id=\"cite_note-34\"><span class=\"mw-cite-backlink\"><a href=\"#cite_ref-34\">↑</a></span> <span class=\"reference-text\"><a href=\"/wiki/Source:SLASH%27EM_0.0.7E7F2/zap.c#line1443\" title=\"Source:SLASH&#39;EM 0.0.7E7F2/zap.c\">zap.c<span></span> in SLASH'EM 0.0.7E7F2, line 1443</a>\n     </span>\n</li>\n<li id=\"cite_note-35\"><span class=\"mw-cite-backlink\"><a href=\"#cite_ref-35\">↑</a></span> <span class=\"reference-text\"><a href=\"/wiki/Source:SLASH%27EM_0.0.7E7F2/zap.c#line1489\" title=\"Source:SLASH&#39;EM 0.0.7E7F2/zap.c\">zap.c<span></span> in SLASH'EM 0.0.7E7F2, line 1489</a>\n     </span>\n</li>\n<li id=\"cite_note-36\"><span class=\"mw-cite-backlink\"><a href=\"#cite_ref-36\">↑</a></span> <span class=\"reference-text\"><a href=\"/wiki/Source:SLASH%27EM_0.0.7E7F2/zap.c#line1518\" title=\"Source:SLASH&#39;EM 0.0.7E7F2/zap.c\">zap.c<span></span> in SLASH'EM 0.0.7E7F2, line 1518</a>\n     </span>\n</li>\n<li id=\"cite_note-37\"><span class=\"mw-cite-backlink\"><a href=\"#cite_ref-37\">↑</a></span> <span class=\"reference-text\"><a href=\"/wiki/Source:SLASH%27EM_0.0.7E7F2/zap.c#line1526\" title=\"Source:SLASH&#39;EM 0.0.7E7F2/zap.c\">zap.c<span></span> in SLASH'EM 0.0.7E7F2, line 1526</a>\n     </span>\n</li>\n<li id=\"cite_note-38\"><span class=\"mw-cite-backlink\"><a href=\"#cite_ref-38\">↑</a></span> <span class=\"reference-text\"><a href=\"/wiki/Source:SLASH%27EM_0.0.7E7F2/timeout.c#line453\" title=\"Source:SLASH&#39;EM 0.0.7E7F2/timeout.c\">timeout.c<span></span> in SLASH'EM 0.0.7E7F2, line 453</a>\n     </span>\n</li>\n<li id=\"cite_note-39\"><span class=\"mw-cite-backlink\"><a href=\"#cite_ref-39\">↑</a></span> <span class=\"reference-text\"><a href=\"/wiki/Source:SLASH%27EM_0.0.7E7F2/timeout.c#line480\" title=\"Source:SLASH&#39;EM 0.0.7E7F2/timeout.c\">timeout.c<span></span> in SLASH'EM 0.0.7E7F2, line 480</a>\n     </span>\n</li>\n<li id=\"cite_note-40\"><span class=\"mw-cite-backlink\"><a href=\"#cite_ref-40\">↑</a></span> <span class=\"reference-text\"><a href=\"/wiki/Source:SLASH%27EM_0.0.7E7F2/zap.c#line1374\" title=\"Source:SLASH&#39;EM 0.0.7E7F2/zap.c\">zap.c<span></span> in SLASH'EM 0.0.7E7F2, line 1374</a>\n     </span>\n</li>\n<li id=\"cite_note-41\"><span class=\"mw-cite-backlink\"><a href=\"#cite_ref-41\">↑</a></span> <span class=\"reference-text\"><a href=\"/wiki/Source:NetHack_3.4.3/zap.c#line1503\" class=\"mw-redirect\" title=\"Source:NetHack 3.4.3/zap.c\">zap.c<span></span> in NetHack 3.4.3, line 1503</a><span>:</span> <i>bhito does a resistance check for each item</i>\n     </span>\n</li>\n<li id=\"cite_note-42\"><span class=\"mw-cite-backlink\"><a href=\"#cite_ref-42\">↑</a></span> <span class=\"reference-text\"><a href=\"/wiki/Source:NetHack_3.4.3/zap.c#line1515\" class=\"mw-redirect\" title=\"Source:NetHack 3.4.3/zap.c\">zap.c<span></span> in NetHack 3.4.3, line 1515</a><span>:</span> <i>bhito checks for system shocks</i>\n     </span>\n</li>\n<li id=\"cite_note-43\"><span class=\"mw-cite-backlink\"><a href=\"#cite_ref-43\">↑</a></span> <span class=\"reference-text\"><a href=\"/wiki/Source:NetHack_3.4.3/zap.c#line1518\" class=\"mw-redirect\" title=\"Source:NetHack 3.4.3/zap.c\">zap.c<span></span> in NetHack 3.4.3, line 1518</a><span>:</span> <i>bhito performs a system shock</i>\n     </span>\n</li>\n<li id=\"cite_note-44\"><span class=\"mw-cite-backlink\"><a href=\"#cite_ref-44\">↑</a></span> <span class=\"reference-text\"><a href=\"/wiki/Source:NetHack_3.4.3/zap.c#line1521\" class=\"mw-redirect\" title=\"Source:NetHack 3.4.3/zap.c\">zap.c<span></span> in NetHack 3.4.3, line 1521</a><span>:</span> <i>bhito calls polyobj</i>\n     </span>\n</li>\n<li id=\"cite_note-45\"><span class=\"mw-cite-backlink\"><a href=\"#cite_ref-45\">↑</a></span> <span class=\"reference-text\"><a href=\"/wiki/Source:NetHack_3.4.3/zap.c#line1140\" class=\"mw-redirect\" title=\"Source:NetHack 3.4.3/zap.c\">zap.c<span></span> in NetHack 3.4.3, line 1140</a><span>:</span> <i>create_polymon calls polyuse</i>\n     </span>\n</li>\n</ol></div>\n<h2><span class=\"mw-headline\" id=\"External_links\">External links</span></h2>\n<ul><li><a class=\"external text\" href=\"http://www.steelypips.org/nethack/343/wan2-343.html\">Breaking wands, cancelling, and polymorphing in NetHack 3.4</a></li></ul>\n<div style=\"display:none; right:10px; padding-bottom: 17px\" class=\"metadata topicon nopopups\"><div style=\"margin-top: -10px\"><a href=\"/wiki/NetHackWiki:Next_version\" title=\"This article may require revision for the next version of NetHack. Click here for more information.\"><img alt=\"This article may require revision for the next version of NetHack. Click here for more information.\" src=\"/images/b/b0/Nh343-icon.png\" width=\"32\" height=\"32\" /></a></div></div>\n<div class=\"todo\">\n<p><b>This page may need to be updated for the <a href=\"/wiki/Current_version\" class=\"mw-redirect\" title=\"Current version\">current version</a> of <i>NetHack</i>.</b>\n</p><p>It may contain text specific to <a href=\"/wiki/NetHack_3.4.3\" title=\"NetHack 3.4.3\">NetHack 3.4.3</a>. Information on this page may be out of date.\n</p><p><b>Editors:</b> After reviewing this page and making necessary edits, please change the {{nethack-343}} tag to the current version's tag or {{noversion}} as appropriate.\n</p>\n</div>\n\n<!-- \nNewPP limit report\nCached time: 20240925183623\nCache expiry: 604800\nDynamic content: false\nCPU time usage: 0.152 seconds\nReal time usage: 0.347 seconds\nPreprocessor visited node count: 4030/1000000\nPreprocessor generated node count: 6105/1000000\nPost‐expand include size: 33987/2097152 bytes\nTemplate argument size: 11802/2097152 bytes\nHighest expansion depth: 9/40\nExpensive parser function count: 5/100\nUnstrip recursion depth: 0/20\nUnstrip post‐expand size: 14667/5000000 bytes\n-->\n<!--\nTransclusion expansion time report (%,ms,calls,template)\n100.00%  299.809      1 -total\n 44.24%  132.650     43 Template:Refsrc\n 22.48%   67.403     43 Template:Refsrc/link\n  9.45%   28.318      1 Template:!_of\n  7.22%   21.639      1 Template:+_of\n  6.89%   20.670      6 Template:Of\n  5.03%   15.088      1 Template:Languages\n  4.52%   13.554      1 Template:?_of\n  4.15%   12.454      5 Template:Languages/Lang\n  3.97%   11.905      2 Template:=_of\n-->\n\n<!-- Saved in parser cache with key wikihackdb:pcache:idhash:3687-0!canonical and timestamp 20240925183622 and revision id 169895\n -->\n</div></div>\t\t\t\t\t<div class=\"printfooter\">\n\t\t\t\t\t\tRetrieved from \"<a dir=\"ltr\" href=\"https://nethackwiki.com/index.php?title=Polypiling&amp;oldid=169895\">https://nethackwiki.com/index.php?title=Polypiling&amp;oldid=169895</a>\"\t\t\t\t\t</div>\n\t\t\t\t<div id=\"catlinks\" class=\"catlinks\" data-mw=\"interface\"><div id=\"mw-normal-catlinks\" class=\"mw-normal-catlinks\"><a href=\"/wiki/Special:Categories\" title=\"Special:Categories\">Categories</a>: <ul><li><a href=\"/wiki/Category:Pages_with_missing_directory_in_Refsrc\" title=\"Category:Pages with missing directory in Refsrc\">Pages with missing directory in Refsrc</a></li><li><a href=\"/wiki/Category:Pages_with_unversioned_Function_templates\" title=\"Category:Pages with unversioned Function templates\">Pages with unversioned Function templates</a></li><li><a href=\"/wiki/Category:Pages_with_unversioned_Refsrc_templates\" title=\"Category:Pages with unversioned Refsrc templates\">Pages with unversioned Refsrc templates</a></li><li><a href=\"/wiki/Category:Todo\" title=\"Category:Todo\">Todo</a></li><li><a href=\"/wiki/Category:Strategy\" title=\"Category:Strategy\">Strategy</a></li><li><a href=\"/wiki/Category:Nethack-343_articles\" title=\"Category:Nethack-343 articles\">Nethack-343 articles</a></li></ul></div></div>\t\t\t\t<div class=\"visualClear\"></div>\n\t\t\t\t\t\t\t</div>\n\t\t</div>\n\t\t<div id=\"mw-navigation\">\n\t\t\t<h2>Navigation menu</h2>\n\t\t\t<div id=\"mw-head\">\n\t\t\t\t\t\t\t\t\t<div id=\"p-personal\" role=\"navigation\" class=\"\" aria-labelledby=\"p-personal-label\">\n\t\t\t\t\t\t<h3 id=\"p-personal-label\">Personal tools</h3>\n\t\t\t\t\t\t<ul>\n\t\t\t\t\t\t\t<li id=\"pt-createaccount\"><a href=\"/index.php?title=Special:CreateAccount&amp;returnto=Polypiling\" title=\"You are encouraged to create an account and log in; however, it is not mandatory\">Create account</a></li><li id=\"pt-login\"><a href=\"/index.php?title=Special:UserLogin&amp;returnto=Polypiling\" title=\"You are encouraged to log in; however, it is not mandatory [o]\" accesskey=\"o\">Log in</a></li>\t\t\t\t\t\t</ul>\n\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div id=\"left-navigation\">\n\t\t\t\t\t\t\t\t\t\t<div id=\"p-namespaces\" role=\"navigation\" class=\"vectorTabs\" aria-labelledby=\"p-namespaces-label\">\n\t\t\t\t\t\t<h3 id=\"p-namespaces-label\">Namespaces</h3>\n\t\t\t\t\t\t<ul>\n\t\t\t\t\t\t\t<li id=\"ca-nstab-main\" class=\"selected\"><span><a href=\"/wiki/Polypiling\" title=\"View the content page [c]\" accesskey=\"c\">Page</a></span></li><li id=\"ca-talk\"><span><a href=\"/wiki/Talk:Polypiling\" rel=\"discussion\" title=\"Discussion about the content page [t]\" accesskey=\"t\">Discussion</a></span></li>\t\t\t\t\t\t</ul>\n\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div id=\"p-variants\" role=\"navigation\" class=\"vectorMenu emptyPortlet\" aria-labelledby=\"p-variants-label\">\n\t\t\t\t\t\t\t\t\t\t\t\t<input type=\"checkbox\" class=\"vectorMenuCheckbox\" aria-labelledby=\"p-variants-label\" />\n\t\t\t\t\t\t<h3 id=\"p-variants-label\">\n\t\t\t\t\t\t\t<span>Variants</span>\n\t\t\t\t\t\t</h3>\n\t\t\t\t\t\t<div class=\"menu\">\n\t\t\t\t\t\t\t<ul>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t<div id=\"right-navigation\">\n\t\t\t\t\t\t\t\t\t\t<div id=\"p-views\" role=\"navigation\" class=\"vectorTabs\" aria-labelledby=\"p-views-label\">\n\t\t\t\t\t\t<h3 id=\"p-views-label\">Views</h3>\n\t\t\t\t\t\t<ul>\n\t\t\t\t\t\t\t<li id=\"ca-view\" class=\"collapsible selected\"><span><a href=\"/wiki/Polypiling\">Read</a></span></li><li id=\"ca-viewsource\" class=\"collapsible\"><span><a href=\"/index.php?title=Polypiling&amp;action=edit\" title=\"This page is protected.&#10;You can view its source [e]\" accesskey=\"e\">View source</a></span></li><li id=\"ca-history\" class=\"collapsible\"><span><a href=\"/index.php?title=Polypiling&amp;action=history\" title=\"Past revisions of this page [h]\" accesskey=\"h\">View history</a></span></li>\t\t\t\t\t\t</ul>\n\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div id=\"p-cactions\" role=\"navigation\" class=\"vectorMenu emptyPortlet\" aria-labelledby=\"p-cactions-label\">\n\t\t\t\t\t\t<input type=\"checkbox\" class=\"vectorMenuCheckbox\" aria-labelledby=\"p-cactions-label\" />\n\t\t\t\t\t\t<h3 id=\"p-cactions-label\"><span>More</span></h3>\n\t\t\t\t\t\t<div class=\"menu\">\n\t\t\t\t\t\t\t<ul>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div id=\"p-search\" role=\"search\">\n\t\t\t\t\t\t<h3>\n\t\t\t\t\t\t\t<label for=\"searchInput\">Search</label>\n\t\t\t\t\t\t</h3>\n\t\t\t\t\t\t<form action=\"/index.php\" id=\"searchform\">\n\t\t\t\t\t\t\t<div id=\"simpleSearch\">\n\t\t\t\t\t\t\t\t<input type=\"search\" name=\"search\" placeholder=\"Search NetHackWiki\" title=\"Search NetHackWiki [f]\" accesskey=\"f\" id=\"searchInput\"/><input type=\"hidden\" value=\"Special:Search\" name=\"title\"/><input type=\"submit\" name=\"fulltext\" value=\"Search\" title=\"Search the pages for this text\" id=\"mw-searchButton\" class=\"searchButton mw-fallbackSearchButton\"/><input type=\"submit\" name=\"go\" value=\"Go\" title=\"Go to a page with this exact name if it exists\" id=\"searchButton\" class=\"searchButton\"/>\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</form>\n\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div id=\"mw-panel\">\n\t\t\t\t<div id=\"p-logo\" role=\"banner\"><a class=\"mw-wiki-logo\" href=\"/wiki/Main_Page\"  title=\"Visit the main page\"></a></div>\n\t\t\t\t\t\t<div class=\"portal\" role=\"navigation\" id=\"p-navigation\" aria-labelledby=\"p-navigation-label\">\n\t\t\t<h3 id=\"p-navigation-label\">Navigation</h3>\n\t\t\t<div class=\"body\">\n\t\t\t\t\t\t\t\t<ul>\n\t\t\t\t\t<li id=\"n-NetHack-Wiki\"><a href=\"/wiki/Main_Page\">NetHack Wiki</a></li><li id=\"n-Forum\"><a href=\"/wiki/Forum:Watercooler\">Forum</a></li><li id=\"n-portal\"><a href=\"/wiki/NetHackWiki:Community_Portal\" title=\"About the project, what you can do, where to find things\">Community portal</a></li><li id=\"n-recentchanges\"><a href=\"/wiki/Special:RecentChanges\" title=\"A list of recent changes in the wiki [r]\" accesskey=\"r\">Recent changes</a></li><li id=\"n-randompage\"><a href=\"/wiki/Special:Random\" title=\"Load a random page [x]\" accesskey=\"x\">Random page</a></li>\t\t\t\t</ul>\n\t\t\t\t\t\t\t</div>\n\t\t</div>\n\t\t\t<div class=\"portal\" role=\"navigation\" id=\"p-Popular_pages\" aria-labelledby=\"p-Popular_pages-label\">\n\t\t\t<h3 id=\"p-Popular_pages-label\">Popular pages</h3>\n\t\t\t<div class=\"body\">\n\t\t\t\t\t\t\t\t<ul>\n\t\t\t\t\t<li id=\"n-Dungeon-features\"><a href=\"/wiki/Dungeon_feature\">Dungeon features</a></li><li id=\"n-Monsters\"><a href=\"/wiki/Monster#Canonical_list_of_monsters\">Monsters</a></li><li id=\"n-In.2FExtrinsics\"><a href=\"/wiki/Property#Intrinsic_properties\">In/Extrinsics</a></li><li id=\"n-Items\"><a href=\"/wiki/Item\">Items</a></li><li id=\"n-Spells\"><a href=\"/wiki/Spellbook#List_of_spellbooks\">Spells</a></li><li id=\"n-Game-options\"><a href=\"/wiki/Options\">Game options</a></li><li id=\"n-Websites\"><a href=\"/wiki/Websites\">Websites</a></li>\t\t\t\t</ul>\n\t\t\t\t\t\t\t</div>\n\t\t</div>\n\t\t\t<div class=\"portal\" role=\"navigation\" id=\"p-contributing\" aria-labelledby=\"p-contributing-label\">\n\t\t\t<h3 id=\"p-contributing-label\">Contributing</h3>\n\t\t\t<div class=\"body\">\n\t\t\t\t\t\t\t\t<ul>\n\t\t\t\t\t<li id=\"n-Style-guide\"><a href=\"/wiki/NetHackWiki:Style_guide\">Style guide</a></li><li id=\"n-help\"><a href=\"/wiki/NetHackWiki:How_to_help\" title=\"The place to find out\">How to help</a></li><li id=\"n-Current-projects\"><a href=\"/wiki/NetHackWiki:Current_projects\">Current projects</a></li>\t\t\t\t</ul>\n\t\t\t\t\t\t\t</div>\n\t\t</div>\n\t\t\t<div class=\"portal\" role=\"navigation\" id=\"p-tb\" aria-labelledby=\"p-tb-label\">\n\t\t\t<h3 id=\"p-tb-label\">Tools</h3>\n\t\t\t<div class=\"body\">\n\t\t\t\t\t\t\t\t<ul>\n\t\t\t\t\t<li id=\"t-whatlinkshere\"><a href=\"/wiki/Special:WhatLinksHere/Polypiling\" title=\"A list of all wiki pages that link here [j]\" accesskey=\"j\">What links here</a></li><li id=\"t-recentchangeslinked\"><a href=\"/wiki/Special:RecentChangesLinked/Polypiling\" rel=\"nofollow\" title=\"Recent changes in pages linked from this page [k]\" accesskey=\"k\">Related changes</a></li><li id=\"t-specialpages\"><a href=\"/wiki/Special:SpecialPages\" title=\"A list of all special pages [q]\" accesskey=\"q\">Special pages</a></li><li id=\"t-print\"><a href=\"/index.php?title=Polypiling&amp;printable=yes\" rel=\"alternate\" title=\"Printable version of this page [p]\" accesskey=\"p\">Printable version</a></li><li id=\"t-permalink\"><a href=\"/index.php?title=Polypiling&amp;oldid=169895\" title=\"Permanent link to this revision of the page\">Permanent link</a></li><li id=\"t-info\"><a href=\"/index.php?title=Polypiling&amp;action=info\" title=\"More information about this page\">Page information</a></li>\t\t\t\t</ul>\n\t\t\t\t\t\t\t</div>\n\t\t</div>\n\t\t\t\t</div>\n\t\t</div>\n\t\t\t\t<div id=\"footer\" role=\"contentinfo\">\n\t\t\t\t\t\t<ul id=\"footer-info\">\n\t\t\t\t\t\t\t\t<li id=\"footer-info-lastmod\"> This page was last edited on 12 June 2024, at 01:54.</li>\n\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t<ul id=\"footer-places\">\n\t\t\t\t\t\t\t\t<li id=\"footer-places-about\"><a href=\"/wiki/NetHackWiki:About\" title=\"NetHackWiki:About\">About NetHackWiki</a></li>\n\t\t\t\t\t\t\t\t<li id=\"footer-places-disclaimer\"><a href=\"/wiki/NetHackWiki:General_disclaimer\" title=\"NetHackWiki:General disclaimer\">Disclaimers</a></li>\n\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t\t\t\t<ul id=\"footer-icons\" class=\"noprint\">\n\t\t\t\t\t\t\t\t\t\t<li id=\"footer-poweredbyico\">\n\t\t\t\t\t\t<a href=\"//www.mediawiki.org/\"><img src=\"/resources/assets/poweredby_mediawiki_88x31.png\" alt=\"Powered by MediaWiki\" srcset=\"/resources/assets/poweredby_mediawiki_132x47.png 1.5x, /resources/assets/poweredby_mediawiki_176x62.png 2x\" width=\"88\" height=\"31\"/></a>\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t<div style=\"clear: both;\"></div>\n\t\t</div>\n\t\t\n<script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({\"wgPageParseReport\":{\"limitreport\":{\"cputime\":\"0.152\",\"walltime\":\"0.347\",\"ppvisitednodes\":{\"value\":4030,\"limit\":1000000},\"ppgeneratednodes\":{\"value\":6105,\"limit\":1000000},\"postexpandincludesize\":{\"value\":33987,\"limit\":2097152},\"templateargumentsize\":{\"value\":11802,\"limit\":2097152},\"expansiondepth\":{\"value\":9,\"limit\":40},\"expensivefunctioncount\":{\"value\":5,\"limit\":100},\"unstrip-depth\":{\"value\":0,\"limit\":20},\"unstrip-size\":{\"value\":14667,\"limit\":5000000},\"timingprofile\":[\"100.00%  299.809      1 -total\",\" 44.24%  132.650     43 Template:Refsrc\",\" 22.48%   67.403     43 Template:Refsrc/link\",\"  9.45%   28.318      1 Template:!_of\",\"  7.22%   21.639      1 Template:+_of\",\"  6.89%   20.670      6 Template:Of\",\"  5.03%   15.088      1 Template:Languages\",\"  4.52%   13.554      1 Template:?_of\",\"  4.15%   12.454      5 Template:Languages/Lang\",\"  3.97%   11.905      2 Template:=_of\"]},\"cachereport\":{\"timestamp\":\"20240925183623\",\"ttl\":604800,\"transientcontent\":false}}});mw.config.set({\"wgBackendResponseTime\":34});});</script>\n\t</body>\n</html>\n","rawPage":"{{languages}}\nIn ''[[NetHack]]'', '''polypiling''' is the action of [[polymorph]]ing a pile of [[item]]s in hopes of getting some useful items as a result. Objects polypiled are often referred to as '''polyfodder''' and usually consist of [[junk]]. Polymorph can be caused by a [[Spellbook of polymorph|spell]], [[wand of polymorph|wand]], or [[potion of polymorph|potion]] of polymorph.\n\nPolypiling has its drawbacks: Polyfodder may be destroyed, and hostile [[golem]]s may be generated. The exact mechanics of item destruction are rather complex, but understanding them is important if you want to get the most out of your resources - see [[#Probability of item loss and golem generation|the next section]] for more details.\n\n==Introduction==\nWhen considering polypiling, it is important to distinguish ''stacks'' of items, which are all of one type (e.g., \"4 [[blessed]] [[scroll of blank paper|scrolls of blank paper]]\"), from ''piles'' of items, which are all of the items on the floor in one [[square]]. The terms ''stack'' and ''pile'' will be used rigorously on this page.\n\nThe spell and wand supply a beam with a random range between 6 and 13 (long enough to hit 3 to 7 piles if they are all in line and contiguous and you are adjacent to the first) so you can work on several piles at once. A [[potion of polymorph]] works on one item stack at a time, the item stack you dip into it.\n\nPolymorphed items do not change item class: Potions will always yield potions, scrolls will yield scrolls, armor will always yield armor, etc. - the exception to this is polymorphing a [[crocodile]] [[corpse]], which will yield a pair of non-[[cursed]] [[fireproof]] +0 [[low boots]] instead of another [[comestible]]. [[Stackable]] [[weapons]] and [[tools]] can \"merge\" into non-stackable ones (e.g. a stack of 4 daggers morphing into a single long sword); other stackable objects are not subject to this.{{refsrc|zap.c|1234}}{{refsrc|zap.c|1312}}{{refsrc|objclass.h|15}} [[Unicorn horn]]s are especially popular polyfodder because they may polymorph into other [[magical tool]]s, such as [[magic marker]]s. Another useful thing to do if you gain polymorph in the early game is to polypile [[spellbook]]s. Polymorphing retains the [[charge]]s and [[enchantment]] of polymorphed items.\n\nWhen polymorphing [[wand]]s and spellbooks, their quality degrades. A spellbook will act as if it had been [[read]] once more. If the book's combined read/polymorph-count is four or more, it will turn into a blank spellbook counted as read 0&ndash;3 times;{{refsrc|zap.c|1552|nethack=3.6.1}} it will thus subsequently be able to be polymorphed into a non-blank spellbook with 75% chance.\n\nLikewise, a wand may count as if it had been [[charging#wands|recharged]], increasing the chance of an explosion if you attempt to recharge it; thus, it is not generally worthwhile to polypile empty wands, even if they become something worth charging, the chances of the new wand exploding instead of [[charging]] are already higher than normal. The chance of a wand's charge counter being incremented by polymorphing it is {{sfrac|6 &minus; <var>x</var>|7}} where <var>x</var> is the number of times the wand has been recharged.{{refsrc|zap.c|1333|comment=recharge count < rn2(7)  to see if polymorph increments charge counter on wands}}\n\nThe recharge count of [[tool]]s is not affected by polymorphing them, unless the tool becomes a [[magic marker]], in which case its charge counter will be set to 1.\n\nPolypiling items that belong to a [[shopkeeper]] can anger the shopkeeper.\n\n==Probability of item loss and golem generation==\nThe polymorph [[beam]] generated by the wand and spell acts on each pile separately.{{refsrc|zap.c|2744|comment=bhit calls bhitpile for each square/pile}} \n\nFirst, each item stack in the pile has a chance of resisting, which is 5% for normal items and 95% for artifacts; [[unique item]]s cannot shudder, polymorph, or be absorbed by forming golems.\n\n{{todo|List which materials can produce specific golems.}}\n\n===Shuddering===\n\nThen, each item stack that did not resist has a chance of \"shuddering\" (i.e., undergoing a [[system shock]]).{{refsrc|zap.c|1733|comment=bhitpile goes through each stack separately, calling bhito--to which a function pointer has been passed in as fhito--to perform the actual polymorph}}{{refsrc|zap.c|1515|comment=bhito calls obj_shudders on just one object, and obj_shudders does not inspect other items on the square, i.e. in the pile}}\n\nThe probability of an item stack undergoing [[system shock]] depends on its [[BUC status]], unless it is a [[wand]], and its size, as follows:<ref>{{function|zap.c|obj_shudders}} (obj_shudders determines whether a given stack will shudder.)</ref>\n\n* For stacks of less than 5 items:\n** Blessed non-wand: {{frac|12}}\n** Uncursed non-wand: {{frac|8}}\n** Wand of any BUC or stack of any cursed items: {{frac|3}}\n\n* For stacks of 5 items or more: <!-- obj_shudders treats wands and cursed items identically, but since wands don't stack, they're not mentioned here -->\n** Blessed: {{frac|6}}\n** Uncursed: {{frac|4}}\n** Cursed: 1\n\nWhen a stack shudders, it loses 1d(items in stack &minus; 1) items, except in the case of single items, which are always destroyed.\n\nFor each item stack in the pile that undergoes a system shock, there is a chance of a [[golem]] being created. For each item in a shuddering stack (counting those items destroyed by the shock itself) there is a {{sfrac|[[luck]] + 45}} probability of creating a [[golem]].{{refsrc|zap.c|1162|comment=do_osshock decides whether or not it should make a golem}} A {{sfrac|[[luck]] + 45}} chance for each item means the chance that a stack generates a golem is approximately {{sfrac|<var>s</var>|[[luck]] + 45}} for small <var>s</var>. No more than one golem can be created per pile.{{refsrc|zap.c|1160|comment=poly_zapped is a file level static variable, visible to every function in zap.c, −1 means no golem created yet, else it contains the material of the item whose shuddering resulted in golem creation. do_osshock checks that its −1 before trying to make a golem.}} However, even after NetHack has decided to create a golem, additional stacks in the pile can shudder. \n\nIf an item stack shuddered, even if some of the items that were in the stack remain, it will ''not'' be polymorphed. The rest of the stacks in the pile still have a chance of being polymorphed.{{refsrc|zap.c|1519|comment=if the obj shuddered, bhito exits WITHOUT polymorphing the object.}}<ref>{{function|mkobj.c|splitobj}} (If any items remained after the shuddering occurred, they will have been reinserted in the item tracking linked list, but they will have been inserted before the deleted ones, and bhitpile will not return to them.)</ref>{{refsrc|zap.c|1735|comment=bhitpile decides the next object before bhito has a chance to call do_osshock and destroy/split item stacks.}}{{refsrc|zap.c|1521|comment=poly_obj is called AFTER do_osshock has finished with the stack.}}\n\nFor any stack that did not shudder, the polymorph process continues. There is a (number of items in stack/1000) probability that the entire stack merges into a single item.{{refsrc|zap.c|1312|comment=poly_obj decides whether or not to merge the items in the stack}}\n\nAdditionally, when attempting to polypile [[rock]]s or [[gray stone]]s into [[gem]]s or [[worthless glass]], an 1d4 is rolled against stack size; if the stack is larger, transmutation \"backfires\", destroying half of the stack and turning the rest into rocks unconditionally.{{refsrc|zap.c|1561|nethack=3.6.1}}\n\nThe actual polymorph is now performed. See [[polypile#Probability_of_item_transformation|the next section]] for exactly what your item stack will be turning into.\n\nThis process is repeated for each item stack in the pile.\n\n=== Golem absorption and types ===\nIf a golem is created from any stack in a pile, it can \"absorb\" additional item stacks in the pile, destroying them. The material destroyed by the golem is separate from that destroyed by the original system shock(s). If, after every stack has been polymorphed, zero or one item remains in the pile (due perhaps to bad system shocks), golem creation is aborted, if it had been planned at all. According to a comment in the source: \"no golems if you zap only one object – not enough stuff\".{{refsrc|zap.c|1076|comment=golem creation aborted for not enough items}} (This comment is slightly inaccurate; it's possible to zap several items, reach this point in the code, and have the material check fail because all or all but one of the items were destroyed by system shocks.)\n\nThe golem will attempt to absorb a number of individual items (not item stacks, \"4 scrolls\" counts for 4, not 1), equal to its weight.{{refsrc|zap.c|1140|comment=mons[pm_index] is a permonst structure, defined in permonst.h, the cwt field is the weight of the monsters corpse, which is defined for golems even though they leave no corpses.}}{{refsrc|zap.c|1035|comment=polyuse doesn't stop absorbing items until minwt is 0, minwt is initialized to golem corpse weight}}{{refsrc|zap.c|1054|comment=not that polyuse is subtracting the QUANTITY of objects from minwt, not the WEIGHT of those objects. iron golems will absorb up to 2000 iron items}} Only items that are made of the same [[material]] as the item stack whose shuddering cause the golem to form are eligible for absorption. For instance, if a mithril-coat shudders and results in an iron golem, that iron golem will absorb other mithril items on the pile, but leave iron items untouched. Each eligible item stack has a 1 in (golem weight + 1) chance of escaping absorption. Given the high weights of golems, 400 for straw and paper up to 2000 for iron, it is highly unlikely that any eligible item will survive this process. Also, this absorption occurs after the items have been polymorphed. If a mithril item shudders and creates an iron golem, and several other mithril objects on the pile are polymorphed into other materials, e.g. leather coats or iron helmets, they will ''not'' be absorbed, though any leather coats or iron helmets polymorphed into mithril items ''will'' be absorbed.{{refsrc|zap.c|1043|comment=which items are eligible for absorption; note that \"mat\" is the material of the shuddered item stack NOT of the golem created}}\n\nEach stack in a pile is polymorphed separately, in order of the most recently dropped, and the type of golem is determined by the material of the first item stack to shudder and result in golem creation.{{refsrc|zap.c|1160|comment=once NetHack decides to create a golem it records the shuddering stack's material and stops trying to create golems for additional stacks.}}{{refsrc|zap.c|1733|comment=bhitpile goes through objects forwards through the list}}{{refsrc|mkobj.c|1115|comment=place_object adds dropped objects to the front of the list, where bhitpile will encounter them first.}} This is exploitable; see {{sa|One large pile|sectionsign=1}} for details.\n\n===Artifacts===\n\n[[Artifact]]s have a 95% chance of resisting. (Compare to 5% for normal items.) If this 95% chance fails, they are polymorphed just like every other item, first undergoing a shuddering check and then, if they aren't destroyed, undergoing a polymorph to a random non-artifact weapon. Artifacts have ''no'' resistance to being absorbed by a forming golem. Excalibur may be mostly safe from shuddering or polymorphing atop that pile of iron junk, but if an iron golem forms it is virtually guaranteed that Excalibur will be destroyed.{{refsrc|zap.c|1038|comment=resistance check only serves to protect the invocation items and the amulet}}\n\n===Summary of polyfodder destruction ===\n\nThis process, from the resistance check to here, is repeated for each pile hit by the beam.\n\nIn other words, there are 3 ways polyfodder can be destroyed:\n* Shuddering, the probability of which is decreased by blessing, polymorphing items other than wands, and keep the size of individual stacks under 4.\n* Merging, the probability of which is reduced by lowering the size of individual stacks.\n* Stackable weapons and tools merging into non-stackables (separate from the n/1000 chance outlined above), which is mitigated by lowering stack size of weapons and tools.\n* Absorption into forming golems, the probability of which is reduced by:\n** Increasing your luck, reducing the chance of golem formation.\n** Reducing the size of the individual item stacks, reducing the chance of golem formation.\n** Reducing the number of item stacks on the pile, reducing the number of opportunities for golems to form.\n** Limiting the number of items on the pile that are made of the same material, reducing the number of items a forming golem can absorb.\n*** In particular, the items on the top of the pile, the ones you drop last, should be a different material than the most valuable items in the pile. Potential golems will likely be made out of the material of the top items, not the material of the valuable items. Thus the valuable items will survive while the cheaper ones are destroyed. See {{sa|One large pile|sectionsign=1}} for details.\n\n== Probability of item transformation ==\nWhen polymorphing a [[magical object]], the game will try to change it into another random magical object, retrying up to two times if the replacement would be non-magical.{{refsrc|zap.c|1215}} The third item generated will be used, regardless if it is magical. The reverse is true when polymorphing a non-magical object. The upshot is that a magical object has a significantly higher probability than a non-magical object of turning into another magical object. So don't expect many magic markers from polypiling pick-axes and mirrors; you will have much better odds polypiling unicorn horns. The exceptions are potions of water, blank scrolls, blank spellbooks, and wands of nothing, all of which have a high chance of becoming more-useful items of the same type. As mentioned above, blessed items have only a 1/12 chance of undergoing system shock, so blessing your polypile items is definitely worth the expenditure if you have a surplus of holy water.\n\n{{todo|Numbers for rings (and scrolls?) would be nice.}}\n\n{|class=\"prettytable\"\n!Class!!Magical → Non-magical!!Non-magical → Magical\n|-\n|[[Armor]] || 54% || 0.60%\n|-\n|[[Gem]] || 92% || negligible\n|-\n|[[Potion]] || 1.70% || 41%\n|-\n|[[Spellbook]] || negligible || 95%\n|-\n|[[Tool]] || 60% || 0.30%\n|-\n|[[Wand]] || negligible || 93%\n|}\n\n== Forbidden items ==\nThe following items cannot be produced by polymorph:\n\n* [[magic lamp]]{{refsrc|zap.c|1319|comment=no magic lamps}}\n* [[wand of wishing]]\n* [[wand of polymorph]]{{refsrc|zap.c|1329|comment=no wands of wishing or polymorph}}\n* [[potion of polymorph]]{{refsrc|zap.c|1338|comment=no potions of polymorph}}\n* [[spellbook of polymorph]]{{refsrc|zap.c|1343|comment=no spellbooks of polymorph}}\n* [[artifact]]s{{refsrc|zap.c|1225|comment=mksobj is called with \"artif\" set to false -- no artis}}\n* any item not normally randomly generated, such as [[athame]]s and [[fedora]]s\n\nThe following items cannot be polymorphed:\n\n* [[Rider]] corpses\n* [[wand of polymorph]]\n* [[potion of polymorph]]\n* [[spellbook of polymorph]]\n\n==Strategy==\nPolypiling is often used to get [[ascension kit]] [[armor]] (and completed by [[wish]]ing). Therefore, you might want to collect all those [[elven cloak]]s and [[elven boots|boots]] in the game.\n\nPolypiling is most often used by [[conduct]] players who need certain items: It can substitute for wishing, [[prayer]] and [[sacrifice]] benefits, or [[illiterate|literacy]], and it can be done relatively safely. Generated monsters offer an almost unlimited supply of polyfodder. However, polypiling is time-consuming and tedious. Generally, it is not worth it unless you are trying for conducts, or unless you are looking for many items at once.\n\nOver-preparing is the other common reason for polypiling. This goes for many first ascenders, [[pacifist]] characters who want the most [[protection]], or even an attempt to get a very high score by polypiling rocks into gems.\n\n===General tips===\n* Never handle both polyfodder and items you want to keep in your main inventory at the same time, and never ever drop anything useful on your polypile line. People have wondered where their [[bag of holding]] with all the artifacts went.\n* Even if you do not care about polyfodder loss, #name rocks to get stacks of at most four. There is a limit to how many gems can be created.\n* Max out your [[luck]] to minimize golem creation. That reduces the total material lost. This is particular useful for larger stacks and piles, where any golem will do comparatively more damage. Do not max your luck if using the [[#One large pile|one large pile strategy below]].\n* Configure [[autopickup exception]]s to pick up good morphs and your want-to-keeps from the pile.\n* Polypile your items near a [[general store]] to help identify good morphs. Be ''very'' careful of polypiling in a store; if any of the shopkeeper's items are polymorphed, they will become angry and attack you without giving you a chance to pay.\n* Familiarize yourself with the ways polyfodder is lost to determine how much risk to take on, given your available polyfodder and the amount of polypile sources you have available to you. Your patience is also a factor, perfect optimization is time consuming and tedious.\n\n===Preparing===\n* To minimize loss, it is a good idea to mass-[[bless]] magical polyfodder, which is much less abundant than ordinary junk. [[Potion]]s and [[scroll]]s can be [[cancel]]ed so they will [[stack]], and then dipped in {{! of|holy water}}. Name and separate them into stacks of at most four items before polymorphing. Only armor and weapons (and wands) retain their enchantment; these should be canceled if negative before blessing. A large stack of [[dart]]s can be enchanted to +7 in one go and then polypiled individually for potentially powerful weapons. Magical armor and tools tend to become non-magical rather than shuddering, so there is no point blessing them.\n** Non-stackables, such as [[ring]]s, require more work to bless. Often, it is not worth the costs. The most efficient way is with a blessed, confused [[scroll of remove curse]]. In a safe location, pick up as much polyfodder as possible but carry no other uncursed items. Then confuse yourself, read a blessed scroll of remove curse, end confusion, and mass-uncurse cursed items with the {{+ of|remove curse}} spell at a skilled level. The light blue aura boon when carefully [[pray]]ing on an altar or even another scroll can also uncurse your entire main inventory. This procedure yields 12.5 blessings per scroll on average.\n* Unless you will need only one read, name [[spellbook]]s individually how often you have read them, and sort them accordingly. Under each pile you intend to polymorph, engrave that number. Any nameless books after the polymorph will count as read one more time. Keep in mind how often you will have to re-read the spells you get.\n* Sort polyfodder by [[BUC]] status so you won't have to re-test after polypiling.\n\n===When to polypile===\n* If a game has been unforgiving, a good time to consider polypiling is when there are many things needed at once; the odds of getting ''at least one'' of them is improved. For example, if you're looking for a [[magic marker]] in particular, getting a [[tinning kit]] would be seen as a waste. However, if you were looking for both a magic marker ''and'' a tinning kit, the effective odds of getting something you want go up. If you're looking for a [[horn of plenty]], a magic marker, a [[pair of lenses]], and a tinning kit all at once, polypiling unicorn horns begins to look increasingly attractive.\n* '''[[Potion]]s''' are attractive to polymorph, due to the ease of creating fruit juice and water, and mass blessing them. Furthermore, with the help of [[alchemy]], a good third of the available potions are useful in some way. While you may not get the potion of enlightenment, or gain level, that you wanted, you are likely to end with various healing potions, levitation, etc, that can be quickly used to work towards what you really want.\n* '''[[Scroll]]s''' are commonly polymorphed for similar reasons. Here, part of the motivation is in doing away with magic markers. It adds a great deal of randomness to the mix, but scrolls are still cheaper than marker charges.\n* '''[[Magical tool]]s''', especially [[unicorn horn]]s, are a common fodder due to the large number of useful magical tools and the abundance of unicorn horns. (Revived unicorns have a 50% chance of leaving another horn.) Certainly, the magic marker is generally what most would go for, but in the attempt you might find other goodies. A [[horn of plenty]], for instance, spawns potions you can polypile; a [[fire horn|fire]] or [[frost horn|frost]] horn may also be of help, as may a [[magic harp]] or [[magic flute]]. This is especially helpful to Tourists or other neutral players with the [[PYEC]].\n* '''[[Magical armor]]''' can help finish off an [[ascension kit]], most often using the various abundant [[elven]] equipment as fodder. This is mostly only useful to ([[wishless]]) conduct players, as the [[castle]]'s guaranteed five wishes are good enough to get all the missing types of armor; furthermore, its armor stores might contain missing pieces.\n** A common trick is to polymorph elven armor, which can safely be enchanted to +7, into a +7 [[T-shirt]]. The number of +7 armors isn't terribly prohibitive: the blessed [[scroll of enchant armor]] (to get to +7) will also bless the armor and reduce the odds of shuddering.\n::{|class=\"prettytable\"\n!Confidence !!Base chance!!25%!!50%!!75%!!95%\n|-\n!Polymorphs !!1 in 100\n|28.62\n|68.97\n|137.94\n|298.07\n|-\n!Shuddering !!1 in 12\n|3.31\n|7.97\n|15.93\n|34.43\n|-\n!Armors needed (approx.) !!—\n|3.59\n|8.66\n|17.32\n|37.41\n|}\n* '''[[Ring]]s''' can help finish off an [[ascension kit]], particularly with rings of {{= of|levitation|slow digestion|or=1|free action}}, if you haven't found them before [[Medusa's Island]]. Most other rings are only useful in specific situations, polypiling or not.\n** One cheesy trick is to polypile for rings of {{= of|protection|or=1|increase damage}}, with the intention of [[eating jewelry|eating]] them. It's possible to get a ridiculously low [[AC]] <!-- AC does not overflow below −127--> or ridiculously high damage. The former is pointless, other than to sound impressive, because you can reasonably get to &minus;40AC without such mind-numbing busywork, and that is enough to make even a [[minotaur]] barely scrape the polish on your armor. The latter may be for [[Death farming]] to a ludicrously high score.\n* '''[[Spellbook]]s''', if you are happy with any random book and accept you cannot re-read it. Early in the game, when you don't know many spells yet, you can get dozens of new ones out of a few spellbooks.  In [[3.6.0]] the bug allowing to always learn new spells from overpolymorphed spellbooks has been fixed; a non-blank polymorphed spellbook will be counted as read 1&ndash;3 times, and you can only learn a new spell from it if this number is lower than 3. Otherwise, it will turn blank on reading. Thus, it is advised to formally [[identify]] unknown polymorphed spellbooks before reading, so you could overwrite them with a [[magic marker]] in the latter case.  Newbies might carry books and rings along (unencumbered) into a [[Minetown]] shop in the early game and polymorph there.\n* '''Junk armor''': Shirts are annoyingly rare in the main dungeon, but other armors are not. Zapping a wand of polymorph at that 15 pages pile of items in [[Fort Ludios]] is probably the easiest way to get a shirt outside of bones, wishing, or playing a Tourist.\n* '''When''' can also be considered \"in the temporal sense\". By the time you reach [[Vlad's Tower]], you can take a little break, lock the door and begin the process in peace and quiet, after having accumulated a backbreaking load of loot. One nice benefit is that you can also use that location to summon wraiths that will leave a corpse to eat, unlike the rest of [[Gehennom]], should your efforts yield [[magic marker]]s for writing {{? of|genocide}} on any cursed blank scrolls (for generating the last, note the guaranteed [[water walking boots]] there).\n\n===When not to polypile===\n* '''[[Wand]]s''' are ''generally'' not worth it. This is mostly because by the usual time the player has a serious stash of wands, and abundant means to polymorph objects (read: the spell), there is only one wand seriously worth going after: {{wand of|death}}. But this late into the game, there are only four monsters that it matters on—[[Pestilence]], [[Famine]], the [[Wizard of Yendor]], and the [[high priest of Moloch]]. Likely (but not ''necessarily''), you already have enough wands of death to deal with those enemies. Also, polymorphed wands will more likely explode if charged again.\n** In the midgame, however, it may be worth it. If the player doesn't quite have enough items to make a full polypile line, a square of scrap wands may not make anything that you need, but it ''might'' make a wand you've yet to identify (if it has charges left). It may also be that you need a wand's special properties—for example, a [[wand of fire]]'s ability to engrave a permanent [[Elbereth]] square.\n* '''Specific [[spellbook]]s''': If you only need one specific spellbook (or a [[spellbook of polymorph]] to start with), there are better methods than polypiling. Wizards with sufficient [[luck]] can write one using a [[magic marker]]. Anyone willing to do the [[altar]] work can get books from their god, especially the last few ones you do not yet know.\n* There are better ways to get various other items. For example, a [[trident]], while normally quite rare, can be found in the [[death drop]] of a salamander or a [[horned devil]]. A silver saber, very desirable for [[twoweapon]] combat, can be found in the inventory of the Minetown watch, or the various captains that show up in the [[Castle]].\n* Items not generated randomly aren't available from polypiling, e.g. [[athame]]s.\n\n==Stacking strategies==\n\n===Seven small piles===\n\n====Step by step====\n* Maximize your [[luck]]. (+13 is best.)\n* Collect your items. See the section above to decide what to polypile.\n* Individually name stackables to separate them into stacks of two (preferable), three, or four. Try to avoid single items, except for weapons and tools, which should be completely unstacked.\n* Distribute the item stacks over seven small piles in a straight line, each pile containing a good mix of different types of material. Put the items you want polymorphed most at the front of the line. (First three piles are guaranteed, each of the four piles after that is progressively less likely.)\n* Zap polymorph.\n* Review results. [[Autopickup]] with [[Autopickup exceptions|exceptions]] can automate this for you.\n* Repeat.\n\n====Explanation====\nSeparating your stackables minimizes the chances of merging and shuddering. Weapons and tools will eventually turn into something unstackable, and you lose all but one. For other items, stacks of one are less desirable, since shuddering destroys them completely, while larger stacks only lose half of the stack on average.\n\nMaximizing your luck minimizes the chances of golems forming.\n\nDistributing your item stacks over 7 squares minimizes the damage a forming golem can do, because a golem can only absorb items from the square it forms on. \n\nEnsuring a good mix of different materials also minimizes the damage a forming golem can do, because the golem can only absorb items that are made of the same material as the shuddered item that led to its formation.\n\n===One large pile===\n====Step by step====\n* Minimize your luck. (0 is good; &minus;13 is better!)\n* Collect your items. See the section above to decide what to polypile, but avoid items made of [[mineral]] (e.g. some rings, wands). The number of [[wand]]s and [[ring]]s destroyed by this method will be slightly greater than the number destroyed by the seven small piles method. If you want to polypile mineral-based items, do ''not'' use this method.\n* Individually name stackables to separate them, especially weapons and tools. Separating them all the way into stacks of just one single item is best, but just getting them into stacks of four or fewer is almost as good.\n* Put every item stack in one large pile.\n* Obtain a very large number of rocks.\n* Curse the rocks.\n* Individually name the rocks to break them into small stacks. Five rocks per stack is best, get as close to that as your patience allows. Do not make stacks smaller than five.\n* Drop all the rocks on top of the item pile. Make sure you drop the rocks ''after'' the items so they are on top!\n* Zap polymorph.\n* Kill the stone golem.\n* Review results.\n* Repeat.\n\nYou ''want'' a stone golem to form from those rocks, because it will prevent other types of golems from forming and damaging your valuable polyfodder. Assuming cursed rocks in stacks of 5, and [[Luck]] of 10: 50 rocks is approximately a 58% chance of a stone golem, 200 rocks is approximately a 97% chance of a stone golem, and 300 rocks is approximately a 99.5% chance of a stone golem.\n\nA [[rubber chicken]] and a [[pick-axe]] are quite helpful here, in order to create a large number of rocks near the fodder pile.\n\n====Explanation====\nThis method exploits the specifics of the polypiling algorithm.\n\nSeparating your stackables minimizes the chances of merging and shuddering. The only threat to deal with now is golem absorption.\n\nOrdinarily putting every item stack on one pile would be a terrible idea, because any forming golem would have access to every item you were polypiling. However, in this strategy we ensure that the golem won't be able to absorb anything useful, by manipulating the material it is made of. A golem can only absorb items made of the same material it is. An iron golem generated from shuddering mithril can only absorb other mithril items. A wood golem generated from shuddering wood can only absorb other wood items. And&mdash;most importantly in this case&mdash;a stone golem generated from a shuddering mineral item can only absorb other mineral items.\n\nOnly one golem can be generated from a pile, and the first item stack to shudder and lead to golem formation gets to decide the material. By putting the rocks on top we ensure that they get processed first.\n\nCursing the rocks increases the chances that they will shudder.\n\nKeeping the rocks in stacks of more than 4 (5 in this case) also increases this chance.\n\nMinimizing our luck increases the chances that our rocks will give rise to a golem once they shudder.\n\nThe probability of an individual stack ''not'' giving rise to a golem, ''if'' it shudders, is (<small>{{sfrac|luck + 44|luck + 45}}</small>)<sup><var>s</var></sup>, where <var>s</var> is the stack size. The probability of the stack shuddering (and not resisting initial polymorph) is 95% for stacks of 5 or more cursed items; this is the highest chance we can get. Thus the probability of a stack ''not'' forming a golem is 0.05 + 0.95 × (<small>{{sfrac|luck + 44|luck + 45}}</small>)<sup><var>s</var></sup>. If every stack of rocks in a pile is identical (all contain 5 cursed rocks), then the chance of none of them giving rise to a golem is (0.05 + 0.95 × (<small>{{sfrac|luck + 44|luck + 45}}</small>)<sup><var>s</var></sup>)<sup><var>n</var></sup>, where <var>n</var> is the number of stacks. Thus we want our stacks to be as small as possible, so that we can have as many as possible, ''without'' having fewer than 5 rocks per stack.\n\nFor the most part, there are no items made from mineral you might be interested in polypiling for. The exceptions are marble wands and granite, opal, clay, coral, moonstone and black onyx rings. The material an item is made of can change when it is polymorphed, and it is the final material that matters for golem absorption. Since any polymorphed wand or ring could end up being one of the mineral ones, the effect is that this technique will consume slighty more wands and rings than the other technique, and that the specific item types that are made of mineral cannot be polypiled for (with this method).\n\nThere is a 5% chance of a normal item resisting polymorph and reaching this point unchanged, so the initial material matters somewhat as well. For instance if you try to polypile a figurine and it resists, it is almost guaranteed to be absorbed (because figurines are mineral).\n\nBeware! In the unlikely event that a stone golem does ''not'' form from the rocks: then, given the large pile underneath, there is a good chance a golem ''will'' form from another material, possibly doing a lot of damage. With enough cursed rocks, less material is lost on average with the one-pile than with the multi-pile technique.\n\n====One large pile with meatballs====\n\nIf you know [[stone to flesh]] spell, you should cast it at your rocks to turn them into [[meatball]]s, then use them instead of rocks in the advice above. In this case, you can polypile for mineral items, but can't polypile for [[egg]]s and [[tripe ration]]s. The golem rising from the pile will be a [[flesh golem]] instead of a [[stone golem]].\n\n==Variants==\n===SLASH'EM===\nIn SLASH'EM, polymorphed items revert back to their original form after 500&ndash;999 turns.{{refsrc|timeout.c|455|version=SLASH'EM 0.0.7E7F2}} Items that will eventually revert are described as \"hazy\" in [[wizard mode]]. Hazy items can be \"fixed\" by dipping them in a [[potion of restore ability]].\n\nThere are some exceptions to this:\n* Items that were initially eggs laid by the player{{refsrc|zap.c|1443|version=SLASH'EM 0.0.7E7F2}} or corpses{{refsrc|zap.c|1489|version=SLASH'EM 0.0.7E7F2}} do not revert.\n* If a [[magic lamp]] is randomly chosen at first, the [[oil lamp]] with which it is replaced does not revert.{{refsrc|zap.c|1518|version=SLASH'EM 0.0.7E7F2}}\n* Items that become [[land mine]]s or [[beartrap]]s do not revert.{{refsrc|zap.c|1526|version=SLASH'EM 0.0.7E7F2}}\n* Items that become the same object type as they were before do not revert, even if they otherwise changed (such as a diluted potion of sickness becoming an undiluted potion of sickness).{{refsrc|timeout.c|453|version=SLASH'EM 0.0.7E7F2}}\n\nThe reversion is done not by restoring the original item but by changing the item to the original item's type,{{refsrc|timeout.c|480|version=SLASH'EM 0.0.7E7F2}} which has some consequences that may not be expected, including the following:\n* Some properties, such as [[beatitude]] and [[erosion]], are carried over from the transformed item rather than the original.\n* Some other properties, such as being an [[artifact]], are lost.\n* A stack of multiple items that became a single item reverts to a single item of the original type.\n* An item that became an [[amulet of unchanging]] does not revert.{{refsrc|zap.c|1374|version=SLASH'EM 0.0.7E7F2}}\n\nThe transmutation limits the usefulness of polypiling somewhat, as obtaining permanent items requires a commensurate supply of potions. However, polypiling is still just as useful to obtain items that can be useful right away or relatively soon; for example, a polypiled [[magic marker]] can be immediately used to write a few scrolls, and then allowed to transmute back after it is empty.\n\nIn some cases, the reversion can be useful:\n* When polypiling magical items, if they turn into non-magical items, one can simply wait for them to revert, and try again.\n* [[Boulder]]s can be polymorphed into statues and transported more easily, and will turn back into boulders.\n* Any armor can be safely enchanted to +7 by polymorphing it into [[elven armor]].\n** If you have a [[wand of polymorph]] and two or three [[potion of gain level|potions of gain level]], you can easily get a +7 [[helm of brilliance]] by polypiling ubiquitous orcish and dwarven helmets until you get an elven item (or something that can be [[upgrade]]d into one), enchanting, and upgrading the enchanted helmet after it reverts.\n* Some further consequences are probably bugs:\n** After polymorphing a boulder into a statue, breaking it will result in a number of rocks; if they are separated, each separate stack reverts to a boulder.\n** Weapons can be polymorphed into [[dwarvish mattock]]s, [[upgrade]]d to [[pick-axe]]s, and polymorphed further into other tools, particularly charged ones; when they revert, the weapon's enchantment will be the tool's number of charges, which can be much higher than normally feasible.\n\n===SlashTHEM===\nIn [[SlashTHEM]], polymorphed items that will revert after a certain amount of turns are displayed as \"hazy\" in normal play; the same mechanics apply for \"fixing\" that item in its current form.\n\n== Code ==\n{{function|zap.c|bhito}} is the root of item polymorphs from the spell and wand. It is called for each stack of items a polymorph zap hits by [[zap.c#bhitpile|bhitpile]]. First it refuses to polymorph polymorph-sources, and allows items to resist.{{refsrc|zap.c|1503|comment=bhito does a resistance check for each item}} It calls [[Zap.c#obj_shudders|obj_shudders]] to check for system shocks{{refsrc|zap.c|1515|comment=bhito checks for system shocks}} and calls [[Zap.c#do_osshock|do_osshock]] to perform them.{{refsrc|zap.c|1518|comment=bhito performs a system shock}} Finally bhito calls [[zap.c#polyobj|polyobj]] to actually transform the stack.{{refsrc|zap.c|1521|comment=bhito calls polyobj}}\n\n[[Zap.c#do_osshock|do_osshock]] determines whether or not to generate a [[golem]], and after all the stacks in the pile have been polymorphed by repeated calls to bhito, bhitpile calls [[zap.c#create_polymon|create_polymon]] to actually generate thegolem.\n\nIf create_polymon is called, it possibly creates the golem and then, if the golem was created, in turn calls [[zap.c#polyuse|polyuse]] to consume additional polyfodder.{{refsrc|zap.c|1140|comment=create_polymon calls polyuse}}\n\n==References==\n<references/>\n\n== External links ==\n* [http://www.steelypips.org/nethack/343/wan2-343.html Breaking wands, cancelling, and polymorphing in NetHack 3.4]\n[[Category:Strategy]]\n{{nethack-343}}"}