{"title":"Compiling","url":"https://nethackwiki.com/wiki/Compiling","type":"markdown","data":"This page contains help on **compiling** NetHack 3.6, either the officially released version (3.6.0) or the version from the development sources (as of 2016 October). Compiling is necessary if you want to try out the dev team's latest changes when they haven't released a compiled version yet, or if you want to apply a [patch](/wiki/Patch \"Patch\"), e.g. from the [bilious database](http://bilious.alt.org/) or make changes of your own.\n\nInformation about compiling NetHack 3.4.3 can still be found in [an old version of this article, q.v.](https://nethackwiki.com/mediawiki/index.php?title=Compiling\\&oldid=99565).\n\n[ ]\n\n## Contents\n\n- [1 Obtaining the officially released sources](#Obtaining_the_officially_released_sources)\n\n- [2 Obtaining the development sources](#Obtaining_the_development_sources)\n\n- [3 Preparing to compile](#Preparing_to_compile)\n\n  - [3.1 Gathering build tools](#Gathering_build_tools)\n  - [3.2 Selecting a hints file](#Selecting_a_hints_file)\n  - [3.3 Modifying a hints file](#Modifying_a_hints_file)\n\n- [4 Running the build setup script](#Running_the_build_setup_script)\n  - [4.1 Windows](#Windows)\n\n- [5 Compiling](#Compiling)\n\n- [6 Installing](#Installing)\n\n- [7 Creating the system config file](#Creating_the_system_config_file)\n\n## Obtaining the officially released sources\n\nThe official released NetHack source can be found here: <https://nethack.org/v360/download-src.html>\n\nOnce you have obtained the tarball, you will need to extract it, either using standard tools (`tar -xvf nethack-360-src.tgz`) or some other archive extractor that can handle the tar and gzip formats.\n\nNote that if you use a graphical archive extractor like 7zip, you may have to extract twice: once to decompress the gzip and obtain the plain tar file, and a second time to extract the actual contents.\n\n## Obtaining the development sources\n\nThe development source repository is available at <http://git.code.sf.net/p/nethack/NetHack>\n\nIf you have git installed, you can retrieve a copy of the repository using either of the following commands:\n\n`git clone https://github.com/NetHack/NetHack`\n\nalternately:\n\n`git clone http://git.code.sf.net/p/nethack/NetHack`\n\n(It doesn't matter which repository you use; they're both mirrors of the public portion of the dev team's repository.)\n\nThis will create a subdirectory (a.k.a., a \"folder\") called 'NetHack', in the current directory, and the new subdirectory, 'NetHack', will be a git repository, containing a working copy of the latest public development source for what will eventually become NetHack 3.6.1.\n\n## Preparing to compile\n\n### Gathering build tools\n\nIn order to build NetHack, you will neet at minimum the following tools:\n\n- a C compiler (typically 'gcc' or 'clang')\n- 'make' (typically Gnu 'make', and note in particular that Microsoft's 'nmake' won't work)\n- 'flex' and 'bison', or some other suitable lex/yacc implementation\n- common libraries (including development headers); these should be includeded if you have a complete working build environment (e.g., if you have installed build-essential on Debian-derived systems, you should have them). I don't know a complete list of all the libraries that are required, but I believe the list includes standard POSIX regular expression libraries, termcap/terminfo, and of course the standard C library. Beyond that, I'm not sure.\n- any libraries (including development headers) needed for the specific ports you wish to build; if this is the first time you are building NetHack, it is recommended that you start by building the Unix TTY port first, as it is the easiest and has no additional requirements of its own beyond the ones that all the ports require.\n\nNote that you will need copies of all these on the platform for which you are building NetHack. Cross-compiling NetHack, if even possible, is much more complicated and far beyond the scope of this article.\n\n### Selecting a hints file\n\nThe new build system introduced in NetHack 3.6.0 is based on \"hints files\", which inform the rest of the build system about various things which might differ from one system to another, and which you might wish to customize when building, even if you are making no changes to the actual game. Things like which directory to install the game's binaries into, which directory to use for storing the game data, which flags to pass to the compiler, and even basic facts like what the compiler on your system is called, are all specified in the hints file. A hints file is simply a plain text file, formatted like a shell script, that contains hints for the NetHack build system, in the form of setting variables.\n\nYou can find a collection of existing hints files in the sys/unix/hints/ directory. You may find that one of them is closer to what you want than others. For example, the 'linux' hints file is designed for a single-user install in \\~/nh/install; whereas, the 'unix' hints file is designed for a traditional system-wide install in /usr. Look through the existing hints files and see if you can find one that is a close fit for your needs.\n\n### Modifying a hints file\n\nIf you need to combine or modify a hints file, here are some useful things to know:\n\n- Lines starting with # are comments. You can thus prepend # to an existing line to comment it out, rendering it ineffective but leaving it there for reference.\n- There are four main directories that need to be specified: 'HACKDIR', 'SHELLDIR', 'INSTDIR', and 'VARDIR'. These are often based on a 'PREFIX' directory, which is not itself used directly for anything, but the others are typically located inside of it.\n- The CHOWN and CHGRP variables should contain the commands used to change ownership and group-ownership of files, respectively. Setting it to a command that doesn't do anything (such as 'yes' or 'true', as the stock 'linux' hints file does) will result in permissions not being changed, which is typically not what you want except possibly for a single-user install. If you are modifying the 'linux' hints file to build on a Linux system, you will probably want to change these lines.\n- The WINSRC, WINOBJ, and WINLIB lines control which window port you will build. If this is your first time compiling NetHack, it is recommended to start with the TTY port, which is easiest to build successfully.\n- In 3.7.0, hints/linux tends not to compile, but hints/linux-debug works fine. VARDIR seems to need '/var' to be at the end of the path you choose, or else the game won't start because it can't find the scoreboard. You may also want to remove 'CFLAGS+=-DPANICLOG\\_FMT2' because it generates tons of warnings.\n\n## Running the build setup script\n\nOnce you have selected and possibly modified a hints file, you are almost ready to run the setup script. Run \"make fetch-lua\".\n\nThen on most platforms, setup is done with the following command: `sys/unix/setup.sh sys/unix/hints/whichever_hints_file_you_are_using`\n\nOn non-Unix platforms, the setup process may be slightly different. See the documentation for your platform. The setup script should copy the needed build-system files (e.g., makefiles) into place and modify them as needed.\n\n### Windows\n\nFor Nethack 3.6 on Windows, it's a good idea to follow the instructions inside `sys\\winnt\\Install.nt`. The following assumes that you have your compiler and coreutils from projects such as MinGW and GnuWin32.\n\n- Navigate to `sys\\winnt` and run `nhsetup.bat`.\n\n* Navigate to `src` and edit `Makefile.gcc`.\n\n- Inside the Makefile, you're going to want to edit or check the following things:\n\n  - Do you want the outputted binary to belong in `..\\binary`, or somewhere else?\n\n  - Are you compiling for a specific architecture (x86 or x64)? If so, edit `TARGET_CPU`.\n\n  - Do you want Curses window port support? If so, uncomment `ADD_CURSES=Y` and make sure that you've cloned the PDCurses repository from <https://github.com/wmcbrine/PDCurses>.\n\n  - TODO: (Test this, I only wanted the terminal interface) Do you want Qt support? You're going to want to change this option and specify the location of the Qt directory.\n\n  - On Line 484, are the compiler macros set up correctly? Mine were not, as Chocolatey links the compilers to standard `gcc` filenames instead of `mingw32-gcc.exe`. Comment out the `#ifndef` directive and specify the compilers.\n\n* Make with your `make` program. For me, the invocation was `mingw32-make -f Makefile.gcc install`. Note that if you don't specify the `-f Makefile.gcc` option, you'll get an error, as the standard `Makefile` is for Visual Studio's `nmake` program.\n\n*The following information pertains to an upcoming version ([NetHack 3.7.0](/wiki/NetHack_3.7.0 \"NetHack 3.7.0\")). If this version is now released, please verify that it is still accurate, then update the page to incorporate this information.*\n\nNethack 3.7 has good support for building, running, and debugging in Visual Studio 2017, 2019, and 2022, including a working solution file. Tools such as MinGW and GnuWin32 are not required. See `sys\\windows\\Install.windows` for instructions.\n\n## Compiling\n\nAt this point, you may be able to just run the 'make' command and get a working build.\n\n## Installing\n\nIf the build goes well, you can (as root/superuser if necessary, or with sudo) use the 'make install' command to install your newly compiled NetHack.\n\n## Creating the system config file\n\nWhen you try to run your new build, it will complain that there is no syscf file and refuse to do anything until you create that file. The syscf file is allowed to be empty; it just has to exist. Simply create an empty file named sysconf in your HACKDIR and nethack will run normally.\n\nDepending on which hints file you used, some permissions may need to be changed before the game can be run as a regular user.\n\n[![This article has been updated to reflect NetHack 3.6.0. Click here for more information.](/images/d/d6/Nh360-icon.png)](/wiki/NetHackWiki:Next_version \"This article has been updated to reflect NetHack 3.6.0. Click here for more information.\")\n\n**This page may need to be updated for the [current version](/wiki/Current_version \"Current version\") of *NetHack*.**\n\nIt may contain text specific to [NetHack 3.6.0](/wiki/NetHack_3.6.0 \"NetHack 3.6.0\"). Information on this page may be out of date.\n\n**Editors:** After reviewing this page and making necessary edits, please change the {{nethack-360}} tag to the current version's tag or {{noversion}} as appropriate.\n","html":"<!DOCTYPE html>\n<html class=\"client-nojs\" lang=\"en\" dir=\"ltr\">\n<head>\n<meta charset=\"UTF-8\"/>\n<title>Compiling - NetHack Wiki</title>\n<script>document.documentElement.className = document.documentElement.className.replace( /(^|\\s)client-nojs(\\s|$)/, \"$1client-js$2\" );</script>\n<script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({\"wgCanonicalNamespace\":\"\",\"wgCanonicalSpecialPageName\":false,\"wgNamespaceNumber\":0,\"wgPageName\":\"Compiling\",\"wgTitle\":\"Compiling\",\"wgCurRevisionId\":171312,\"wgRevisionId\":171312,\"wgArticleId\":5343,\"wgIsArticle\":true,\"wgIsRedirect\":false,\"wgAction\":\"view\",\"wgUserName\":null,\"wgUserGroups\":[\"*\"],\"wgCategories\":[\"Upcoming\",\"Development\",\"Nethack-360 articles\"],\"wgBreakFrames\":false,\"wgPageContentLanguage\":\"en\",\"wgPageContentModel\":\"wikitext\",\"wgSeparatorTransformTable\":[\"\",\"\"],\"wgDigitTransformTable\":[\"\",\"\"],\"wgDefaultDateFormat\":\"dmy\",\"wgMonthNames\":[\"\",\"January\",\"February\",\"March\",\"April\",\"May\",\"June\",\"July\",\"August\",\"September\",\"October\",\"November\",\"December\"],\"wgMonthNamesShort\":[\"\",\"Jan\",\"Feb\",\"Mar\",\"Apr\",\"May\",\"Jun\",\"Jul\",\"Aug\",\"Sep\",\"Oct\",\"Nov\",\"Dec\"],\"wgRelevantPageName\":\"Compiling\",\"wgRelevantArticleId\":5343,\"wgRequestId\":\"7d17232a426994deabb5a86b\",\"wgCSPNonce\":false,\"wgIsProbablyEditable\":false,\"wgRelevantPageIsProbablyEditable\":false,\"wgRestrictionEdit\":[],\"wgRestrictionMove\":[],\"wgWikiEditorEnabledModules\":[],\"wgCategoryTreePageCategoryOptions\":\"{\\\"mode\\\":0,\\\"hideprefix\\\":20,\\\"showcount\\\":true,\\\"namespaces\\\":false}\"});mw.loader.state({\"site.styles\":\"ready\",\"noscript\":\"ready\",\"user.styles\":\"ready\",\"user\":\"ready\",\"user.options\":\"ready\",\"user.tokens\":\"loading\",\"mediawiki.legacy.shared\":\"ready\",\"mediawiki.legacy.commonPrint\":\"ready\",\"mediawiki.toc.styles\":\"ready\",\"mediawiki.skinning.interface\":\"ready\",\"skins.vector.styles\":\"ready\"});mw.loader.implement(\"user.tokens@0tffind\",function($,jQuery,require,module){/*@nomin*/mw.user.tokens.set({\"editToken\":\"+\\\\\",\"patrolToken\":\"+\\\\\",\"watchToken\":\"+\\\\\",\"csrfToken\":\"+\\\\\"});\n});RLPAGEMODULES=[\"site\",\"mediawiki.page.startup\",\"mediawiki.user\",\"mediawiki.page.ready\",\"mediawiki.toc\",\"mediawiki.searchSuggest\",\"skins.vector.js\"];mw.loader.load(RLPAGEMODULES);});</script>\n<link rel=\"stylesheet\" href=\"/load.php?debug=false&amp;lang=en&amp;modules=mediawiki.legacy.commonPrint%2Cshared%7Cmediawiki.skinning.interface%7Cmediawiki.toc.styles%7Cskins.vector.styles&amp;only=styles&amp;skin=vector\"/>\n<script async=\"\" src=\"/load.php?debug=false&amp;lang=en&amp;modules=startup&amp;only=scripts&amp;skin=vector\"></script>\n<meta name=\"ResourceLoaderDynamicStyles\" content=\"\"/>\n<link rel=\"stylesheet\" href=\"/load.php?debug=false&amp;lang=en&amp;modules=site.styles&amp;only=styles&amp;skin=vector\"/>\n<meta name=\"generator\" content=\"MediaWiki 1.32.5\"/>\n<meta name=\"description\" content=\"The official released NetHack source can be found here: https://nethack.org/v360/download-src.html\"/>\n<link rel=\"image_src\" href=\"/images/6/65/Nethackwiki-logo.png\"/>\n<link rel=\"shortcut icon\" href=\"/images/6/64/Favicon.ico\"/>\n<link rel=\"search\" type=\"application/opensearchdescription+xml\" href=\"/opensearch_desc.php\" title=\"NetHackWiki\"/>\n<link rel=\"EditURI\" type=\"application/rsd+xml\" href=\"https://nethackwiki.com/api.php?action=rsd\"/>\n<link rel=\"canonical\" href=\"/wiki/Compiling\"/>\n<!--[if lt IE 9]><script src=\"/load.php?debug=false&amp;lang=en&amp;modules=html5shiv&amp;only=scripts&amp;skin=vector&amp;sync=1\"></script><![endif]-->\n</head>\n<body class=\"mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Compiling rootpage-Compiling skin-vector action-view\">\t\t<div id=\"mw-page-base\" class=\"noprint\"></div>\n\t\t<div id=\"mw-head-base\" class=\"noprint\"></div>\n\t\t<div id=\"content\" class=\"mw-body\" role=\"main\">\n\t\t\t<a id=\"top\"></a>\n\t\t\t<div class=\"mw-indicators mw-body-content\">\n</div>\n<h1 id=\"firstHeading\" class=\"firstHeading\" lang=\"en\">Compiling</h1>\t\t\t<div id=\"bodyContent\" class=\"mw-body-content\">\n\t\t\t\t<div id=\"siteSub\" class=\"noprint\">From NetHackWiki</div>\t\t\t\t<div id=\"contentSub\"></div>\n\t\t\t\t<div id=\"jump-to-nav\"></div>\t\t\t\t<a class=\"mw-jump-link\" href=\"#mw-head\">Jump to navigation</a>\n\t\t\t\t<a class=\"mw-jump-link\" href=\"#p-search\">Jump to search</a>\n\t\t\t\t<div id=\"mw-content-text\" lang=\"en\" dir=\"ltr\" class=\"mw-content-ltr\"><div class=\"mw-parser-output\"><p>This page contains help on <b>compiling</b> NetHack 3.6, either the officially released version (3.6.0) or the version from the development sources (as of 2016 October).  Compiling is necessary if you want to try out the dev team's latest changes when they haven't released a compiled version yet, or if you want to apply a <a href=\"/wiki/Patch\" title=\"Patch\">patch</a>, e.g. from the <a class=\"external text\" href=\"http://bilious.alt.org/\">bilious database</a> or make changes of your own.\n</p><p>Information about compiling NetHack 3.4.3 can still be found in <a class=\"external text\" href=\"https://nethackwiki.com/mediawiki/index.php?title=Compiling&amp;oldid=99565\">an old version of this article, q.v.</a>.\n</p>\n<div id=\"toc\" class=\"toc\"><input type=\"checkbox\" role=\"button\" id=\"toctogglecheckbox\" class=\"toctogglecheckbox\" style=\"display:none\" /><div class=\"toctitle\" lang=\"en\" dir=\"ltr\"><h2>Contents</h2><span class=\"toctogglespan\"><label class=\"toctogglelabel\" for=\"toctogglecheckbox\"></label></span></div>\n<ul>\n<li class=\"toclevel-1 tocsection-1\"><a href=\"#Obtaining_the_officially_released_sources\"><span class=\"tocnumber\">1</span> <span class=\"toctext\">Obtaining the officially released sources</span></a></li>\n<li class=\"toclevel-1 tocsection-2\"><a href=\"#Obtaining_the_development_sources\"><span class=\"tocnumber\">2</span> <span class=\"toctext\">Obtaining the development sources</span></a></li>\n<li class=\"toclevel-1 tocsection-3\"><a href=\"#Preparing_to_compile\"><span class=\"tocnumber\">3</span> <span class=\"toctext\">Preparing to compile</span></a>\n<ul>\n<li class=\"toclevel-2 tocsection-4\"><a href=\"#Gathering_build_tools\"><span class=\"tocnumber\">3.1</span> <span class=\"toctext\">Gathering build tools</span></a></li>\n<li class=\"toclevel-2 tocsection-5\"><a href=\"#Selecting_a_hints_file\"><span class=\"tocnumber\">3.2</span> <span class=\"toctext\">Selecting a hints file</span></a></li>\n<li class=\"toclevel-2 tocsection-6\"><a href=\"#Modifying_a_hints_file\"><span class=\"tocnumber\">3.3</span> <span class=\"toctext\">Modifying a hints file</span></a></li>\n</ul>\n</li>\n<li class=\"toclevel-1 tocsection-7\"><a href=\"#Running_the_build_setup_script\"><span class=\"tocnumber\">4</span> <span class=\"toctext\">Running the build setup script</span></a>\n<ul>\n<li class=\"toclevel-2 tocsection-8\"><a href=\"#Windows\"><span class=\"tocnumber\">4.1</span> <span class=\"toctext\">Windows</span></a></li>\n</ul>\n</li>\n<li class=\"toclevel-1 tocsection-9\"><a href=\"#Compiling\"><span class=\"tocnumber\">5</span> <span class=\"toctext\">Compiling</span></a></li>\n<li class=\"toclevel-1 tocsection-10\"><a href=\"#Installing\"><span class=\"tocnumber\">6</span> <span class=\"toctext\">Installing</span></a></li>\n<li class=\"toclevel-1 tocsection-11\"><a href=\"#Creating_the_system_config_file\"><span class=\"tocnumber\">7</span> <span class=\"toctext\">Creating the system config file</span></a></li>\n</ul>\n</div>\n\n<h2><span class=\"mw-headline\" id=\"Obtaining_the_officially_released_sources\">Obtaining the officially released sources</span></h2>\n<p>The official released NetHack source can be found here:\n<a class=\"external free\" href=\"https://nethack.org/v360/download-src.html\">https://nethack.org/v360/download-src.html</a>\n</p><p>Once you have obtained the tarball, you will need to extract it, either using standard tools (<tt>tar -xvf nethack-360-src.tgz</tt>) or some other archive extractor that can handle the tar and gzip formats.\n</p><p>Note that if you use a graphical archive extractor like 7zip, you may have to extract twice: once to decompress the gzip and obtain the plain tar file, and a second time to extract the actual contents.\n</p>\n<h2><span class=\"mw-headline\" id=\"Obtaining_the_development_sources\">Obtaining the development sources</span></h2>\n<p>The development source repository is available at <a class=\"external free\" href=\"http://git.code.sf.net/p/nethack/NetHack\">http://git.code.sf.net/p/nethack/NetHack</a>\n</p><p>If you have git installed, you can retrieve a copy of the repository using either of the following commands:\n</p><p><tt>git clone <a class=\"external free\" href=\"https://github.com/NetHack/NetHack\">https://github.com/NetHack/NetHack</a></tt>\n</p><p>alternately:\n</p><p><tt>git clone <a class=\"external free\" href=\"http://git.code.sf.net/p/nethack/NetHack\">http://git.code.sf.net/p/nethack/NetHack</a></tt>\n</p><p>(It doesn't matter which repository you use; they're both mirrors of the public portion of the dev team's repository.)\n</p><p>This will create a subdirectory (a.k.a., a \"folder\") called 'NetHack', in the current directory, and the new subdirectory, 'NetHack', will be a git repository, containing a working copy of the latest public development source for what will eventually become NetHack 3.6.1.\n</p>\n<h2><span class=\"mw-headline\" id=\"Preparing_to_compile\">Preparing to compile</span></h2>\n<h3><span class=\"mw-headline\" id=\"Gathering_build_tools\">Gathering build tools</span></h3>\n<p>In order to build NetHack, you will neet at minimum the following tools:\n</p>\n<ul><li>a C compiler (typically 'gcc' or 'clang')</li>\n<li>'make' (typically Gnu 'make', and note in particular that Microsoft's 'nmake' won't work)</li>\n<li>'flex' and 'bison', or some other suitable lex/yacc implementation</li>\n<li>common libraries (including development headers); these should be includeded if you have a complete working build environment (e.g., if you have installed build-essential on Debian-derived systems, you should have them).  I don't know a complete list of all the libraries that are required, but I believe the list includes standard POSIX regular expression libraries, termcap/terminfo, and of course the standard C library.  Beyond that, I'm not sure.</li>\n<li>any libraries (including development headers) needed for the specific ports you wish to build; if this is the first time you are building NetHack, it is recommended that you start by building the Unix TTY port first, as it is the easiest and has no additional requirements of its own beyond the ones that all the ports require.</li></ul>\n<p>Note that you will need copies of all these on the platform for which you are building NetHack.  Cross-compiling NetHack, if even possible, is much more complicated and far beyond the scope of this article.\n</p>\n<h3><span class=\"mw-headline\" id=\"Selecting_a_hints_file\">Selecting a hints file</span></h3>\n<p>The new build system introduced in NetHack 3.6.0 is based on \"hints files\", which inform the rest of the build system about various things which might differ from one system to another, and which you might wish to customize when building, even if you are making no changes to the actual game.  Things like which directory to install the game's binaries into, which directory to use for storing the game data, which flags to pass to the compiler, and even basic facts like what the compiler on your system is called, are all specified in the hints file.  A hints file is simply a plain text file, formatted like a shell script, that contains hints for the NetHack build system, in the form of setting variables.\n</p><p>You can find a collection of existing hints files in the sys/unix/hints/ directory.  You may find that one of them is closer to what you want than others.  For example, the 'linux' hints file is designed for a single-user install in ~/nh/install; whereas, the 'unix' hints file is designed for a traditional system-wide install in /usr.  Look through the existing hints files and see if you can find one that is a close fit for your needs.\n</p>\n<h3><span class=\"mw-headline\" id=\"Modifying_a_hints_file\">Modifying a hints file</span></h3>\n<p>If you need to combine or modify a hints file, here are some useful things to know:\n</p>\n<ul><li>Lines starting with # are comments.  You can thus prepend # to an existing line to comment it out, rendering it ineffective but leaving it there for reference.</li>\n<li>There are four main directories that need to be specified: 'HACKDIR', 'SHELLDIR', 'INSTDIR', and 'VARDIR'.  These are often based on a 'PREFIX' directory, which is not itself used directly for anything, but the others are typically located inside of it.</li>\n<li>The CHOWN and CHGRP variables should contain the commands used to change ownership and group-ownership of files, respectively.  Setting it to a command that doesn't do anything (such as 'yes' or 'true', as the stock 'linux' hints file does) will result in permissions not being changed, which is typically not what you want except possibly for a single-user install.  If you are modifying the 'linux' hints file to build on a Linux system, you will probably want to change these lines.</li>\n<li>The WINSRC, WINOBJ, and WINLIB lines control which window port you will build.  If this is your first time compiling NetHack, it is recommended to start with the TTY port, which is easiest to build successfully.</li>\n<li>In 3.7.0, hints/linux tends not to compile, but hints/linux-debug works fine. VARDIR seems to need '/var' to be at the end of the path you choose, or else the game won't start because it can't find the scoreboard. You may also want to remove 'CFLAGS+=-DPANICLOG_FMT2' because it generates tons of warnings.</li></ul>\n<h2><span class=\"mw-headline\" id=\"Running_the_build_setup_script\">Running the build setup script</span></h2>\n<p>Once you have selected and possibly modified a hints file, you are almost ready to run the setup script.  Run \"make fetch-lua\".\n</p><p>Then on most platforms, setup is done with the following command:\n<tt>sys/unix/setup.sh sys/unix/hints/whichever_hints_file_you_are_using</tt>\n</p><p>On non-Unix platforms, the setup process may be slightly different.  See the documentation for your platform. The setup script should copy the needed build-system files (e.g., makefiles) into place and modify them as needed.\n</p>\n<h3><span class=\"mw-headline\" id=\"Windows\">Windows</span></h3>\n<p>For Nethack 3.6 on Windows, it's a good idea to follow the instructions inside <tt>sys\\winnt\\Install.nt</tt>. The following assumes that you have your compiler and coreutils from projects such as MinGW and GnuWin32.\n</p>\n<ul><li>Navigate to <tt>sys\\winnt</tt> and run <tt>nhsetup.bat</tt>.</li></ul>\n<ul><li>Navigate to <tt>src</tt> and edit <tt>Makefile.gcc</tt>.</li></ul>\n<ul><li>Inside the Makefile, you're going to want to edit or check the following things:\n<ul><li>Do you want the outputted binary to belong in <tt>..\\binary</tt>, or somewhere else?</li>\n<li>Are you compiling for a specific architecture (x86 or x64)? If so, edit <tt>TARGET_CPU</tt>.</li>\n<li>Do you want Curses window port support? If so, uncomment <tt>ADD_CURSES=Y</tt> and make sure that you've cloned the PDCurses repository from <a class=\"external free\" href=\"https://github.com/wmcbrine/PDCurses\">https://github.com/wmcbrine/PDCurses</a>.</li>\n<li>TODO: (Test this, I only wanted the terminal interface) Do you want Qt support? You're going to want to change this option and specify the location of the Qt directory.</li>\n<li>On Line 484, are the compiler macros set up correctly? Mine were not, as Chocolatey links the compilers to standard <tt>gcc</tt> filenames instead of <tt>mingw32-gcc.exe</tt>. Comment out the <tt>#ifndef</tt> directive and specify the compilers.</li></ul></li></ul>\n<ul><li>Make with your <tt>make</tt> program. For me, the invocation was <tt>mingw32-make -f Makefile.gcc install</tt>. Note that if you don't specify the <tt>-f Makefile.gcc</tt> option, you'll get an error, as the standard <tt>Makefile</tt> is for Visual Studio's <tt>nmake</tt> program.</li></ul>\n<div class=\"upcoming\">\n<p><i>The following information pertains to an upcoming version (<a href=\"/wiki/NetHack_3.7.0\" title=\"NetHack 3.7.0\">NetHack 3.7.0</a>). If this version is now released, please verify that it is still accurate, then update the page to incorporate this information.</i>\n</p>\nNethack 3.7 has good support for building, running, and debugging in Visual Studio 2017, 2019, and 2022, including a working solution file. Tools such as MinGW and GnuWin32 are not required. See <tt>sys\\windows\\Install.windows</tt> for instructions.</div>\n<h2><span class=\"mw-headline\" id=\"Compiling\">Compiling</span></h2>\n<p>At this point, you may be able to just run the 'make' command and get a working build.\n</p>\n<h2><span class=\"mw-headline\" id=\"Installing\">Installing</span></h2>\n<p>If the build goes well, you can (as root/superuser if necessary, or with sudo) use the 'make install' command to install your newly compiled NetHack.\n</p>\n<h2><span class=\"mw-headline\" id=\"Creating_the_system_config_file\">Creating the system config file</span></h2>\n<p>When you try to run your new build, it will complain that there is no syscf file and refuse to do anything until you create that file.  The syscf file is allowed to be empty; it just has to exist.  Simply create an empty file named sysconf in your HACKDIR and nethack will run normally.\n</p><p>Depending on which hints file you used, some permissions may need to be changed before the game can be run as a regular user.\n</p>\n<div style=\"display:none; right:10px; padding-bottom: 17px\" class=\"metadata topicon nopopups\"><div style=\"margin-top: -10px\"><a href=\"/wiki/NetHackWiki:Next_version\" title=\"This article has been updated to reflect NetHack 3.6.0. Click here for more information.\"><img alt=\"This article has been updated to reflect NetHack 3.6.0. Click here for more information.\" src=\"/images/d/d6/Nh360-icon.png\" width=\"32\" height=\"32\" /></a></div></div>\n<div class=\"todo\">\n<p><b>This page may need to be updated for the <a href=\"/wiki/Current_version\" class=\"mw-redirect\" title=\"Current version\">current version</a> of <i>NetHack</i>.</b>\n</p><p>It may contain text specific to <a href=\"/wiki/NetHack_3.6.0\" title=\"NetHack 3.6.0\">NetHack 3.6.0</a>. Information on this page may be out of date.\n</p><p><b>Editors:</b> After reviewing this page and making necessary edits, please change the {{nethack-360}} tag to the current version's tag or {{noversion}} as appropriate.\n</p>\n</div>\n\n<!-- \nNewPP limit report\nCached time: 20240926182856\nCache expiry: 604800\nDynamic content: false\nCPU time usage: 0.015 seconds\nReal time usage: 0.031 seconds\nPreprocessor visited node count: 130/1000000\nPreprocessor generated node count: 537/1000000\nPost‐expand include size: 2158/2097152 bytes\nTemplate argument size: 512/2097152 bytes\nHighest expansion depth: 8/40\nExpensive parser function count: 0/100\nUnstrip recursion depth: 0/20\nUnstrip post‐expand size: 28/5000000 bytes\n-->\n<!--\nTransclusion expansion time report (%,ms,calls,template)\n100.00%   11.252      1 -total\n 85.84%    9.659      1 Template:Nethack-360\n 61.82%    6.956      1 Template:Version_icon\n 35.92%    4.042      1 Template:Top_icon\n 11.95%    1.344      1 Template:Upcoming\n-->\n\n<!-- Saved in parser cache with key wikihackdb:pcache:idhash:5343-0!canonical and timestamp 20240926182856 and revision id 171312\n -->\n</div></div>\t\t\t\t\t<div class=\"printfooter\">\n\t\t\t\t\t\tRetrieved from \"<a dir=\"ltr\" href=\"https://nethackwiki.com/index.php?title=Compiling&amp;oldid=171312\">https://nethackwiki.com/index.php?title=Compiling&amp;oldid=171312</a>\"\t\t\t\t\t</div>\n\t\t\t\t<div id=\"catlinks\" class=\"catlinks\" data-mw=\"interface\"><div id=\"mw-normal-catlinks\" class=\"mw-normal-catlinks\"><a href=\"/wiki/Special:Categories\" title=\"Special:Categories\">Categories</a>: <ul><li><a href=\"/wiki/Category:Upcoming\" title=\"Category:Upcoming\">Upcoming</a></li><li><a href=\"/wiki/Category:Development\" title=\"Category:Development\">Development</a></li><li><a href=\"/wiki/Category:Nethack-360_articles\" title=\"Category:Nethack-360 articles\">Nethack-360 articles</a></li></ul></div></div>\t\t\t\t<div class=\"visualClear\"></div>\n\t\t\t\t\t\t\t</div>\n\t\t</div>\n\t\t<div id=\"mw-navigation\">\n\t\t\t<h2>Navigation menu</h2>\n\t\t\t<div id=\"mw-head\">\n\t\t\t\t\t\t\t\t\t<div id=\"p-personal\" role=\"navigation\" class=\"\" aria-labelledby=\"p-personal-label\">\n\t\t\t\t\t\t<h3 id=\"p-personal-label\">Personal tools</h3>\n\t\t\t\t\t\t<ul>\n\t\t\t\t\t\t\t<li id=\"pt-createaccount\"><a href=\"/index.php?title=Special:CreateAccount&amp;returnto=Compiling\" title=\"You are encouraged to create an account and log in; however, it is not mandatory\">Create account</a></li><li id=\"pt-login\"><a href=\"/index.php?title=Special:UserLogin&amp;returnto=Compiling\" title=\"You are encouraged to log in; however, it is not mandatory [o]\" accesskey=\"o\">Log in</a></li>\t\t\t\t\t\t</ul>\n\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div id=\"left-navigation\">\n\t\t\t\t\t\t\t\t\t\t<div id=\"p-namespaces\" role=\"navigation\" class=\"vectorTabs\" aria-labelledby=\"p-namespaces-label\">\n\t\t\t\t\t\t<h3 id=\"p-namespaces-label\">Namespaces</h3>\n\t\t\t\t\t\t<ul>\n\t\t\t\t\t\t\t<li id=\"ca-nstab-main\" class=\"selected\"><span><a href=\"/wiki/Compiling\" title=\"View the content page [c]\" accesskey=\"c\">Page</a></span></li><li id=\"ca-talk\"><span><a href=\"/wiki/Talk:Compiling\" rel=\"discussion\" title=\"Discussion about the content page [t]\" accesskey=\"t\">Discussion</a></span></li>\t\t\t\t\t\t</ul>\n\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div id=\"p-variants\" role=\"navigation\" class=\"vectorMenu emptyPortlet\" aria-labelledby=\"p-variants-label\">\n\t\t\t\t\t\t\t\t\t\t\t\t<input type=\"checkbox\" class=\"vectorMenuCheckbox\" aria-labelledby=\"p-variants-label\" />\n\t\t\t\t\t\t<h3 id=\"p-variants-label\">\n\t\t\t\t\t\t\t<span>Variants</span>\n\t\t\t\t\t\t</h3>\n\t\t\t\t\t\t<div class=\"menu\">\n\t\t\t\t\t\t\t<ul>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t<div id=\"right-navigation\">\n\t\t\t\t\t\t\t\t\t\t<div id=\"p-views\" role=\"navigation\" class=\"vectorTabs\" aria-labelledby=\"p-views-label\">\n\t\t\t\t\t\t<h3 id=\"p-views-label\">Views</h3>\n\t\t\t\t\t\t<ul>\n\t\t\t\t\t\t\t<li id=\"ca-view\" class=\"collapsible selected\"><span><a href=\"/wiki/Compiling\">Read</a></span></li><li id=\"ca-viewsource\" class=\"collapsible\"><span><a href=\"/index.php?title=Compiling&amp;action=edit\" title=\"This page is protected.&#10;You can view its source [e]\" accesskey=\"e\">View source</a></span></li><li id=\"ca-history\" class=\"collapsible\"><span><a href=\"/index.php?title=Compiling&amp;action=history\" title=\"Past revisions of this page [h]\" accesskey=\"h\">View history</a></span></li>\t\t\t\t\t\t</ul>\n\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div id=\"p-cactions\" role=\"navigation\" class=\"vectorMenu emptyPortlet\" aria-labelledby=\"p-cactions-label\">\n\t\t\t\t\t\t<input type=\"checkbox\" class=\"vectorMenuCheckbox\" aria-labelledby=\"p-cactions-label\" />\n\t\t\t\t\t\t<h3 id=\"p-cactions-label\"><span>More</span></h3>\n\t\t\t\t\t\t<div class=\"menu\">\n\t\t\t\t\t\t\t<ul>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div id=\"p-search\" role=\"search\">\n\t\t\t\t\t\t<h3>\n\t\t\t\t\t\t\t<label for=\"searchInput\">Search</label>\n\t\t\t\t\t\t</h3>\n\t\t\t\t\t\t<form action=\"/index.php\" id=\"searchform\">\n\t\t\t\t\t\t\t<div id=\"simpleSearch\">\n\t\t\t\t\t\t\t\t<input type=\"search\" name=\"search\" placeholder=\"Search NetHackWiki\" title=\"Search NetHackWiki [f]\" accesskey=\"f\" id=\"searchInput\"/><input type=\"hidden\" value=\"Special:Search\" name=\"title\"/><input type=\"submit\" name=\"fulltext\" value=\"Search\" title=\"Search the pages for this text\" id=\"mw-searchButton\" class=\"searchButton mw-fallbackSearchButton\"/><input type=\"submit\" name=\"go\" value=\"Go\" title=\"Go to a page with this exact name if it exists\" id=\"searchButton\" class=\"searchButton\"/>\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</form>\n\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div id=\"mw-panel\">\n\t\t\t\t<div id=\"p-logo\" role=\"banner\"><a class=\"mw-wiki-logo\" href=\"/wiki/Main_Page\"  title=\"Visit the main page\"></a></div>\n\t\t\t\t\t\t<div class=\"portal\" role=\"navigation\" id=\"p-navigation\" aria-labelledby=\"p-navigation-label\">\n\t\t\t<h3 id=\"p-navigation-label\">Navigation</h3>\n\t\t\t<div class=\"body\">\n\t\t\t\t\t\t\t\t<ul>\n\t\t\t\t\t<li id=\"n-NetHack-Wiki\"><a href=\"/wiki/Main_Page\">NetHack Wiki</a></li><li id=\"n-Forum\"><a href=\"/wiki/Forum:Watercooler\">Forum</a></li><li id=\"n-portal\"><a href=\"/wiki/NetHackWiki:Community_Portal\" title=\"About the project, what you can do, where to find things\">Community portal</a></li><li id=\"n-recentchanges\"><a href=\"/wiki/Special:RecentChanges\" title=\"A list of recent changes in the wiki [r]\" accesskey=\"r\">Recent changes</a></li><li id=\"n-randompage\"><a href=\"/wiki/Special:Random\" title=\"Load a random page [x]\" accesskey=\"x\">Random page</a></li>\t\t\t\t</ul>\n\t\t\t\t\t\t\t</div>\n\t\t</div>\n\t\t\t<div class=\"portal\" role=\"navigation\" id=\"p-Popular_pages\" aria-labelledby=\"p-Popular_pages-label\">\n\t\t\t<h3 id=\"p-Popular_pages-label\">Popular pages</h3>\n\t\t\t<div class=\"body\">\n\t\t\t\t\t\t\t\t<ul>\n\t\t\t\t\t<li id=\"n-Dungeon-features\"><a href=\"/wiki/Dungeon_feature\">Dungeon features</a></li><li id=\"n-Monsters\"><a href=\"/wiki/Monster#Canonical_list_of_monsters\">Monsters</a></li><li id=\"n-In.2FExtrinsics\"><a href=\"/wiki/Property#Intrinsic_properties\">In/Extrinsics</a></li><li id=\"n-Items\"><a href=\"/wiki/Item\">Items</a></li><li id=\"n-Spells\"><a href=\"/wiki/Spellbook#List_of_spellbooks\">Spells</a></li><li id=\"n-Game-options\"><a href=\"/wiki/Options\">Game options</a></li><li id=\"n-Websites\"><a href=\"/wiki/Websites\">Websites</a></li>\t\t\t\t</ul>\n\t\t\t\t\t\t\t</div>\n\t\t</div>\n\t\t\t<div class=\"portal\" role=\"navigation\" id=\"p-contributing\" aria-labelledby=\"p-contributing-label\">\n\t\t\t<h3 id=\"p-contributing-label\">Contributing</h3>\n\t\t\t<div class=\"body\">\n\t\t\t\t\t\t\t\t<ul>\n\t\t\t\t\t<li id=\"n-Style-guide\"><a href=\"/wiki/NetHackWiki:Style_guide\">Style guide</a></li><li id=\"n-help\"><a href=\"/wiki/NetHackWiki:How_to_help\" title=\"The place to find out\">How to help</a></li><li id=\"n-Current-projects\"><a href=\"/wiki/NetHackWiki:Current_projects\">Current projects</a></li>\t\t\t\t</ul>\n\t\t\t\t\t\t\t</div>\n\t\t</div>\n\t\t\t<div class=\"portal\" role=\"navigation\" id=\"p-tb\" aria-labelledby=\"p-tb-label\">\n\t\t\t<h3 id=\"p-tb-label\">Tools</h3>\n\t\t\t<div class=\"body\">\n\t\t\t\t\t\t\t\t<ul>\n\t\t\t\t\t<li id=\"t-whatlinkshere\"><a href=\"/wiki/Special:WhatLinksHere/Compiling\" title=\"A list of all wiki pages that link here [j]\" accesskey=\"j\">What links here</a></li><li id=\"t-recentchangeslinked\"><a href=\"/wiki/Special:RecentChangesLinked/Compiling\" rel=\"nofollow\" title=\"Recent changes in pages linked from this page [k]\" accesskey=\"k\">Related changes</a></li><li id=\"t-specialpages\"><a href=\"/wiki/Special:SpecialPages\" title=\"A list of all special pages [q]\" accesskey=\"q\">Special pages</a></li><li id=\"t-print\"><a href=\"/index.php?title=Compiling&amp;printable=yes\" rel=\"alternate\" title=\"Printable version of this page [p]\" accesskey=\"p\">Printable version</a></li><li id=\"t-permalink\"><a href=\"/index.php?title=Compiling&amp;oldid=171312\" title=\"Permanent link to this revision of the page\">Permanent link</a></li><li id=\"t-info\"><a href=\"/index.php?title=Compiling&amp;action=info\" title=\"More information about this page\">Page information</a></li>\t\t\t\t</ul>\n\t\t\t\t\t\t\t</div>\n\t\t</div>\n\t\t\t\t</div>\n\t\t</div>\n\t\t\t\t<div id=\"footer\" role=\"contentinfo\">\n\t\t\t\t\t\t<ul id=\"footer-info\">\n\t\t\t\t\t\t\t\t<li id=\"footer-info-lastmod\"> This page was last edited on 20 June 2024, at 23:44.</li>\n\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t<ul id=\"footer-places\">\n\t\t\t\t\t\t\t\t<li id=\"footer-places-about\"><a href=\"/wiki/NetHackWiki:About\" title=\"NetHackWiki:About\">About NetHackWiki</a></li>\n\t\t\t\t\t\t\t\t<li id=\"footer-places-disclaimer\"><a href=\"/wiki/NetHackWiki:General_disclaimer\" title=\"NetHackWiki:General disclaimer\">Disclaimers</a></li>\n\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t\t\t\t<ul id=\"footer-icons\" class=\"noprint\">\n\t\t\t\t\t\t\t\t\t\t<li id=\"footer-poweredbyico\">\n\t\t\t\t\t\t<a href=\"//www.mediawiki.org/\"><img src=\"/resources/assets/poweredby_mediawiki_88x31.png\" alt=\"Powered by MediaWiki\" srcset=\"/resources/assets/poweredby_mediawiki_132x47.png 1.5x, /resources/assets/poweredby_mediawiki_176x62.png 2x\" width=\"88\" height=\"31\"/></a>\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t<div style=\"clear: both;\"></div>\n\t\t</div>\n\t\t\n<script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({\"wgPageParseReport\":{\"limitreport\":{\"cputime\":\"0.015\",\"walltime\":\"0.031\",\"ppvisitednodes\":{\"value\":130,\"limit\":1000000},\"ppgeneratednodes\":{\"value\":537,\"limit\":1000000},\"postexpandincludesize\":{\"value\":2158,\"limit\":2097152},\"templateargumentsize\":{\"value\":512,\"limit\":2097152},\"expansiondepth\":{\"value\":8,\"limit\":40},\"expensivefunctioncount\":{\"value\":0,\"limit\":100},\"unstrip-depth\":{\"value\":0,\"limit\":20},\"unstrip-size\":{\"value\":28,\"limit\":5000000},\"timingprofile\":[\"100.00%   11.252      1 -total\",\" 85.84%    9.659      1 Template:Nethack-360\",\" 61.82%    6.956      1 Template:Version_icon\",\" 35.92%    4.042      1 Template:Top_icon\",\" 11.95%    1.344      1 Template:Upcoming\"]},\"cachereport\":{\"timestamp\":\"20240926182856\",\"ttl\":604800,\"transientcontent\":false}}});mw.config.set({\"wgBackendResponseTime\":88});});</script>\n\t</body>\n</html>\n","rawPage":"This page contains help on '''compiling''' NetHack 3.6, either the officially released version (3.6.0) or the version from the development sources (as of 2016 October).  Compiling is necessary if you want to try out the dev team's latest changes when they haven't released a compiled version yet, or if you want to apply a [[patch]], e.g. from the [http://bilious.alt.org/ bilious database] or make changes of your own.\n\nInformation about compiling NetHack 3.4.3 can still be found in [https://nethackwiki.com/mediawiki/index.php?title=Compiling&oldid=99565 an old version of this article, q.v.].\n\n==Obtaining the officially released sources==\n\nThe official released NetHack source can be found here:\nhttps://nethack.org/v360/download-src.html\n\nOnce you have obtained the tarball, you will need to extract it, either using standard tools (<tt>tar -xvf nethack-360-src.tgz</tt>) or some other archive extractor that can handle the tar and gzip formats.\n\nNote that if you use a graphical archive extractor like 7zip, you may have to extract twice: once to decompress the gzip and obtain the plain tar file, and a second time to extract the actual contents.\n\n==Obtaining the development sources==\n\nThe development source repository is available at http://git.code.sf.net/p/nethack/NetHack\n\nIf you have git installed, you can retrieve a copy of the repository using either of the following commands:\n\n<tt>git clone https://github.com/NetHack/NetHack</tt>\n\nalternately:\n\n<tt>git clone http://git.code.sf.net/p/nethack/NetHack</tt>\n\n(It doesn't matter which repository you use; they're both mirrors of the public portion of the dev team's repository.)\n\nThis will create a subdirectory (a.k.a., a \"folder\") called 'NetHack', in the current directory, and the new subdirectory, 'NetHack', will be a git repository, containing a working copy of the latest public development source for what will eventually become NetHack 3.6.1.\n\n==Preparing to compile==\n\n===Gathering build tools===\n\nIn order to build NetHack, you will neet at minimum the following tools:\n* a C compiler (typically 'gcc' or 'clang')\n* 'make' (typically Gnu 'make', and note in particular that Microsoft's 'nmake' won't work)\n* 'flex' and 'bison', or some other suitable lex/yacc implementation\n* common libraries (including development headers); these should be includeded if you have a complete working build environment (e.g., if you have installed build-essential on Debian-derived systems, you should have them).  I don't know a complete list of all the libraries that are required, but I believe the list includes standard POSIX regular expression libraries, termcap/terminfo, and of course the standard C library.  Beyond that, I'm not sure.\n* any libraries (including development headers) needed for the specific ports you wish to build; if this is the first time you are building NetHack, it is recommended that you start by building the Unix TTY port first, as it is the easiest and has no additional requirements of its own beyond the ones that all the ports require.\n\nNote that you will need copies of all these on the platform for which you are building NetHack.  Cross-compiling NetHack, if even possible, is much more complicated and far beyond the scope of this article.\n\n===Selecting a hints file===\n\nThe new build system introduced in NetHack 3.6.0 is based on \"hints files\", which inform the rest of the build system about various things which might differ from one system to another, and which you might wish to customize when building, even if you are making no changes to the actual game.  Things like which directory to install the game's binaries into, which directory to use for storing the game data, which flags to pass to the compiler, and even basic facts like what the compiler on your system is called, are all specified in the hints file.  A hints file is simply a plain text file, formatted like a shell script, that contains hints for the NetHack build system, in the form of setting variables.\n\nYou can find a collection of existing hints files in the sys/unix/hints/ directory.  You may find that one of them is closer to what you want than others.  For example, the 'linux' hints file is designed for a single-user install in ~/nh/install; whereas, the 'unix' hints file is designed for a traditional system-wide install in /usr.  Look through the existing hints files and see if you can find one that is a close fit for your needs.\n\n===Modifying a hints file===\n\nIf you need to combine or modify a hints file, here are some useful things to know:\n* Lines starting with # are comments.  You can thus prepend # to an existing line to comment it out, rendering it ineffective but leaving it there for reference.\n* There are four main directories that need to be specified: 'HACKDIR', 'SHELLDIR', 'INSTDIR', and 'VARDIR'.  These are often based on a 'PREFIX' directory, which is not itself used directly for anything, but the others are typically located inside of it.\n* The CHOWN and CHGRP variables should contain the commands used to change ownership and group-ownership of files, respectively.  Setting it to a command that doesn't do anything (such as 'yes' or 'true', as the stock 'linux' hints file does) will result in permissions not being changed, which is typically not what you want except possibly for a single-user install.  If you are modifying the 'linux' hints file to build on a Linux system, you will probably want to change these lines.\n* The WINSRC, WINOBJ, and WINLIB lines control which window port you will build.  If this is your first time compiling NetHack, it is recommended to start with the TTY port, which is easiest to build successfully.\n* In 3.7.0, hints/linux tends not to compile, but hints/linux-debug works fine. VARDIR seems to need '/var' to be at the end of the path you choose, or else the game won't start because it can't find the scoreboard. You may also want to remove 'CFLAGS+=-DPANICLOG_FMT2' because it generates tons of warnings.\n\n==Running the build setup script==\n\nOnce you have selected and possibly modified a hints file, you are almost ready to run the setup script.  Run \"make fetch-lua\".\n\nThen on most platforms, setup is done with the following command:\n<tt>sys/unix/setup.sh sys/unix/hints/whichever_hints_file_you_are_using</tt>\n\nOn non-Unix platforms, the setup process may be slightly different.  See the documentation for your platform. The setup script should copy the needed build-system files (e.g., makefiles) into place and modify them as needed.\n\n===Windows===\n\nFor Nethack 3.6 on Windows, it's a good idea to follow the instructions inside <tt>sys\\winnt\\Install.nt</tt>. The following assumes that you have your compiler and coreutils from projects such as MinGW and GnuWin32.\n\n* Navigate to <tt>sys\\winnt</tt> and run <tt>nhsetup.bat</tt>.\n\n* Navigate to <tt>src</tt> and edit <tt>Makefile.gcc</tt>.\n\n* Inside the Makefile, you're going to want to edit or check the following things:\n** Do you want the outputted binary to belong in <tt>..\\binary</tt>, or somewhere else?\n** Are you compiling for a specific architecture (x86 or x64)? If so, edit <tt>TARGET_CPU</tt>.\n** Do you want Curses window port support? If so, uncomment <tt>ADD_CURSES=Y</tt> and make sure that you've cloned the PDCurses repository from https://github.com/wmcbrine/PDCurses.\n** TODO: (Test this, I only wanted the terminal interface) Do you want Qt support? You're going to want to change this option and specify the location of the Qt directory.\n** On Line 484, are the compiler macros set up correctly? Mine were not, as Chocolatey links the compilers to standard <tt>gcc</tt> filenames instead of <tt>mingw32-gcc.exe</tt>. Comment out the <tt>#ifndef</tt> directive and specify the compilers.\n\n* Make with your <tt>make</tt> program. For me, the invocation was <tt>mingw32-make -f Makefile.gcc install</tt>. Note that if you don't specify the <tt>-f Makefile.gcc</tt> option, you'll get an error, as the standard <tt>Makefile</tt> is for Visual Studio's <tt>nmake</tt> program.\n{{upcoming|NetHack 3.7.0|Nethack 3.7 has good support for building, running, and debugging in Visual Studio 2017, 2019, and 2022, including a working solution file. Tools such as MinGW and GnuWin32 are not required. See <tt>sys\\windows\\Install.windows</tt> for instructions.}}\n\n==Compiling==\n\nAt this point, you may be able to just run the 'make' command and get a working build.\n\n==Installing==\n\nIf the build goes well, you can (as root/superuser if necessary, or with sudo) use the 'make install' command to install your newly compiled NetHack.\n\n==Creating the system config file==\n\nWhen you try to run your new build, it will complain that there is no syscf file and refuse to do anything until you create that file.  The syscf file is allowed to be empty; it just has to exist.  Simply create an empty file named sysconf in your HACKDIR and nethack will run normally.\n\nDepending on which hints file you used, some permissions may need to be changed before the game can be run as a regular user.\n\n[[Category:Development]]\n{{nethack-360}}"}