{
  "title": "던전 크롤/계산법",
  "data": "[include(틀:상위 문서, top1=던전 크롤)]\n[include(틀:던전 크롤 스톤수프 게임 정보)]\n\n\n[목차]\n== 능력치 ==\n=== 체력 회복 (HPRegen) ===\n{{{#!wiki style=\"border:1px solid gray;background-color:#F2F2F2;padding:12px;display:table; color:#373a3c\"{{{}}}\n{{{-1 [math(regen=20+\\dfrac{HP}{6}+etc)]}}}\n\n{{{-1 [math(HPRegen=\\dfrac{regen}{100}/turn)]}}}\n}}}\n=== 마나 회복 (MPRegen) ===\n{{{#!wiki style=\"border:1px solid gray;background-color:#F2F2F2;padding:12px;display:table;color:#373a3c\"\"{{{}}}\n{{{-1 [math(regen=7+\\dfrac{MP}{2}+etc)]}}}\n\n{{{-1 [math(MPRegen=\\dfrac{regen}{100}/turn)]}}}\n}}}\n=== 피해량 감소 (AC damage reduction) ===\n{{{#!wiki style=\"border:1px solid gray;background-color:#F2F2F2;padding:12px;display:table;color:#373a3c\"\"{{{}}}\n①일반적인 AC 감소의 경우\n{{{-1 [math(Saved_0=1dAC)]}}}\n{{{-1 [math(Saved_1=max\\Bigl(Saved_0, min(GDR\\times\\dfrac{Damage}{100}, \\dfrac{AC}{2})\\Bigr))]}}}\n\n②AC의 반을 무시하는 경우\n{{{-1 [math(Saved_0=\\dfrac{1dAC}{2})]}}}\n{{{-1 [math(AC_{0.5}=\\dfrac{AC}{2})]}}}\n{{{-1 [math(GDR_{0.5}=\\dfrac{GDR}{2})]}}}\n{{{-1 [math(Saved_1=max\\Bigl(Saved_0, min(GDR_{0.5}\\times\\dfrac{Damage}{100}, \\dfrac{AC_{0.5}}{2})\\Bigr))]}}}\n\n③AC의 3배 감소하는 경우\n{{{-1 [math(Saved_0=3dAC)]}}}\n{{{-1 [math(AC_3=AC\\times3)]}}}\n{{{-1 [math(GDR_3=100-\\dfrac{GDR^2}{100})]}}}\n{{{-1 [math(Saved_1=max\\Bigl(Saved_0, min(GDR_3\\times\\dfrac{Damage}{100}, \\dfrac{AC_3}{2})\\Bigr))]}}}\n\n최종적으로 플레이어가 입는 피해는 {{{-1 [math(Damage-Saved_1)]}}} 이다.\n}}}\nAC와 GDR에 대한 내용은 [[던전 크롤/능력치]]를 참조.\n=== 회피 (Evasion) ===\n{{{#!wiki style=\"border:1px solid gray;background-color:#F2F2F2;padding:12px;display:table;color:#373a3c\"\"{{{}}}\n먼저 플레이어의 크기에 따른 크기 지수(Size factor, SF)를 계산한다.\n{{{-1 [math(Size=2\\times(\\textsf{\\small중형 크기} - \\textsf{\\small플레이어의 크기}))]}}}\n{{{-1 [math(SF=max(1,2+\\dfrac{Size}{2}))]}}}\n\n회피 보너스(Dodge bonus)에 갑옷 페널티(Armour dodge penalty, ADP)를 조정한 최종 회피 보너스를 계산한다.\n{{{-1 [math(\\textit{Dodge bonus}_0=\\dfrac{800+\\textsf{\\small회피술}\\times10\\times\\textsf{\\small민첩}\\times8}{20-SF})]}}}\n{{{-1 [math(ADP=\\textsf{\\small갑옷의 방해수치}-3)]}}}\n\n{{{-1 [math(\\textsf{\\small회피 보너스}=\\begin{cases}{\\textit{Dodge bonus}_0}&{if,ADP\\le0}\\\\\\\\{\\textit{Dodge bonus}_0\\times\\dfrac{\\textsf{\\small힘}}{ADP\\times2}}&{\\text{if},ADP\\ge\\textsf{\\small힘}}\\\\\\\\{\\textit{Dodge bonus}_0-\\textit{Dodge bonus}_0\\times\\dfrac{\\text{ADP}}{\\textsf{\\small힘}\\times2}}&{\\text{if},ADP<\\textsf{\\small힘}}\\end{cases})]}}}\n\n{{{-1 [math(EV=(10+SF)+\\textsf{\\small회피 보너스}+AEVP+ASP+etc)]}}}\n}}}\n=== 방패 수치 (Shield class) ===\n{{{#!wiki style=\"border:1px solid gray;background-color:#F2F2F2;padding:12px;display:table;color:#373a3c\"\"{{{}}}\n먼저 플레이어의 크기와 방패 크기에 따른 크기 지수(Size factor, SF)를 계산한다.\n{{{-1 [math(SF=(\\textsf{\\small플레이어의 크기}-\\textsf{\\small중형 크기})\\times(\\textsf{\\small착용한 방패의 크기}-\\textsf{\\small타워 쉴드 크기}))]}}}\n\n크기 지수와 방패에서 기본적으로 제공하는 기본 SH를 통해 Shield를 계산한다.\n{{{-1 [math(Shield_0=기본SH\\times2 + SF)]}}}\n\n기본SH, 방패술 그리고 민첩을 통한 SH를 계산한다.\n{{{-1 [math(SH_0=Shield_0\\times50\\\\+Shield_0\\times\\dfrac{\\textsf{\\small방패술}\\times5}{2}+\\textsf{\\small방패술}\\times38+min(\\textsf{\\small방패술}\\times38,114)\\\\+\\textsf{\\small민첩}\\times38\\times\\dfrac{Shield_0+13}{26}+\\textsf{\\small강화도}\\times200+etc)]}}}\n\n{{{-1 [math(SH=\\dfrac{SH_0+50}{100})]}}}\n\n인터페이스 상에서 나타나는 SH는 반을 나누어서 표시된다.\n}}}\n== 마법 ==\n[include(틀:문서 가져옴, this=문단, title=던전 크롤/마법, version=1824)]\n=== 주문력 (Spell Power, SP) ===\n{{{#!wiki style=\"border:1px solid gray;background-color:#F2F2F2;padding:12px;display:table;color:#373a3c\"\"{{{}}}\n먼저 기본 주문력(Pow)를 계산한다.\n{{{-1 [math(Pow=(\\textsf{\\small주문 시전술}\\times50+\\textsf{\\small평균 마법학파}\n\\times200)\\times\\dfrac{\\textsf{지능}}{10}\\times1.5^{Enhencer}\\times\\textit{etc})]}}}\n * Enhencer는 Archmagi 로브, 속성 지팡이, 지능 포션 등으로 얻을 수 있다. 최대 3까지 중첩 가능.\n \n최종 주문력을 아래와 같이 계산한다.\n{{{-1 [math(SP=\\begin{cases}{\\dfrac{Pow\\times10}{1000}}&{if,Pow\\times10\\le50000}\\\\\\\\{\\dfrac{50000\\times\\log_2{(1+\\dfrac{Pow\\times10}{50000})}}{1000}}&{if,Pow\\times10>50000}\\end{cases})]}}}\n}}}\n=== 주문 성공률 (Spell success) ===\n{{{#!wiki style=\"border:1px solid gray;background-color:#F2F2F2;padding:12px;display:table;color:#373a3c\"{{{}}}\n먼저 기본 실패 확률을 계산한다. 단 이 값은 210을 넘길 수 없다.\n{{{-1 [math(chance=60-\\dfrac{(\\textsf{\\small주문 시전술}\\times50+\\textsf{\\small평균 마법학파}\n\\times200)\\times6}{100}-\\textsf{\\small지능}\\times2+\\textsf{\\small주문 난이도}+19\\times(AAP+ASP))]}}}\n *주문 난이도\n ||<rowbgcolor=#a3b4da><:>주문 레벨||<:>1||<:>2||<:>3||<:>4||<:>5||<:>6||<:>7||<:>8||<:>9||\n ||<rowbgcolor=#f5f5f5><:>주문 난이도||<:>3||<:>15||<:>35||<:>70||<:>100||<:>150||<:>200||<:>260||<:>340||\n그 다음 조정된 실패 확률을 계산한다.\n{{{-1 [math(chance_2=\\dfrac{chance^3+426\\times\\textit{chance}^2+82670\\times\\textit{chance}+7245398}{262144})]}}}\n\n위 실패 확률 값으로 T 값을 계산한다.\n{{{-1 [math(T=chance_2\\times3)]}}}\n\nT 값을 통해 게임 내에서 표시되는 실패율을 계산한다.\n\n{{{-1 [math(\\textsf{\\small실패율}=\\begin{cases}{\\Bigl(\\dfrac{T\\times(T+1)\\times(T+2)}{6\\times101\\times101}\\Bigr)\\%}&{if,\\:T\\leq100}\\\\\\\\{\\Bigl(\\dfrac{T\\times(T+1)\\times(T+2)-2\\times(T-101)\\times(T-100)\\times(T-99)-(T-100)\\times(T-99)\\times(T-98)}{6\\times101\\times101}\\Bigr)\\%}&{if,\\:T\\leq200}\\\\\\\\{\\Bigl(\\dfrac{(300-T)\\times(301-T)\\times(302-T)}{6\\times101\\times101}\\Bigr)\\%}&{if,\\:T>200}\\end{cases})]}}}\n}}}\n==== 시전실패 효과 (Miscast effect) ====\n{{{#!wiki style=\"border:1px solid gray;background-color:#F2F2F2;padding:12px;display:table; color:#373a3c\"{{{}}}\n{{{-1 [math(\\textsf{\\small{마법 오염}}=\\dfrac{\\textsf{\\small{마법 레벨}}\\times\\textsf{\\small{마법 레벨}}\\times\\textsf{\\small{실패 정도}}+250}{500})]}}}\n}}}\n{{{#!wiki style=\"border:1px solid gray;background-color:#F2F2F2;padding:12px;display:table; color:#373a3c\"{{{}}}\n{{{-1 [math(\\textsf{\\small{피해량}}=\\dfrac{(\\textsf{\\small{마법 레벨}})d(\\textsf{\\small{마법 레벨}}+\\textsf{\\small{실패율}})}{9})]}}}\n}}}\n플레이어는 마법 시전을 실패했을 경우 마법 오염이 쌓인다. 이 때 오염도가 0.8 이상이라면 학파에 따른 시전실패 효과가 발생한다. 실패 정도는 실패율[* 게임에서 표시되는 백분율이 아니라 위 문단의 [math(chance_2)]를 뜻함]에서 1부터 99까지의 임의의 숫자를 빼서 계산한다.\n==== 주술 성공률 (Hex success) ====\n{{{#!wiki style=\"border:1px solid gray;background-color:#F2F2F2;padding:12px;display:table;color:#373a3c\"{{{}}}\n먼저, 주문 위력(Enchantment power, pow)을 계산한다.\n{{{-1 [math(pow=35\\times\\log_2(1+\\dfrac{SP\\times\\textsf{\\small보정값}}{35}))]}}}\n\n다음 몬스터의 의지력(willpower, wl)과 주문 위력을 토대로 T 값을 계산한다.\n{{{-1 [math(T=wl+100-pow)]}}}\n\nT 값을 통해 성공률을 계산한다.\n{{{-1 [math(\\textsf{\\small성공률}=\\begin{cases}{100\\%}&{if,\\:T\\leq0}\\\\\\\\{100\\times\\Bigl(1-\\dfrac{T\\times(T+1)}{101\\times200}\\Bigr)\\%}&{if,\\:0<T\\leq100}\\\\\\\\{100\\times\\Bigl(\\dfrac{(201-T)\\times(202-T)}{101\\times200}\\Bigr)\\%}&{if,\\:100<T\\leq200}\\\\\\\\{0\\%}&{if,\\:T>200}\\end{cases})]}}}\n}}}\n== 아이템 ==\n[include(틀:문서 가져옴, this=문단, title=던전 크롤/물리 피해 공식, version=87)]\n=== 무기 대미지 공식 ===\n{{{#!wiki style=\"border:1px solid gray;background-color:#F2F2F2;padding:12px;display:table;color:#373a3c\"\"{{{}}}\n먼저, 무기[* 맨손 전투, 투척, 보조 공격 포함]의 기본 대미지를 구한다.\n기본 대미지 = 무기의 기본 대미지(Base damage)\n * 만약, 헤비 브랜드라면 기본 대미지{{{-1 [math(\\times\\dfrac{9}{5})]}}}\n기본 대미지에 능력치 보정을 곱해 잠재 대미지를 구한다.\n잠재 대미지 = {{{-2 [math(\\textsf{기본 대미지}\\times(\\dfrac{75+2.5\\times\\textsf{능력치}}{100}))]}}}\n\n잠재 대미지로 주사위 굴림을 한다.\n{{{-2 [math(\\textsf{대미지}_1=1d(\\textsf{잠재 대미지}))]}}}\n\n대미지 굴림값에 무기 기술과 전투 기술 굴림을 곱한다.\n{{{-2 [math(\\textsf{대미지}_2=\\textsf{대미지}_1\\times\\Bigl(1+\\dfrac{1d(\\textsf{무기 기술}\\times100)}{2500}\\Bigr)\\times\\Bigl(1+\\dfrac{1d(\\textsf{전투 기술}\\times100)}{3000}\\Bigr))]}}}\n * 맨손 전투나 투척의 경우, 무기 기술에 따른 굴림값을 곱하지 않는다.\n * 보조 공격 또한 마찬가지로 곱하지 않는다.\n만약, 위력(Might) 상태라면 보너스 굴림값을 더한다.\n{{{-2 [math(+1d10)]}}}\n\n무기 강화 수치와 슬레잉 보너스에 따른 굴림값을 더한다.\n{{{-2 [math(+1d(\\textsf{무기 강화 수치}+\\textsf{슬레잉 보너스}))]}}}\n\n마지막으로, 최종 계수를 곱해 최종 대미지를 계산한다.\n{{{-2 [math(\\textsf{최종 대미지}=\\textsf{대미지}_2\\times\\textsf{최종 계수})]}}}\n\n최종 계수는 일반적으로 1이지만, 특수한 경우엔 다음과 같은 값을 가진다.\n a. 도끼의 광역공격: 0.7[* 직접 공격 대상에게는 1]\n a. 석상의 형상: 1.5\n a. 그림자의 형상: 0.5\n a. 허약(Weak) 상태:  0.75\n a. 유령(Spect) 무기: 0.7\n}}}\n최종 대미지에 암습은 고려하지 않았으며, 최종 대미지를 계산한 후 몬스터의 방어력에 따른 대미지 감소를 반영하여 몬스터가 입는 피해량이 결정된다.\n==== 대미지 등급 ====\n{{{#!wiki style=\"border:1px solid gray;background-color:#F2F2F2;padding:12px;display:table;color:#373a3c\"\"{{{}}}\n아이템 설명과 '''@'''를 눌렀을 때 나오는 대미지 등급(Damage rating)은 아래와 같이 계산한다.\n{{{-2 [math(\\textsf{대미지 등급}=\\textsf{기본 대미지}\\times(\\dfrac{75+0.25\\times\\textsf{능력치}}{100})\\times(1+\\dfrac{\\textsf{무기 기술}}{25})\\times(1+\\dfrac{\\textsf{전투 기술}}{30}))]}}}\n\n강화 수치와 슬레잉 보너스가 있다면 그 값만큼 더해준다.\n}}}\n=== 갑옷 방해 페널티 (AAP) ===\n{{{#!wiki style=\"border:1px solid gray;background-color:#F2F2F2;padding:12px;display:table;color:#373a3c\"{{{}}}\n{{{-1 [math(\\dfrac{200\\times\\text{\\textsf{\\small방해수치}}^2\\times(450-\\textsf{\\small갑옷술}\n\\times10)}{2250\\times(\\textsf{\\small힘}+3)})]}}}\n}}}\n=== 갑옷 회피 페널티 (AEVP) ===\n{{{#!wiki style=\"border:1px solid gray;background-color:#F2F2F2;padding:12px;display:table;color:#373a3c\"{{{}}}\n{{{-1 [math(10\\times\\dfrac{\\textsf{\\small방해수치}}{3}+\\dfrac{200\\times\\text{\\textsf{\\small방해수치}}^2\\times(450-\\textsf{\\small갑옷술}\\times10)}{2250\\times(\\textsf{\\small힘}+3)})]}}}\n}}}\n=== 방패 페널티 (ASP) ===\n{{{#!wiki style=\"border:1px solid gray;background-color:#F2F2F2;padding:12px;display:table;color:#373a3c\"{{{}}}\n{{{-1 [math(ASP=\\dfrac{200\\times\\textsf{\\small방해수치}^2\\times(270-\\textsf{\\small방패술}\\times10)}{1350\\times(25+5\\times\\textsf{\\small힘})})]}}}\n}}}\n * 0.30 버전에서 방패 패널티가 힘에 영향받도록 변경됐다.\n[[분류:던전 크롤]]\n=== 공격 특징(Attack Flavor)에 따른 추가 피해 ===\n * 냉기(Cold):  {{{-1 [math(\\small{HD}+1d(\\small{HD}\\times2))]}}}"
}